<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ã€æ˜Ÿé™…2ç¼–è¾‘å™¨ã€‘æ•™ç¨‹ï¼šä½¿ç”¨è§¦å‘å™¨æ§åˆ¶ XML è‡ªå®šä¹‰ UI</title>
      <link href="/2025/12/04/%E3%80%90%E6%98%9F%E9%99%852%E7%BC%96%E8%BE%91%E5%99%A8%E3%80%91%E6%95%99%E7%A8%8B%EF%BC%9A%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8%E6%8E%A7%E5%88%B6%20XML%20%E8%87%AA%E5%AE%9A%E4%B9%89%20UI/"/>
      <url>/2025/12/04/%E3%80%90%E6%98%9F%E9%99%852%E7%BC%96%E8%BE%91%E5%99%A8%E3%80%91%E6%95%99%E7%A8%8B%EF%BC%9A%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8%E6%8E%A7%E5%88%B6%20XML%20%E8%87%AA%E5%AE%9A%E4%B9%89%20UI/</url>
      
        <content type="html"><![CDATA[<p>éšç€æ˜Ÿé™…äº‰éœ¸2åœ°å›¾å¼€å‘å¯¹ UI ç²¾ç»†åº¦è¦æ±‚çš„æé«˜ï¼Œä¼ ç»Ÿçš„â€œè§¦å‘å™¨åŠ¨ä½œåˆ›å»ºæ§ä»¶â€æ–¹å¼å·²éš¾ä»¥æ»¡è¶³å¤æ‚çš„ç•Œé¢éœ€æ±‚ã€‚ç›®å‰ä¸»æµçš„é«˜çº§ UI å¼€å‘é‡‡ç”¨äº† <strong>SC2Layout (XML)</strong> ä¸ <strong>è§¦å‘å™¨ (Triggers)</strong> åˆ†ç¦»çš„æ¶æ„ã€‚</p><p>æœ¬æ–‡å°†åŸºäºå®é™…æ¡ˆä¾‹ï¼ˆç”Ÿäº§é¢æ¿åˆå§‹åŒ–ï¼‰ï¼Œè®²è§£å¦‚ä½•åœ¨è§¦å‘å™¨ä¸­åŠ è½½ XML æ¨¡æ¿ï¼Œå¹¶é€šè¿‡ <code>DialogControlHookup</code> è·å–æ§ä»¶å¥æŸ„è¿›è¡ŒåŠ¨æ€æ§åˆ¶ã€‚</p><h2 id="1-æ ¸å¿ƒåŸç†"><a href="#1-æ ¸å¿ƒåŸç†" class="headerlink" title="1. æ ¸å¿ƒåŸç†"></a>1. æ ¸å¿ƒåŸç†</h2><ul><li>**XML (Layout)**ï¼šå®šä¹‰ç•Œé¢çš„å¸ƒå±€ã€çº¹ç†ã€ä½ç½®å’Œå±‚çº§ç»“æ„ã€‚</li><li>**è§¦å‘å™¨ (Trigger)**ï¼šè´Ÿè´£é€»è¾‘æ§åˆ¶ï¼ˆå¦‚æ•°æ®ç»‘å®šã€äº‹ä»¶å“åº”ï¼‰ã€‚</li><li><strong>äº¤äº’æ¡¥æ¢</strong>ï¼š<code>DialogControlHookup</code> å‡½æ•°ã€‚</li></ul><h2 id="2-XML-å¸ƒå±€å®šä¹‰-Layout-XML"><a href="#2-XML-å¸ƒå±€å®šä¹‰-Layout-XML" class="headerlink" title="2. XML å¸ƒå±€å®šä¹‰ (Layout XML)"></a>2. XML å¸ƒå±€å®šä¹‰ (Layout XML)</h2><p>åœ¨ç¼–å†™è§¦å‘å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰å¥½ XML å¸ƒå±€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºç¡€çš„ç¤ºä¾‹ä»£ç ï¼Œå…¶ä¸­å®šä¹‰çš„ <code>name</code> å±æ€§å°†ç›´æ¥å¯¹åº”åç»­è§¦å‘å™¨ä¸­çš„ Hookup å‚æ•°ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> standalone=<span class="string">&quot;yes&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Desc</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¡¶å±‚å®¹å™¨ï¼šç”Ÿäº§é¢æ¿æ¨¡æ¿ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨æ„ï¼šname=&quot;MyPanel_Template&quot; å°†ç”¨äºè§¦å‘å™¨ä¸­åŠ è½½æ¨¡æ¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Frame</span> <span class="attr">type</span>=<span class="string">&quot;Panel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyPanel_Template&quot;</span> <span class="attr">file</span>=<span class="string">&quot;GameUI&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Anchor</span> <span class="attr">side</span>=<span class="string">&quot;Top&quot;</span> <span class="attr">relative</span>=<span class="string">&quot;$parent&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;Min&quot;</span> <span class="attr">offset</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Anchor</span> <span class="attr">side</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">relative</span>=<span class="string">&quot;$parent&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;Min&quot;</span> <span class="attr">offset</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Width</span> <span class="attr">val</span>=<span class="string">&quot;500&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Height</span> <span class="attr">val</span>=<span class="string">&quot;400&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å­æ§ä»¶ï¼šæ–‡æœ¬æ ‡ç­¾ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨æ„ï¼šname=&quot;Label_P1&quot; å°†ç”¨äº DialogControlHookup çš„æŸ¥æ‰¾ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Frame</span> <span class="attr">type</span>=<span class="string">&quot;Label&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Label_P1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Anchor</span> <span class="attr">side</span>=<span class="string">&quot;Top&quot;</span> <span class="attr">relative</span>=<span class="string">&quot;$parent&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;Min&quot;</span> <span class="attr">offset</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Anchor</span> <span class="attr">side</span>=<span class="string">&quot;Left&quot;</span> <span class="attr">relative</span>=<span class="string">&quot;$parent&quot;</span> <span class="attr">pos</span>=<span class="string">&quot;Min&quot;</span> <span class="attr">offset</span>=<span class="string">&quot;50&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Width</span> <span class="attr">val</span>=<span class="string">&quot;200&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Height</span> <span class="attr">val</span>=<span class="string">&quot;40&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Text</span> <span class="attr">val</span>=<span class="string">&quot;Initial Text&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Style</span> <span class="attr">val</span>=<span class="string">&quot;StandardLabel&quot;</span>/&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Frame</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Frame</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Desc</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure><h2 id="3-è§¦å‘å™¨å®ç°æµç¨‹è¯¦è§£"><a href="#3-è§¦å‘å™¨å®ç°æµç¨‹è¯¦è§£" class="headerlink" title="3. è§¦å‘å™¨å®ç°æµç¨‹è¯¦è§£"></a>3. è§¦å‘å™¨å®ç°æµç¨‹è¯¦è§£</h2><p>ä»¥ä¸‹é€»è¾‘åŸºäº <code>Map Initialization</code>ï¼ˆåœ°å›¾åˆå§‹åŒ–ï¼‰äº‹ä»¶ï¼š</p><h3 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåŸºç¡€å®¹å™¨-Base-Dialog"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåŸºç¡€å®¹å™¨-Base-Dialog" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåŸºç¡€å®¹å™¨ (Base Dialog)"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåŸºç¡€å®¹å™¨ (Base Dialog)</h3><p>XML å¸ƒå±€éœ€è¦ä¾é™„äºä¸€ä¸ªè¿è¡Œæ—¶çš„ Dialog å¯¹è±¡ã€‚</p><ul><li><strong>åŠ¨ä½œ</strong>ï¼š<ol><li><code>å¯¹è¯æ¡† - åˆ›å»ºä¸€ä¸ªæ ‡å‡†å¯¹è¯æ¡†...</code></li><li><code>å¯¹è¯æ¡† - æ˜¾ç¤º (æœ€ååˆ›å»ºçš„å¯¹è¯æ¡†)...</code></li></ol></li><li><strong>è¯´æ˜</strong>ï¼šæ­¤å¯¹è¯æ¡†é€šå¸¸ä½œä¸ºé€æ˜çš„æ ¹å®¹å™¨ã€‚</li></ul><h3 id="ç¬¬äºŒæ­¥ï¼šå®ä¾‹åŒ–æ¨¡æ¿-Instantiate-Template"><a href="#ç¬¬äºŒæ­¥ï¼šå®ä¾‹åŒ–æ¨¡æ¿-Instantiate-Template" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šå®ä¾‹åŒ–æ¨¡æ¿ (Instantiate Template)"></a>ç¬¬äºŒæ­¥ï¼šå®ä¾‹åŒ–æ¨¡æ¿ (Instantiate Template)</h3><p>å°†é™æ€çš„ XML å®šä¹‰åŠ è½½åˆ°æ¸¸æˆä¸­ã€‚</p><ul><li><strong>åŠ¨ä½œ</strong>ï¼š<code>å¯¹è¯æ¡† - ä½¿ç”¨æ¨¡æ¿ MyPanel_Template/MyPanel_Template ä¸ºå¯¹è¯æ¡† (æœ€ååˆ›å»ºçš„å¯¹è¯æ¡†) åˆ›å»ºä¸€ä¸ªé¢æ¿</code></li><li><strong>å…³é”®å‚æ•°</strong>ï¼š<ul><li><code>MyPanel_Template</code>: å¯¹åº”ç¼–è¾‘å™¨ä¸­å¯¼å…¥çš„ Layout æ–‡ä»¶æè¿°ç¬¦ã€‚</li><li><code>MyPanel_Template</code>: XML æ–‡ä»¶ä¸­é¡¶å±‚ <code>&lt;Frame type=&quot;Panel&quot;&gt;</code> çš„ <code>name</code> å±æ€§ã€‚</li></ul></li></ul><h3 id="ç¬¬ä¸‰æ­¥ï¼šè·å–æ ¹èŠ‚ç‚¹å¥æŸ„-Save-Handle"><a href="#ç¬¬ä¸‰æ­¥ï¼šè·å–æ ¹èŠ‚ç‚¹å¥æŸ„-Save-Handle" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šè·å–æ ¹èŠ‚ç‚¹å¥æŸ„ (Save Handle)"></a>ç¬¬ä¸‰æ­¥ï¼šè·å–æ ¹èŠ‚ç‚¹å¥æŸ„ (Save Handle)</h3><p>æ¨¡æ¿åŠ è½½åï¼Œå¿…é¡»ç«‹å³ä¿å­˜å…¶æ ¹æ§ä»¶çš„å¼•ç”¨ï¼Œåç»­æ‰€æœ‰çš„å­æ§ä»¶æŸ¥æ‰¾éƒ½å°†åŸºäºæ­¤å˜é‡ã€‚</p><ul><li><strong>åŠ¨ä½œ</strong>ï¼š<code>å˜é‡ - è®¾ç½® g_ç”Ÿäº§é¢æ¿ = (æœ€ååˆ›å»ºçš„å¯¹è¯æ¡†æ§ä»¶)</code></li><li><strong>è¯´æ˜</strong>ï¼š<code>g_ç”Ÿäº§é¢æ¿</code> å»ºè®®å®šä¹‰ä¸ºå…¨å±€å˜é‡ï¼Œä»¥ä¾¿åœ¨å…¶ä»–è§¦å‘å™¨ï¼ˆå¦‚æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼‰ä¸­è°ƒç”¨ã€‚</li></ul><h3 id="ç¬¬ä¸‰æ­¥ï¼šæ§ä»¶æŒ‚é’©-Hookup"><a href="#ç¬¬ä¸‰æ­¥ï¼šæ§ä»¶æŒ‚é’©-Hookup" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šæ§ä»¶æŒ‚é’© (Hookup)"></a>ç¬¬ä¸‰æ­¥ï¼šæ§ä»¶æŒ‚é’© (Hookup)</h3><p>è¿™æ˜¯å®ç°åŠ¨æ€äº¤äº’çš„æ ¸å¿ƒæ­¥éª¤ã€‚é€šè¿‡è·¯å¾„æŸ¥æ‰¾ XML ä¸­çš„å­æ§ä»¶ï¼Œå¹¶ä¿®æ”¹å…¶å±æ€§ã€‚</p><ul><li><strong>åŠ¨ä½œç¤ºä¾‹</strong>ï¼š<br><code>ä»æ¨¡æ¿ä¸­åˆ›å»ºå¯¹è¯æ¡†æ§ä»¶ - å°† DialogControlHookup(g_ç”Ÿäº§é¢æ¿, 1, &quot;Label_P1&quot;) çš„æ–‡æœ¬è®¾ç½®ä¸º &quot;test11&quot;</code><br><em>(æ³¨ï¼šåœ¨æ ‡å‡†åŠ¨ä½œç•Œé¢ä¸­ï¼ŒHookup å‡½æ•°é€šå¸¸ä½äºâ€œå¯¹è¯æ¡†æ§ä»¶â€å‚æ•°ä¸‹çš„å‡½æ•°åˆ—è¡¨ä¸­)</em></li></ul><h4 id="DialogControlHookup-å‡½æ•°å‚æ•°è§£æï¼š"><a href="#DialogControlHookup-å‡½æ•°å‚æ•°è§£æï¼š" class="headerlink" title="DialogControlHookup å‡½æ•°å‚æ•°è§£æï¼š"></a><code>DialogControlHookup</code> å‡½æ•°å‚æ•°è§£æï¼š</h4><p>è¯¥å‡½æ•°ç”¨äºè¿”å›æŒ‡å®šè·¯å¾„ä¸‹çš„æ§ä»¶å¥æŸ„ã€‚</p><ol><li>**Parent (çˆ¶æ§ä»¶)**ï¼š<ul><li>ä¼ å…¥ <code>g_ç”Ÿäº§é¢æ¿</code>ã€‚æŒ‡æ˜ä»å“ªä¸ªå®¹å™¨å¼€å§‹æŸ¥æ‰¾ã€‚</li></ul></li><li>**Type (æ§ä»¶ç±»å‹)**ï¼š<ul><li>å¿…é¡»ä¸ XML ä¸­å®šä¹‰çš„æ ‡ç­¾ç±»å‹ä¸¥æ ¼åŒ¹é…ã€‚</li><li><code>1</code> &#x3D; <code>Label</code> (æ–‡æœ¬æ¡†)</li><li><code>Button</code> &#x3D; æŒ‰é’®</li><li><code>Image</code> &#x3D; å›¾ç‰‡</li><li><em>æ³¨æ„ï¼šå¦‚æœç±»å‹ä¸åŒ¹é…ï¼Œå°†æ— æ³•è·å–åˆ°æ§ä»¶ã€‚</em></li></ul></li><li>**Name (æ§ä»¶åç§°)**ï¼š<ul><li>å¯¹åº” XML æ ‡ç­¾ä¸­çš„ <code>name</code> å±æ€§ï¼ˆä¾‹å¦‚ <code>&lt;Frame type=&quot;Label&quot; name=&quot;Label_P1&quot;&gt;</code>ï¼‰ã€‚</li><li><strong>é‡è¦</strong>ï¼šæ­¤å‚æ•°å¤§å°å†™æ•æ„Ÿï¼Œå¿…é¡»å®Œå…¨ä¸€è‡´ã€‚</li></ul></li></ol><h2 id="4-å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹"><a href="#4-å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="4. å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹"></a>4. å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2><ol><li><strong>è·¯å¾„å±‚çº§</strong>ï¼š<code>DialogControlHookup</code> é»˜è®¤æŸ¥æ‰¾ç›´æ¥å­èŠ‚ç‚¹ã€‚å¦‚æœ XML ç»“æ„è¾ƒæ·±ï¼ˆå¦‚ <code>Panel -&gt; Group -&gt; Label</code>ï¼‰ï¼Œéœ€è¦ç¡®ä¿è·¯å¾„å¼•ç”¨çš„æ­£ç¡®æ€§ï¼Œæˆ–è€…è¿ç»­è°ƒç”¨ Hookupã€‚</li><li><strong>æ€§èƒ½å»ºè®®</strong>ï¼šä¸è¦åœ¨å¾ªç¯æˆ–é«˜é¢‘è§¦å‘å™¨ï¼ˆå¦‚ 0.0s è®¡æ—¶å™¨ï¼‰ä¸­åå¤æ‰§è¡Œ Hookup æ“ä½œã€‚æ­£ç¡®çš„åšæ³•æ˜¯åœ¨åˆå§‹åŒ–é˜¶æ®µè·å–æ‰€æœ‰å…³é”®æ§ä»¶çš„å¥æŸ„ï¼Œä¿å­˜åˆ°å˜é‡æ•°ç»„ä¸­ï¼Œåç»­ç›´æ¥æ“ä½œå˜é‡ã€‚</li><li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šå¦‚æœ Hookup å¤±è´¥ï¼ˆUI ä¸å˜ï¼‰ï¼Œè¯·ä¼˜å…ˆæ£€æŸ¥ XML ä¸­çš„ <code>name</code> æ‹¼å†™ä»¥åŠæ§ä»¶ç±»å‹æ˜¯å¦é€‰æ‹©æ­£ç¡®ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Galaxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®¹å™¨è¿ç»´é¢æ¿ - Rabbit Panel</title>
      <link href="/2025/11/22/%E5%AE%B9%E5%99%A8%E8%BF%90%E7%BB%B4%E9%9D%A2%E6%9D%BF/"/>
      <url>/2025/11/22/%E5%AE%B9%E5%99%A8%E8%BF%90%E7%BB%B4%E9%9D%A2%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="å®¹å™¨è¿ç»´é¢æ¿-Rabbit-Panel"><a href="#å®¹å™¨è¿ç»´é¢æ¿-Rabbit-Panel" class="headerlink" title="å®¹å™¨è¿ç»´é¢æ¿ - Rabbit Panel"></a>å®¹å™¨è¿ç»´é¢æ¿ - Rabbit Panel</h1><p>ä¸€ä¸ªæè‡´è½»é‡åŒ–çš„å®¹å™¨è¿ç»´é¢æ¿ï¼Œä¸“ä¸º 4GB å†…å­˜è®¾å¤‡è®¾è®¡ï¼Œæ”¯æŒ ARM64&#x2F;armv7l&#x2F;x86_64 æ¶æ„ã€‚</p><p>ä»“åº“åœ°å€: <a href="https://github.com/reisen7/rabbit-panel">Rabbit Panel</a></p><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>ğŸš€ <strong>æè‡´è½»é‡</strong>: è¿è¡Œæ—¶å†…å­˜ â‰¤30MBï¼Œéƒ¨ç½²åŒ… â‰¤10MB</li><li>ğŸ³ <strong>å®¹å™¨ç®¡ç†</strong>: å¯åŠ¨&#x2F;åœæ­¢&#x2F;é‡å¯&#x2F;åˆ é™¤å®¹å™¨ï¼Œå®æ—¶æŸ¥çœ‹æ—¥å¿—</li><li>ğŸ“¦ <strong>é•œåƒç®¡ç†</strong>: æŸ¥çœ‹å’Œåˆ é™¤é•œåƒ</li><li>ğŸ“Š <strong>ç³»ç»Ÿç›‘æ§</strong>: å®æ—¶ CPU&#x2F;å†…å­˜&#x2F;ç£ç›˜ä½¿ç”¨ç‡ç›‘æ§</li><li>ğŸŒ <strong>å“åº”å¼è®¾è®¡</strong>: æ”¯æŒ PC&#x2F;å¹³æ¿&#x2F;æ‰‹æœºæµè§ˆå™¨</li><li>ğŸ”§ <strong>æ— ä¾èµ–</strong>: å•äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ— éœ€æ•°æ®åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…</li><li>ğŸ¯ <strong>å¤šèŠ‚ç‚¹ç®¡ç†</strong>: æ”¯æŒ Master&#x2F;Worker æ¨¡å¼ï¼Œç»Ÿä¸€ç®¡ç†å¤šæœåŠ¡å™¨èŠ‚ç‚¹</li><li>ğŸ”’ <strong>å®‰å…¨è®¤è¯</strong>: ç”¨æˆ·ç™»å½•è®¤è¯å’ŒèŠ‚ç‚¹é—´é€šä¿¡åŠ å¯†</li></ul><h2 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h2><ul><li>Docker 20.10+ å·²å®‰è£…å¹¶è¿è¡Œ</li><li>Linux ç³»ç»Ÿ (Armbian&#x2F;Ubuntu&#x2F;Debian)</li><li>4GB+ å†…å­˜è®¾å¤‡</li><li>Go 1.22+ (ä»…ç¼–è¯‘æ—¶éœ€è¦)</li></ul><h2 id="å¿«é€Ÿå¼€å§‹"><a href="#å¿«é€Ÿå¼€å§‹" class="headerlink" title="å¿«é€Ÿå¼€å§‹"></a>å¿«é€Ÿå¼€å§‹</h2><h3 id="1-å®‰è£…-Docker-å¦‚æœæœªå®‰è£…"><a href="#1-å®‰è£…-Docker-å¦‚æœæœªå®‰è£…" class="headerlink" title="1. å®‰è£… Docker (å¦‚æœæœªå®‰è£…)"></a>1. å®‰è£… Docker (å¦‚æœæœªå®‰è£…)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ubuntu/Debian</span></span><br><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">sudo sh get-docker.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„</span></span><br><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br><span class="line">newgrp docker</span><br></pre></td></tr></table></figure><h3 id="2-ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#2-ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="2. ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶"></a>2. ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶</h3><p>æ ¹æ®ä½ çš„ç³»ç»Ÿæ¶æ„ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># x86_64</span></span><br><span class="line">wget https://github.com/your-repo/rabbit-panel/releases/download/v1.0.0/rabbit-panel-linux-amd64</span><br><span class="line"></span><br><span class="line"><span class="comment"># ARM64</span></span><br><span class="line">wget https://github.com/your-repo/rabbit-panel/releases/download/v1.0.0/rabbit-panel-linux-arm64</span><br><span class="line"></span><br><span class="line"><span class="comment"># ARMv7</span></span><br><span class="line">wget https://github.com/your-repo/rabbit-panel/releases/download/v1.0.0/rabbit-panel-linux-armv7</span><br></pre></td></tr></table></figure><h3 id="3-ä»æºç ç¼–è¯‘"><a href="#3-ä»æºç ç¼–è¯‘" class="headerlink" title="3. ä»æºç ç¼–è¯‘"></a>3. ä»æºç ç¼–è¯‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…‹éš†ä»£ç </span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/your-repo/rabbit-panel.git</span><br><span class="line"><span class="built_in">cd</span> rabbit-panel</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line"><span class="built_in">chmod</span> +x setup-deps.sh</span><br><span class="line">./setup-deps.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¯‘ (æ”¯æŒå¤šæ¶æ„)</span></span><br><span class="line"><span class="built_in">chmod</span> +x build.sh</span><br><span class="line">./build.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¯‘åçš„æ–‡ä»¶åœ¨ dist/ ç›®å½•</span></span><br></pre></td></tr></table></figure><h3 id="4-è¿è¡Œé¢æ¿"><a href="#4-è¿è¡Œé¢æ¿" class="headerlink" title="4. è¿è¡Œé¢æ¿"></a>4. è¿è¡Œé¢æ¿</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¡®ä¿ static ç›®å½•å­˜åœ¨</span></span><br><span class="line"><span class="built_in">mkdir</span> -p static</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œé¢æ¿ (é»˜è®¤ç«¯å£ 9999)</span></span><br><span class="line">./rabbit-panel-linux-amd64</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–æŒ‡å®šç«¯å£</span></span><br><span class="line">PORT=9090 ./rabbit-panel-linux-amd64</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–æŒ‡å®šç›‘å¬åœ°å€å’Œç«¯å£</span></span><br><span class="line">HOST=0.0.0.0 PORT=9999 ./rabbit-panel-linux-amd64</span><br></pre></td></tr></table></figure><h3 id="5-è®¿é—®é¢æ¿"><a href="#5-è®¿é—®é¢æ¿" class="headerlink" title="5. è®¿é—®é¢æ¿"></a>5. è®¿é—®é¢æ¿</h3><ul><li><strong>æœ¬åœ°è®¿é—®</strong>: <code>http://localhost:9999</code></li><li><strong>å¤–ç½‘è®¿é—®</strong>: <code>http://&lt;æœåŠ¡å™¨IP&gt;:9999</code></li><li><strong>é»˜è®¤è´¦æˆ·</strong>: <code>admin</code> &#x2F; <code>admin</code></li></ul><blockquote><p><strong>æ³¨æ„</strong>: é¦–æ¬¡ç™»å½•å¿…é¡»ä¿®æ”¹å¯†ç ã€‚é»˜è®¤ç›‘å¬ <code>0.0.0.0:9999</code>ï¼Œå¯ä»¥ä»å¤–ç½‘è®¿é—®ã€‚</p></blockquote><h2 id="åŠŸèƒ½è¯´æ˜"><a href="#åŠŸèƒ½è¯´æ˜" class="headerlink" title="åŠŸèƒ½è¯´æ˜"></a>åŠŸèƒ½è¯´æ˜</h2><h3 id="å®¹å™¨ç®¡ç†"><a href="#å®¹å™¨ç®¡ç†" class="headerlink" title="å®¹å™¨ç®¡ç†"></a>å®¹å™¨ç®¡ç†</h3><ul><li><strong>åˆ—è¡¨å±•ç¤º</strong>: æ˜¾ç¤ºå®¹å™¨ IDã€åç§°ã€é•œåƒã€çŠ¶æ€ã€ç«¯å£æ˜ å°„ã€å†…å­˜å ç”¨ã€åˆ›å»ºæ—¶é—´</li><li><strong>æ“ä½œåŠŸèƒ½</strong>: å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€åˆ é™¤ã€æŸ¥çœ‹æ—¥å¿—ï¼ˆå®æ—¶æµå¼è¾“å‡ºï¼‰</li><li><strong>è‡ªåŠ¨åˆ·æ–°</strong>: å®¹å™¨åˆ—è¡¨æ¯ 5 ç§’è‡ªåŠ¨åˆ·æ–°</li></ul><h3 id="é•œåƒç®¡ç†"><a href="#é•œåƒç®¡ç†" class="headerlink" title="é•œåƒç®¡ç†"></a>é•œåƒç®¡ç†</h3><ul><li><strong>åˆ—è¡¨å±•ç¤º</strong>: æ˜¾ç¤ºé•œåƒ IDã€åç§°ã€æ ‡ç­¾ã€å¤§å°ã€åˆ›å»ºæ—¶é—´</li><li><strong>æ“ä½œåŠŸèƒ½</strong>: åˆ é™¤é•œåƒï¼ˆå¦‚æœè¢«å®¹å™¨ä½¿ç”¨ä¼šæç¤ºå…ˆåˆ é™¤å®¹å™¨ï¼‰</li></ul><h3 id="ç³»ç»Ÿç›‘æ§"><a href="#ç³»ç»Ÿç›‘æ§" class="headerlink" title="ç³»ç»Ÿç›‘æ§"></a>ç³»ç»Ÿç›‘æ§</h3><ul><li><strong>å®æ—¶ç›‘æ§</strong>: CPU ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€ç£ç›˜ä½¿ç”¨ç‡</li><li><strong>è‡ªåŠ¨åˆ·æ–°</strong>: æ¯ 5 ç§’è‡ªåŠ¨åˆ·æ–°</li><li><strong>æ—¶é—´æ˜¾ç¤º</strong>: æ˜¾ç¤ºæœåŠ¡å™¨å½“å‰æ—¶é—´</li></ul><h2 id="å¤šèŠ‚ç‚¹ç®¡ç†"><a href="#å¤šèŠ‚ç‚¹ç®¡ç†" class="headerlink" title="å¤šèŠ‚ç‚¹ç®¡ç†"></a>å¤šèŠ‚ç‚¹ç®¡ç†</h2><p>Rabbit Panel æ”¯æŒå¤šèŠ‚ç‚¹å®¹å™¨ç®¡ç†ï¼Œç±»ä¼¼ Kubernetes ä½†æ›´è½»é‡åŒ–ã€‚</p><h3 id="å¯åŠ¨-Master-èŠ‚ç‚¹ï¼ˆæ§åˆ¶èŠ‚ç‚¹ï¼‰"><a href="#å¯åŠ¨-Master-èŠ‚ç‚¹ï¼ˆæ§åˆ¶èŠ‚ç‚¹ï¼‰" class="headerlink" title="å¯åŠ¨ Master èŠ‚ç‚¹ï¼ˆæ§åˆ¶èŠ‚ç‚¹ï¼‰"></a>å¯åŠ¨ Master èŠ‚ç‚¹ï¼ˆæ§åˆ¶èŠ‚ç‚¹ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³• 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬</span></span><br><span class="line"><span class="built_in">chmod</span> +x start-master.sh</span><br><span class="line">./start-master.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³• 2: ç›´æ¥è¿è¡Œ</span></span><br><span class="line">MODE=master PORT=9999 ./rabbit-panel-linux-arm64</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨-Worker-èŠ‚ç‚¹ï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰"><a href="#å¯åŠ¨-Worker-èŠ‚ç‚¹ï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰" class="headerlink" title="å¯åŠ¨ Worker èŠ‚ç‚¹ï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰"></a>å¯åŠ¨ Worker èŠ‚ç‚¹ï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³• 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬</span></span><br><span class="line">MASTER_URL=http://master-ip:9999 NODE_NAME=worker-1 ./start-worker.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³• 2: ç›´æ¥è¿è¡Œ</span></span><br><span class="line">MASTER_URL=http://master-ip:9999 \</span><br><span class="line">NODE_NAME=worker-1 \</span><br><span class="line">MODE=worker \</span><br><span class="line">PORT=10001 \</span><br><span class="line">./rabbit-panel-linux-arm64</span><br></pre></td></tr></table></figure><h3 id="å¤šèŠ‚ç‚¹åŠŸèƒ½"><a href="#å¤šèŠ‚ç‚¹åŠŸèƒ½" class="headerlink" title="å¤šèŠ‚ç‚¹åŠŸèƒ½"></a>å¤šèŠ‚ç‚¹åŠŸèƒ½</h3><ul><li>âœ… <strong>ç»Ÿä¸€ç®¡ç†</strong>: åœ¨ Master èŠ‚ç‚¹æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰ Worker èŠ‚ç‚¹çš„å®¹å™¨</li><li>âœ… <strong>æ™ºèƒ½è°ƒåº¦</strong>: è‡ªåŠ¨é€‰æ‹©æœ€ä½³èŠ‚ç‚¹éƒ¨ç½²å®¹å™¨</li><li>âœ… <strong>èŠ‚ç‚¹ç›‘æ§</strong>: å®æ—¶ç›‘æ§æ‰€æœ‰èŠ‚ç‚¹çš„èµ„æºä½¿ç”¨æƒ…å†µ</li><li>âœ… <strong>è·¨èŠ‚ç‚¹æ“ä½œ</strong>: åœ¨ Master èŠ‚ç‚¹æ“ä½œä»»æ„ Worker èŠ‚ç‚¹çš„å®¹å™¨</li></ul><p>è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒ: <a href="MULTI-NODE.md">MULTI-NODE.md</a></p><h2 id="å¿«é€Ÿæµ‹è¯•"><a href="#å¿«é€Ÿæµ‹è¯•" class="headerlink" title="å¿«é€Ÿæµ‹è¯•"></a>å¿«é€Ÿæµ‹è¯•</h2><p>åˆ›å»ºæµ‹è¯•å®¹å™¨æ¥éªŒè¯é¢æ¿åŠŸèƒ½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³•1: ä¸€é”®åˆ›å»ºæµ‹è¯•å®¹å™¨ï¼ˆæ¨èï¼‰</span></span><br><span class="line"><span class="built_in">chmod</span> +x quick-test.sh</span><br><span class="line">./quick-test.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•2: äº¤äº’å¼åˆ›å»ºæµ‹è¯•å®¹å™¨</span></span><br><span class="line"><span class="built_in">chmod</span> +x test-containers.sh</span><br><span class="line">./test-containers.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•3: æ‰‹åŠ¨åˆ›å»ºç®€å•æµ‹è¯•å®¹å™¨</span></span><br><span class="line">docker run -d --name test-nginx -p 8081:80 nginx:alpine</span><br><span class="line">docker run -d --name test-redis -p 6379:6379 redis:alpine</span><br></pre></td></tr></table></figure><h2 id="å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰"><a href="#å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰" class="headerlink" title="å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰"></a>å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰</h2><p>é¡¹ç›®æ”¯æŒçƒ­é‡è½½å¼€å‘æ¨¡å¼ï¼Œä¿®æ”¹ä»£ç åè‡ªåŠ¨é‡æ–°ç¼–è¯‘å¹¶é‡å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ Airï¼ˆæ¨èï¼‰</span></span><br><span class="line"><span class="built_in">chmod</span> +x dev.sh</span><br><span class="line">./dev.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—® http://localhost:9999</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹ä»£ç åä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘å¹¶é‡å¯</span></span><br></pre></td></tr></table></figure><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="1-æ— æ³•è¿æ¥åˆ°-Docker"><a href="#1-æ— æ³•è¿æ¥åˆ°-Docker" class="headerlink" title="1. æ— æ³•è¿æ¥åˆ° Docker"></a>1. æ— æ³•è¿æ¥åˆ° Docker</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>æ— æ³•è¿æ¥åˆ° Docker: ...</code></p><p><strong>è§£å†³æ–¹æ³•</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ Docker æœåŠ¡çŠ¶æ€</span></span><br><span class="line">sudo systemctl status docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ Docker æœåŠ¡</span></span><br><span class="line">sudo systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰ Docker æƒé™</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæç¤ºæƒé™é”™è¯¯ï¼Œå°†ç”¨æˆ·æ·»åŠ åˆ° docker ç»„</span></span><br><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br><span class="line">newgrp docker</span><br></pre></td></tr></table></figure><h3 id="2-ç«¯å£è¢«å ç”¨"><a href="#2-ç«¯å£è¢«å ç”¨" class="headerlink" title="2. ç«¯å£è¢«å ç”¨"></a>2. ç«¯å£è¢«å ç”¨</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>listen tcp :9999: bind: address already in use</code></p><p><strong>è§£å†³æ–¹æ³•</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å…¶ä»–ç«¯å£</span></span><br><span class="line">PORT=9090 ./rabbit-panel-linux-amd64</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–æŸ¥çœ‹å ç”¨ 9999 ç«¯å£çš„è¿›ç¨‹</span></span><br><span class="line">sudo lsof -i :9999</span><br><span class="line">sudo <span class="built_in">kill</span> -9 &lt;PID&gt;</span><br></pre></td></tr></table></figure><h3 id="3-å®¹å™¨æ—¥å¿—æ— æ³•æŸ¥çœ‹"><a href="#3-å®¹å™¨æ—¥å¿—æ— æ³•æŸ¥çœ‹" class="headerlink" title="3. å®¹å™¨æ—¥å¿—æ— æ³•æŸ¥çœ‹"></a>3. å®¹å™¨æ—¥å¿—æ— æ³•æŸ¥çœ‹</h3><p><strong>å¯èƒ½åŸå› </strong>: å®¹å™¨å·²åœæ­¢ã€å®¹å™¨ ID é”™è¯¯ã€Docker API æƒé™ä¸è¶³</p><p><strong>è§£å†³æ–¹æ³•</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥å®¹å™¨çŠ¶æ€</span></span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ Docker æƒé™</span></span><br><span class="line">docker logs &lt;container-id&gt;</span><br></pre></td></tr></table></figure><h3 id="4-å†…å­˜å ç”¨è¿‡é«˜"><a href="#4-å†…å­˜å ç”¨è¿‡é«˜" class="headerlink" title="4. å†…å­˜å ç”¨è¿‡é«˜"></a>4. å†…å­˜å ç”¨è¿‡é«˜</h3><p><strong>ä¼˜åŒ–å»ºè®®</strong>:</p><ul><li>ç¡®ä¿ä½¿ç”¨ç¼–è¯‘ä¼˜åŒ–ç‰ˆæœ¬ (å·²å¯ç”¨ <code>-ldflags=&quot;-s -w&quot;</code>)</li><li>å®šæœŸæ¸…ç†æ— ç”¨çš„å®¹å™¨å’Œé•œåƒ</li><li>å…³é—­ä¸éœ€è¦çš„å®¹å™¨æ—¥å¿—æµ</li></ul><h3 id="5-ç¼–è¯‘å¤±è´¥"><a href="#5-ç¼–è¯‘å¤±è´¥" class="headerlink" title="5. ç¼–è¯‘å¤±è´¥"></a>5. ç¼–è¯‘å¤±è´¥</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>cannot find package &quot;github.com/docker/docker/client&quot;</code></p><p><strong>è§£å†³æ–¹æ³•</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ– Go æ¨¡å—</span></span><br><span class="line">go mod init rabbit-panel</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½ä¾èµ–</span></span><br><span class="line">go mod tidy</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°ç¼–è¯‘</span></span><br><span class="line">go build -o rabbit-panel main.go</span><br></pre></td></tr></table></figure><h3 id="6-ç½‘ç»œé—®é¢˜-æ— æ³•ä¸‹è½½ä¾èµ–"><a href="#6-ç½‘ç»œé—®é¢˜-æ— æ³•ä¸‹è½½ä¾èµ–" class="headerlink" title="6. ç½‘ç»œé—®é¢˜ - æ— æ³•ä¸‹è½½ä¾èµ–"></a>6. ç½‘ç»œé—®é¢˜ - æ— æ³•ä¸‹è½½ä¾èµ–</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>dial tcp 142.250.196.209:443: i/o timeout</code></p><p><strong>è§£å†³æ–¹æ³•</strong>:</p><p><strong>æ–¹æ³• 1: ä½¿ç”¨æä¾›çš„è„šæœ¬ï¼ˆæ¨èï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x setup-deps.sh</span><br><span class="line">./setup-deps.sh</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³• 2: æ‰‹åŠ¨è®¾ç½® Go ä»£ç†</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½® Go ä»£ç†ä¸ºå›½å†…é•œåƒ</span></span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.cn,direct</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½ä¾èµ–</span></span><br><span class="line">go mod download</span><br><span class="line">go mod tidy</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³• 3: æ°¸ä¹…è®¾ç½® Go ä»£ç†</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†ä»£ç†è®¾ç½®å†™å…¥ ~/.bashrc</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export GOPROXY=https://goproxy.cn,direct&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨ go env è®¾ç½®</span></span><br><span class="line">go <span class="built_in">env</span> -w GOPROXY=https://goproxy.cn,direct</span><br></pre></td></tr></table></figure><h2 id="å®‰å…¨è¯´æ˜"><a href="#å®‰å…¨è¯´æ˜" class="headerlink" title="å®‰å…¨è¯´æ˜"></a>å®‰å…¨è¯´æ˜</h2><h3 id="ç”¨æˆ·è®¤è¯"><a href="#ç”¨æˆ·è®¤è¯" class="headerlink" title="ç”¨æˆ·è®¤è¯"></a>ç”¨æˆ·è®¤è¯</h3><p>æ‰€æœ‰ Web UI è®¿é—®çš„ API éƒ½éœ€è¦ç”¨æˆ·ç™»å½•è®¤è¯ï¼š</p><ul><li><strong>é»˜è®¤è´¦æˆ·</strong>: <code>admin</code> &#x2F; <code>admin</code></li><li><strong>é¦–æ¬¡ç™»å½•</strong>: å¿…é¡»ä¿®æ”¹å¯†ç </li><li><strong>å¯†ç è¦æ±‚</strong>: è‡³å°‘ 8 ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦</li></ul><h3 id="èŠ‚ç‚¹é—´è®¤è¯"><a href="#èŠ‚ç‚¹é—´è®¤è¯" class="headerlink" title="èŠ‚ç‚¹é—´è®¤è¯"></a>èŠ‚ç‚¹é—´è®¤è¯</h3><p>Master å’Œ Worker èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ä½¿ç”¨ HMAC-SHA256 è®¤è¯æœºåˆ¶ã€‚</p><p><strong>ç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ç½®èŠ‚ç‚¹å¯†é’¥</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NODE_SECRET=your-secret-key-here ./rabbit-panel-linux-amd64</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿäº§ç¯å¢ƒå»ºè®®"><a href="#ç”Ÿäº§ç¯å¢ƒå»ºè®®" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒå»ºè®®"></a>ç”Ÿäº§ç¯å¢ƒå»ºè®®</h3><ol><li><strong>ä½¿ç”¨ HTTPS</strong>: é€šè¿‡ Nginx&#x2F;Caddy é…ç½® HTTPS åå‘ä»£ç†</li><li><strong>é˜²ç«å¢™é…ç½®</strong>: é™åˆ¶è®¿é—®ç«¯å£</li><li><strong>å®šæœŸæ›´æ–°å¯†é’¥</strong>: å®šæœŸæ›´æ¢ <code>NODE_SECRET</code> å’Œ <code>JWT_SECRET</code></li></ol><p>è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒ: <a href="SECURITY.md">SECURITY.md</a></p><h2 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h2><h3 id="èµ„æºå ç”¨"><a href="#èµ„æºå ç”¨" class="headerlink" title="èµ„æºå ç”¨"></a>èµ„æºå ç”¨</h3><ul><li><strong>è¿è¡Œæ—¶å†…å­˜</strong>: â‰¤30MB</li><li><strong>äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°</strong>: â‰¤10MB</li><li><strong>é™æ€èµ„æº</strong>: â‰¤100KB (Tailwind CSS é€šè¿‡ CDN åŠ è½½)</li></ul><h3 id="ä¼˜åŒ–æªæ–½"><a href="#ä¼˜åŒ–æªæ–½" class="headerlink" title="ä¼˜åŒ–æªæ–½"></a>ä¼˜åŒ–æªæ–½</h3><ol><li><strong>ç¼–è¯‘ä¼˜åŒ–</strong>: ä½¿ç”¨ <code>-ldflags=&quot;-s -w&quot;</code> å»é™¤ç¬¦å·è¡¨å’Œè°ƒè¯•ä¿¡æ¯</li><li><strong>æ— æ•°æ®åº“</strong>: æ‰€æœ‰æ•°æ®ç›´æ¥ä» Docker API è·å–ï¼Œæ— æŒä¹…åŒ–å­˜å‚¨</li><li><strong>è¿æ¥ç®¡ç†</strong>: å®¹å™¨æ—¥å¿—æµå…³é—­åç«‹å³é‡Šæ”¾è¿æ¥</li><li><strong>å†…å­˜ç®¡ç†</strong>: å®šæœŸæ¸…ç†æ— ç”¨åç¨‹ï¼Œé¿å…å†…å­˜æ³„æ¼</li><li><strong>æ•°æ®ç¼“å­˜</strong>: å®¹å™¨å’Œé•œåƒåˆ—è¡¨ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼Œå‡å°‘ Docker API è°ƒç”¨</li></ol><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">rabbit-panel/</span><br><span class="line">â”œâ”€â”€ main.go              # åç«¯ä¸»æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ auth.go              # è®¤è¯æ¨¡å—</span><br><span class="line">â”œâ”€â”€ node.go              # èŠ‚ç‚¹ç®¡ç†æ¨¡å—</span><br><span class="line">â”œâ”€â”€ scheduler.go         # å®¹å™¨è°ƒåº¦æ¨¡å—</span><br><span class="line">â”œâ”€â”€ static/              # é™æ€æ–‡ä»¶ç›®å½•</span><br><span class="line">â”‚   â””â”€â”€ index.html      # å‰ç«¯é¡µé¢</span><br><span class="line">â”œâ”€â”€ build.sh             # ç¼–è¯‘è„šæœ¬</span><br><span class="line">â”œâ”€â”€ start.sh             # ç”Ÿäº§ç¯å¢ƒå¯åŠ¨è„šæœ¬</span><br><span class="line">â”œâ”€â”€ start-master.sh      # Master å¯åŠ¨è„šæœ¬</span><br><span class="line">â”œâ”€â”€ start-worker.sh      # Worker å¯åŠ¨è„šæœ¬</span><br><span class="line">â”œâ”€â”€ setup-deps.sh        # ä¾èµ–ä¸‹è½½è„šæœ¬</span><br><span class="line">â”œâ”€â”€ dev.sh               # å¼€å‘æ¨¡å¼è„šæœ¬</span><br><span class="line">â”œâ”€â”€ .air.toml            # Air é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ go.mod               # Go æ¨¡å—å®šä¹‰</span><br><span class="line">â”œâ”€â”€ go.sum               # Go æ¨¡å—æ ¡éªŒå’Œ</span><br><span class="line">â”œâ”€â”€ README.md            # è¯´æ˜æ–‡æ¡£</span><br><span class="line">â”œâ”€â”€ ARCHITECTURE.md      # æ¶æ„è®¾è®¡æ–‡æ¡£</span><br><span class="line">â”œâ”€â”€ MULTI-NODE.md        # å¤šèŠ‚ç‚¹ä½¿ç”¨æŒ‡å—</span><br><span class="line">â”œâ”€â”€ NODE-COMMUNICATION.md # èŠ‚ç‚¹é€šä¿¡è¯¦è§£</span><br><span class="line">â””â”€â”€ SECURITY.md          # å®‰å…¨è¯´æ˜æ–‡æ¡£</span><br></pre></td></tr></table></figure><h2 id="API-æ¥å£"><a href="#API-æ¥å£" class="headerlink" title="API æ¥å£"></a>API æ¥å£</h2><h3 id="å•èŠ‚ç‚¹-API"><a href="#å•èŠ‚ç‚¹-API" class="headerlink" title="å•èŠ‚ç‚¹ API"></a>å•èŠ‚ç‚¹ API</h3><ul><li><code>GET /api/system/stats</code> - è·å–ç³»ç»Ÿç›‘æ§æ•°æ®</li><li><code>GET /api/containers</code> - è·å–å®¹å™¨åˆ—è¡¨</li><li><code>POST /api/containers/action</code> - å®¹å™¨æ“ä½œ (start&#x2F;stop&#x2F;restart&#x2F;remove)</li><li><code>GET /api/containers/logs?id=&lt;container-id&gt;</code> - è·å–å®¹å™¨æ—¥å¿— (SSE æµå¼)</li><li><code>GET /api/images</code> - è·å–é•œåƒåˆ—è¡¨</li><li><code>POST /api/images/remove</code> - åˆ é™¤é•œåƒ</li><li><code>GET /api/health</code> - å¥åº·æ£€æŸ¥</li></ul><h3 id="å¤šèŠ‚ç‚¹-API-Master"><a href="#å¤šèŠ‚ç‚¹-API-Master" class="headerlink" title="å¤šèŠ‚ç‚¹ API (Master)"></a>å¤šèŠ‚ç‚¹ API (Master)</h3><ul><li><code>GET /api/nodes</code> - è·å–æ‰€æœ‰èŠ‚ç‚¹åˆ—è¡¨</li><li><code>POST /api/containers/schedule</code> - è·¨èŠ‚ç‚¹è°ƒåº¦å®¹å™¨</li><li><code>GET /api/containers/all</code> - è·å–æ‰€æœ‰èŠ‚ç‚¹çš„å®¹å™¨</li></ul><h3 id="è®¤è¯-API"><a href="#è®¤è¯-API" class="headerlink" title="è®¤è¯ API"></a>è®¤è¯ API</h3><ul><li><code>POST /api/auth/login</code> - ç”¨æˆ·ç™»å½•</li><li><code>POST /api/auth/logout</code> - ç”¨æˆ·ç™»å‡º</li><li><code>POST /api/auth/change-password</code> - ä¿®æ”¹å¯†ç </li></ul><h2 id="æ‰©å±•å¼€å‘"><a href="#æ‰©å±•å¼€å‘" class="headerlink" title="æ‰©å±•å¼€å‘"></a>æ‰©å±•å¼€å‘</h2><p>å¦‚éœ€æ·»åŠ æ–°åŠŸèƒ½ï¼Œè¯·éµå¾ªä»¥ä¸‹åŸåˆ™:</p><ol><li><strong>ä¿æŒè½»é‡åŒ–</strong>: æ–°å¢åŠŸèƒ½ä¸åº”æ˜¾è‘—å¢åŠ å†…å­˜å ç”¨</li><li><strong>æ— æ•°æ®åº“</strong>: å¦‚éœ€ç¼“å­˜ï¼Œä½¿ç”¨å†…å­˜ä¸´æ—¶å­˜å‚¨</li><li><strong>å•æ–‡ä»¶åç«¯</strong>: å°½é‡å°†ä»£ç é›†ä¸­åœ¨ä¸»æ–‡ä»¶ä¸­</li><li><strong>åŸç”Ÿå‰ç«¯</strong>: ä½¿ç”¨åŸç”Ÿ HTML&#x2F;CSS&#x2F;JSï¼Œé¿å…å¼•å…¥æ¡†æ¶</li></ol><h2 id="è®¸å¯è¯"><a href="#è®¸å¯è¯" class="headerlink" title="è®¸å¯è¯"></a>è®¸å¯è¯</h2><p>MIT License</p>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»é›¶å¼€å§‹æ­å»ºåŸºäºSpring Bootçš„MCPï¼ˆModel Context Protocolï¼‰ç³»ç»Ÿå®Œæ•´æ•™ç¨‹</title>
      <link href="/2025/10/03/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8ESpring%20Boot%E7%9A%84MCP%E7%B3%BB%E7%BB%9F%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/"/>
      <url>/2025/10/03/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%9F%BA%E4%BA%8ESpring%20Boot%E7%9A%84MCP%E7%B3%BB%E7%BB%9F%E5%AE%8C%E6%95%B4%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»é›¶å¼€å§‹æ­å»ºåŸºäºSpring-Bootçš„MCPï¼ˆModel-Context-Protocolï¼‰ç³»ç»Ÿå®Œæ•´æ•™ç¨‹"><a href="#ä»é›¶å¼€å§‹æ­å»ºåŸºäºSpring-Bootçš„MCPï¼ˆModel-Context-Protocolï¼‰ç³»ç»Ÿå®Œæ•´æ•™ç¨‹" class="headerlink" title="ä»é›¶å¼€å§‹æ­å»ºåŸºäºSpring Bootçš„MCPï¼ˆModel Context Protocolï¼‰ç³»ç»Ÿå®Œæ•´æ•™ç¨‹"></a>ä»é›¶å¼€å§‹æ­å»ºåŸºäºSpring Bootçš„MCPï¼ˆModel Context Protocolï¼‰ç³»ç»Ÿå®Œæ•´æ•™ç¨‹</h1><h2 id="é¡¹ç›®ä»‹ç»"><a href="#é¡¹ç›®ä»‹ç»" class="headerlink" title="é¡¹ç›®ä»‹ç»"></a>é¡¹ç›®ä»‹ç»</h2><p>æœ¬æ•™ç¨‹å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªåŸºäºSpring Bootçš„MCPï¼ˆModel Context Protocolï¼‰ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿèƒ½å¤Ÿè®©AIæ¨¡å‹ï¼ˆå¦‚é€šä¹‰åƒé—®ï¼‰ç›´æ¥è°ƒç”¨MyBatisæ•°æ®åº“æŸ¥è¯¢æ–¹æ³•ï¼Œå®ç°è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ•°æ®åº“çš„åŠŸèƒ½ã€‚</p><p><strong><font color="red">è¦æ±‚daoå±‚å¿…é¡»åœ¨com.daoè¿™ä¸ªè·¯å¾„ä¸‹é¢ï¼Œå¦‚æœä¸æ˜¯è¯·è‡ªè¡Œæ›´æ”¹ä»£ç ï¼Œï¼ˆè¯¦è§åŒ…æ‰«æå·¥å…·ï¼‰</font></strong></p><h3 id="ç³»ç»Ÿæ¶æ„"><a href="#ç³»ç»Ÿæ¶æ„" class="headerlink" title="ç³»ç»Ÿæ¶æ„"></a>ç³»ç»Ÿæ¶æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‰ç«¯(Vue) -&gt; Controller -&gt; Service -&gt; AIæ¨¡å‹ -&gt; å·¥å…·ç±» -&gt; MyBatis -&gt; æ•°æ®åº“</span><br></pre></td></tr></table></figure><h3 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h3><ol><li><strong>è‡ªç„¶è¯­è¨€æŸ¥è¯¢</strong>ï¼šç”¨æˆ·å¯ä»¥ç”¨è‡ªç„¶è¯­è¨€æè¿°æŸ¥è¯¢éœ€æ±‚</li><li><strong>AIç†è§£ä¸è½¬æ¢</strong>ï¼šAIæ¨¡å‹å°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸ºå…·ä½“çš„æ•°æ®åº“æŸ¥è¯¢</li><li><strong>åŠ¨æ€æ–¹æ³•è°ƒç”¨</strong>ï¼šç³»ç»ŸåŠ¨æ€è°ƒç”¨MyBatis Mapperæ–¹æ³•æ‰§è¡ŒæŸ¥è¯¢</li><li><strong>æµå¼å“åº”</strong>ï¼šé€šè¿‡SSEï¼ˆServer-Sent Eventsï¼‰å®ç°æµå¼å“åº”</li><li><strong>æ™ºèƒ½é‡è¯•</strong>ï¼šå½“å•æ¡æŸ¥è¯¢è¿”å›å¤šæ¡è®°å½•æ—¶ï¼Œè‡ªåŠ¨é‡è¯•åˆ—è¡¨æŸ¥è¯¢</li></ol><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><h3 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h3><ul><li><strong>åç«¯</strong>ï¼šSpring Boot 2.2.2 + MyBatis Plus + é€šä¹‰åƒé—®AI SDK</li><li><strong>å‰ç«¯</strong>ï¼šVue.js + Element UI</li><li><strong>æ•°æ®åº“</strong>ï¼šMySQL</li><li><strong>Javaç‰ˆæœ¬</strong>ï¼šJDK 1.8</li></ul><h3 id="åˆ›å»ºSpring-Booté¡¹ç›®"><a href="#åˆ›å»ºSpring-Booté¡¹ç›®" class="headerlink" title="åˆ›å»ºSpring Booté¡¹ç›®"></a>åˆ›å»ºSpring Booté¡¹ç›®</h3><p>ä½¿ç”¨Spring Initializråˆ›å»ºé¡¹ç›®ï¼Œæˆ–ç›´æ¥ä½¿ç”¨æœ¬æ•™ç¨‹æä¾›çš„<code>pom.xml</code>é…ç½®ã€‚</p><h2 id="Mavenä¾èµ–é…ç½®"><a href="#Mavenä¾èµ–é…ç½®" class="headerlink" title="Mavenä¾èµ–é…ç½®"></a>Mavenä¾èµ–é…ç½®</h2><p>ä»¥ä¸‹æ˜¯å®ç°MCPç³»ç»Ÿæ‰€éœ€çš„å…³é”®Mavenä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Spring Boot Webæ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- MyBatisé›†æˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- MyBatiså¢å¼ºå·¥å…· --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€šä¹‰åƒé—®AI SDK --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dashscope-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.21.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-simple<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Lombokç®€åŒ–ä»£ç  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…³é”®ä¾èµ–è¯´æ˜"><a href="#å…³é”®ä¾èµ–è¯´æ˜" class="headerlink" title="å…³é”®ä¾èµ–è¯´æ˜"></a>å…³é”®ä¾èµ–è¯´æ˜</h3><ol><li><strong>dashscope-sdk-java</strong>ï¼šé€šä¹‰åƒé—®AI SDKï¼Œç”¨äºä¸AIæ¨¡å‹äº¤äº’ï¼Œæ˜¯MCPç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶</li><li><strong>mybatis-spring-boot-starter</strong>ï¼šæä¾›MyBatisé›†æˆï¼Œç”¨äºæ•°æ®åº“æ“ä½œ</li><li><strong>mybatis-plus</strong>ï¼šMyBatiså¢å¼ºå·¥å…·ï¼Œç®€åŒ–CRUDæ“ä½œ</li><li><strong>spring-boot-starter-web</strong>ï¼šæä¾›Web MVCæ”¯æŒï¼Œå¤„ç†HTTPè¯·æ±‚</li><li><strong>mysql-connector-java</strong>ï¼šMySQLæ•°æ®åº“é©±åŠ¨</li><li><strong>lombok</strong>ï¼šé€šè¿‡æ³¨è§£ç®€åŒ–Javaä»£ç ï¼Œå‡å°‘æ ·æ¿ä»£ç </li></ol><h2 id="åç«¯å®ç°"><a href="#åç«¯å®ç°" class="headerlink" title="åç«¯å®ç°"></a>åç«¯å®ç°</h2><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>åœ¨<code>application.yml</code>ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/your_database?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">your_username</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">your_password</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.entity</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># AIé…ç½®</span></span><br><span class="line"><span class="attr">ai-key:</span> <span class="string">your_ai_api_key</span></span><br></pre></td></tr></table></figure><h3 id="Controllerå±‚å®ç°"><a href="#Controllerå±‚å®ç°" class="headerlink" title="Controllerå±‚å®ç°"></a>Controllerå±‚å®ç°</h3><p>åˆ›å»º<code>DeepSeekController.java</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.Generation;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.GenerationParam;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Message;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Role;</span><br><span class="line"><span class="keyword">import</span> com.service.DeepSeekService;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.method.annotation.SseEmitter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author reisen7</span></span><br><span class="line"><span class="comment"> * Date 2025/4/9 1:12</span></span><br><span class="line"><span class="comment"> * Description </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/deepSeek&quot;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeepSeekController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DeepSeekService deepSeekService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/query&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span></span><br><span class="line">    <span class="keyword">public</span> SseEmitter <span class="title function_">getBotContent</span><span class="params">(<span class="meta">@RequestParam</span> String question)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥è°ƒç”¨Serviceå±‚å¤„ç†ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">        <span class="keyword">return</span> deepSeekService.processQuestion(question);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Serviceæ¥å£å®šä¹‰"><a href="#Serviceæ¥å£å®šä¹‰" class="headerlink" title="Serviceæ¥å£å®šä¹‰"></a>Serviceæ¥å£å®šä¹‰</h3><p>åˆ›å»º<code>DeepSeekService.java</code>æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.method.annotation.SseEmitter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.Generation;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.GenerationParam;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.GenerationResult;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Role;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.exception.ApiException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.exception.InputRequiredException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.exception.NoApiKeyException;</span><br><span class="line"><span class="keyword">import</span> io.reactivex.Flowable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.method.annotation.SseEmitter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.System;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author reisen7</span></span><br><span class="line"><span class="comment"> * Date 2025/4/9 0:04</span></span><br><span class="line"><span class="comment"> * Description</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DeepSeekService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†AIé—®ç­”è¯·æ±‚å¹¶é€šè¿‡SSEæµå¼è¿”å›ç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> question ç”¨æˆ·é—®é¢˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> SseEmitter å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SseEmitter <span class="title function_">processQuestion</span><span class="params">(String question)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Serviceå®ç°ç±»"><a href="#Serviceå®ç°ç±»" class="headerlink" title="Serviceå®ç°ç±»"></a>Serviceå®ç°ç±»</h3><p>åˆ›å»º<code>DeepSeekServiceImpl.java</code>å®ç°ç±»ï¼Œè¿™æ˜¯æ•´ä¸ªMCPç³»ç»Ÿçš„æ ¸å¿ƒã€‚ä¸‹é¢æˆ‘ä»¬é€æ­¥è®²è§£å…¶ä¸­çš„å…³é”®æ–¹æ³•ï¼š</p><h4 id="ç±»ç»“æ„ä¸åˆå§‹åŒ–"><a href="#ç±»ç»“æ„ä¸åˆå§‹åŒ–" class="headerlink" title="ç±»ç»“æ„ä¸åˆå§‹åŒ–"></a>ç±»ç»“æ„ä¸åˆå§‹åŒ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeepSeekServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeepSeekService</span>, ApplicationContextAware &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(DeepSeekServiceImpl.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MYBATIS_TOOL_NAME</span> <span class="operator">=</span> <span class="string">&quot;query_with_mybatis&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;ai-key&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String aiKey;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; availableMethodsCache;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">AtomicInteger</span> <span class="variable">eventIdGenerator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç±»å®ç°äº†ä¸¤ä¸ªæ¥å£ï¼š<code>DeepSeekService</code>æä¾›ä¸šåŠ¡æ–¹æ³•ï¼Œ<code>ApplicationContextAware</code>ç”¨äºè·å–Springä¸Šä¸‹æ–‡ã€‚å…³é”®å±æ€§åŒ…æ‹¬ï¼š</p><ul><li><code>aiKey</code>ï¼šAIæ¨¡å‹çš„APIå¯†é’¥</li><li><code>sqlSessionFactory</code>ï¼šMyBatisä¼šè¯å·¥å‚ï¼Œç”¨äºæ•°æ®åº“æ“ä½œ</li><li><code>availableMethodsCache</code>ï¼šç¼“å­˜æ‰€æœ‰å¯ç”¨çš„MyBatisæ–¹æ³•</li><li><code>executor</code>ï¼šçº¿ç¨‹æ± ï¼Œç”¨äºå¼‚æ­¥å¤„ç†è¯·æ±‚</li></ul><h4 id="Mapperæ–¹æ³•å‘ç°"><a href="#Mapperæ–¹æ³•å‘ç°" class="headerlink" title="Mapperæ–¹æ³•å‘ç°"></a>Mapperæ–¹æ³•å‘ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">    <span class="built_in">this</span>.applicationContext = applicationContext;</span><br><span class="line">    <span class="built_in">this</span>.availableMethodsCache = discoverMapperMethods();</span><br><span class="line">    <span class="comment">// ... æ—¥å¿—è®°å½•</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;rawtypes&quot;)</span></span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; <span class="title function_">discoverMapperMethods</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1. æŸ¥æ‰¾æ‰€æœ‰å¸¦@Mapperæ³¨è§£çš„Bean</span></span><br><span class="line">    Map&lt;String, Object&gt; mappers = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        mappers.putAll(applicationContext.getBeansWithAnnotation(org.apache.ibatis.annotations.Mapper.class));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (BeansException e) &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°å¸¦æœ‰ @Mapper æ³¨è§£çš„ Beansã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°è¯•æŸ¥æ‰¾BaseMapperçš„å®ç°ç±»</span></span><br><span class="line">    <span class="keyword">if</span> (mappers.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">// ... æŸ¥æ‰¾BaseMapperå®ç°ç±»çš„é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. éå†æ‰€æœ‰Mapperï¼Œæå–æ–¹æ³•ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">for</span> (Object mapperProxy : mappers.values()) &#123;</span><br><span class="line">        <span class="comment">// ... æå–æ–¹æ³•å¹¶æ·»åŠ æ™ºèƒ½æ ‡è®°</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4. å¦‚æœSpringä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œå›é€€åˆ°æ–‡ä»¶ç³»ç»Ÿæ‰«æ</span></span><br><span class="line">    <span class="keyword">if</span> (methodNames.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">return</span> PackageScanner.getAvailableMapperMethods(<span class="string">&quot;com.dao&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> methodNames.stream().distinct().collect(Collectors.toList());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•åœ¨åº”ç”¨å¯åŠ¨æ—¶è¢«è°ƒç”¨ï¼Œç”¨äºå‘ç°æ‰€æœ‰å¯ç”¨çš„MyBatis Mapperæ–¹æ³•ã€‚å®ƒä¼šï¼š</p><ol><li>é¦–å…ˆå°è¯•ä»Springä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾å¸¦<code>@Mapper</code>æ³¨è§£çš„Bean</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æŸ¥æ‰¾å®ç°äº†<code>BaseMapper</code>æ¥å£çš„ç±»</li><li>éå†æ‰€æœ‰æ‰¾åˆ°çš„Mapperï¼Œæå–å…¶ä¸­çš„æ–¹æ³•ä¿¡æ¯</li><li>ä¸ºæ–¹æ³•æ·»åŠ æ™ºèƒ½æ ‡è®°ï¼Œå¦‚â€âœ…æ¨è-è¿”å›åˆ—è¡¨â€ã€â€âš ï¸å•æ¡è®°å½•â€ç­‰</li><li>å¦‚æœSpringä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰æ‰¾åˆ°ä»»ä½•Mapperï¼Œåˆ™å›é€€åˆ°æ–‡ä»¶ç³»ç»Ÿæ‰«ææ¨¡å¼</li></ol><h4 id="SSEå¤„ç†æ ¸å¿ƒæ–¹æ³•"><a href="#SSEå¤„ç†æ ¸å¿ƒæ–¹æ³•" class="headerlink" title="SSEå¤„ç†æ ¸å¿ƒæ–¹æ³•"></a>SSEå¤„ç†æ ¸å¿ƒæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> SseEmitter <span class="title function_">processQuestion</span><span class="params">(String question)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. åˆ›å»ºSseEmitterå¯¹è±¡ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    <span class="type">SseEmitter</span> <span class="variable">emitter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SseEmitter</span>(<span class="number">600_000L</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. è®¾ç½®å›è°ƒ</span></span><br><span class="line">    emitter.onCompletion(() -&gt; logger.info(<span class="string">&quot;SSEè¿æ¥å·²æ­£å¸¸å®Œæˆ&quot;</span>));</span><br><span class="line">    emitter.onError(e -&gt; &#123; <span class="comment">/* é”™è¯¯å¤„ç† */</span> &#125;);</span><br><span class="line">    emitter.onTimeout(() -&gt; &#123; <span class="comment">/* è¶…æ—¶å¤„ç† */</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. å¼‚æ­¥å¤„ç†è¯·æ±‚</span></span><br><span class="line">    executor.execute(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;Message&gt; messages = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            messages.add(buildSystemMessage());</span><br><span class="line">            messages.add(buildUserMessage(question));</span><br><span class="line">            processConversation(messages, emitter);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯&quot;</span>, e);</span><br><span class="line">            sendSseResponse(emitter, <span class="string">&quot;å¤„ç†å¤±è´¥: &quot;</span> + e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            completeEmitter(emitter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> emitter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å¤„ç†ç”¨æˆ·è¯·æ±‚çš„æ ¸å¿ƒæ–¹æ³•ï¼Œå®ƒï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ª<code>SseEmitter</code>å¯¹è±¡ï¼Œè®¾ç½®10åˆ†é’Ÿçš„è¶…æ—¶æ—¶é—´</li><li>è®¾ç½®è¿æ¥å®Œæˆã€é”™è¯¯å’Œè¶…æ—¶çš„å›è°ƒå¤„ç†</li><li>ä½¿ç”¨çº¿ç¨‹æ± å¼‚æ­¥å¤„ç†è¯·æ±‚ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</li><li>æ„å»ºæ¶ˆæ¯åˆ—è¡¨ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæç¤ºå’Œç”¨æˆ·é—®é¢˜</li><li>è°ƒç”¨<code>processConversation</code>æ–¹æ³•å¤„ç†å¯¹è¯</li></ol><h4 id="å¯¹è¯å¤„ç†ä¸å·¥å…·è°ƒç”¨"><a href="#å¯¹è¯å¤„ç†ä¸å·¥å…·è°ƒç”¨" class="headerlink" title="å¯¹è¯å¤„ç†ä¸å·¥å…·è°ƒç”¨"></a>å¯¹è¯å¤„ç†ä¸å·¥å…·è°ƒç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processConversation</span><span class="params">(List&lt;Message&gt; messages, SseEmitter emitter)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1. è°ƒç”¨AIæ¨¡å‹</span></span><br><span class="line">    <span class="type">Generation</span> <span class="variable">gen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Generation</span>();</span><br><span class="line">    <span class="type">GenerationParam</span> <span class="variable">param</span> <span class="operator">=</span> buildGenerationParam(messages);</span><br><span class="line">    <span class="type">GenerationResult</span> <span class="variable">result</span> <span class="operator">=</span> gen.call(param);</span><br><span class="line">    <span class="type">Message</span> <span class="variable">assistantMessage</span> <span class="operator">=</span> result.getOutput().getChoices().get(<span class="number">0</span>).getMessage();</span><br><span class="line">    messages.add(assistantMessage);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. æ£€æŸ¥æ˜¯å¦æœ‰å·¥å…·è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (assistantMessage.getToolCalls() != <span class="literal">null</span> &amp;&amp; !assistantMessage.getToolCalls().isEmpty()) &#123;</span><br><span class="line">        sendSseResponse(emitter, <span class="string">&quot;æ­£åœ¨æŸ¥è¯¢æ•°æ®åº“ï¼Œè¯·ç¨å€™...&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. æ‰§è¡Œå·¥å…·è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">for</span>(com.alibaba.dashscope.tools.ToolCallBase toolCall : assistantMessage.getToolCalls()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (toolCall <span class="keyword">instanceof</span> ToolCallFunction) &#123;</span><br><span class="line">                <span class="type">ToolCallFunction</span> <span class="variable">functionCall</span> <span class="operator">=</span> (ToolCallFunction) toolCall;</span><br><span class="line">                <span class="keyword">if</span> (MYBATIS_TOOL_NAME.equals(functionCall.getFunction().getName())) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">toolCallResult</span> <span class="operator">=</span> executeMyBatisTool(functionCall);</span><br><span class="line">                    <span class="type">Message</span> <span class="variable">toolMessage</span> <span class="operator">=</span> Message.builder()</span><br><span class="line">                            .role(Role.TOOL.getValue())</span><br><span class="line">                            .content(toolCallResult)</span><br><span class="line">                            .toolCallId(functionCall.getId())</span><br><span class="line">                            .build();</span><br><span class="line">                    </span><br><span class="line">                    logger.info(<span class="string">&quot;æŸ¥è¯¢æ–¹æ³•: &#123;&#125;, ç»“æœ: &#123;&#125;&quot;</span>, functionCall.getFunction().getName(), toolCallResult);</span><br><span class="line">                    messages.add(toolMessage);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. é€’å½’å¤„ç†ï¼Œç»§ç»­ä¸AIå¯¹è¯</span></span><br><span class="line">        processConversation(messages, emitter);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 5. æ²¡æœ‰å·¥å…·è°ƒç”¨ï¼Œç›´æ¥è¿”å›AIå›ç­”</span></span><br><span class="line">        logger.info(<span class="string">&quot;æœ€ç»ˆå›ç­”: &#123;&#125;&quot;</span>, assistantMessage.getContent());</span><br><span class="line">        streamAssistantResponse(assistantMessage.getContent(), emitter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•æ˜¯MCPç³»ç»Ÿçš„æ ¸å¿ƒï¼Œå®ƒå®ç°äº†ä¸AIæ¨¡å‹çš„å¯¹è¯å’Œå·¥å…·è°ƒç”¨ï¼š</p><ol><li>è°ƒç”¨AIæ¨¡å‹ï¼Œè·å–å›å¤</li><li>æ£€æŸ¥AIçš„å›å¤ä¸­æ˜¯å¦åŒ…å«å·¥å…·è°ƒç”¨</li><li>å¦‚æœæœ‰å·¥å…·è°ƒç”¨ï¼Œæ‰§è¡Œç›¸åº”çš„å·¥å…·ï¼ˆè¿™é‡Œæ˜¯MyBatisæŸ¥è¯¢ï¼‰</li><li>å°†å·¥å…·æ‰§è¡Œç»“æœæ·»åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨ä¸­</li><li>é€’å½’è°ƒç”¨è‡ªèº«ï¼Œç»§ç»­ä¸AIå¯¹è¯ï¼Œç›´åˆ°AIä¸å†è°ƒç”¨å·¥å…·</li><li>å¦‚æœæ²¡æœ‰å·¥å…·è°ƒç”¨ï¼Œå°†AIçš„æœ€ç»ˆå›ç­”å‘é€ç»™å‰ç«¯</li></ol><h4 id="ç³»ç»Ÿæç¤ºæ„å»º"><a href="#ç³»ç»Ÿæç¤ºæ„å»º" class="headerlink" title="ç³»ç»Ÿæç¤ºæ„å»º"></a>ç³»ç»Ÿæç¤ºæ„å»º</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Message <span class="title function_">buildSystemMessage</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">systemPrompt</span> <span class="operator">=</span> <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªå…¨èƒ½çš„AIåŠ©æ‰‹ï¼Œå°¤å…¶æ“…é•¿æ ¹æ®ç”¨æˆ·çš„é—®é¢˜ï¼ŒæŸ¥è¯¢æ•°æ®åº“å¹¶ç»™å‡ºç²¾å‡†çš„å›ç­”ã€‚ä½ å¯ä»¥è°ƒç”¨å·¥å…· &quot;</span> + MYBATIS_TOOL_NAME + <span class="string">&quot; æ¥æ‰§è¡ŒMyBatisçš„Mapperæ–¹æ³•ã€‚\n\n&quot;</span></span><br><span class="line">            + <span class="string">&quot;é‡è¦æç¤ºï¼š\n&quot;</span></span><br><span class="line">            + <span class="string">&quot;1. ä¼˜å…ˆä½¿ç”¨è¿”å›Listçš„æ–¹æ³•ï¼Œå¦‚selectListViewã€selectListVOç­‰\n&quot;</span></span><br><span class="line">            + <span class="string">&quot;2. é¿å…ä½¿ç”¨è¿”å›å•æ¡è®°å½•çš„æ–¹æ³•ï¼Œå¦‚selectViewã€selectVOã€selectOneç­‰\n&quot;</span></span><br><span class="line">            + <span class="string">&quot;3. å¦‚æœå¿…é¡»ä½¿ç”¨å•æ¡è®°å½•æ–¹æ³•ï¼Œè¯·ç¡®ä¿æŸ¥è¯¢æ¡ä»¶è¶³å¤Ÿç²¾ç¡®ï¼ˆå¦‚é€šè¿‡ä¸»é”®IDæŸ¥è¯¢ï¼‰\n&quot;</span></span><br><span class="line">            + <span class="string">&quot;4. å¯¹äºæ¨¡ç³ŠæŸ¥è¯¢æˆ–å¯èƒ½è¿”å›å¤šæ¡è®°å½•çš„æƒ…å†µï¼Œå¿…é¡»ä½¿ç”¨Listæ–¹æ³•\n\n&quot;</span></span><br><span class="line">            + <span class="string">&quot;å¯ç”¨æ–¹æ³•åˆ—è¡¨ï¼š\n&quot;</span></span><br><span class="line">            + <span class="built_in">this</span>.availableMethodsCache.stream()</span><br><span class="line">                .map(method -&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (method.contains(<span class="string">&quot;selectView&quot;</span>) &amp;&amp; !method.contains(<span class="string">&quot;selectListView&quot;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> method + <span class="string">&quot; âš ï¸å•æ¡è®°å½•&quot;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.contains(<span class="string">&quot;selectListView&quot;</span>) || method.contains(<span class="string">&quot;selectListVO&quot;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> method + <span class="string">&quot; âœ…æ¨è&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> method;</span><br><span class="line">                &#125;)</span><br><span class="line">                .collect(Collectors.joining(<span class="string">&quot;\n&quot;</span>))</span><br><span class="line">            + <span class="string">&quot;\n\nè¯·æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Message.builder().role(Role.SYSTEM.getValue()).content(systemPrompt).build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•æ„å»ºäº†ç³»ç»Ÿæç¤ºï¼ŒæŒ‡å¯¼AIå¦‚ä½•ä½¿ç”¨MyBatiså·¥å…·ï¼š</p><ol><li>å®šä¹‰AIçš„è§’è‰²å’Œèƒ½åŠ›</li><li>æä¾›é‡è¦æç¤ºï¼ŒæŒ‡å¯¼AIé€‰æ‹©åˆé€‚çš„æŸ¥è¯¢æ–¹æ³•</li><li>åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„MyBatisæ–¹æ³•ï¼Œå¹¶æ·»åŠ æ™ºèƒ½æ ‡è®°</li><li>è¦æ±‚AIæ ¹æ®ç”¨æˆ·é—®é¢˜é€‰æ‹©æœ€åˆé€‚çš„æŸ¥è¯¢æ–¹æ³•</li></ol><h4 id="SSEå“åº”å‘é€"><a href="#SSEå“åº”å‘é€" class="headerlink" title="SSEå“åº”å‘é€"></a>SSEå“åº”å‘é€</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendSseResponse</span><span class="params">(SseEmitter emitter, String data)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">eventId</span> <span class="operator">=</span> eventIdGenerator.incrementAndGet();</span><br><span class="line">        <span class="comment">// å°†æ¢è¡Œç¬¦æ›¿æ¢ä¸º &lt;br&gt;ï¼Œç¡®ä¿ SSE ä¼ è¾“å®‰å…¨ä¸”å‰ç«¯ v-html èƒ½æ­£ç¡®æ¸²æŸ“</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">safeData</span> <span class="operator">=</span> data.replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        emitter.send(SseEmitter.event()</span><br><span class="line">                .id(String.valueOf(eventId))</span><br><span class="line">                .name(<span class="string">&quot;message&quot;</span>)</span><br><span class="line">                .data(safeData, MediaType.TEXT_PLAIN));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;å‘å®¢æˆ·ç«¯å‘é€SSEäº‹ä»¶å¤±è´¥ï¼Œè¿æ¥å¯èƒ½å·²å…³é—­: &#123;&#125;&quot;</span>, e.getMessage());</span><br><span class="line">        completeEmitter(emitter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•è´Ÿè´£å‘å®¢æˆ·ç«¯å‘é€SSEå“åº”ï¼š</p><ol><li>ç”Ÿæˆå”¯ä¸€çš„äº‹ä»¶ID</li><li>å°†æ¢è¡Œç¬¦æ›¿æ¢ä¸º<code>&lt;br&gt;</code>æ ‡ç­¾ï¼Œç¡®ä¿SSEä¼ è¾“å®‰å…¨ä¸”å‰ç«¯èƒ½æ­£ç¡®æ¸²æŸ“</li><li>æ„å»ºSSEäº‹ä»¶å¹¶å‘é€ç»™å®¢æˆ·ç«¯</li><li>å¤„ç†å‘é€å¤±è´¥çš„æƒ…å†µï¼Œå®Œæˆè¿æ¥</li></ol><p>é€šè¿‡è¿™äº›å…³é”®æ–¹æ³•çš„ç»„åˆï¼Œ<code>DeepSeekServiceImpl</code>å®ç°äº†å®Œæ•´çš„MCPç³»ç»ŸåŠŸèƒ½ï¼ŒåŒ…æ‹¬AIå¯¹è¯ã€å·¥å…·è°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢å’Œæµå¼å“åº”ã€‚</p><h4 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.Generation;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.GenerationParam;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.GenerationResult;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Message;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Role;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.exception.NoApiKeyException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.tools.FunctionDefinition;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.tools.ToolCallFunction;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.tools.ToolFunction;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.service.DeepSeekService;</span><br><span class="line"><span class="keyword">import</span> com.utils.MyBatisToolCall;</span><br><span class="line"><span class="keyword">import</span> com.utils.PackageScanner;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeansException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextAware;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.method.annotation.SseEmitter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeepSeekServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeepSeekService</span>, ApplicationContextAware &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(DeepSeekServiceImpl.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;ai-key&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String aiKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; availableMethodsCache;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">AtomicInteger</span> <span class="variable">eventIdGenerator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MYBATIS_TOOL_NAME</span> <span class="operator">=</span> <span class="string">&quot;query_with_mybatis&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="built_in">this</span>.applicationContext = applicationContext;</span><br><span class="line">        <span class="built_in">this</span>.availableMethodsCache = discoverMapperMethods();</span><br><span class="line">        <span class="keyword">if</span> (availableMethodsCache != <span class="literal">null</span> &amp;&amp; !availableMethodsCache.isEmpty()) &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;æˆåŠŸå‘ç°å¹¶ç¼“å­˜äº† &#123;&#125; ä¸ªMyBatis Mapperæ–¹æ³•ã€‚&quot;</span>, availableMethodsCache.size());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            logger.warn(<span class="string">&quot;æœªèƒ½å‘ç°ä»»ä½•MyBatis Mapperæ–¹æ³•ã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;rawtypes&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; <span class="title function_">discoverMapperMethods</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;String&gt; methodNames = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Map&lt;String, Object&gt; mappers = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mappers.putAll(applicationContext.getBeansWithAnnotation(org.apache.ibatis.annotations.Mapper.class));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BeansException e) &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;æ²¡æœ‰æ‰¾åˆ°å¸¦æœ‰ @Mapper æ³¨è§£çš„ Beansã€‚&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (mappers.isEmpty()) &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;å°è¯•æŸ¥æ‰¾æ‰€æœ‰å®ç° BaseMapper çš„ Beansã€‚&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Map&lt;String, BaseMapper&gt; baseMappers = applicationContext.getBeansOfType(BaseMapper.class);</span><br><span class="line">                mappers.putAll(baseMappers);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                logger.warn(<span class="string">&quot;è·å– BaseMapper ç±»å‹çš„ Beans å¤±è´¥ã€‚&quot;</span>, e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!mappers.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Object mapperProxy : mappers.values()) &#123;</span><br><span class="line">                Class&lt;?&gt;[] interfaces = mapperProxy.getClass().getInterfaces();</span><br><span class="line">                <span class="keyword">for</span> (Class&lt;?&gt; mapperInterface : interfaces) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (mapperInterface.getName().startsWith(<span class="string">&quot;com.dao&quot;</span>)) &#123;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">for</span> (Method method : mapperInterface.getDeclaredMethods()) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (!method.isDefault() &amp;&amp; method.getDeclaringClass() != Object.class) &#123;</span><br><span class="line">                                <span class="type">String</span> <span class="variable">fullMethodName</span> <span class="operator">=</span> mapperInterface.getName() + <span class="string">&quot;.&quot;</span> + method.getName();</span><br><span class="line">                                <span class="type">String</span> <span class="variable">displayName</span> <span class="operator">=</span> fullMethodName;</span><br><span class="line">                                </span><br><span class="line">                                <span class="comment">// æ·»åŠ æ™ºèƒ½æ ‡è®°</span></span><br><span class="line">                                <span class="keyword">if</span> (method.getName().contains(<span class="string">&quot;selectList&quot;</span>)) &#123;</span><br><span class="line">                                    displayName += <span class="string">&quot; âœ…æ¨è-è¿”å›åˆ—è¡¨&quot;</span>;</span><br><span class="line">                                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.getName().contains(<span class="string">&quot;selectView&quot;</span>) || method.getName().contains(<span class="string">&quot;selectVO&quot;</span>)) &#123;</span><br><span class="line">                                    displayName += <span class="string">&quot; âš ï¸å•æ¡è®°å½•&quot;</span>;</span><br><span class="line">                                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.getName().contains(<span class="string">&quot;selectOne&quot;</span>)) &#123;</span><br><span class="line">                                    displayName += <span class="string">&quot; â—å•æ¡è®°å½•-æ…ç”¨&quot;</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                </span><br><span class="line">                                methodNames.add(displayName);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (methodNames.isEmpty()) &#123;</span><br><span class="line">            logger.warn(<span class="string">&quot;æœªèƒ½é€šè¿‡ Spring ä¸Šä¸‹æ–‡å‘ç°ä»»ä½• Mapper æ–¹æ³•ï¼Œå°†å›é€€åˆ°æ–‡ä»¶ç³»ç»Ÿæ‰«ææ¨¡å¼ã€‚&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> PackageScanner.getAvailableMapperMethods(<span class="string">&quot;com.dao&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> methodNames.stream().distinct().collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> SseEmitter <span class="title function_">processQuestion</span><span class="params">(String question)</span> &#123;</span><br><span class="line">        <span class="type">SseEmitter</span> <span class="variable">emitter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SseEmitter</span>(<span class="number">600_000L</span>);</span><br><span class="line"></span><br><span class="line">        emitter.onCompletion(() -&gt; logger.info(<span class="string">&quot;SSEè¿æ¥å·²æ­£å¸¸å®Œæˆ&quot;</span>));</span><br><span class="line">        emitter.onError(e -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (e <span class="keyword">instanceof</span> IOException &amp;&amp; e.getMessage().contains(<span class="string">&quot;ä¸­æ­¢äº†ä¸€ä¸ªå·²å»ºç«‹çš„è¿æ¥&quot;</span>)) &#123;</span><br><span class="line">                logger.debug(<span class="string">&quot;å®¢æˆ·ç«¯ä¸»åŠ¨ä¸­æ–­è¿æ¥&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                logger.error(<span class="string">&quot;SSEè¿æ¥å‘ç”Ÿé”™è¯¯&quot;</span>, e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        emitter.onTimeout(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                sendSseResponse(emitter, <span class="string">&quot;è¯·æ±‚å¤„ç†è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">                logger.debug(<span class="string">&quot;è¶…æ—¶å“åº”å‘é€å¤±è´¥ï¼ˆè¿æ¥å¯èƒ½å·²å…³é—­ï¼‰&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                completeEmitter(emitter);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        executor.execute(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                List&lt;Message&gt; messages = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                messages.add(buildSystemMessage());</span><br><span class="line">                messages.add(buildUserMessage(question));</span><br><span class="line">                processConversation(messages, emitter);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                logger.error(<span class="string">&quot;å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯&quot;</span>, e);</span><br><span class="line">                sendSseResponse(emitter, <span class="string">&quot;å¤„ç†å¤±è´¥: &quot;</span> + e.getMessage());</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                completeEmitter(emitter);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> emitter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processConversation</span><span class="params">(List&lt;Message&gt; messages, SseEmitter emitter)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Generation</span> <span class="variable">gen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Generation</span>();</span><br><span class="line">        <span class="type">GenerationParam</span> <span class="variable">param</span> <span class="operator">=</span> buildGenerationParam(messages);</span><br><span class="line"></span><br><span class="line">        <span class="type">GenerationResult</span> <span class="variable">result</span> <span class="operator">=</span> gen.call(param);</span><br><span class="line">        <span class="type">Message</span> <span class="variable">assistantMessage</span> <span class="operator">=</span> result.getOutput().getChoices().get(<span class="number">0</span>).getMessage();</span><br><span class="line">        messages.add(assistantMessage);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (assistantMessage.getToolCalls() != <span class="literal">null</span> &amp;&amp; !assistantMessage.getToolCalls().isEmpty()) &#123;</span><br><span class="line">            sendSseResponse(emitter, <span class="string">&quot;æ­£åœ¨æŸ¥è¯¢æ•°æ®åº“ï¼Œè¯·ç¨å€™...&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(com.alibaba.dashscope.tools.ToolCallBase toolCall : assistantMessage.getToolCalls()) &#123;</span><br><span class="line">                 <span class="keyword">if</span> (toolCall <span class="keyword">instanceof</span> ToolCallFunction) &#123;</span><br><span class="line">                    <span class="type">ToolCallFunction</span> <span class="variable">functionCall</span> <span class="operator">=</span> (ToolCallFunction) toolCall;</span><br><span class="line">                    <span class="keyword">if</span> (MYBATIS_TOOL_NAME.equals(functionCall.getFunction().getName())) &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">toolCallResult</span> <span class="operator">=</span> executeMyBatisTool(functionCall);</span><br><span class="line">                        <span class="type">Message</span> <span class="variable">toolMessage</span> <span class="operator">=</span> Message.builder()</span><br><span class="line">                                .role(Role.TOOL.getValue())</span><br><span class="line">                                .content(toolCallResult)</span><br><span class="line">                                .toolCallId(functionCall.getId())</span><br><span class="line">                                .build();</span><br><span class="line"></span><br><span class="line">                        logger.info(<span class="string">&quot;æŸ¥è¯¢æ–¹æ³•: &#123;&#125;, ç»“æœ: &#123;&#125;&quot;</span>, functionCall.getFunction().getName(), toolCallResult);</span><br><span class="line">                        messages.add(toolMessage);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            processConversation(messages, emitter);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;æœ€ç»ˆå›ç­”: &#123;&#125;&quot;</span>, assistantMessage.getContent());</span><br><span class="line">            streamAssistantResponse(assistantMessage.getContent(), emitter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Message <span class="title function_">buildSystemMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">systemPrompt</span> <span class="operator">=</span> <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªå…¨èƒ½çš„AIåŠ©æ‰‹ï¼Œå°¤å…¶æ“…é•¿æ ¹æ®ç”¨æˆ·çš„é—®é¢˜ï¼ŒæŸ¥è¯¢æ•°æ®åº“å¹¶ç»™å‡ºç²¾å‡†çš„å›ç­”ã€‚ä½ å¯ä»¥è°ƒç”¨å·¥å…· &quot;</span> + MYBATIS_TOOL_NAME + <span class="string">&quot; æ¥æ‰§è¡ŒMyBatisçš„Mapperæ–¹æ³•ã€‚\n\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;é‡è¦æç¤ºï¼š\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;1. ä¼˜å…ˆä½¿ç”¨è¿”å›Listçš„æ–¹æ³•ï¼Œå¦‚selectListViewã€selectListVOç­‰\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;2. é¿å…ä½¿ç”¨è¿”å›å•æ¡è®°å½•çš„æ–¹æ³•ï¼Œå¦‚selectViewã€selectVOã€selectOneç­‰\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;3. å¦‚æœå¿…é¡»ä½¿ç”¨å•æ¡è®°å½•æ–¹æ³•ï¼Œè¯·ç¡®ä¿æŸ¥è¯¢æ¡ä»¶è¶³å¤Ÿç²¾ç¡®ï¼ˆå¦‚é€šè¿‡ä¸»é”®IDæŸ¥è¯¢ï¼‰\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;4. å¯¹äºæ¨¡ç³ŠæŸ¥è¯¢æˆ–å¯èƒ½è¿”å›å¤šæ¡è®°å½•çš„æƒ…å†µï¼Œå¿…é¡»ä½¿ç”¨Listæ–¹æ³•\n\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;5. è¿”å›ç»“æœå¿…é¡»ä½¿ç”¨æ ‡å‡†Markdownæ ¼å¼ï¼š\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;   - åˆ—è¡¨é¡¹ç”¨ã€- å†…å®¹ã€è¡¨ç¤ºï¼Œæ¯ä¸ªå­—æ®µå ä¸€è¡Œ\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;   - éœ€è¦åŠ ç²—çš„å­—æ®µåç”¨ã€**å­—æ®µå**ã€è¡¨ç¤ºï¼ˆå¦‚**ä¼šå‘˜è´¦å·**ï¼‰\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;   - æ¢è¡Œç”¨\\nï¼ˆä¸è¦ç”¨&lt;br&gt;ï¼‰\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;   - ä¸è¦åŒ…å«ä»»ä½•HTMLæ ‡ç­¾\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;6. è¯·ç»“åˆç”¨æˆ·çš„éœ€æ±‚ï¼Œé€‰æ‹©æœ€åˆé€‚çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œæ˜¾ç¤ºå…³é”®çš„æ•°æ®å³å¯ï¼Œé¿å…è¿”å›å¤§é‡å†—ä½™ä¿¡æ¯ã€‚\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;7. æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ï¼Œåˆç†çš„è¿”å›æ‰€éœ€çš„æ•°æ®ï¼Œä½ ä¸æ˜¯å•çº¯çš„æ•°æ®åº“æŸ¥è¯¢åŠ©æ‰‹ï¼Œä½ å¿…é¡»ä½“ç°çš„æ¯”è¾ƒæ™ºèƒ½ã€‚\n&quot;</span></span><br><span class="line">                + <span class="string">&quot;å¯ç”¨æ–¹æ³•åˆ—è¡¨ï¼š\n&quot;</span></span><br><span class="line">                + <span class="built_in">this</span>.availableMethodsCache.stream()</span><br><span class="line">                    .map(method -&gt; &#123;</span><br><span class="line">                        <span class="keyword">if</span> (method.contains(<span class="string">&quot;selectView&quot;</span>) &amp;&amp; !method.contains(<span class="string">&quot;selectListView&quot;</span>)) &#123;</span><br><span class="line">                            <span class="keyword">return</span> method + <span class="string">&quot; âš ï¸å•æ¡è®°å½•&quot;</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.contains(<span class="string">&quot;selectListView&quot;</span>) || method.contains(<span class="string">&quot;selectListVO&quot;</span>)) &#123;</span><br><span class="line">                            <span class="keyword">return</span> method + <span class="string">&quot; âœ…æ¨è&quot;</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">return</span> method;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    .collect(Collectors.joining(<span class="string">&quot;\n&quot;</span>))</span><br><span class="line">                + <span class="string">&quot;\n\nè¯·æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Message.builder().role(Role.SYSTEM.getValue()).content(systemPrompt).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Message <span class="title function_">buildUserMessage</span><span class="params">(String question)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Message.builder().role(Role.USER.getValue()).content(question).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GenerationParam <span class="title function_">buildGenerationParam</span><span class="params">(List&lt;Message&gt; messages)</span> <span class="keyword">throws</span> NoApiKeyException &#123;</span><br><span class="line">        <span class="type">FunctionDefinition</span> <span class="variable">functionDefinition</span> <span class="operator">=</span> FunctionDefinition.builder()</span><br><span class="line">                .name(MYBATIS_TOOL_NAME)</span><br><span class="line">                .description(<span class="string">&quot;æ‰§è¡Œä¸€ä¸ªMyBatis Mapperæ¥å£ä¸­çš„æ–¹æ³•æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">ToolFunction</span> <span class="variable">myBatisTool</span> <span class="operator">=</span> ToolFunction.builder()</span><br><span class="line">                .function(functionDefinition)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> GenerationParam.builder()</span><br><span class="line">                .model(<span class="string">&quot;qwen-flash&quot;</span>)</span><br><span class="line">                .apiKey(aiKey)</span><br><span class="line">                .messages(messages)</span><br><span class="line">                .resultFormat(GenerationParam.ResultFormat.MESSAGE)</span><br><span class="line">                .tools(Collections.singletonList(myBatisTool))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">executeMyBatisTool</span><span class="params">(ToolCallFunction functionCall)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">arguments</span> <span class="operator">=</span> functionCall.getFunction().getArguments();</span><br><span class="line">            logger.info(<span class="string">&quot;AIå‡†å¤‡è°ƒç”¨MyBatisæ–¹æ³•ï¼Œå‚æ•°: &#123;&#125;&quot;</span>, arguments);</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> MyBatisToolCall.execute(sqlSessionFactory, arguments);</span><br><span class="line">            logger.info(<span class="string">&quot;MyBatisæ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œè¿”å›ç»“æœé•¿åº¦: &#123;&#125;&quot;</span>, result != <span class="literal">null</span> ? result.length() : <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;æ‰§è¡ŒMyBatiså·¥å…·æ—¶å‡ºé”™ï¼Œå‚æ•°: &#123;&#125;&quot;</span>, functionCall.getFunction().getArguments(), e);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;&quot;</span> + e.getMessage() + <span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">streamAssistantResponse</span><span class="params">(String content, SseEmitter emitter)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (content != <span class="literal">null</span> &amp;&amp; !content.isEmpty()) &#123;</span><br><span class="line">            sendSseResponse(emitter, content);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendSseResponse</span><span class="params">(SseEmitter emitter, String data)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">eventId</span> <span class="operator">=</span> eventIdGenerator.incrementAndGet();</span><br><span class="line">            <span class="comment">// åªæ›¿æ¢å¤šä½™çš„ç©ºè¡Œï¼Œä¿ç•™å¿…è¦çš„æ¢è¡Œç»“æ„</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">safeData</span> <span class="operator">=</span> data.replaceAll(<span class="string">&quot;\n&#123;2,&#125;&quot;</span>, <span class="string">&quot;\n&quot;</span>).replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;[NEWLINE]&quot;</span>);</span><br><span class="line">            <span class="comment">// å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰</span></span><br><span class="line">            safeData = safeData.replace(<span class="string">&quot;&amp;&quot;</span>, <span class="string">&quot;&amp;amp;&quot;</span>)</span><br><span class="line">                    .replace(<span class="string">&quot;&lt;&quot;</span>, <span class="string">&quot;&amp;lt;&quot;</span>)</span><br><span class="line">                    .replace(<span class="string">&quot;&gt;&quot;</span>, <span class="string">&quot;&amp;gt;&quot;</span>)</span><br><span class="line">                    .replace(<span class="string">&quot;\&quot;&quot;</span>, <span class="string">&quot;&amp;quot;&quot;</span>)</span><br><span class="line">                    .replace(<span class="string">&quot;&#x27;&quot;</span>, <span class="string">&quot;&amp;#039;&quot;</span>);</span><br><span class="line"></span><br><span class="line">            emitter.send(SseEmitter.event()</span><br><span class="line">                    .id(String.valueOf(eventId))</span><br><span class="line">                    .name(<span class="string">&quot;message&quot;</span>)</span><br><span class="line">                    .data(safeData, MediaType.TEXT_HTML)); <span class="comment">// æ”¹ä¸ºTEXT_HTMLæ›´åˆé€‚</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            logger.debug(<span class="string">&quot;å‘å®¢æˆ·ç«¯å‘é€SSEäº‹ä»¶å¤±è´¥ï¼Œè¿æ¥å¯èƒ½å·²å…³é—­: &#123;&#125;&quot;</span>, e.getMessage());</span><br><span class="line">            completeEmitter(emitter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">completeEmitter</span><span class="params">(SseEmitter emitter)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            emitter.complete();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.debug(<span class="string">&quot;å®ŒæˆSSE Emitteræ—¶å‡ºé”™ï¼ˆå¯èƒ½å·²ç»å®Œæˆæˆ–å…³é—­ï¼‰: &#123;&#125;&quot;</span>, e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å·¥å…·ç±»å®ç°"><a href="#å·¥å…·ç±»å®ç°" class="headerlink" title="å·¥å…·ç±»å®ç°"></a>å·¥å…·ç±»å®ç°</h3><h4 id="MyBatiså·¥å…·ç±»"><a href="#MyBatiså·¥å…·ç±»" class="headerlink" title="MyBatiså·¥å…·ç±»"></a>MyBatiså·¥å…·ç±»</h4><p><code>MyBatisToolCall</code>æ˜¯MCPç³»ç»Ÿçš„æ ¸å¿ƒå·¥å…·ç±»ï¼Œè´Ÿè´£åŠ¨æ€æ‰§è¡ŒMyBatis Mapperæ–¹æ³•ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†æ­¥è®²è§£å…¶å…³é”®æ–¹æ³•ï¼š</p><h5 id="ç±»ç»“æ„ä¸æ ¸å¿ƒæ–¹æ³•"><a href="#ç±»ç»“æ„ä¸æ ¸å¿ƒæ–¹æ³•" class="headerlink" title="ç±»ç»“æ„ä¸æ ¸å¿ƒæ–¹æ³•"></a>ç±»ç»“æ„ä¸æ ¸å¿ƒæ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisToolCall</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(MyBatisToolCall.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰§è¡ŒMyBatis Mapperæ–¹æ³•çš„æ ¸å¿ƒæ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlSessionFactory MyBatisä¼šè¯å·¥å‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arguments AIæ¨¡å‹æä¾›çš„JSONæ ¼å¼å‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> JSONæ ¼å¼çš„æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">execute</span><span class="params">(SqlSessionFactory sqlSessionFactory, String arguments)</span> &#123;</span><br><span class="line">        <span class="comment">// æ–¹æ³•å®ç°...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç±»æä¾›äº†é™æ€æ–¹æ³•<code>execute</code>ï¼Œæ¥æ”¶<code>SqlSessionFactory</code>å’ŒJSONæ ¼å¼çš„å‚æ•°ï¼Œè¿”å›JSONæ ¼å¼çš„æŸ¥è¯¢ç»“æœã€‚</p><h5 id="å‚æ•°è§£æä¸éªŒè¯"><a href="#å‚æ•°è§£æä¸éªŒè¯" class="headerlink" title="å‚æ•°è§£æä¸éªŒè¯"></a>å‚æ•°è§£æä¸éªŒè¯</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">execute</span><span class="params">(SqlSessionFactory sqlSessionFactory, String arguments)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">methodNameWithMapper</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">JsonNode</span> <span class="variable">methodArgsNode</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">        <span class="comment">// 1. è§£æJSONå‚æ•°</span></span><br><span class="line">        <span class="type">JsonNode</span> <span class="variable">argsNode</span> <span class="operator">=</span> objectMapper.readTree(arguments);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. æ”¯æŒä¸¤ç§å‚æ•°æ ¼å¼</span></span><br><span class="line">        <span class="keyword">if</span> (argsNode.has(<span class="string">&quot;methodName&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// æ ¼å¼1: &#123;&quot;methodName&quot;: &quot;HuiyuanDao.selectListView&quot;, &quot;args&quot;: &#123;...&#125;&#125;</span></span><br><span class="line">            methodNameWithMapper = argsNode.get(<span class="string">&quot;methodName&quot;</span>).asText();</span><br><span class="line">            methodArgsNode = argsNode.get(<span class="string">&quot;args&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (argsNode.has(<span class="string">&quot;mapper&quot;</span>) &amp;&amp; argsNode.has(<span class="string">&quot;method&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// æ ¼å¼2: &#123;&quot;mapper&quot;: &quot;HuiyuanDao&quot;, &quot;method&quot;: &quot;selectListView&quot;, &quot;params&quot;: &#123;...&#125;&#125;</span></span><br><span class="line">            methodNameWithMapper = argsNode.get(<span class="string">&quot;mapper&quot;</span>).asText() + <span class="string">&quot;.&quot;</span> + argsNode.get(<span class="string">&quot;method&quot;</span>).asText();</span><br><span class="line">            <span class="keyword">if</span> (argsNode.has(<span class="string">&quot;params&quot;</span>)) &#123;</span><br><span class="line">                methodArgsNode = argsNode.get(<span class="string">&quot;params&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;Invalid arguments format...\&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. éªŒè¯æ–¹æ³•åæ ¼å¼</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lastDotIndex</span> <span class="operator">=</span> methodNameWithMapper.lastIndexOf(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (lastDotIndex == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;Invalid methodName format...\&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åç»­å¤„ç†...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>execute</code>æ–¹æ³•é¦–å…ˆè§£æAIæ¨¡å‹æä¾›çš„JSONå‚æ•°ï¼Œæ”¯æŒä¸¤ç§æ ¼å¼ï¼š</p><ol><li><code>methodName</code>æ ¼å¼ï¼šç›´æ¥æŒ‡å®šå®Œæ•´çš„æ–¹æ³•å</li><li><code>mapper/method</code>æ ¼å¼ï¼šåˆ†åˆ«æŒ‡å®šMapperåå’Œæ–¹æ³•å</li></ol><h5 id="åŠ¨æ€æŸ¥æ‰¾Mapperå’Œæ–¹æ³•"><a href="#åŠ¨æ€æŸ¥æ‰¾Mapperå’Œæ–¹æ³•" class="headerlink" title="åŠ¨æ€æŸ¥æ‰¾Mapperå’Œæ–¹æ³•"></a>åŠ¨æ€æŸ¥æ‰¾Mapperå’Œæ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£æMapperåå’Œæ–¹æ³•å</span></span><br><span class="line"><span class="type">String</span> <span class="variable">mapperIdentifier</span> <span class="operator">=</span> methodNameWithMapper.substring(<span class="number">0</span>, lastDotIndex);</span><br><span class="line"><span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> methodNameWithMapper.substring(lastDotIndex + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾ç›®æ ‡Mapperç±»</span></span><br><span class="line"><span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> sqlSessionFactory.getConfiguration();</span><br><span class="line">Class&lt;?&gt; targetMapper = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">for</span> (Class&lt;?&gt; mapperClass : configuration.getMapperRegistry().getMappers()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (mapperClass.getName().equals(mapperIdentifier) ||</span><br><span class="line">        mapperClass.getSimpleName().equals(mapperIdentifier)) &#123;</span><br><span class="line">        targetMapper = mapperClass;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (targetMapper == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;Mapper &#x27;&quot;</span> + mapperIdentifier + <span class="string">&quot;&#x27; not found.\&quot;&#125;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾ç›®æ ‡æ–¹æ³• - ä¼˜å…ˆé€‰æ‹©å‚æ•°æœ€å°‘çš„æ–¹æ³•</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">targetMethod</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">Method[] methods = targetMapper.getDeclaredMethods();</span><br><span class="line"><span class="type">int</span> <span class="variable">minParamCount</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">    <span class="keyword">if</span> (method.getName().equals(methodName)) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">paramCount</span> <span class="operator">=</span> method.getParameterCount();</span><br><span class="line">        <span class="comment">// ä¼˜å…ˆé€‰æ‹©å‚æ•°æœ€å°‘çš„æ–¹æ³•ï¼Œé¿å…é€‰æ‹©åŒ…å«Paginationçš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">if</span> (paramCount &lt; minParamCount) &#123;</span><br><span class="line">            minParamCount = paramCount;</span><br><span class="line">            targetMethod = method;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å®ç°äº†åŠ¨æ€æŸ¥æ‰¾Mapperç±»å’Œæ–¹æ³•çš„åŠŸèƒ½ï¼š</p><ol><li>ä»æ–¹æ³•åå­—ç¬¦ä¸²ä¸­è§£æå‡ºMapperåå’Œæ–¹æ³•å</li><li>åœ¨MyBatisé…ç½®ä¸­æŸ¥æ‰¾åŒ¹é…çš„Mapperç±»</li><li>åœ¨Mapperç±»ä¸­æŸ¥æ‰¾åŒ¹é…çš„æ–¹æ³•ï¼Œä¼˜å…ˆé€‰æ‹©å‚æ•°æœ€å°‘çš„æ–¹æ³•</li></ol><h5 id="æ–¹æ³•è°ƒç”¨ä¸ç»“æœå¤„ç†"><a href="#æ–¹æ³•è°ƒç”¨ä¸ç»“æœå¤„ç†" class="headerlink" title="æ–¹æ³•è°ƒç”¨ä¸ç»“æœå¤„ç†"></a>æ–¹æ³•è°ƒç”¨ä¸ç»“æœå¤„ç†</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡†å¤‡æ–¹æ³•å‚æ•°</span></span><br><span class="line">Object[] methodArgs = prepareMethodArguments(targetMethod, methodArgsNode);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–Mapperå®ä¾‹å¹¶è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(targetMapper);</span><br><span class="line"><span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> targetMethod.invoke(mapper, methodArgs);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åºåˆ—åŒ–ç»“æœå¹¶è¿”å›</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonResult</span> <span class="operator">=</span> objectMapper.writeValueAsString(result);</span><br><span class="line"><span class="keyword">return</span> jsonResult;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå‡†å¤‡å¥½æ–¹æ³•å‚æ•°åï¼Œé€šè¿‡åå°„è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œå¹¶å°†ç»“æœåºåˆ—åŒ–ä¸ºJSONæ ¼å¼è¿”å›ã€‚</p><h5 id="æ™ºèƒ½é‡è¯•æœºåˆ¶"><a href="#æ™ºèƒ½é‡è¯•æœºåˆ¶" class="headerlink" title="æ™ºèƒ½é‡è¯•æœºåˆ¶"></a>æ™ºèƒ½é‡è¯•æœºåˆ¶</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">retryWithListMethod</span><span class="params">(SqlSessionFactory sqlSessionFactory,</span></span><br><span class="line"><span class="params">                                          String originalMethodNameWithMapper,</span></span><br><span class="line"><span class="params">                                          JsonNode originalArgsNode)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1. æ™ºèƒ½è½¬æ¢æ–¹æ³•å</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">listMethodName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;selectView&quot;</span>)) &#123;</span><br><span class="line">        listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;selectView&quot;</span>, <span class="string">&quot;selectListView&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;selectVO&quot;</span>)) &#123;</span><br><span class="line">        listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;selectVO&quot;</span>, <span class="string">&quot;selectListVO&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;selectOne&quot;</span>)) &#123;</span><br><span class="line">        listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;selectOne&quot;</span>, <span class="string">&quot;selectList&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ... å…¶ä»–è½¬æ¢é€»è¾‘</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. æ·»åŠ æŸ¥è¯¢é™åˆ¶ï¼Œé¿å…è¿”å›è¿‡å¤šæ•°æ®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; methodArgs.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (methodArgs[i] <span class="keyword">instanceof</span> EntityWrapper) &#123;</span><br><span class="line">            EntityWrapper&lt;?&gt; ew = (EntityWrapper&lt;?&gt;) methodArgs[i];</span><br><span class="line">            ew.last(<span class="string">&quot;LIMIT 50&quot;</span>); <span class="comment">// é™åˆ¶æœ€å¤š50æ¡è®°å½•</span></span><br><span class="line">            methodArgs[i] = ew;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. æ‰§è¡Œåˆ—è¡¨æŸ¥è¯¢æ–¹æ³•</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(targetMapper);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> targetMethod.invoke(mapper, methodArgs);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> objectMapper.writeValueAsString(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“å•æ¡æŸ¥è¯¢æ–¹æ³•è¿”å›å¤šæ¡è®°å½•æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡è¯•å¯¹åº”çš„åˆ—è¡¨æŸ¥è¯¢æ–¹æ³•ï¼š</p><ol><li>æ™ºèƒ½è½¬æ¢æ–¹æ³•åï¼ˆå¦‚<code>selectView</code> -&gt; <code>selectListView</code>ï¼‰</li><li>æ·»åŠ æŸ¥è¯¢é™åˆ¶ï¼Œé¿å…è¿”å›è¿‡å¤šæ•°æ®</li><li>æ‰§è¡Œåˆ—è¡¨æŸ¥è¯¢æ–¹æ³•å¹¶è¿”å›ç»“æœ</li></ol><h5 id="æ–¹æ³•å‚æ•°å‡†å¤‡"><a href="#æ–¹æ³•å‚æ•°å‡†å¤‡" class="headerlink" title="æ–¹æ³•å‚æ•°å‡†å¤‡"></a>æ–¹æ³•å‚æ•°å‡†å¤‡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Object[] prepareMethodArguments(Method method, JsonNode argsNode) &#123;</span><br><span class="line">    Parameter[] parameters = method.getParameters();</span><br><span class="line">    Object[] preparedArgs = <span class="keyword">new</span> <span class="title class_">Object</span>[parameters.length];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; parameters.length; i++) &#123;</span><br><span class="line">        <span class="type">Parameter</span> <span class="variable">param</span> <span class="operator">=</span> parameters[i];</span><br><span class="line">        Class&lt;?&gt; paramType = param.getType();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1. è·³è¿‡åˆ†é¡µå‚æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (paramType == com.baomidou.mybatisplus.plugins.pagination.Pagination.class) &#123;</span><br><span class="line">            preparedArgs[i] = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. åˆ›å»ºEntityWrapper</span></span><br><span class="line">        EntityWrapper&lt;?&gt; ew = <span class="keyword">new</span> <span class="title class_">EntityWrapper</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. å¤„ç†æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (argsNode != <span class="literal">null</span> &amp;&amp; argsNode.isObject()) &#123;</span><br><span class="line">            argsNode.fields().forEachRemaining(entry -&gt; &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">                <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue().asText();</span><br><span class="line">                ew.eq(key, value);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        preparedArgs[i] = ew;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> preparedArgs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>prepareMethodArguments</code>æ–¹æ³•è´Ÿè´£å‡†å¤‡æ–¹æ³•è°ƒç”¨æ‰€éœ€çš„å‚æ•°ï¼š</p><ol><li>è·³è¿‡åˆ†é¡µå‚æ•°ï¼ˆæˆ‘ä»¬ä¸ä½¿ç”¨åˆ†é¡µï¼‰</li><li>ä¸ºæ¯ä¸ªå‚æ•°åˆ›å»º<code>EntityWrapper</code>å¯¹è±¡</li><li>å°†JSONä¸­çš„æŸ¥è¯¢æ¡ä»¶æ·»åŠ åˆ°<code>EntityWrapper</code>ä¸­</li></ol><h5 id="å®Œæ•´ä»£ç -1"><a href="#å®Œæ•´ä»£ç -1" class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.mapper.EntityWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.mapper.Wrapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.JsonNode;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.exceptions.TooManyResultsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Parameter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> reisen7</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025-10-03 14:17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> mybatiså·¥å…·ç±»ï¼Œç”¨äºæ‰§è¡Œmybatis mapperæ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisToolCall</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(MyBatisToolCall.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Executes a MyBatis Mapper method based on the arguments provided by the language model.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sqlSessionFactory The SqlSessionFactory to create a SqlSession.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arguments         A JSON string from the model, containing &quot;methodName&quot; and &quot;args&quot;.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> A JSON string representing the result of the method execution.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">execute</span><span class="params">(SqlSessionFactory sqlSessionFactory, String arguments)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodNameWithMapper</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">JsonNode</span> <span class="variable">methodArgsNode</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">argsNode</span> <span class="operator">=</span> objectMapper.readTree(arguments);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (argsNode.has(<span class="string">&quot;methodName&quot;</span>)) &#123;</span><br><span class="line">                methodNameWithMapper = argsNode.get(<span class="string">&quot;methodName&quot;</span>).asText();</span><br><span class="line">                methodArgsNode = argsNode.get(<span class="string">&quot;args&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (argsNode.has(<span class="string">&quot;mapper&quot;</span>) &amp;&amp; argsNode.has(<span class="string">&quot;method&quot;</span>)) &#123;</span><br><span class="line">                methodNameWithMapper = argsNode.get(<span class="string">&quot;mapper&quot;</span>).asText() + <span class="string">&quot;.&quot;</span> + argsNode.get(<span class="string">&quot;method&quot;</span>).asText();</span><br><span class="line">                <span class="comment">// å¯¹äºmapper/methodæ ¼å¼ï¼Œparamså¯èƒ½æ˜¯ç›´æ¥çš„æ¡ä»¶å¯¹è±¡</span></span><br><span class="line">                <span class="keyword">if</span> (argsNode.has(<span class="string">&quot;params&quot;</span>)) &#123;</span><br><span class="line">                    methodArgsNode = argsNode.get(<span class="string">&quot;params&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (methodArgsNode.isObject() &amp;&amp; methodArgsNode.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        logger.info(<span class="string">&quot;æ£€æµ‹åˆ°æŸ¥è¯¢æ¡ä»¶: &#123;&#125;&quot;</span>, methodArgsNode);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    methodArgsNode = <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                logger.error(<span class="string">&quot;Invalid arguments format. &#x27;methodName&#x27; or &#x27;mapper&#x27;/&#x27;method&#x27; is missing: &#123;&#125;&quot;</span>, arguments);</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;Invalid arguments format. &#x27;methodName&#x27; or &#x27;mapper&#x27;/&#x27;method&#x27; is missing.\&quot;&#125;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// methodNameWithMapper çš„æ ¼å¼å¯èƒ½æ˜¯ &quot;HuiyuanDao.selectListView&quot; æˆ– &quot;com.dao.HuiyuanDao.selectListView&quot;</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">lastDotIndex</span> <span class="operator">=</span> methodNameWithMapper.lastIndexOf(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (lastDotIndex == -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;Invalid methodName format. Expected &#x27;MapperName.methodName&#x27;.\&quot;&#125;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="type">String</span> <span class="variable">mapperIdentifier</span> <span class="operator">=</span> methodNameWithMapper.substring(<span class="number">0</span>, lastDotIndex);</span><br><span class="line">            <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> methodNameWithMapper.substring(lastDotIndex + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Find the target mapper class</span></span><br><span class="line">            <span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> sqlSessionFactory.getConfiguration();</span><br><span class="line">            Class&lt;?&gt; targetMapper = <span class="literal">null</span>;</span><br><span class="line">            <span class="comment">// å°è¯•é€šè¿‡å…¨é™å®šåæˆ–ç®€å•åç§°åŒ¹é…</span></span><br><span class="line">            <span class="keyword">for</span> (Class&lt;?&gt; mapperClass : configuration.getMapperRegistry().getMappers()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (mapperClass.getName().equals(mapperIdentifier) || mapperClass.getSimpleName().equals(mapperIdentifier)) &#123;</span><br><span class="line">                    targetMapper = mapperClass;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (targetMapper == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;Mapper &#x27;&quot;</span> + mapperIdentifier + <span class="string">&quot;&#x27; not found.\&quot;&#125;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Find the target method - ä¼˜å…ˆé€‰æ‹©å‚æ•°æœ€å°‘çš„æ–¹æ³•</span></span><br><span class="line">            <span class="type">Method</span> <span class="variable">targetMethod</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            Method[] methods = targetMapper.getDeclaredMethods();</span><br><span class="line">            <span class="type">int</span> <span class="variable">minParamCount</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">                <span class="keyword">if</span> (method.getName().equals(methodName)) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">paramCount</span> <span class="operator">=</span> method.getParameterCount();</span><br><span class="line">                    <span class="comment">// ä¼˜å…ˆé€‰æ‹©å‚æ•°æœ€å°‘çš„æ–¹æ³•ï¼Œé¿å…é€‰æ‹©åŒ…å«Paginationçš„æ–¹æ³•</span></span><br><span class="line">                    <span class="keyword">if</span> (paramCount &lt; minParamCount) &#123;</span><br><span class="line">                        minParamCount = paramCount;</span><br><span class="line">                        targetMethod = method;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (targetMethod == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;Method &#x27;&quot;</span> + methodName + <span class="string">&quot;&#x27; not found in mapper &#x27;&quot;</span> + targetMapper.getSimpleName() + <span class="string">&quot;&#x27;.\&quot;&#125;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Prepare arguments for method invocation</span></span><br><span class="line">            Object[] methodArgs = prepareMethodArguments(targetMethod, methodArgsNode);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Get the mapper instance and invoke the method</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(targetMapper);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> targetMethod.invoke(mapper, methodArgs);</span><br><span class="line"></span><br><span class="line">            logger.info(<span class="string">&quot;MyBatisæ–¹æ³• &#123;&#125; æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›ç»“æœç±»å‹: &#123;&#125;&quot;</span>, methodNameWithMapper,</span><br><span class="line">                       result != <span class="literal">null</span> ? result.getClass().getSimpleName() : <span class="string">&quot;null&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Serialize and return the result</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">jsonResult</span> <span class="operator">=</span> objectMapper.writeValueAsString(result);</span><br><span class="line">            logger.debug(<span class="string">&quot;MyBatisæ–¹æ³• &#123;&#125; è¿”å›JSONæ•°æ®é•¿åº¦: &#123;&#125;&quot;</span>, methodNameWithMapper, jsonResult.length());</span><br><span class="line">            <span class="keyword">return</span> jsonResult;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            <span class="comment">// Check for TooManyResultsException and retry with a list method</span></span><br><span class="line">            <span class="keyword">if</span> (e.getTargetException() <span class="keyword">instanceof</span> TooManyResultsException) &#123;</span><br><span class="line">                logger.warn(<span class="string">&quot;æ–¹æ³• &#123;&#125; è¿”å›å¤šæ¡è®°å½•ï¼Œå‡†å¤‡é‡è¯•åˆ—è¡¨æŸ¥è¯¢: &#123;&#125;&quot;</span>, methodNameWithMapper, e.getTargetException().getMessage());</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> retryWithListMethod(sqlSessionFactory, methodNameWithMapper, methodArgsNode);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception retryException) &#123;</span><br><span class="line">                    logger.error(<span class="string">&quot;é‡è¯•åˆ—è¡¨æŸ¥è¯¢å¤±è´¥: &#123;&#125;&quot;</span>, retryException.getMessage(), retryException);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;æŸ¥è¯¢è¿”å›äº†å¤šæ¡è®°å½•ï¼Œé‡è¯•å¤±è´¥: &quot;</span> + retryException.getMessage() + <span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            logger.error(<span class="string">&quot;æ‰§è¡ŒMyBatisæ–¹æ³• &#123;&#125; å¤±è´¥: &#123;&#125;&quot;</span>, methodNameWithMapper, e.getTargetException().getMessage(), e);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;æ‰§è¡Œå¤±è´¥: &quot;</span> + e.getTargetException().getMessage() + <span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;æ‰§è¡ŒMyBatisæ–¹æ³• &#123;&#125; å‘ç”Ÿé”™è¯¯: &#123;&#125;&quot;</span>, methodNameWithMapper, e.getMessage(), e);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;æ‰§è¡Œé”™è¯¯: &quot;</span> + e.getMessage() + <span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">retryWithListMethod</span><span class="params">(SqlSessionFactory sqlSessionFactory, String originalMethodNameWithMapper, JsonNode originalArgsNode)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">listMethodName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ›´æ™ºèƒ½çš„æ–¹æ³•åè½¬æ¢</span></span><br><span class="line">        <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;selectView&quot;</span>)) &#123;</span><br><span class="line">            listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;selectView&quot;</span>, <span class="string">&quot;selectListView&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;selectVO&quot;</span>)) &#123;</span><br><span class="line">            listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;selectVO&quot;</span>, <span class="string">&quot;selectListVO&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;selectOne&quot;</span>)) &#123;</span><br><span class="line">            listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;selectOne&quot;</span>, <span class="string">&quot;selectList&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;View&quot;</span>)) &#123;</span><br><span class="line">            listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;View&quot;</span>, <span class="string">&quot;ListView&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;One&quot;</span>)) &#123;</span><br><span class="line">            listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;One&quot;</span>, <span class="string">&quot;List&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;æŸ¥è¯¢è¿”å›äº†å¤šæ¡è®°å½•ï¼Œä½†æœªæ‰¾åˆ°å¯¹åº”çš„åˆ—è¡¨æŸ¥è¯¢æ–¹æ³•ã€‚è¯·ä½¿ç”¨è¿”å›Listçš„æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢ã€‚\&quot;&#125;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">&quot;é‡è¯•åˆ—è¡¨æŸ¥è¯¢ - åŸå§‹æ–¹æ³•: &#123;&#125; -&gt; åˆ—è¡¨æ–¹æ³•: &#123;&#125;&quot;</span>, originalMethodNameWithMapper, listMethodName);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">lastDotIndex</span> <span class="operator">=</span> listMethodName.lastIndexOf(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">mapperIdentifier</span> <span class="operator">=</span> listMethodName.substring(<span class="number">0</span>, lastDotIndex);</span><br><span class="line">            <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> listMethodName.substring(lastDotIndex + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> sqlSessionFactory.getConfiguration();</span><br><span class="line">            Class&lt;?&gt; targetMapper = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">for</span> (Class&lt;?&gt; mapperClass : configuration.getMapperRegistry().getMappers()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (mapperClass.getName().equals(mapperIdentifier) || mapperClass.getSimpleName().equals(mapperIdentifier)) &#123;</span><br><span class="line">                    targetMapper = mapperClass;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (targetMapper == <span class="literal">null</span>) &#123;</span><br><span class="line">                logger.error(<span class="string">&quot;é‡è¯•å¤±è´¥ï¼šæœªæ‰¾åˆ°Mapper &#x27;&#123;&#125;&#x27;&quot;</span>, mapperIdentifier);</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;é‡è¯•å¤±è´¥ï¼šæœªæ‰¾åˆ°Mapper &#x27;&quot;</span> + mapperIdentifier + <span class="string">&quot;&#x27;\&quot;&#125;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">Method</span> <span class="variable">targetMethod</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">for</span> (Method method : targetMapper.getDeclaredMethods()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (method.getName().equals(methodName)) &#123;</span><br><span class="line">                    targetMethod = method;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (targetMethod == <span class="literal">null</span>) &#123;</span><br><span class="line">                logger.error(<span class="string">&quot;é‡è¯•å¤±è´¥ï¼šåœ¨Mapper &#x27;&#123;&#125;&#x27; ä¸­æœªæ‰¾åˆ°æ–¹æ³• &#x27;&#123;&#125;&#x27;&quot;</span>, targetMapper.getSimpleName(), methodName);</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;error\&quot;: \&quot;é‡è¯•å¤±è´¥ï¼šåœ¨Mapper &#x27;&quot;</span> + targetMapper.getSimpleName() + <span class="string">&quot;&#x27; ä¸­æœªæ‰¾åˆ°æ–¹æ³• &#x27;&quot;</span> + methodName + <span class="string">&quot;&#x27;\&quot;&#125;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä½¿ç”¨åŸå§‹å‚æ•°ï¼Œç¡®ä¿æŸ¥è¯¢æ¡ä»¶ä¸ä¸¢å¤±</span></span><br><span class="line">            Object[] methodArgs = prepareMethodArguments(targetMethod, originalArgsNode);</span><br><span class="line">            logger.info(<span class="string">&quot;é‡è¯•æ–¹æ³•å‚æ•°: &#123;&#125;&quot;</span>, objectMapper.writeValueAsString(methodArgs));</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æ·»åŠ åˆç†çš„é™åˆ¶ï¼Œé¿å…è¿”å›è¿‡å¤šæ•°æ®</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; methodArgs.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (methodArgs[i] <span class="keyword">instanceof</span> EntityWrapper) &#123;</span><br><span class="line">                    EntityWrapper&lt;?&gt; ew = (EntityWrapper&lt;?&gt;) methodArgs[i];</span><br><span class="line">                    ew.last(<span class="string">&quot;LIMIT 50&quot;</span>); <span class="comment">// é™åˆ¶æœ€å¤š50æ¡è®°å½•</span></span><br><span class="line">                    methodArgs[i] = ew;</span><br><span class="line">                    logger.info(<span class="string">&quot;æ·»åŠ æŸ¥è¯¢é™åˆ¶: LIMIT 50&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (methodArgs[i] == <span class="literal">null</span> &amp;&amp; i &lt; targetMethod.getParameterCount()) &#123;</span><br><span class="line">                    Class&lt;?&gt; paramType = targetMethod.getParameters()[i].getType();</span><br><span class="line">                    <span class="keyword">if</span> (Wrapper.class.isAssignableFrom(paramType)) &#123;</span><br><span class="line">                        EntityWrapper&lt;?&gt; ew = <span class="keyword">new</span> <span class="title class_">EntityWrapper</span>&lt;&gt;();</span><br><span class="line">                        ew.last(<span class="string">&quot;LIMIT 50&quot;</span>);</span><br><span class="line">                        methodArgs[i] = ew;</span><br><span class="line">                        logger.info(<span class="string">&quot;åˆ›å»ºæ–°Wrapperå¹¶æ·»åŠ é™åˆ¶: LIMIT 50&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">Object</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(targetMapper);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> targetMethod.invoke(mapper, methodArgs);</span><br><span class="line">            </span><br><span class="line">            logger.info(<span class="string">&quot;é‡è¯•æ–¹æ³• &#123;&#125; æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›ç»“æœç±»å‹: &#123;&#125;&quot;</span>, listMethodName,</span><br><span class="line">                       result != <span class="literal">null</span> ? result.getClass().getSimpleName() : <span class="string">&quot;null&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> objectMapper.writeValueAsString(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Prepares the arguments for method invocation based on the method&#x27;s parameters and the JSON from the model.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object[] prepareMethodArguments(Method method, JsonNode argsNode) &#123;</span><br><span class="line">        Parameter[] parameters = method.getParameters();</span><br><span class="line">        Object[] preparedArgs = <span class="keyword">new</span> <span class="title class_">Object</span>[parameters.length];</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">&quot;å‡†å¤‡æ–¹æ³•å‚æ•° - æ–¹æ³•: &#123;&#125;.&#123;&#125;ï¼Œå‚æ•°æ•°é‡: &#123;&#125;&quot;</span>,</span><br><span class="line">                   method.getDeclaringClass().getSimpleName(), method.getName(), parameters.length);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; parameters.length; i++) &#123;</span><br><span class="line">            <span class="type">Parameter</span> <span class="variable">param</span> <span class="operator">=</span> parameters[i];</span><br><span class="line">            <span class="type">String</span> <span class="variable">paramName</span> <span class="operator">=</span> param.getName(); <span class="comment">// Fallback</span></span><br><span class="line">            <span class="keyword">if</span> (param.isAnnotationPresent(Param.class)) &#123;</span><br><span class="line">                paramName = param.getAnnotation(Param.class).value();</span><br><span class="line">            &#125;</span><br><span class="line">            Class&lt;?&gt; paramType = param.getType();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ£€æŸ¥æ˜¯å¦ä¸ºåˆ†é¡µå‚æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (paramType == com.baomidou.mybatisplus.plugins.pagination.Pagination.class) &#123;</span><br><span class="line">                preparedArgs[i] = <span class="literal">null</span>;</span><br><span class="line">                logger.info(<span class="string">&quot;å‚æ•°[&#123;&#125;] &#123;&#125;: è·³è¿‡åˆ†é¡µå‚æ•°&quot;</span>, i, paramName);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            EntityWrapper&lt;?&gt; ew = <span class="keyword">new</span> <span class="title class_">EntityWrapper</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (argsNode != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// å¤„ç†ç›´æ¥æ¡ä»¶å¯¹è±¡</span></span><br><span class="line">                <span class="keyword">if</span> (argsNode.isObject() &amp;&amp; !argsNode.has(paramName)) &#123;</span><br><span class="line">                    argsNode.fields().forEachRemaining(entry -&gt; &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">                        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue().asText();</span><br><span class="line">                        ew.eq(key, value);</span><br><span class="line">                        logger.info(<span class="string">&quot;Wrapperæ¡ä»¶: &#123;&#125; = &#123;&#125;&quot;</span>, key, value);</span><br><span class="line">                    &#125;);</span><br><span class="line">                    preparedArgs[i] = ew;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (argsNode.has(paramName)) &#123;</span><br><span class="line">                    <span class="type">JsonNode</span> <span class="variable">argValueNode</span> <span class="operator">=</span> argsNode.get(paramName);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        logger.info(<span class="string">&quot;å‚æ•°[&#123;&#125;] &#123;&#125;: &#123;&#125; -&gt; &#123;&#125;&quot;</span>, i, paramName, argValueNode, paramType.getSimpleName());</span><br><span class="line">                        </span><br><span class="line">                        <span class="keyword">if</span> (paramType.isAssignableFrom(EntityWrapper.class) || paramType.isAssignableFrom(Wrapper.class)) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (argValueNode.isObject() &amp;&amp; argValueNode.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                argValueNode.fields().forEachRemaining(entry -&gt; &#123;</span><br><span class="line">                                    ew.eq(entry.getKey(), entry.getValue().asText());</span><br><span class="line">                                    logger.info(<span class="string">&quot;Wrapperæ¡ä»¶: &#123;&#125; = &#123;&#125;&quot;</span>, entry.getKey(), entry.getValue().asText());</span><br><span class="line">                                &#125;);</span><br><span class="line">                                preparedArgs[i] = ew;</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                preparedArgs[i] = ew;</span><br><span class="line">                                logger.info(<span class="string">&quot;åˆ›å»ºç©ºWrapperå‚æ•°&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            preparedArgs[i] = objectMapper.treeToValue(argValueNode, paramType);</span><br><span class="line">                            logger.info(<span class="string">&quot;å‚æ•°[&#123;&#125;]æ˜ å°„æˆåŠŸ: &#123;&#125; -&gt; &#123;&#125;&quot;</span>, i, argValueNode, paramType.getSimpleName());</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        logger.error(<span class="string">&quot;å‚æ•°[&#123;&#125;]æ˜ å°„å¤±è´¥: &#123;&#125; -&gt; &#123;&#125;&quot;</span>, i, paramName, paramType.getSimpleName(), e);</span><br><span class="line">                        preparedArgs[i] = <span class="literal">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    preparedArgs[i] = ew;</span><br><span class="line">                    logger.info(<span class="string">&quot;å‚æ•°[&#123;&#125;]ä½¿ç”¨é»˜è®¤ç©ºWrapper&quot;</span>, i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                preparedArgs[i] = ew;</span><br><span class="line">                logger.info(<span class="string">&quot;å‚æ•°[&#123;&#125;]ä½¿ç”¨é»˜è®¤ç©ºWrapper&quot;</span>, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰“å°æ‰€æœ‰å‡†å¤‡å¥½çš„å‚æ•°</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; preparedArgs.length; i++) &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;æœ€ç»ˆå‚æ•°[&#123;&#125;]: &#123;&#125; (ç±»å‹: &#123;&#125;)&quot;</span>, i,</span><br><span class="line">                       preparedArgs[i] != <span class="literal">null</span> ? preparedArgs[i].toString() : <span class="string">&quot;null&quot;</span>,</span><br><span class="line">                       preparedArgs[i] != <span class="literal">null</span> ? preparedArgs[i].getClass().getSimpleName() : <span class="string">&quot;null&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> preparedArgs;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åŒ…æ‰«æå·¥å…·ç±»"><a href="#åŒ…æ‰«æå·¥å…·ç±»" class="headerlink" title="åŒ…æ‰«æå·¥å…·ç±»"></a>åŒ…æ‰«æå·¥å…·ç±»</h4><p><code>PackageScanner</code>æ˜¯ä¸€ä¸ªè¾…åŠ©å·¥å…·ç±»ï¼Œç”¨äºåœ¨Springä¸Šä¸‹æ–‡ä¸­æ‰¾ä¸åˆ°Mapperæ—¶ï¼Œé€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ‰«ææ¥å‘ç°Mapperæ–¹æ³•ã€‚</p><h5 id="æ ¸å¿ƒæ‰«ææ–¹æ³•"><a href="#æ ¸å¿ƒæ‰«ææ–¹æ³•" class="headerlink" title="æ ¸å¿ƒæ‰«ææ–¹æ³•"></a>æ ¸å¿ƒæ‰«ææ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PackageScanner</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(PackageScanner.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰«ææŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰Mapperæ¥å£æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> basePackage è¦æ‰«æçš„åŒ…åï¼Œå¦‚&quot;com.dao&quot;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ–¹æ³•ååˆ—è¡¨ï¼Œå¦‚[&quot;com.dao.UserDao.selectById&quot;]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getAvailableMapperMethods</span><span class="params">(String basePackage)</span> &#123;</span><br><span class="line">        List&lt;String&gt; methodNames = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æŸ¥æ‰¾åŒ…ä¸­çš„æ‰€æœ‰æ¥å£</span></span><br><span class="line">            List&lt;Class&lt;?&gt;&gt; mapperInterfaces = findMapperInterfaces(basePackage);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 2. æå–æ¯ä¸ªæ¥å£çš„æ–¹æ³•</span></span><br><span class="line">            <span class="keyword">for</span> (Class&lt;?&gt; mapperClass : mapperInterfaces) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Method method : mapperClass.getDeclaredMethods()) &#123;</span><br><span class="line">                    <span class="comment">// åªæ·»åŠ æ¥å£æœ¬èº«çš„å…¬å…±æ–¹æ³•</span></span><br><span class="line">                    <span class="keyword">if</span> (!method.isDefault() &amp;&amp; method.getDeclaringClass() != Object.class) &#123;</span><br><span class="line">                        methodNames.add(mapperClass.getName() + <span class="string">&quot;.&quot;</span> + method.getName());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;æ‰«æåŒ…å¤±è´¥: &#123;&#125;&quot;</span>, basePackage, e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> methodNames;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦åŠŸèƒ½æ˜¯ï¼š</p><ol><li>æŸ¥æ‰¾æŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰æ¥å£ç±»</li><li>æå–æ¯ä¸ªæ¥å£ä¸­çš„æ–¹æ³•</li><li>è¿”å›å®Œæ•´çš„æ–¹æ³•ååˆ—è¡¨</li></ol><h5 id="æ–‡ä»¶ç³»ç»Ÿæ‰«æå®ç°"><a href="#æ–‡ä»¶ç³»ç»Ÿæ‰«æå®ç°" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿæ‰«æå®ç°"></a>æ–‡ä»¶ç³»ç»Ÿæ‰«æå®ç°</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;Class&lt;?&gt;&gt; findMapperInterfaces(String basePackage)</span><br><span class="line">    <span class="keyword">throws</span> IOException, ClassNotFoundException, URISyntaxException &#123;</span><br><span class="line">    </span><br><span class="line">    List&lt;Class&lt;?&gt;&gt; classes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> basePackage.replace(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> Thread.currentThread().getContextClassLoader();</span><br><span class="line">    Enumeration&lt;URL&gt; resources = classLoader.getResources(path);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (resources.hasMoreElements()) &#123;</span><br><span class="line">        <span class="type">URL</span> <span class="variable">resource</span> <span class="operator">=</span> resources.nextElement();</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;file&quot;</span>.equals(resource.getProtocol())) &#123;</span><br><span class="line">            <span class="type">File</span> <span class="variable">directory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(resource.toURI());</span><br><span class="line">            <span class="keyword">if</span> (directory.exists() &amp;&amp; directory.isDirectory()) &#123;</span><br><span class="line">                File[] files = directory.listFiles();</span><br><span class="line">                <span class="keyword">if</span> (files != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (file.isFile() &amp;&amp; file.getName().endsWith(<span class="string">&quot;.class&quot;</span>)) &#123;</span><br><span class="line">                            <span class="comment">// å°†æ–‡ä»¶åè½¬æ¢ä¸ºç±»å</span></span><br><span class="line">                            <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> basePackage + <span class="string">&#x27;.&#x27;</span> +</span><br><span class="line">                                file.getName().substring(<span class="number">0</span>, file.getName().length() - <span class="number">6</span>);</span><br><span class="line">                            classes.add(Class.forName(className));</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> classes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>findMapperInterfaces</code>æ–¹æ³•å®ç°äº†æ–‡ä»¶ç³»ç»Ÿæ‰«æåŠŸèƒ½ï¼š</p><ol><li>å°†åŒ…åè½¬æ¢ä¸ºæ–‡ä»¶ç³»ç»Ÿè·¯å¾„</li><li>è·å–ç±»åŠ è½½å™¨ä¸­çš„æ‰€æœ‰èµ„æº</li><li>éå†æ–‡ä»¶ç³»ç»Ÿä¸­çš„.classæ–‡ä»¶</li><li>å°†æ–‡ä»¶åè½¬æ¢ä¸ºç±»åå¹¶åŠ è½½ç±»</li></ol><p>è¿™ä¸ªå·¥å…·ç±»ä½œä¸ºå¤‡ç”¨æœºåˆ¶ï¼Œå½“Springä¸Šä¸‹æ–‡ä¸­æ‰¾ä¸åˆ°Mapperæ—¶ï¼Œå¯ä»¥é€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ‰«ææ¥å‘ç°Mapperæ–¹æ³•ï¼Œç¡®ä¿ç³»ç»Ÿçš„å¥å£®æ€§ã€‚</p><h5 id="å®Œæ•´ä»£ç -2"><a href="#å®Œæ•´ä»£ç -2" class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.net.URISyntaxException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> reisen7</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025-10-03 14:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åŒ…æ‰«æå·¥å…·ç±»ï¼Œç”¨äºæ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PackageScanner</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(PackageScanner.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Scans the specified package for interface classes and returns a list of their method names.</span></span><br><span class="line"><span class="comment">     * This is a fallback mechanism.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> basePackage The package to scan, e.g., &quot;com.dao&quot;.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> A list of fully qualified method names, e.g., &quot;com.dao.UserDao.selectById&quot;.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getAvailableMapperMethods</span><span class="params">(String basePackage)</span> &#123;</span><br><span class="line">        List&lt;String&gt; methodNames = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;Class&lt;?&gt;&gt; mapperInterfaces = findMapperInterfaces(basePackage);</span><br><span class="line">            <span class="keyword">for</span> (Class&lt;?&gt; mapperClass : mapperInterfaces) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Method method : mapperClass.getDeclaredMethods()) &#123;</span><br><span class="line">                    <span class="comment">// Ensure we only add public methods of the interface itself</span></span><br><span class="line">                    <span class="keyword">if</span> (!method.isDefault() &amp;&amp; method.getDeclaringClass() != Object.class) &#123;</span><br><span class="line">                        methodNames.add(mapperClass.getName() + <span class="string">&quot;.&quot;</span> + method.getName());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException | URISyntaxException e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;Could not scan package for mapper methods: &#123;&#125;&quot;</span>, basePackage, e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> methodNames;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Finds all classes within a given package.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> basePackage The base package to search.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> A list of Class objects found in the package.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Class&lt;?&gt;&gt; findMapperInterfaces(String basePackage) <span class="keyword">throws</span> IOException, ClassNotFoundException, URISyntaxException &#123;</span><br><span class="line">        List&lt;Class&lt;?&gt;&gt; classes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> basePackage.replace(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> Thread.currentThread().getContextClassLoader();</span><br><span class="line">        Enumeration&lt;URL&gt; resources = classLoader.getResources(path);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (resources.hasMoreElements()) &#123;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">resource</span> <span class="operator">=</span> resources.nextElement();</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;file&quot;</span>.equals(resource.getProtocol())) &#123;</span><br><span class="line">                <span class="type">File</span> <span class="variable">directory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(resource.toURI());</span><br><span class="line">                <span class="keyword">if</span> (directory.exists() &amp;&amp; directory.isDirectory()) &#123;</span><br><span class="line">                    File[] files = directory.listFiles();</span><br><span class="line">                    <span class="keyword">if</span> (files != <span class="literal">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (file.isFile() &amp;&amp; file.getName().endsWith(<span class="string">&quot;.class&quot;</span>)) &#123;</span><br><span class="line">                                <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> basePackage + <span class="string">&#x27;.&#x27;</span> + file.getName().substring(<span class="number">0</span>, file.getName().length() - <span class="number">6</span>);</span><br><span class="line">                                classes.add(Class.forName(className));</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> classes;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å‰ç«¯å®ç°"><a href="#å‰ç«¯å®ç°" class="headerlink" title="å‰ç«¯å®ç°"></a>å‰ç«¯å®ç°</h2><h3 id="å‰ç«¯ç»„ä»¶è¯´æ˜"><a href="#å‰ç«¯ç»„ä»¶è¯´æ˜" class="headerlink" title="å‰ç«¯ç»„ä»¶è¯´æ˜"></a>å‰ç«¯ç»„ä»¶è¯´æ˜</h3><p>å‰ç«¯ä½¿ç”¨Vue.jså®ç°ï¼Œä¸»è¦ç»„ä»¶ä¸º<code>Model.vue</code>ï¼Œè´Ÿè´£ä¸åç«¯SSEæ¥å£äº¤äº’å¹¶å±•ç¤ºAIå›å¤ã€‚</p><h3 id="å®Œæ•´å‰ç«¯ä»£ç "><a href="#å®Œæ•´å‰ç«¯ä»£ç " class="headerlink" title="å®Œæ•´å‰ç«¯ä»£ç "></a>å®Œæ•´å‰ç«¯ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;doubao-chat-container&quot; v-show=&quot;show&quot; @mousemove=&quot;modelMove&quot; @mouseup=&quot;cancelMove&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;doubao-chat-window&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;doubao-header&quot; @mousedown=&quot;setStartingPoint&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;doubao-logo&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;doubao-title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;doubao-close&quot; @click.stop=&quot;cancel&quot;&gt;Ã—&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;doubao-messages&quot; ref=&quot;box&quot;&gt;</span><br><span class="line">                &lt;div v-for=&quot;(item, i) in list&quot; :key=&quot;i&quot;</span><br><span class="line">                    :class=&quot;[&#x27;message&#x27;, item.id == 2 ? &#x27;bot-message&#x27; : &#x27;user-message&#x27;]&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;message-content&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;message-text&quot;&gt;</span><br><span class="line">                            &lt;!-- æœºå™¨äººæ¶ˆæ¯ï¼šæ˜¾ç¤ºé€å­—æ›´æ–°çš„ displayText --&gt;</span><br><span class="line">                            &lt;template v-if=&quot;item.id === 2&quot;&gt;</span><br><span class="line">                                &lt;span v-html=&quot;item.displayText || &#x27;&#x27;&quot;&gt;&lt;/span&gt;</span><br><span class="line">                                &lt;!-- æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨ --&gt;</span><br><span class="line">                                &lt;span</span><br><span class="line">                                    v-if=&quot;item.isTyping &amp;&amp; item.displayText &amp;&amp; item.displayText.length &lt; item.content.length&quot;</span><br><span class="line">                                    class=&quot;typing-cursor&quot;&gt;|&lt;/span&gt;</span><br><span class="line">                            &lt;/template&gt;</span><br><span class="line">                            &lt;!-- ç”¨æˆ·æ¶ˆæ¯ï¼šä»æ˜¾ç¤ºåŸå§‹ content --&gt;</span><br><span class="line">                            &lt;template v-else&gt;</span><br><span class="line">                                &#123;&#123; item.content &#125;&#125;</span><br><span class="line">                            &lt;/template&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;!-- å…¨å±€æ‰“å­—æŒ‡ç¤ºå™¨ --&gt;</span><br><span class="line">                &lt;div v-if=&quot;isTyping&quot; class=&quot;typing-indicator&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;dot&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;dot&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;dot&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;doubao-input-area&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; v-model=&quot;wordone&quot; class=&quot;doubao-input&quot; placeholder=&quot;è¾“å…¥æ¶ˆæ¯...&quot; @keyup.enter=&quot;sendmsg&quot;&gt;</span><br><span class="line">                &lt;button class=&quot;doubao-send-btn&quot; :disabled=&quot;isButtonDisabled&quot; @click=&quot;sendmsg&quot;&gt;</span><br><span class="line">                    &lt;svg viewBox=&quot;0 0 24 24&quot; width=&quot;20&quot; height=&quot;20&quot;&gt;</span><br><span class="line">                        &lt;path fill=&quot;currentColor&quot; d=&quot;M2.01 21L23 12 2.01 3 2 10l15 2-15 2z&quot;&gt;&lt;/path&gt;</span><br><span class="line">                    &lt;/svg&gt;</span><br><span class="line">                &lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    props: &#123;</span><br><span class="line">        show: &#123;</span><br><span class="line">            type: Boolean,</span><br><span class="line">            default: false</span><br><span class="line">        &#125;,</span><br><span class="line">        title: &#123;</span><br><span class="line">            type: String,</span><br><span class="line">            default: &#x27;deepseek&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            x: 0,</span><br><span class="line">            y: 0,</span><br><span class="line">            node: null,</span><br><span class="line">            isCanMove: false,</span><br><span class="line">            isButtonDisabled: false,</span><br><span class="line">            isTyping: false, // å…¨å±€æ‰“å­—çŠ¶æ€</span><br><span class="line">            list: [],</span><br><span class="line">            wordone: &#x27;&#x27;,</span><br><span class="line">            eventSource: null,</span><br><span class="line">            currentBotMessage: null, // å½“å‰æ­£åœ¨æ¥æ”¶çš„æœºå™¨äººæ¶ˆæ¯</span><br><span class="line">            typingTimer: null // é€å­—æ˜¾ç¤ºå®šæ—¶å™¨</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        this.node = document.querySelector(&#x27;.model-container&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        sendmsg() &#123;</span><br><span class="line">            if (this.isButtonDisabled || !this.wordone.trim()) &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // é‡ç½®çŠ¶æ€</span><br><span class="line">            this.resetTypingState();</span><br><span class="line"></span><br><span class="line">            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span><br><span class="line">            this.list.push(&#123;</span><br><span class="line">                id: 1,</span><br><span class="line">                name: &#x27;user&#x27;,</span><br><span class="line">                content: this.wordone.trim()</span><br><span class="line">            &#125;);</span><br><span class="line">            this.scrollToBottom();</span><br><span class="line"></span><br><span class="line">            // å¼€å§‹è·å–æœºå™¨äººå›å¤</span><br><span class="line">            this.getBotContent();</span><br><span class="line"></span><br><span class="line">            this.isButtonDisabled = true;</span><br><span class="line">            this.isTyping = true; // æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨</span><br><span class="line">            this.wordone = &#x27;&#x27;;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        getBotContent() &#123;</span><br><span class="line">            // æ¸…ç†æ—§çš„è¿æ¥</span><br><span class="line">            this.cleanupEventSource();</span><br><span class="line"></span><br><span class="line">            // åˆ›å»ºæ–°çš„æœºå™¨äººæ¶ˆæ¯å¯¹è±¡ï¼ˆåªåˆ›å»ºä¸€ä¸ªï¼‰</span><br><span class="line">            this.currentBotMessage = &#123;</span><br><span class="line">                id: 2,</span><br><span class="line">                name: &#x27;bot&#x27;,</span><br><span class="line">                content: &#x27;&#x27;,</span><br><span class="line">                displayText: &#x27;&#x27;,</span><br><span class="line">                isTyping: true,</span><br><span class="line">                isCompleted: false</span><br><span class="line">            &#125;;</span><br><span class="line">            this.list.push(this.currentBotMessage);</span><br><span class="line"></span><br><span class="line">            // åˆå§‹åŒ–SSEè¿æ¥</span><br><span class="line">            const encodedQuestion = encodeURIComponent(this.wordone);</span><br><span class="line">            this.eventSource = new EventSource(`http://localhost:8080/api/deepSeek/query?question=$&#123;encodedQuestion&#125;`);</span><br><span class="line"></span><br><span class="line">            this.eventSource.onmessage = (event) =&gt; &#123;</span><br><span class="line">                const sseContent = event.data.trim();</span><br><span class="line">                if (!sseContent) return;</span><br><span class="line"></span><br><span class="line">                // ç´¯ç§¯å†…å®¹åˆ°å½“å‰æœºå™¨äººæ¶ˆæ¯</span><br><span class="line">                if (this.currentBotMessage) &#123;</span><br><span class="line">                    this.currentBotMessage.content += sseContent;</span><br><span class="line"></span><br><span class="line">                    // å¦‚æœè¿˜æ²¡æœ‰å¼€å§‹é€å­—æ˜¾ç¤ºï¼Œåˆ™å¼€å§‹</span><br><span class="line">                    if (!this.typingTimer) &#123;</span><br><span class="line">                        this.startTyping();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            this.eventSource.onerror = (error) =&gt; &#123;</span><br><span class="line">                console.error(&#x27;SSEé”™è¯¯:&#x27;, error);</span><br><span class="line">                //this.handleError();</span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            this.eventSource.onclose = () =&gt; &#123;</span><br><span class="line">                console.log(&#x27;SSEè¿æ¥å…³é—­&#x27;);</span><br><span class="line">                //this.handleMessageComplete();</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        startTyping() &#123;</span><br><span class="line">            if (!this.currentBotMessage || this.typingTimer) &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            this.typingTimer = setInterval(() =&gt; &#123;</span><br><span class="line">                if (!this.currentBotMessage) &#123;</span><br><span class="line">                    this.resetTypingState();</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                const fullContent = this.currentBotMessage.content;</span><br><span class="line">                const currentDisplayLength = this.currentBotMessage.displayText.length;</span><br><span class="line"></span><br><span class="line">                if (currentDisplayLength &lt; fullContent.length) &#123;</span><br><span class="line">                    // é€å­—æ˜¾ç¤º</span><br><span class="line">                    this.currentBotMessage.displayText = fullContent.slice(0, currentDisplayLength + 1);</span><br><span class="line">                    this.scrollToBottom();</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    // æ˜¾ç¤ºå®Œæˆ</span><br><span class="line">                    this.currentBotMessage.isTyping = false;</span><br><span class="line">                    this.currentBotMessage.isCompleted = true;</span><br><span class="line">                    this.resetTypingState();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, 30); // è°ƒæ•´æ‰“å­—é€Ÿåº¦ï¼ˆæ¯«ç§’ï¼‰</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        handleMessageComplete() &#123;</span><br><span class="line">            // ç¡®ä¿æ‰€æœ‰å†…å®¹éƒ½æ˜¾ç¤ºå®Œæ¯•</span><br><span class="line">            if (this.currentBotMessage) &#123;</span><br><span class="line">                this.currentBotMessage.displayText = this.currentBotMessage.content;</span><br><span class="line">                this.currentBotMessage.isTyping = false;</span><br><span class="line">                this.currentBotMessage.isCompleted = true;</span><br><span class="line">            &#125;</span><br><span class="line">            this.resetTypingState();</span><br><span class="line">            this.scrollToBottom();</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        handleError() &#123;</span><br><span class="line">            if (this.currentBotMessage) &#123;</span><br><span class="line">                this.currentBotMessage.content = &#x27;æŠ±æ­‰ï¼Œå‘ç”Ÿäº†é”™è¯¯ã€‚è¯·ç¨åé‡è¯•ã€‚&#x27;;</span><br><span class="line">                this.currentBotMessage.displayText = &#x27;æŠ±æ­‰ï¼Œå‘ç”Ÿäº†é”™è¯¯ã€‚è¯·ç¨åé‡è¯•ã€‚&#x27;;</span><br><span class="line">                this.currentBotMessage.isTyping = false;</span><br><span class="line">                this.currentBotMessage.isCompleted = true;</span><br><span class="line">            &#125;</span><br><span class="line">            this.resetTypingState();</span><br><span class="line">            this.scrollToBottom();</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        resetTypingState() &#123;</span><br><span class="line">            // æ¸…ç†å®šæ—¶å™¨</span><br><span class="line">            if (this.typingTimer) &#123;</span><br><span class="line">                clearInterval(this.typingTimer);</span><br><span class="line">                this.typingTimer = null;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // é‡ç½®çŠ¶æ€</span><br><span class="line">            this.isButtonDisabled = false;</span><br><span class="line">            this.isTyping = false;</span><br><span class="line"></span><br><span class="line">            // æ¸…ç†EventSource</span><br><span class="line">            this.cleanupEventSource();</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        cleanupEventSource() &#123;</span><br><span class="line">            if (this.eventSource) &#123;</span><br><span class="line">                this.eventSource.close();</span><br><span class="line">                this.eventSource = null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        scrollToBottom() &#123;</span><br><span class="line">            this.$nextTick(() =&gt; &#123;</span><br><span class="line">                const div = this.$refs.box;</span><br><span class="line">                if (div) &#123;</span><br><span class="line">                    div.scrollTop = div.scrollHeight;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        cancel() &#123;</span><br><span class="line">            this.resetTypingState();</span><br><span class="line">            this.currentBotMessage = null;</span><br><span class="line">            this.$emit(&#x27;cancel&#x27;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        submit() &#123;</span><br><span class="line">            this.$emit(&#x27;submit&#x27;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        setStartingPoint(e) &#123;</span><br><span class="line">            this.x = e.clientX - this.node.offsetLeft;</span><br><span class="line">            this.y = e.clientY - this.node.offsetTop;</span><br><span class="line">            this.isCanMove = true;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        modelMove(e) &#123;</span><br><span class="line">            if (this.isCanMove) &#123;</span><br><span class="line">                this.node.style.left = e.clientX - this.x + &#x27;px&#x27;;</span><br><span class="line">                this.node.style.top = e.clientY - this.y + &#x27;px&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        cancelMove() &#123;</span><br><span class="line">            this.isCanMove = false;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line">        // ç»„ä»¶é”€æ¯æ—¶æ¸…ç†èµ„æº</span><br><span class="line">        this.resetTypingState();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.doubao-chat-container &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    background: rgba(0, 0, 0, 0.5);</span><br><span class="line">    z-index: 1000;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-chat-window &#123;</span><br><span class="line">    width: 400px;</span><br><span class="line">    height: 600px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    border-radius: 16px;</span><br><span class="line">    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Helvetica, Arial, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-header &#123;</span><br><span class="line">    height: 60px;</span><br><span class="line">    background: linear-gradient(135deg, #6e8efb, #a777e3);</span><br><span class="line">    color: white;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    padding: 0 20px;</span><br><span class="line">    cursor: move;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-logo &#123;</span><br><span class="line">    width: 32px;</span><br><span class="line">    height: 32px;</span><br><span class="line">    background-color: white;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    margin-right: 12px;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    color: #6e8efb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-title &#123;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    font-weight: 600;</span><br><span class="line">    flex: 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-close &#123;</span><br><span class="line">    font-size: 24px;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    width: 32px;</span><br><span class="line">    height: 32px;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    transition: background 0.2s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-close:hover &#123;</span><br><span class="line">    background: rgba(255, 255, 255, 0.2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-messages &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    overflow-y: auto;</span><br><span class="line">    background: #f5f7fb;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.message &#123;</span><br><span class="line">    max-width: 80%;</span><br><span class="line">    margin-bottom: 16px;</span><br><span class="line">    display: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.user-message &#123;</span><br><span class="line">    align-self: flex-end;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bot-message &#123;</span><br><span class="line">    align-self: flex-start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.message-content &#123;</span><br><span class="line">    padding: 12px 16px;</span><br><span class="line">    border-radius: 18px;</span><br><span class="line">    line-height: 1.4;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.user-message .message-content &#123;</span><br><span class="line">    background: #6e8efb;</span><br><span class="line">    color: white;</span><br><span class="line">    border-top-right-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.bot-message .message-content &#123;</span><br><span class="line">    background: white;</span><br><span class="line">    color: #333;</span><br><span class="line">    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);</span><br><span class="line">    border-top-left-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.typing-cursor &#123;</span><br><span class="line">    animation: blink 1s infinite;</span><br><span class="line">    color: #6e8efb;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes blink &#123;</span><br><span class="line"></span><br><span class="line">    0%,</span><br><span class="line">    50% &#123;</span><br><span class="line">        opacity: 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    51%,</span><br><span class="line">    100% &#123;</span><br><span class="line">        opacity: 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-input-area &#123;</span><br><span class="line">    padding: 16px;</span><br><span class="line">    border-top: 1px solid #e5e5e5;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    background: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-input &#123;</span><br><span class="line">    flex: 1;</span><br><span class="line">    height: 40px;</span><br><span class="line">    border: 1px solid #e5e5e5;</span><br><span class="line">    border-radius: 20px;</span><br><span class="line">    padding: 0 16px;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    outline: none;</span><br><span class="line">    transition: border 0.2s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-input:focus &#123;</span><br><span class="line">    border-color: #6e8efb;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-send-btn &#123;</span><br><span class="line">    width: 40px;</span><br><span class="line">    height: 40px;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    background: #6e8efb;</span><br><span class="line">    color: white;</span><br><span class="line">    border: none;</span><br><span class="line">    margin-left: 12px;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    transition: background 0.2s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-send-btn:disabled &#123;</span><br><span class="line">    background: #cccccc;</span><br><span class="line">    cursor: not-allowed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-send-btn:not(:disabled):hover &#123;</span><br><span class="line">    background: #5a7df4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.typing-indicator &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    padding: 8px 16px;</span><br><span class="line">    background: white;</span><br><span class="line">    border-radius: 18px;</span><br><span class="line">    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);</span><br><span class="line">    align-self: flex-start;</span><br><span class="line">    margin-top: 8px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dot &#123;</span><br><span class="line">    width: 8px;</span><br><span class="line">    height: 8px;</span><br><span class="line">    background: #a777e3;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    margin: 0 4px;</span><br><span class="line">    animation: bounce 1.4s infinite ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dot:nth-child(1) &#123;</span><br><span class="line">    animation-delay: 0s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dot:nth-child(2) &#123;</span><br><span class="line">    animation-delay: 0.2s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.dot:nth-child(3) &#123;</span><br><span class="line">    animation-delay: 0.4s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes bounce &#123;</span><br><span class="line"></span><br><span class="line">    0%,</span><br><span class="line">    60%,</span><br><span class="line">    100% &#123;</span><br><span class="line">        transform: translateY(0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    30% &#123;</span><br><span class="line">        transform: translateY(-5px);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* æ»šåŠ¨æ¡æ ·å¼ */</span><br><span class="line">.doubao-messages::-webkit-scrollbar &#123;</span><br><span class="line">    width: 6px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-messages::-webkit-scrollbar-track &#123;</span><br><span class="line">    background: #f1f1f1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-messages::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    background: #c1c1c1;</span><br><span class="line">    border-radius: 3px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.doubao-messages::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">    background: #a8a8a8;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="ç³»ç»Ÿå·¥ä½œæµç¨‹"><a href="#ç³»ç»Ÿå·¥ä½œæµç¨‹" class="headerlink" title="ç³»ç»Ÿå·¥ä½œæµç¨‹"></a>ç³»ç»Ÿå·¥ä½œæµç¨‹</h2><h3 id="æ•´ä½“æµç¨‹"><a href="#æ•´ä½“æµç¨‹" class="headerlink" title="æ•´ä½“æµç¨‹"></a>æ•´ä½“æµç¨‹</h3><ol><li><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼šç”¨æˆ·åœ¨å‰ç«¯è¾“å…¥è‡ªç„¶è¯­è¨€æŸ¥è¯¢</li><li><strong>SSEè¿æ¥</strong>ï¼šå‰ç«¯å»ºç«‹ä¸åç«¯çš„SSEè¿æ¥</li><li><strong>AIå¤„ç†</strong>ï¼šåç«¯å°†ç”¨æˆ·é—®é¢˜å‘é€ç»™AIæ¨¡å‹</li><li><strong>å·¥å…·è°ƒç”¨</strong>ï¼šAIæ¨¡å‹å†³å®šè°ƒç”¨MyBatiså·¥å…·æŸ¥è¯¢æ•°æ®åº“</li><li><strong>åŠ¨æ€æ‰§è¡Œ</strong>ï¼š<code>MyBatisToolCall</code>åŠ¨æ€æ‰§è¡ŒMapperæ–¹æ³•</li><li><strong>ç»“æœè¿”å›</strong>ï¼šæŸ¥è¯¢ç»“æœè¿”å›ç»™AIæ¨¡å‹</li><li><strong>æ ¼å¼åŒ–è¾“å‡º</strong>ï¼šAIæ¨¡å‹å°†ç»“æœæ ¼å¼åŒ–ä¸ºè‡ªç„¶è¯­è¨€å›ç­”</li><li><strong>æµå¼å“åº”</strong>ï¼šé€šè¿‡SSEå°†å›ç­”æµå¼è¿”å›ç»™å‰ç«¯</li><li><strong>é€å­—æ˜¾ç¤º</strong>ï¼šå‰ç«¯é€å­—æ˜¾ç¤ºAIå›ç­”</li></ol><h3 id="å…³é”®æŠ€æœ¯ç‚¹"><a href="#å…³é”®æŠ€æœ¯ç‚¹" class="headerlink" title="å…³é”®æŠ€æœ¯ç‚¹"></a>å…³é”®æŠ€æœ¯ç‚¹</h3><h4 id="SSEæµå¼å“åº”"><a href="#SSEæµå¼å“åº”" class="headerlink" title="SSEæµå¼å“åº”"></a>SSEæµå¼å“åº”</h4><p>ä½¿ç”¨Spring Bootçš„<code>SseEmitter</code>å®ç°æœåŠ¡å™¨å‘å®¢æˆ·ç«¯çš„å®æ—¶æ•°æ®æ¨é€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendSseResponse</span><span class="params">(SseEmitter emitter, String data)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">eventId</span> <span class="operator">=</span> eventIdGenerator.incrementAndGet();</span><br><span class="line">        <span class="comment">// å°†æ¢è¡Œç¬¦æ›¿æ¢ä¸º &lt;br&gt;ï¼Œç¡®ä¿ SSE ä¼ è¾“å®‰å…¨ä¸”å‰ç«¯ v-html èƒ½æ­£ç¡®æ¸²æŸ“</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">safeData</span> <span class="operator">=</span> data.replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        emitter.send(SseEmitter.event()</span><br><span class="line">                .id(String.valueOf(eventId))</span><br><span class="line">                .name(<span class="string">&quot;message&quot;</span>)</span><br><span class="line">                .data(safeData, MediaType.TEXT_PLAIN));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;å‘å®¢æˆ·ç«¯å‘é€SSEäº‹ä»¶å¤±è´¥ï¼Œè¿æ¥å¯èƒ½å·²å…³é—­: &#123;&#125;&quot;</span>, e.getMessage());</span><br><span class="line">        completeEmitter(emitter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-2-åŠ¨æ€æ–¹æ³•è°ƒç”¨"><a href="#5-2-2-åŠ¨æ€æ–¹æ³•è°ƒç”¨" class="headerlink" title="5.2.2 åŠ¨æ€æ–¹æ³•è°ƒç”¨"></a>5.2.2 åŠ¨æ€æ–¹æ³•è°ƒç”¨</h4><p>é€šè¿‡åå°„åŠ¨æ€è°ƒç”¨MyBatis Mapperæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Get the mapper instance and invoke the method</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(targetMapper);</span><br><span class="line"><span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> targetMethod.invoke(mapper, methodArgs);</span><br></pre></td></tr></table></figure><h4 id="æ™ºèƒ½é‡è¯•æœºåˆ¶-1"><a href="#æ™ºèƒ½é‡è¯•æœºåˆ¶-1" class="headerlink" title="æ™ºèƒ½é‡è¯•æœºåˆ¶"></a>æ™ºèƒ½é‡è¯•æœºåˆ¶</h4><p>å½“å•æ¡æŸ¥è¯¢è¿”å›å¤šæ¡è®°å½•æ—¶ï¼Œè‡ªåŠ¨é‡è¯•åˆ—è¡¨æŸ¥è¯¢ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">retryWithListMethod</span><span class="params">(SqlSessionFactory sqlSessionFactory, String originalMethodNameWithMapper, JsonNode originalArgsNode)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">listMethodName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ›´æ™ºèƒ½çš„æ–¹æ³•åè½¬æ¢</span></span><br><span class="line">    <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;selectView&quot;</span>)) &#123;</span><br><span class="line">        listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;selectView&quot;</span>, <span class="string">&quot;selectListView&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (originalMethodNameWithMapper.endsWith(<span class="string">&quot;selectVO&quot;</span>)) &#123;</span><br><span class="line">        listMethodName = originalMethodNameWithMapper.replace(<span class="string">&quot;selectVO&quot;</span>, <span class="string">&quot;selectListVO&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ... å…¶ä»–è½¬æ¢é€»è¾‘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²ä¸æµ‹è¯•"><a href="#éƒ¨ç½²ä¸æµ‹è¯•" class="headerlink" title="éƒ¨ç½²ä¸æµ‹è¯•"></a>éƒ¨ç½²ä¸æµ‹è¯•</h2><h3 id="éƒ¨ç½²æ­¥éª¤"><a href="#éƒ¨ç½²æ­¥éª¤" class="headerlink" title="éƒ¨ç½²æ­¥éª¤"></a>éƒ¨ç½²æ­¥éª¤</h3><ol><li><strong>é…ç½®æ•°æ®åº“</strong>ï¼šä¿®æ”¹<code>application.yml</code>ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯</li><li><strong>é…ç½®AIå¯†é’¥</strong>ï¼šåœ¨<code>application.yml</code>ä¸­è®¾ç½®<code>ai-key</code></li></ol><h3 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h3><ol><li><p><strong>ç®€å•æŸ¥è¯¢</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥è¯¢ä¼šå‘˜è´¦å·ä¸º&quot;ä¼šå‘˜1&quot;çš„ä¼šå‘˜ä¿¡æ¯</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ—è¡¨æŸ¥è¯¢</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥è¯¢æ‰€æœ‰ç”·æ€§ä¼šå‘˜çš„ä¿¡æ¯</span><br></pre></td></tr></table></figure></li><li><p><strong>æ¨¡ç³ŠæŸ¥è¯¢</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥è¯¢å§“ååŒ…å«&quot;å¼ &quot;çš„ä¼šå‘˜</span><br></pre></td></tr></table></figure></li></ol><h2 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h2><p><img src="/img/posts/20251003143331.png" alt="image"></p>]]></content>
      
      
      <categories>
          
          <category> è¿›é˜¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•†å“äº¤æ˜“æ™ºèƒ½åˆçº¦è®¾è®¡ä¸å®ç°</title>
      <link href="/2025/08/28/%E5%95%86%E5%93%81%E4%BA%A4%E6%98%93%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/"/>
      <url>/2025/08/28/%E5%95%86%E5%93%81%E4%BA%A4%E6%98%93%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¼ ç»Ÿç”µå­å•†åŠ¡å¹³å°ä¸­ï¼Œäº¤æ˜“è¿‡ç¨‹é€šå¸¸éœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹æœºæ„æ¥ç¡®ä¿å®‰å…¨å’Œä¿¡ä»»ã€‚è€ŒåŒºå—é“¾æŠ€æœ¯çš„å‡ºç°ä¸ºæˆ‘ä»¬æä¾›äº†æ„å»ºå»ä¸­å¿ƒåŒ–å•†å“äº¤æ˜“ç³»ç»Ÿçš„å¯èƒ½æ€§ï¼Œé€šè¿‡æ™ºèƒ½åˆçº¦å¯ä»¥å®ç°è‡ªåŠ¨åŒ–äº¤æ˜“æµç¨‹ï¼Œæ— éœ€ä¸­é—´å•†ä»‹å…¥ï¼Œå¤§å¹…é™ä½äº¤æ˜“æˆæœ¬å¹¶æé«˜æ•ˆç‡ã€‚</p><p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»ä¸€ä¸ªåŸºäºSolidityè¯­è¨€å¼€å‘çš„å•†å“äº¤æ˜“æ™ºèƒ½åˆçº¦ï¼Œè¯¥åˆçº¦å®ç°äº†å•†å“ä¸Šæ¶ã€æ›´æ–°ã€ä¸‹æ¶ã€è®¢å•åˆ›å»ºã€æ”¯ä»˜ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œå¯ä»¥ä½œä¸ºå»ä¸­å¿ƒåŒ–ç”µå­å•†åŠ¡åº”ç”¨çš„åŸºç¡€ã€‚</p><h2 id="æ™ºèƒ½åˆçº¦ä»£ç "><a href="#æ™ºèƒ½åˆçº¦ä»£ç " class="headerlink" title="æ™ºèƒ½åˆçº¦ä»£ç "></a>æ™ºèƒ½åˆçº¦ä»£ç </h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.6.10;</span><br><span class="line"></span><br><span class="line">// å•†å“äº¤æ˜“å¸‚åœºåˆçº¦</span><br><span class="line">contract ProductMarket &#123;</span><br><span class="line">    // å•†å“ç»“æ„ä½“ï¼Œå­˜å‚¨å•†å“çš„æ‰€æœ‰å±æ€§</span><br><span class="line">    struct Product &#123;</span><br><span class="line">        uint256 id;           // å•†å“å”¯ä¸€æ ‡è¯†</span><br><span class="line">        string name;          // å•†å“åç§°</span><br><span class="line">        string description;   // å•†å“æè¿°</span><br><span class="line">        uint256 price;        // å•†å“ä»·æ ¼ï¼ˆå•ä½ï¼šweiï¼‰</span><br><span class="line">        uint256 inventory;    // åº“å­˜æ•°é‡</span><br><span class="line">        address seller;       // å–å®¶åœ°å€</span><br><span class="line">        bool isValid;         // å•†å“æ˜¯å¦æœ‰æ•ˆï¼ˆæœªä¸‹æ¶ï¼‰</span><br><span class="line">        uint256 createTime;   // ä¸Šæ¶æ—¶é—´</span><br><span class="line">        uint256 updateTime;   // æœ€åæ›´æ–°æ—¶é—´</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // è®¢å•ç»“æ„ä½“ï¼Œè®°å½•äº¤æ˜“ä¿¡æ¯</span><br><span class="line">    struct Order &#123;</span><br><span class="line">        uint256 orderId;      // è®¢å•å”¯ä¸€æ ‡è¯†</span><br><span class="line">        uint256 productId;    // å…³è”çš„å•†å“ID</span><br><span class="line">        address buyer;        // ä¹°å®¶åœ°å€</span><br><span class="line">        uint256 quantity;     // è´­ä¹°æ•°é‡</span><br><span class="line">        uint256 totalPrice;   // æ€»ä»·ï¼ˆå•ä½ï¼šweiï¼‰</span><br><span class="line">        uint256 timestamp;    // è®¢å•åˆ›å»ºæ—¶é—´</span><br><span class="line">        bool isPaid;          // æ˜¯å¦å·²æ”¯ä»˜</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // çŠ¶æ€å˜é‡</span><br><span class="line">    mapping(uint256 =&gt; Product) public products; // å•†å“IDåˆ°å•†å“ä¿¡æ¯çš„æ˜ å°„</span><br><span class="line">    mapping(uint256 =&gt; Order) public orders;     // è®¢å•IDåˆ°è®¢å•ä¿¡æ¯çš„æ˜ å°„</span><br><span class="line">    uint256 public productCount;                 // å•†å“æ€»æ•°ï¼ˆåŒæ—¶ä½œä¸ºå•†å“IDç”Ÿæˆå™¨ï¼‰</span><br><span class="line">    uint256 public orderCount;                   // è®¢å•æ€»æ•°ï¼ˆåŒæ—¶ä½œä¸ºè®¢å•IDç”Ÿæˆå™¨ï¼‰</span><br><span class="line">    </span><br><span class="line">    // äº‹ä»¶å®šä¹‰ï¼Œç”¨äºè®°å½•åˆçº¦çŠ¶æ€å˜åŒ–å¹¶é€šçŸ¥å‰ç«¯åº”ç”¨</span><br><span class="line">    event ProductListed(uint256 indexed productId, string name, uint256 price, uint256 inventory, address seller);</span><br><span class="line">    event ProductUpdated(uint256 indexed productId, string name, string description, uint256 price, uint256 inventory, uint256 updateTime);</span><br><span class="line">    event ProductRemoved(uint256 indexed productId);</span><br><span class="line">    event OrderCreated(uint256 indexed orderId, uint256 productId, address buyer, uint256 quantity, uint256 totalPrice);</span><br><span class="line">    event OrderPaid(uint256 indexed orderId, address buyer, uint256 amount);</span><br><span class="line">    </span><br><span class="line">    // ä¸Šæ¶æ–°å•†å“</span><br><span class="line">    function listProduct(string memory _name, string memory _description, uint256 _price, uint256 _inventory) public returns (uint256) &#123;</span><br><span class="line">        require(_price &gt; 0, &quot;ä»·æ ¼å¿…é¡»å¤§äº0&quot;);</span><br><span class="line">        require(_inventory &gt; 0, &quot;åº“å­˜å¿…é¡»å¤§äº0&quot;);</span><br><span class="line">        </span><br><span class="line">        productCount++;</span><br><span class="line">        products[productCount] = Product(</span><br><span class="line">            productCount,</span><br><span class="line">            _name,</span><br><span class="line">            _description,</span><br><span class="line">            _price,</span><br><span class="line">            _inventory,</span><br><span class="line">            msg.sender,</span><br><span class="line">            true,</span><br><span class="line">            block.timestamp,</span><br><span class="line">            block.timestamp</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        emit ProductListed(productCount, _name, _price, _inventory, msg.sender);</span><br><span class="line">        return productCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æ›´æ–°å•†å“ä¿¡æ¯ï¼ˆä»…å–å®¶å¯æ“ä½œï¼‰</span><br><span class="line">    function updateProduct(uint256 _productId, string memory _name, string memory _description, uint256 _price, uint256 _inventory) public &#123;</span><br><span class="line">        Product storage product = products[_productId];</span><br><span class="line">        </span><br><span class="line">        // å®‰å…¨æ£€æŸ¥</span><br><span class="line">        require(product.isValid, &quot;å•†å“ä¸å­˜åœ¨æˆ–å·²ä¸‹æ¶&quot;);</span><br><span class="line">        require(product.seller == msg.sender, &quot;åªæœ‰å–å®¶å¯ä»¥æ›´æ–°å•†å“&quot;);</span><br><span class="line">        require(_price &gt; 0, &quot;ä»·æ ¼å¿…é¡»å¤§äº0&quot;);</span><br><span class="line">        require(_inventory &gt;= 0, &quot;åº“å­˜ä¸èƒ½ä¸ºè´Ÿ&quot;);</span><br><span class="line"></span><br><span class="line">        // æ›´æ–°å•†å“ä¿¡æ¯</span><br><span class="line">        product.name = _name;</span><br><span class="line">        product.description = _description;</span><br><span class="line">        product.price = _price;</span><br><span class="line">        product.inventory = _inventory;</span><br><span class="line">        product.updateTime = block.timestamp;</span><br><span class="line"></span><br><span class="line">        // è§¦å‘æ›´æ–°äº‹ä»¶</span><br><span class="line">        emit ProductUpdated(_productId, _name, _description, _price, _inventory, block.timestamp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ä¸‹æ¶å•†å“ï¼ˆä»…å–å®¶å¯æ“ä½œï¼‰</span><br><span class="line">    function removeProduct(uint256 _productId) public &#123;</span><br><span class="line">        Product storage product = products[_productId];</span><br><span class="line">        require(product.isValid, &quot;å•†å“ä¸å­˜åœ¨&quot;);</span><br><span class="line">        require(product.seller == msg.sender, &quot;åªæœ‰å–å®¶å¯ä»¥ä¸‹æ¶å•†å“&quot;);</span><br><span class="line">        product.isValid = false;</span><br><span class="line">        emit ProductRemoved(_productId);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // åˆ›å»ºè®¢å•</span><br><span class="line">    function createOrder(uint256 _productId, uint256 _quantity) public returns (uint256) &#123;</span><br><span class="line">        require(products[_productId].isValid, &quot;å•†å“ä¸å­˜åœ¨&quot;);</span><br><span class="line">        require(products[_productId].inventory &gt;= _quantity, &quot;åº“å­˜ä¸è¶³&quot;);</span><br><span class="line">        require(_quantity &gt; 0, &quot;è´­ä¹°æ•°é‡å¿…é¡»å¤§äº0&quot;);</span><br><span class="line">        </span><br><span class="line">        Product storage product = products[_productId];</span><br><span class="line">        uint256 totalPrice = product.price * _quantity;</span><br><span class="line">        </span><br><span class="line">        orderCount++;</span><br><span class="line">        orders[orderCount] = Order(</span><br><span class="line">            orderCount,</span><br><span class="line">            _productId,</span><br><span class="line">            msg.sender,</span><br><span class="line">            _quantity,</span><br><span class="line">            totalPrice,</span><br><span class="line">            block.timestamp,</span><br><span class="line">            false</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        // é¢„æ‰£åº“å­˜</span><br><span class="line">        product.inventory -= _quantity;</span><br><span class="line">        </span><br><span class="line">        emit OrderCreated(orderCount, _productId, msg.sender, _quantity, totalPrice);</span><br><span class="line">        return orderCount;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // æ”¯ä»˜è®¢å•</span><br><span class="line">    function payOrder(uint256 _orderId) public payable &#123;</span><br><span class="line">        Order storage order = orders[_orderId];</span><br><span class="line">        </span><br><span class="line">        // å®‰å…¨æ£€æŸ¥</span><br><span class="line">        require(!order.isPaid, &quot;è®¢å•å·²æ”¯ä»˜&quot;);</span><br><span class="line">        require(order.buyer == msg.sender, &quot;åªæœ‰ä¹°å®¶å¯ä»¥æ”¯ä»˜è®¢å•&quot;);</span><br><span class="line">        require(msg.value == order.totalPrice, &quot;æ”¯ä»˜é‡‘é¢ä¸æ­£ç¡®&quot;);</span><br><span class="line">        </span><br><span class="line">        // æ›´æ–°è®¢å•çŠ¶æ€</span><br><span class="line">        order.isPaid = true;</span><br><span class="line">        </span><br><span class="line">        // è½¬è´¦ç»™å–å®¶</span><br><span class="line">        address payable seller = payable(products[order.productId].seller);</span><br><span class="line">        seller.transfer(msg.value);</span><br><span class="line">        </span><br><span class="line">        // è§¦å‘æ”¯ä»˜äº‹ä»¶</span><br><span class="line">        emit OrderPaid(_orderId, msg.sender, msg.value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // æŸ¥è¯¢å•†å“ä¿¡æ¯</span><br><span class="line">    function getProduct(uint256 _productId) public view returns (</span><br><span class="line">        uint256 id,</span><br><span class="line">        string memory name,</span><br><span class="line">        string memory description,</span><br><span class="line">        uint256 price,</span><br><span class="line">        uint256 inventory,</span><br><span class="line">        address seller,</span><br><span class="line">        bool isValid,</span><br><span class="line">        uint256 createTime,</span><br><span class="line">        uint256 updateTime</span><br><span class="line">    ) &#123;</span><br><span class="line">        Product memory product = products[_productId];</span><br><span class="line">        return (</span><br><span class="line">            product.id,</span><br><span class="line">            product.name,</span><br><span class="line">            product.description,</span><br><span class="line">            product.price,</span><br><span class="line">            product.inventory,</span><br><span class="line">            product.seller,</span><br><span class="line">            product.isValid,</span><br><span class="line">            product.createTime,</span><br><span class="line">            product.updateTime</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // æŸ¥è¯¢è®¢å•ä¿¡æ¯</span><br><span class="line">    function getOrder(uint256 _orderId) public view returns (</span><br><span class="line">        uint256 orderId,</span><br><span class="line">        uint256 productId,</span><br><span class="line">        address buyer,</span><br><span class="line">        uint256 quantity,</span><br><span class="line">        uint256 totalPrice,</span><br><span class="line">        uint256 timestamp,</span><br><span class="line">        bool isPaid</span><br><span class="line">    ) &#123;</span><br><span class="line">        Order memory order = orders[_orderId];</span><br><span class="line">        return (</span><br><span class="line">            order.orderId,</span><br><span class="line">            order.productId,</span><br><span class="line">            order.buyer,</span><br><span class="line">            order.quantity,</span><br><span class="line">            order.totalPrice,</span><br><span class="line">            order.timestamp,</span><br><span class="line">            order.isPaid</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆçº¦åŠŸèƒ½è¯¦è§£"><a href="#åˆçº¦åŠŸèƒ½è¯¦è§£" class="headerlink" title="åˆçº¦åŠŸèƒ½è¯¦è§£"></a>åˆçº¦åŠŸèƒ½è¯¦è§£</h2><h3 id="æ•°æ®ç»“æ„è®¾è®¡"><a href="#æ•°æ®ç»“æ„è®¾è®¡" class="headerlink" title="æ•°æ®ç»“æ„è®¾è®¡"></a>æ•°æ®ç»“æ„è®¾è®¡</h3><ol><li><p>**å•†å“ç»“æ„ä½“ (Product)**ï¼š</p><ul><li>åŒ…å«IDã€åç§°ã€æè¿°ã€ä»·æ ¼ã€åº“å­˜ç­‰åŸºæœ¬ä¿¡æ¯</li><li>è®°å½•å•†å“çŠ¶æ€ï¼ˆæ˜¯å¦æœ‰æ•ˆï¼‰å’Œæ—¶é—´ä¿¡æ¯ï¼ˆåˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ï¼‰</li><li>å…³è”å–å®¶åœ°å€ï¼Œå®ç°æƒé™æ§åˆ¶</li></ul></li><li><p>**è®¢å•ç»“æ„ä½“ (Order)**ï¼š</p><ul><li>è®°å½•è®¢å•IDã€å…³è”å•†å“ã€è´­ä¹°æ•°é‡ã€æ€»ä»·ç­‰äº¤æ˜“ä¿¡æ¯</li><li>ä¿å­˜ä¹°å®¶åœ°å€å’Œæ”¯ä»˜çŠ¶æ€ï¼Œç¡®ä¿äº¤æ˜“å®‰å…¨</li></ul></li></ol><h3 id="æ ¸å¿ƒåŠŸèƒ½å®ç°"><a href="#æ ¸å¿ƒåŠŸèƒ½å®ç°" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½å®ç°"></a>æ ¸å¿ƒåŠŸèƒ½å®ç°</h3><ol><li><p><strong>å•†å“ç®¡ç†</strong></p><ul><li>ä¸Šæ¶æ–°å•†å“ (<code>listProduct</code>)ï¼šåˆ›å»ºå¹¶å‘å¸ƒæ–°å•†å“</li><li>æ›´æ–°å•†å“ä¿¡æ¯ (<code>updateProduct</code>)ï¼šä¿®æ”¹ä»·æ ¼ã€æè¿°æˆ–åº“å­˜</li><li>ä¸‹æ¶å•†å“ (<code>removeProduct</code>)ï¼šå°†å•†å“æ ‡è®°ä¸ºæ— æ•ˆ</li></ul></li><li><p><strong>è®¢å•å¤„ç†</strong></p><ul><li>åˆ›å»ºè®¢å• (<code>createOrder</code>)ï¼šé”å®šå•†å“åº“å­˜ï¼Œè®°å½•äº¤æ˜“æ„å‘</li><li>æ”¯ä»˜è®¢å• (<code>payOrder</code>)ï¼šå®Œæˆè´§å¸è½¬ç§»ï¼Œç¡®è®¤äº¤æ˜“å®Œæˆ</li></ul></li><li><p><strong>æŸ¥è¯¢åŠŸèƒ½</strong></p><ul><li>è·å–å•†å“è¯¦æƒ… (<code>getProduct</code>)ï¼šæŸ¥çœ‹å®Œæ•´å•†å“ä¿¡æ¯</li><li>è·å–è®¢å•è¯¦æƒ… (<code>getOrder</code>)ï¼šæŸ¥çœ‹å®Œæ•´è®¢å•ä¿¡æ¯</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŒºå—é“¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoopå®‰è£…</title>
      <link href="/2025/06/29/Hadoop%E5%AE%89%E8%A3%85/"/>
      <url>/2025/06/29/Hadoop%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<p>å‰ææ¡ä»¶å®‰è£…jdk</p><h3 id="é…ç½®hostname"><a href="#é…ç½®hostname" class="headerlink" title="é…ç½®hostname"></a>é…ç½®hostname</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi  /etc/hosts</span><br><span class="line">hostname my.hadoop.cn</span><br></pre></td></tr></table></figure><h3 id="æ–°å»ºç”¨æˆ·hadoop"><a href="#æ–°å»ºç”¨æˆ·hadoop" class="headerlink" title="æ–°å»ºç”¨æˆ·hadoop"></a>æ–°å»ºç”¨æˆ·hadoop</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useradd hadoop</span><br><span class="line">passwd hadoop</span><br><span class="line"><span class="built_in">chmod</span> u + w /etc/sudoers</span><br><span class="line">vim /etc/sudoers</span><br><span class="line"><span class="comment">#åœ¨root ALL=(ALL)ALLä¸‹æ·»åŠ hadoop ALL(ALL)ALL</span></span><br><span class="line"><span class="built_in">chmod</span> u - w /etc/sudoers</span><br></pre></td></tr></table></figure><h3 id="é…ç½®ssh"><a href="#é…ç½®ssh" class="headerlink" title="é…ç½®ssh"></a>é…ç½®ssh</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -P &#x27;&#x27; -f ~/.ssh/id_rsa</span><br><span class="line">cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">chmod 0600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…hadoop"><a href="#å®‰è£…hadoop" class="headerlink" title="å®‰è£…hadoop"></a>å®‰è£…hadoop</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /soft</span><br><span class="line"></span><br><span class="line">tar -zxvf hadoop-3.3.5.tar.gz -C /soft/</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">chown</span> -R hadoop:hadoop /soft/hadoop-3.3.5</span><br></pre></td></tr></table></figure><h3 id="é…ç½®JAVA-HOME"><a href="#é…ç½®JAVA-HOME" class="headerlink" title="é…ç½®JAVA_HOME"></a>é…ç½®JAVA_HOME</h3><p><font style="color:rgb(77, 77, 77);">è¿›å…¥&#x2F;soft&#x2F;hadoop-3.3.5ï¼Œç¼–è¾‘æ–‡ä»¶etc&#x2F;hadoop&#x2F;hadoop-env.shé…ç½®JAVA_HOME</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk1.8.0_231-amd64</span><br></pre></td></tr></table></figure><h3 id="é…ç½®HADOOP-HOME"><a href="#é…ç½®HADOOP-HOME" class="headerlink" title="é…ç½®HADOOP_HOME"></a>é…ç½®HADOOP_HOME</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HADOOP_HOME=/soft/hadoop-3.3.5</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$HADOOP_HOME</span>/bin</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘etc-x2F-hadoop-x2F-core-site-xmlæ–‡ä»¶"><a href="#ç¼–è¾‘etc-x2F-hadoop-x2F-core-site-xmlæ–‡ä»¶" class="headerlink" title="ç¼–è¾‘etc&#x2F;hadoop&#x2F;core-site.xmlæ–‡ä»¶"></a>ç¼–è¾‘etc&#x2F;hadoop&#x2F;core-site.xmlæ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://my.hadoop.cn:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/soft/hadoop-3.3.5/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘etc-x2F-hadoop-x2F-hdfs-site-xmlæ–‡ä»¶"><a href="#ç¼–è¾‘etc-x2F-hadoop-x2F-hdfs-site-xmlæ–‡ä»¶" class="headerlink" title="ç¼–è¾‘etc&#x2F;hadoop&#x2F;hdfs-site.xmlæ–‡ä»¶"></a>ç¼–è¾‘etc&#x2F;hadoop&#x2F;hdfs-site.xmlæ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.webhdfs.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘æ–‡ä»¶etc-x2F-hadoop-x2F-mapred-site-xmlï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®"><a href="#ç¼–è¾‘æ–‡ä»¶etc-x2F-hadoop-x2F-mapred-site-xmlï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®" class="headerlink" title="ç¼–è¾‘æ–‡ä»¶etc&#x2F;hadoop&#x2F;mapred-site.xmlï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®"></a>ç¼–è¾‘æ–‡ä»¶etc&#x2F;hadoop&#x2F;mapred-site.xmlï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘æ–‡ä»¶etc-x2F-hadoop-x2F-yarn-site-xml"><a href="#ç¼–è¾‘æ–‡ä»¶etc-x2F-hadoop-x2F-yarn-site-xml" class="headerlink" title="ç¼–è¾‘æ–‡ä»¶etc&#x2F;hadoop&#x2F;yarn-site.xml"></a>ç¼–è¾‘æ–‡ä»¶etc&#x2F;hadoop&#x2F;yarn-site.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ ¼å¼åŒ–hdfs"><a href="#æ ¼å¼åŒ–hdfs" class="headerlink" title="æ ¼å¼åŒ–hdfs"></a>æ ¼å¼åŒ–hdfs</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs namenode -format</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./start-all.sh</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ hdfsæƒé™"><a href="#æ·»åŠ hdfsæƒé™" class="headerlink" title="æ·»åŠ hdfsæƒé™"></a>æ·»åŠ hdfsæƒé™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -<span class="built_in">chmod</span> 777 /</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¹ç§°åŠ å¯†ï¼ˆAESï¼‰</title>
      <link href="/2025/06/29/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%EF%BC%88AES%EF%BC%89/"/>
      <url>/2025/06/29/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%EF%BC%88AES%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AESUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aes.secret.key&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String secretKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aes.iv&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String iv;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">decrypt</span><span class="params">(String encryptedText)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">IvParameterSpec</span> <span class="variable">ivSpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IvParameterSpec</span>(iv.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="type">SecretKeySpec</span> <span class="variable">skeySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(secretKey.getBytes(StandardCharsets.UTF_8), <span class="string">&quot;AES&quot;</span>);</span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(<span class="string">&quot;AES/CBC/PKCS5PADDING&quot;</span>);</span><br><span class="line">        cipher.init(Cipher.DECRYPT_MODE, skeySpec, ivSpec);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] original = cipher.doFinal(Base64.getDecoder().decode(encryptedText));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>(original, StandardCharsets.UTF_8);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">encrypt</span><span class="params">(String plainText)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">IvParameterSpec</span> <span class="variable">ivSpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IvParameterSpec</span>(iv.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        <span class="type">SecretKeySpec</span> <span class="variable">skeySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(secretKey.getBytes(StandardCharsets.UTF_8), <span class="string">&quot;AES&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> Cipher.getInstance(<span class="string">&quot;AES/CBC/PKCS5PADDING&quot;</span>);</span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, skeySpec, ivSpec);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] encrypted = cipher.doFinal(plainText.getBytes(StandardCharsets.UTF_8));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Base64.getEncoder().encodeToString(encrypted);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pysparkçš„ä½¿ç”¨</title>
      <link href="/2025/06/29/pyspark%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/06/29/pyspark%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="data-csv-ç¤ºä¾‹"><a href="#data-csv-ç¤ºä¾‹" class="headerlink" title="data.csv ç¤ºä¾‹"></a>data.csv ç¤ºä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">å‘˜å·¥ID,éƒ¨é—¨,å·¥ä½œå¹´é™,å­¦å†,æ²Ÿé€šèƒ½åŠ›,å›¢é˜Ÿåä½œ,é—®é¢˜è§£å†³,å­¦ä¹ èƒ½åŠ›,åˆ›æ–°èƒ½åŠ›,èƒ½åŠ›å¾—åˆ†</span><br><span class="line"><span class="number">1</span>,æŠ€æœ¯éƒ¨,<span class="number">1</span>,æœ¬ç§‘,<span class="number">70</span>,<span class="number">80</span>,<span class="number">75</span>,<span class="number">85</span>,<span class="number">60</span>,<span class="number">75</span></span><br><span class="line"><span class="number">2</span>,æŠ€æœ¯éƒ¨,<span class="number">2</span>,æœ¬ç§‘,<span class="number">72</span>,<span class="number">82</span>,<span class="number">77</span>,<span class="number">87</span>,<span class="number">62</span>,<span class="number">77</span></span><br><span class="line"><span class="number">3</span>,æŠ€æœ¯éƒ¨,<span class="number">3</span>,ç¡•å£«,<span class="number">75</span>,<span class="number">85</span>,<span class="number">80</span>,<span class="number">90</span>,<span class="number">65</span>,<span class="number">80</span></span><br><span class="line"><span class="number">4</span>,å¸‚åœºéƒ¨,<span class="number">1</span>,å¤§ä¸“,<span class="number">60</span>,<span class="number">70</span>,<span class="number">65</span>,<span class="number">75</span>,<span class="number">50</span>,<span class="number">65</span></span><br><span class="line"><span class="number">5</span>,å¸‚åœºéƒ¨,<span class="number">2</span>,æœ¬ç§‘,<span class="number">62</span>,<span class="number">72</span>,<span class="number">67</span>,<span class="number">77</span>,<span class="number">52</span>,<span class="number">67</span></span><br><span class="line"><span class="number">6</span>,å¸‚åœºéƒ¨,<span class="number">3</span>,æœ¬ç§‘,<span class="number">65</span>,<span class="number">75</span>,<span class="number">70</span>,<span class="number">80</span>,<span class="number">55</span>,<span class="number">70</span></span><br><span class="line"><span class="number">7</span>,è´¢åŠ¡éƒ¨,<span class="number">1</span>,å¤§ä¸“,<span class="number">65</span>,<span class="number">70</span>,<span class="number">75</span>,<span class="number">80</span>,<span class="number">60</span>,<span class="number">70</span></span><br><span class="line"><span class="number">8</span>,è´¢åŠ¡éƒ¨,<span class="number">2</span>,æœ¬ç§‘,<span class="number">67</span>,<span class="number">72</span>,<span class="number">77</span>,<span class="number">82</span>,<span class="number">62</span>,<span class="number">72</span></span><br><span class="line"><span class="number">9</span>,è´¢åŠ¡éƒ¨,<span class="number">3</span>,æœ¬ç§‘,<span class="number">70</span>,<span class="number">75</span>,<span class="number">80</span>,<span class="number">85</span>,<span class="number">65</span>,<span class="number">75</span></span><br><span class="line"><span class="number">10</span>,äººåŠ›èµ„æºéƒ¨,<span class="number">1</span>,æœ¬ç§‘,<span class="number">70</span>,<span class="number">75</span>,<span class="number">80</span>,<span class="number">85</span>,<span class="number">70</span>,<span class="number">78</span></span><br><span class="line"><span class="number">11</span>,äººåŠ›èµ„æºéƒ¨,<span class="number">2</span>,æœ¬ç§‘,<span class="number">72</span>,<span class="number">77</span>,<span class="number">82</span>,<span class="number">87</span>,<span class="number">72</span>,<span class="number">80</span></span><br><span class="line"><span class="number">12</span>,äººåŠ›èµ„æºéƒ¨,<span class="number">3</span>,ç¡•å£«,<span class="number">75</span>,<span class="number">80</span>,<span class="number">85</span>,<span class="number">90</span>,<span class="number">75</span>,<span class="number">83</span></span><br></pre></td></tr></table></figure><h2 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Author: Reisen7</span></span><br><span class="line"><span class="string">Date: 2025-03-11 18:00:09</span></span><br><span class="line"><span class="string">LastEditTime: 2025-03-11 18:27:20</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> SparkSession</span><br><span class="line"><span class="keyword">import</span> pyspark.sql.functions <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½® HADOOP_HOME å’Œ hadoop.home.dir ç¯å¢ƒå˜é‡</span></span><br><span class="line">os.environ[<span class="string">&quot;HADOOP_HOME&quot;</span>] = os.path.join(BASE_DIR, <span class="string">&quot;hadoop-3.3.5&quot;</span>)</span><br><span class="line">os.environ[<span class="string">&quot;hadoop.home.dir&quot;</span>] = os.path.join(BASE_DIR, <span class="string">&quot;hadoop-3.3.5&quot;</span>)</span><br><span class="line">os.environ[<span class="string">&#x27;PYSPARK_PYTHON&#x27;</span>] = <span class="string">r&#x27;F:/usr/anaconda3/envs/hadoop_env/python.exe&#x27;</span> <span class="comment">#å†™ä½ è‡ªå·±çš„è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»º SparkSession</span></span><br><span class="line">spark = SparkSession.builder \</span><br><span class="line">.appName(<span class="string">&quot;TalentAnalysis&quot;</span>) \</span><br><span class="line">.config(<span class="string">&quot;spark.driver.extraClassPath&quot;</span>, <span class="string">&quot;mysql-connector-java-8.0.32.jar&quot;</span>) \</span><br><span class="line">.config(<span class="string">&quot;spark.executor.extraClassPath&quot;</span>, <span class="string">&quot;mysql-connector-java-8.0.32.jar&quot;</span>) \</span><br><span class="line">.config(<span class="string">&quot;spark.python.executable&quot;</span>, <span class="string">&quot;F:/usr/anaconda3/envs/hadoop_env/python.exe&quot;</span>) \</span><br><span class="line">.getOrCreate()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–æ•°æ®ï¼Œå‡è®¾æ•°æ®ä¸º CSV æ ¼å¼</span></span><br><span class="line">data = spark.read.csv(<span class="string">&quot;data.csv&quot;</span>, header=<span class="literal">True</span>, inferSchema=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®åº“è¿æ¥é…ç½®</span></span><br><span class="line">jdbc_url = <span class="string">&quot;jdbc:mysql://localhost:3306/talent_capability_analysis?useUnicode=true&amp;characterEncoding=utf-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=GMT%2B8&quot;</span></span><br><span class="line">connection_properties = &#123;</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    <span class="string">&quot;driver&quot;</span>: <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. ä¸åŒéƒ¨é—¨å‘˜å·¥å¹³å‡èƒ½åŠ›å¾—åˆ†ï¼ˆæŸ±çŠ¶å›¾ï¼‰</span></span><br><span class="line">department_avg_score = data.groupBy(<span class="string">&quot;éƒ¨é—¨&quot;</span>) \</span><br><span class="line">.agg(F.avg(<span class="string">&quot;èƒ½åŠ›å¾—åˆ†&quot;</span>).alias(<span class="string">&quot;avg_score&quot;</span>))</span><br><span class="line">department_avg_score.write.jdbc(url=jdbc_url, table=<span class="string">&quot;department_avg_score&quot;</span>, mode=<span class="string">&quot;overwrite&quot;</span>, properties=connection_properties)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å‘˜å·¥èƒ½åŠ›å¾—åˆ†éšå·¥ä½œå¹´é™å˜åŒ–ï¼ˆæŠ˜çº¿å›¾ï¼‰</span></span><br><span class="line">score_by_work_years = data.groupBy(<span class="string">&quot;å·¥ä½œå¹´é™&quot;</span>) \</span><br><span class="line">.agg(F.avg(<span class="string">&quot;èƒ½åŠ›å¾—åˆ†&quot;</span>).alias(<span class="string">&quot;avg_score&quot;</span>))</span><br><span class="line">score_by_work_years.write.jdbc(url=jdbc_url, table=<span class="string">&quot;score_by_work_years&quot;</span>, mode=<span class="string">&quot;overwrite&quot;</span>, properties=connection_properties)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ä¸åŒå­¦å†å‘˜å·¥å æ¯”ï¼ˆé¥¼å›¾ï¼‰</span></span><br><span class="line">total_count = data.count()</span><br><span class="line">education_ratio = data.groupBy(<span class="string">&quot;å­¦å†&quot;</span>) \</span><br><span class="line">.agg(F.count(<span class="string">&quot;*&quot;</span>).alias(<span class="string">&quot;count&quot;</span>)) \</span><br><span class="line">.withColumn(<span class="string">&quot;ratio&quot;</span>, F.col(<span class="string">&quot;count&quot;</span>) / total_count) \</span><br><span class="line">.select(<span class="string">&quot;å­¦å†&quot;</span>, <span class="string">&quot;ratio&quot;</span>)</span><br><span class="line">education_ratio.write.jdbc(url=jdbc_url, table=<span class="string">&quot;education_ratio&quot;</span>, mode=<span class="string">&quot;overwrite&quot;</span>, properties=connection_properties)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. å‘˜å·¥å„é¡¹èƒ½åŠ›å¾—åˆ†åˆ†å¸ƒï¼ˆé›·è¾¾å›¾ï¼‰</span></span><br><span class="line">ability_columns = [<span class="string">&quot;æ²Ÿé€šèƒ½åŠ›&quot;</span>, <span class="string">&quot;å›¢é˜Ÿåä½œ&quot;</span>, <span class="string">&quot;é—®é¢˜è§£å†³&quot;</span>, <span class="string">&quot;å­¦ä¹ èƒ½åŠ›&quot;</span>, <span class="string">&quot;åˆ›æ–°èƒ½åŠ›&quot;</span>]</span><br><span class="line">ability_distribution = []</span><br><span class="line"><span class="keyword">for</span> ability <span class="keyword">in</span> ability_columns:</span><br><span class="line">    avg_score = data.agg(F.avg(ability)).collect()[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    ability_distribution.append((ability, avg_score))</span><br><span class="line"></span><br><span class="line">ability_distribution_df = spark.createDataFrame(ability_distribution, [<span class="string">&quot;ability&quot;</span>, <span class="string">&quot;avg_score&quot;</span>])</span><br><span class="line">ability_distribution_df.write.jdbc(url=jdbc_url, table=<span class="string">&quot;ability_distribution&quot;</span>, mode=<span class="string">&quot;overwrite&quot;</span>, properties=connection_properties)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. å‘˜å·¥å·¥ä½œç»éªŒä¸èƒ½åŠ›å¾—åˆ†å…³ç³»ï¼ˆæ•£ç‚¹å›¾ï¼‰</span></span><br><span class="line">experience_score_relation = data.select(<span class="string">&quot;å·¥ä½œå¹´é™&quot;</span>, <span class="string">&quot;èƒ½åŠ›å¾—åˆ†&quot;</span>)</span><br><span class="line">experience_score_relation.write.jdbc(url=jdbc_url, table=<span class="string">&quot;experience_score_relation&quot;</span>, mode=<span class="string">&quot;overwrite&quot;</span>, properties=connection_properties)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. ä¸åŒéƒ¨é—¨å‘˜å·¥èƒ½åŠ›å¾—åˆ†åˆ†å¸ƒï¼ˆç®±çº¿å›¾ï¼‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_boxplot_stats</span>(<span class="params">score_list</span>):</span><br><span class="line">    score_array = np.array(score_list)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="built_in">float</span>(np.<span class="built_in">min</span>(score_array)),</span><br><span class="line">        <span class="built_in">float</span>(np.percentile(score_array, <span class="number">25</span>)),</span><br><span class="line">        <span class="built_in">float</span>(np.percentile(score_array, <span class="number">50</span>)),</span><br><span class="line">        <span class="built_in">float</span>(np.percentile(score_array, <span class="number">75</span>)),</span><br><span class="line">        <span class="built_in">float</span>(np.<span class="built_in">max</span>(score_array))</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">udf_calculate_boxplot_stats = F.udf(calculate_boxplot_stats, <span class="string">&quot;struct&lt;minimum:float,q1:float,median:float,q3:float,maximum:float&gt;&quot;</span>)</span><br><span class="line"></span><br><span class="line">department_score_distribution = data.groupBy(<span class="string">&quot;éƒ¨é—¨&quot;</span>) \</span><br><span class="line">    .agg(F.collect_list(<span class="string">&quot;èƒ½åŠ›å¾—åˆ†&quot;</span>).alias(<span class="string">&quot;score_list&quot;</span>)) \</span><br><span class="line">    .withColumn(<span class="string">&quot;boxplot_stats&quot;</span>, udf_calculate_boxplot_stats(F.col(<span class="string">&quot;score_list&quot;</span>))) \</span><br><span class="line">    .select(<span class="string">&quot;éƒ¨é—¨&quot;</span>,</span><br><span class="line">            F.col(<span class="string">&quot;boxplot_stats.minimum&quot;</span>).alias(<span class="string">&quot;minimum&quot;</span>),</span><br><span class="line">            F.col(<span class="string">&quot;boxplot_stats.q1&quot;</span>).alias(<span class="string">&quot;q1&quot;</span>),</span><br><span class="line">            F.col(<span class="string">&quot;boxplot_stats.median&quot;</span>).alias(<span class="string">&quot;median&quot;</span>),</span><br><span class="line">            F.col(<span class="string">&quot;boxplot_stats.q3&quot;</span>).alias(<span class="string">&quot;q3&quot;</span>),</span><br><span class="line">            F.col(<span class="string">&quot;boxplot_stats.maximum&quot;</span>).alias(<span class="string">&quot;maximum&quot;</span>))</span><br><span class="line"></span><br><span class="line">department_score_distribution.write.jdbc(url=jdbc_url, table=<span class="string">&quot;department_score_distribution&quot;</span>, mode=<span class="string">&quot;overwrite&quot;</span>, properties=connection_properties)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢ SparkSession</span></span><br><span class="line">spark.stop()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå®ç°SHA-256åŠ å¯†</title>
      <link href="/2025/06/29/Java%E5%AE%9E%E7%8E%B0SHA-256%20%E5%8A%A0%E5%AF%86/"/>
      <url>/2025/06/29/Java%E5%AE%9E%E7%8E%B0SHA-256%20%E5%8A%A0%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.utils;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.security.SecureRandom;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author reisen7</span></span><br><span class="line"><span class="comment"> * Date 2025/4/17 22:53</span></span><br><span class="line"><span class="comment"> * Description</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaltedHash</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ç›å€¼å’Œå¯†ç ç”Ÿæˆå“ˆå¸Œï¼Œå¹¶åœ¨å†…éƒ¨ç”Ÿæˆç›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">hashPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="comment">// ç”Ÿæˆéšæœºç›å€¼</span></span><br><span class="line">        <span class="type">byte</span>[] salt = generateSalt(<span class="number">16</span>); <span class="comment">// ç”Ÿæˆ16å­—èŠ‚çš„ç›å€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="type">MessageDigest</span> <span class="variable">md</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            md = MessageDigest.getInstance(<span class="string">&quot;SHA-256&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        md.update(salt); <span class="comment">// æ·»åŠ ç›å€¼</span></span><br><span class="line">        md.update(password.getBytes()); <span class="comment">// æ·»åŠ å¯†ç </span></span><br><span class="line">        <span class="type">byte</span>[] hashedPassword = md.digest();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†ç›å€¼ä¸å“ˆå¸Œå¯†ç ä¸€èµ·è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> Base64.getEncoder().encodeToString(salt) + <span class="string">&quot;:&quot;</span> + Base64.getEncoder().encodeToString(hashedPassword);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆéšæœºç›å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">byte</span>[] generateSalt(<span class="type">int</span> length) &#123;</span><br><span class="line">        <span class="type">SecureRandom</span> <span class="variable">sr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">        <span class="type">byte</span>[] salt = <span class="keyword">new</span> <span class="title class_">byte</span>[length];</span><br><span class="line">        sr.nextBytes(salt);</span><br><span class="line">        <span class="keyword">return</span> salt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯è¾“å…¥çš„å¯†ç </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">verifyPassword</span><span class="params">(String inputPassword, String storedSaltedHashedPassword)</span> &#123;</span><br><span class="line">        <span class="comment">// ä»å­˜å‚¨çš„ç›å€¼å“ˆå¸Œå¯†ç ä¸­æå–ç›å€¼å’Œå“ˆå¸Œå¯†ç </span></span><br><span class="line">        String[] parts = storedSaltedHashedPassword.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">        <span class="type">byte</span>[] salt = Base64.getDecoder().decode(parts[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">String</span> <span class="variable">storedHashedPassword</span> <span class="operator">=</span> parts[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ç›¸åŒçš„ç›å€¼å’Œè¾“å…¥å¯†ç ç”Ÿæˆå“ˆå¸Œ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">hashedInputPassword</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        hashedInputPassword = hashPasswordWithSalt(inputPassword, salt);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¯”è¾ƒç”Ÿæˆçš„å“ˆå¸Œå’Œå­˜å‚¨çš„å“ˆå¸Œ</span></span><br><span class="line">        <span class="keyword">return</span> storedHashedPassword.equals(hashedInputPassword);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ç»™å®šçš„ç›å€¼å’Œå¯†ç ç”Ÿæˆå“ˆå¸Œ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">hashPasswordWithSalt</span><span class="params">(String password, <span class="type">byte</span>[] salt)</span> &#123;</span><br><span class="line">        <span class="type">MessageDigest</span> <span class="variable">md</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            md = MessageDigest.getInstance(<span class="string">&quot;SHA-256&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        md.update(salt); <span class="comment">// æ·»åŠ ç›å€¼</span></span><br><span class="line">        md.update(password.getBytes()); <span class="comment">// æ·»åŠ å¯†ç </span></span><br><span class="line">        <span class="type">byte</span>[] hashedPassword = md.digest();</span><br><span class="line">        <span class="keyword">return</span> Base64.getEncoder().encodeToString(hashedPassword); <span class="comment">// è¿”å› Base64 ç¼–ç çš„å“ˆå¸Œå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”Ÿæˆç›å€¼å“ˆå¸Œå¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">saltedHashedPassword</span> <span class="operator">=</span> hashPassword(password);</span><br><span class="line">        System.out.println(<span class="string">&quot;Salted Hashed Password: &quot;</span> + saltedHashedPassword);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éªŒè¯å¯†ç ç¤ºä¾‹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">passwordToVerify</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>; <span class="comment">// ç”¨æˆ·è¾“å…¥çš„å¯†ç </span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isPasswordValid</span> <span class="operator">=</span> verifyPassword(passwordToVerify, saltedHashedPassword);</span><br><span class="line">        System.out.println(<span class="string">&quot;Password verification: &quot;</span> + isPasswordValid);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æµ‹è¯•ä¸€ä¸ªæ— æ•ˆçš„å¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">wrongPassword</span> <span class="operator">=</span> <span class="string">&quot;wrongPassword&quot;</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isWrongPasswordValid</span> <span class="operator">=</span> verifyPassword(wrongPassword, saltedHashedPassword);</span><br><span class="line">        System.out.println(<span class="string">&quot;Wrong password verification: &quot;</span> + isWrongPasswordValid);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé‚®ä»¶éªŒè¯</title>
      <link href="/2025/06/29/Java%E9%82%AE%E4%BB%B6%E9%AA%8C%E8%AF%81/"/>
      <url>/2025/06/29/Java%E9%82%AE%E4%BB%B6%E9%AA%8C%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<p>æ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é‚®ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># é‚®ä»¶é…ç½®</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">Reisen7@163.com</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">TJqip9ditF9zHx8Q</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.163.com</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">465</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">mail:</span></span><br><span class="line">        <span class="attr">smtp:</span></span><br><span class="line">          <span class="attr">auth:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">starttls:</span></span><br><span class="line">            <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">required:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">socketFactory:</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">465</span></span><br><span class="line">            <span class="attr">class:</span> <span class="string">javax.net.ssl.SSLSocketFactory</span></span><br><span class="line">            <span class="attr">fallback:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">valid:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&quot;è€å¹´äººå¥åº·ç§‘æ™®ä¿¡æ¯ç³»ç»Ÿ - ç”¨æˆ·è®¤è¯&quot;</span></span><br><span class="line">    <span class="attr">template:</span> <span class="string">&quot;æ‚¨çš„åŠ¨æ€éªŒè¯ç ä¸ºï¼š&lt;strong style=&#x27;color: red&#x27;&gt;%s&lt;/strong&gt;ï¼Œ%dåˆ†é’Ÿå†…æœ‰æ•ˆï¼Œè‹¥éæœ¬äººæ“ä½œï¼Œè¯·å‹¿æ³„éœ²ã€‚&quot;</span></span><br></pre></td></tr></table></figure><p>åç«¯å‘éªŒè¯ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.shanzhu.purchase.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.core.util.RandomUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSenderImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.MimeMessageHelper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.mail.MessagingException;</span><br><span class="line"><span class="keyword">import</span> javax.mail.internet.MimeMessage;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author Reisen7</span></span><br><span class="line"><span class="comment"> * Date 2025/3/16 17:29</span></span><br><span class="line"><span class="comment"> * description</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmailClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSenderImpl mailSender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€æ–¹é‚®ç®±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æœ‰æ•ˆæ—¶é•¿</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.valid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer valid;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†…å®¹æ¨¡ç‰ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.template&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String template;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ‡é¢˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.title&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€é‚®ä»¶éªŒè¯ç </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> targetEmail ç›®æ ‡é‚®ç®±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> éªŒè¯ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendEmailCode</span><span class="params">(String targetEmail)</span> &#123;</span><br><span class="line">        <span class="comment">// ç”ŸæˆéšæœºéªŒè¯ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">verifyCode</span> <span class="operator">=</span> RandomUtil.randomNumbers(<span class="number">6</span>);</span><br><span class="line">        <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> mailSender.createMimeMessage();</span><br><span class="line">        <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            helper.setSubject(title);</span><br><span class="line">            helper.setText(String.format(template, verifyCode, valid), <span class="literal">true</span>);</span><br><span class="line">            helper.setFrom(email);</span><br><span class="line">            helper.setTo(targetEmail);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MessagingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        mailSender.send(mimeMessage);</span><br><span class="line">        <span class="keyword">return</span> verifyCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€é‚®ç®±</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> targetEmail ç›®æ ‡é‚®ç®±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content     å‘é€å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendEmail</span><span class="params">(String targetEmail, String title, String content)</span> &#123;</span><br><span class="line">        <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> mailSender.createMimeMessage();</span><br><span class="line">        <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            helper.setSubject(title);</span><br><span class="line">            helper.setText(content, <span class="literal">true</span>);</span><br><span class="line">            helper.setFrom(email);</span><br><span class="line">            helper.setTo(targetEmail);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MessagingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        mailSender.send(mimeMessage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>rediså­˜éªŒè¯ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.shanzhu.purchase.service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author Reisen7</span></span><br><span class="line"><span class="comment"> * Date 2025/3/16 18:31</span></span><br><span class="line"><span class="comment"> * description</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisCodeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­˜å‚¨éªŒè¯ç åˆ° Redis å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key å­˜å‚¨çš„é”®ï¼Œé€šå¸¸ä¸ºä¸éªŒè¯ç å…³è”çš„æ ‡è¯†ï¼Œå¦‚æ‰‹æœºå·ã€é‚®ç®±ç­‰</span></span><br><span class="line"><span class="comment">     *å¦‚æ‰‹æœºå·ã€é‚®ç®±ç­‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code éªŒè¯ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveCodeToRedis</span><span class="params">(String key, String code)</span> &#123;</span><br><span class="line">        <span class="comment">// å°†éªŒè¯ç å­˜å‚¨åˆ° Redis ä¸­ï¼Œå¹¶è®¾ç½® 60 ç§’çš„è¿‡æœŸæ—¶é—´</span></span><br><span class="line">        redisTemplate.opsForValue().set(key, code, <span class="number">60</span>, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä» Redis ä¸­è·å–éªŒè¯ç å¹¶éªŒè¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key å­˜å‚¨çš„é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inputCode ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦éªŒè¯æˆåŠŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">verifyCodeFromRedis</span><span class="params">(String key, String inputCode)</span> &#123;</span><br><span class="line">        <span class="comment">// ä» Redis ä¸­è·å–å­˜å‚¨çš„éªŒè¯ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">storedCode</span> <span class="operator">=</span> redisTemplate.opsForValue().get(key);</span><br><span class="line">        System.out.println(<span class="string">&quot;=============================&quot;</span>);</span><br><span class="line">        System.out.println(storedCode);</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å­˜å‚¨çš„éªŒè¯ç æ˜¯å¦å­˜åœ¨ä¸”ä¸ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç ä¸€è‡´</span></span><br><span class="line">        <span class="keyword">return</span> storedCode != <span class="literal">null</span> &amp;&amp; storedCode.equals(inputCode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hiveå®‰è£…</title>
      <link href="/2025/06/29/Hive%E5%AE%89%E8%A3%85/"/>
      <url>/2025/06/29/Hive%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="MYSQLå®‰è£…"><a href="#MYSQLå®‰è£…" class="headerlink" title="MYSQLå®‰è£…"></a>MYSQLå®‰è£…</h2><p>è¯¦ç»†çœ‹mysqlå®‰è£…çš„ç« èŠ‚</p><h2 id="æ·»åŠ hiveç”¨æˆ·"><a href="#æ·»åŠ hiveç”¨æˆ·" class="headerlink" title="æ·»åŠ hiveç”¨æˆ·"></a>æ·»åŠ hiveç”¨æˆ·</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE hive;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;hiveuser&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;hivepassword&#x27;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> hive.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;hiveuser&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Hiveå®‰è£…"><a href="#Hiveå®‰è£…" class="headerlink" title="Hiveå®‰è£…"></a>Hiveå®‰è£…</h2><h3 id="å®‰è£…åŒ…ä¸‹è½½"><a href="#å®‰è£…åŒ…ä¸‹è½½" class="headerlink" title="å®‰è£…åŒ…ä¸‹è½½"></a>å®‰è£…åŒ…ä¸‹è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --user-agent=<span class="string">&quot;Mozilla&quot;</span> https://mirrors.tuna.tsinghua.edu.cn/apache/hive/hive-4.0.1/apache-hive-4.0.1-bin.tar.gz</span><br></pre></td></tr></table></figure><h3 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf apache-hive-4.0.1-bin.tar.gz</span><br></pre></td></tr></table></figure><h3 id="åˆ°hiveçš„confæ–‡ä»¶å¤¹ä¸‹é¢"><a href="#åˆ°hiveçš„confæ–‡ä»¶å¤¹ä¸‹é¢" class="headerlink" title="åˆ°hiveçš„confæ–‡ä»¶å¤¹ä¸‹é¢"></a>åˆ°hiveçš„confæ–‡ä»¶å¤¹ä¸‹é¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim hive-site.xml</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/xsl&quot;</span> href=<span class="string">&quot;configuration.xsl&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- jdbcè¿æ¥çš„URL --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://localhost:3306/hive?useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- jdbcè¿æ¥çš„Driver--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- jdbcè¿æ¥çš„username--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- jdbcè¿æ¥çš„password --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Hiveé»˜è®¤åœ¨HDFSçš„å·¥ä½œç›®å½• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Hiveå…ƒæ•°æ®å­˜å‚¨çš„éªŒè¯ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.schema.verification<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- å…ƒæ•°æ®å­˜å‚¨æˆæƒ  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.event.db.notification.api.auth<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æŒ‡å®šå­˜å‚¨å…ƒæ•°æ®è¦è¿æ¥çš„åœ°å€ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.uris<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://localhost:9083<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æŒ‡å®šhiveserver2è¿æ¥çš„host --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.bind.host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>localhost<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- æŒ‡å®šhiveserver2è¿æ¥çš„ç«¯å£å· --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.port<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>10000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½mysql-jdbcåŒ…æŠŠå®ƒå¤åˆ¶åˆ°hive-x2F-libç›®å½•ä¸‹"><a href="#ä¸‹è½½mysql-jdbcåŒ…æŠŠå®ƒå¤åˆ¶åˆ°hive-x2F-libç›®å½•ä¸‹" class="headerlink" title="ä¸‹è½½mysql jdbcåŒ…æŠŠå®ƒå¤åˆ¶åˆ°hive&#x2F;libç›®å½•ä¸‹"></a>ä¸‹è½½mysql jdbcåŒ…æŠŠå®ƒå¤åˆ¶åˆ°hive&#x2F;libç›®å½•ä¸‹</h3><h2 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line">export HIVE_HOME=/opt/apps/hive-3.1.2</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/sbin:$HADOOP_HOME/bin:$FLINK_HOME/bin:$HIVE_HOME/bin</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ"><a href="#é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ" class="headerlink" title="é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ"></a>é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h2 id="HIVEåˆå§‹åŒ–å…ƒæ•°æ®"><a href="#HIVEåˆå§‹åŒ–å…ƒæ•°æ®" class="headerlink" title="HIVEåˆå§‹åŒ–å…ƒæ•°æ®"></a>HIVEåˆå§‹åŒ–å…ƒæ•°æ®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">schematool -initSchema -dbType mysql -verbos</span><br></pre></td></tr></table></figure><h2 id="HIVEå¯åŠ¨"><a href="#HIVEå¯åŠ¨" class="headerlink" title="HIVEå¯åŠ¨"></a>HIVEå¯åŠ¨</h2><h3 id="å¯åŠ¨hiveçš„æœåŠ¡-metastore"><a href="#å¯åŠ¨hiveçš„æœåŠ¡-metastore" class="headerlink" title="å¯åŠ¨hiveçš„æœåŠ¡: metastore"></a>å¯åŠ¨hiveçš„æœåŠ¡: metastore</h3><p>å‰å°å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive --service metastore</span><br></pre></td></tr></table></figure><p>åå°å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> hive --service metastore &amp;</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨hiveçš„æœåŠ¡-hiveserver2æœåŠ¡"><a href="#å¯åŠ¨hiveçš„æœåŠ¡-hiveserver2æœåŠ¡" class="headerlink" title="å¯åŠ¨hiveçš„æœåŠ¡: hiveserver2æœåŠ¡"></a>å¯åŠ¨hiveçš„æœåŠ¡: hiveserver2æœåŠ¡</h3><p>å‰å°å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive --service hiveserver2</span><br></pre></td></tr></table></figure><p>åå°å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> hive --service hiveserver2 &amp;</span><br></pre></td></tr></table></figure><h2 id="æœ¬åœ°è¿æ¥"><a href="#æœ¬åœ°è¿æ¥" class="headerlink" title="æœ¬åœ°è¿æ¥"></a>æœ¬åœ°è¿æ¥</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive</span><br></pre></td></tr></table></figure><h2 id="å¼€é˜²ç«å¢™"><a href="#å¼€é˜²ç«å¢™" class="headerlink" title="å¼€é˜²ç«å¢™"></a>å¼€é˜²ç«å¢™</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=9083/tcp --permanent</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å°ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå®ç°é«˜å¾·åœ°å›¾æ ‡ç‚¹</title>
      <link href="/2025/06/29/Vue%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E6%A0%87%E7%82%B9/"/>
      <url>/2025/06/29/Vue%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E6%A0%87%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¾èµ–å¯¼å…¥"><a href="#ä¾èµ–å¯¼å…¥" class="headerlink" title="ä¾èµ–å¯¼å…¥"></a>ä¾èµ–å¯¼å…¥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @amap/amap-jsapi-loader --save-dev</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºç»„ä»¶"><a href="#åˆ›å»ºç»„ä»¶" class="headerlink" title="åˆ›å»ºç»„ä»¶"></a>åˆ›å»ºç»„ä»¶</h2><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶GaodeMap.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">AMapLoader</span> <span class="keyword">from</span> <span class="string">&#x27;@amap/amap-jsapi-loader&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&quot;GaodeMap&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">startPoint</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">Array</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="function">() =&gt;</span> []</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">endPoint</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">Array</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="function">() =&gt;</span> []</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">emits</span>: [<span class="string">&#x27;pointsSelected&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">    data () &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">map</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">startMarker</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">endMarker</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">currentPosition</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isMarkingStart</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">polyline</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">driving</span>: <span class="literal">null</span></span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      initMap () &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">getCurrentPosition</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">position</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">currentPosition</span> = position;</span></span><br><span class="line"><span class="language-javascript">          <span class="title class_">AMapLoader</span>.<span class="title function_">reset</span>()</span></span><br><span class="line"><span class="language-javascript">          <span class="title class_">AMapLoader</span>.<span class="title function_">load</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">key</span>: <span class="string">&quot;c556abdb0991ac77cecee08058465e72&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">version</span>: <span class="string">&quot;2.0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">plugins</span>: [<span class="string">&#x27;AMap.ToolBar&#x27;</span>, <span class="string">&#x27;AMap.Scale&#x27;</span>, <span class="string">&#x27;AMap.HawkEye&#x27;</span>, <span class="string">&#x27;AMap.Driving&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">AMap</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Map</span>(<span class="string">&quot;container&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">viewMode</span>: <span class="string">&quot;3D&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">zooms</span>: [<span class="number">4</span>, <span class="number">18</span>],</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">zoom</span>: <span class="number">16</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">center</span>: <span class="variable language_">this</span>.<span class="property">currentPosition</span></span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">addControl</span>(<span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">ToolBar</span>());</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">addControl</span>(<span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Scale</span>());</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">addControl</span>(<span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">HawkEye</span>());</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">driving</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Driving</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">map</span>: <span class="variable language_">this</span>.<span class="property">map</span></span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">startPoint</span>.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">endPoint</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="title function_">setMarkers</span>(<span class="title class_">AMap</span>, <span class="variable language_">this</span>.<span class="property">startPoint</span>, <span class="variable language_">this</span>.<span class="property">endPoint</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">on</span>(<span class="string">&#x27;dblclick&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="title function_">handleDoubleClick</span>(e, <span class="title class_">AMap</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;è·å–å½“å‰ä½ç½®å¤±è´¥:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">initMapWithDefaultCenter</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      getCurrentPosition () &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (navigator.<span class="property">geolocation</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            navigator.<span class="property">geolocation</span>.<span class="title function_">getCurrentPosition</span>(</span></span><br><span class="line"><span class="language-javascript">              <span class="function">(<span class="params">position</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; longitude, latitude &#125; = position.<span class="property">coords</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">resolve</span>([longitude, latitude]);</span></span><br><span class="line"><span class="language-javascript">              &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">reject</span>(error);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            );</span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†å®šä½&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      initMapWithDefaultCenter () &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">AMapLoader</span>.<span class="title function_">load</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">key</span>: <span class="string">&quot;å¡«å†™é«˜å¾·çš„key&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">version</span>: <span class="string">&quot;2.0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">plugins</span>: [<span class="string">&#x27;AMap.ToolBar&#x27;</span>, <span class="string">&#x27;AMap.Scale&#x27;</span>, <span class="string">&#x27;AMap.HawkEye&#x27;</span>, <span class="string">&#x27;AMap.Driving&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">AMap</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Map</span>(<span class="string">&quot;container&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">viewMode</span>: <span class="string">&quot;3D&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">zooms</span>: [<span class="number">4</span>, <span class="number">18</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">zoom</span>: <span class="number">16</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">center</span>: [<span class="number">105.602725</span>, <span class="number">37.076636</span>]</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">addControl</span>(<span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">ToolBar</span>());</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">addControl</span>(<span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Scale</span>());</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">addControl</span>(<span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">HawkEye</span>());</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">driving</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Driving</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">map</span>: <span class="variable language_">this</span>.<span class="property">map</span></span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">startPoint</span>.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">endPoint</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">setMarkers</span>(<span class="title class_">AMap</span>, <span class="variable language_">this</span>.<span class="property">startPoint</span>, <span class="variable language_">this</span>.<span class="property">endPoint</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">on</span>(<span class="string">&#x27;dblclick&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">handleDoubleClick</span>(e, <span class="title class_">AMap</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    setMarkers (<span class="title class_">AMap</span>, start, end) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">startMarker</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">startMarker</span>.<span class="title function_">setMap</span>(<span class="literal">null</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">startMarker</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Marker</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">position</span>: start,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;èµ·ç‚¹&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">icon</span>: <span class="string">&#x27;https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">startMarker</span>.<span class="title function_">setMap</span>(<span class="variable language_">this</span>.<span class="property">map</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">endMarker</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">endMarker</span>.<span class="title function_">setMap</span>(<span class="literal">null</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">endMarker</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Marker</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">position</span>: end,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;ç»ˆç‚¹&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">icon</span>: <span class="string">&#x27;https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">endMarker</span>.<span class="title function_">setMap</span>(<span class="variable language_">this</span>.<span class="property">map</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">getDrivingRoute</span>(<span class="title class_">AMap</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    handleDoubleClick (e, <span class="title class_">AMap</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> point = [e.<span class="property">lnglat</span>.<span class="title function_">getLng</span>(), e.<span class="property">lnglat</span>.<span class="title function_">getLat</span>()];</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isMarkingStart</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">startMarker</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">startMarker</span>.<span class="title function_">setMap</span>(<span class="literal">null</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">startMarker</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Marker</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">position</span>: point,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">title</span>: <span class="string">&#x27;èµ·ç‚¹&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">icon</span>: <span class="string">&#x27;https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">startMarker</span>.<span class="title function_">setMap</span>(<span class="variable language_">this</span>.<span class="property">map</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">isMarkingStart</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">polyline</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">polyline</span>.<span class="title function_">setMap</span>(<span class="literal">null</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">polyline</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">endMarker</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">endMarker</span>.<span class="title function_">setMap</span>(<span class="literal">null</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">endMarker</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Marker</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">position</span>: point,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">title</span>: <span class="string">&#x27;ç»ˆç‚¹&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">icon</span>: <span class="string">&#x27;https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">endMarker</span>.<span class="title function_">setMap</span>(<span class="variable language_">this</span>.<span class="property">map</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">isMarkingStart</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">getDrivingRoute</span>(<span class="title class_">AMap</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> start = <span class="variable language_">this</span>.<span class="property">startMarker</span>.<span class="title function_">getPosition</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> end = <span class="variable language_">this</span>.<span class="property">endMarker</span>.<span class="title function_">getPosition</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> startPoint = [start.<span class="title function_">getLng</span>(), start.<span class="title function_">getLat</span>()];</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> endPoint = [end.<span class="title function_">getLng</span>(), end.<span class="title function_">getLat</span>()];</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;pointsSelected&#x27;</span>, &#123; startPoint, endPoint &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    getDrivingRoute (<span class="title class_">AMap</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">startMarker</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">endMarker</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> startPoint = <span class="variable language_">this</span>.<span class="property">startMarker</span>.<span class="title function_">getPosition</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> endPoint = <span class="variable language_">this</span>.<span class="property">endMarker</span>.<span class="title function_">getPosition</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(startPoint);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(endPoint);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">driving</span>.<span class="title function_">search</span>(startPoint, endPoint, <span class="function">(<span class="params">status, result</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (status === <span class="string">&#x27;complete&#x27;</span> &amp;&amp; result.<span class="property">info</span> === <span class="string">&#x27;OK&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> path = result.<span class="property">routes</span>[<span class="number">0</span>].<span class="property">path</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> pathCoords = path.<span class="title function_">map</span>(<span class="function">(<span class="params">p</span>) =&gt;</span> [p.<span class="property">lng</span>, p.<span class="property">lat</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">polyline</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">polyline</span>.<span class="title function_">setMap</span>(<span class="literal">null</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">polyline</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Polyline</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">path</span>: pathCoords,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">strokeColor</span>: <span class="string">&quot;#FF33FF&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">strokeWeight</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">strokeOpacity</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">strokeStyle</span>: <span class="string">&quot;solid&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">polyline</span>.<span class="title function_">setMap</span>(<span class="variable language_">this</span>.<span class="property">map</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;è·å–é©¾è½¦è·¯çº¿å¤±è´¥:&#x27;</span>, result);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  mounted () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">initMap</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-id">#container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¼•å…¥ç»„ä»¶"><a href="#å¼•å…¥ç»„ä»¶" class="headerlink" title="å¼•å…¥ç»„ä»¶"></a>å¼•å…¥ç»„ä»¶</h2><p>åœ¨ä½¿ç”¨çš„åœ°æ–¹å¼•å…¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">gaode-map</span> <span class="attr">:startPoint</span>=<span class="string">&quot;savedStartPoint&quot;</span> <span class="attr">:endPoint</span>=<span class="string">&quot;savedEndPoint&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">pointsSelected</span>=<span class="string">&quot;handlePointsSelected&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">gaode-map</span>&gt;</span></span><br></pre></td></tr></table></figure><p>scriptå¯¼å…¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">GaodeMap</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/GaodeMap.vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">savedStartPoint</span>: [],</span><br><span class="line">      <span class="attr">savedEndPoint</span>: [],</span><br><span class="line">      <span class="attr">ruleFoem</span>:&#123;</span><br><span class="line">        <span class="attr">startPoint</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">endPoint</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">GaodeMap</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>:&#123;</span><br><span class="line">  handlePointsSelected (&#123; startPoint, endPoint &#125;) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">ruleForm</span>.<span class="property">startPoint</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(startPoint);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">ruleForm</span>.<span class="property">endPoint</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(endPoint);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mahoutå®ç°ååŒè¿‡æ»¤æ¨è</title>
      <link href="/2025/06/29/mahout%E5%AE%9E%E7%8E%B0%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E6%8E%A8%E8%8D%90/"/>
      <url>/2025/06/29/mahout%E5%AE%9E%E7%8E%B0%E5%8D%8F%E5%90%8C%E8%BF%87%E6%BB%A4%E6%8E%A8%E8%8D%90/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼•å…¥æ¨èå¼•æ“mahoutï¼Œæ³¨æ„è¦å…ˆå…¨éƒ¨å¼•å…¥ï¼Œå†ä½¿ç”¨exclusionæ ‡ç­¾--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.mahout<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mahout-mr<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.12.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-jcl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.lucene<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lucene-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.lucene<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lucene-analyzers-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-apache-client4<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey.contribs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»"><a href="#åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»" class="headerlink" title="åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»"></a>åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserItemOperation</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>  &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long userId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long itemId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer value;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå¯¹åº”çš„Xml"><a href="#åˆ›å»ºå¯¹åº”çš„Xml" class="headerlink" title="åˆ›å»ºå¯¹åº”çš„Xml"></a>åˆ›å»ºå¯¹åº”çš„Xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dao.UserItemDao&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUserPreference&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.entity.UserItemOperation&quot;</span>&gt;</span></span><br><span class="line">        SELECT</span><br><span class="line">            a.id userid,</span><br><span class="line">            c.id itemId,</span><br><span class="line">            count( a.id ) `value`</span><br><span class="line">        FROM</span><br><span class="line">            yonghu a</span><br><span class="line">                JOIN gangweishenqing b ON a.yonghuming = b.yonghuming join zhaopinxinxi c on</span><br><span class="line">                b.zhaopingangwei = c.zhaopingangwei</span><br><span class="line">        GROUP BY</span><br><span class="line">            a.id,</span><br><span class="line">            b.qiyezhanghao</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åŸºäºç”¨æˆ·çš„æ¨èç®—æ³•ä»£ç "><a href="#åŸºäºç”¨æˆ·çš„æ¨èç®—æ³•ä»£ç " class="headerlink" title="åŸºäºç”¨æˆ·çš„æ¨èç®—æ³•ä»£ç "></a>åŸºäºç”¨æˆ·çš„æ¨èç®—æ³•ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecommendUtil</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserItemDao userItemDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Long&gt; <span class="title function_">recommend</span><span class="params">(Long userId)</span> <span class="keyword">throws</span> TasteException &#123;</span><br><span class="line">        List&lt;UserItemOperation&gt; userList = userItemDao.getAllUserPreference();</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ•°æ®æ¨¡å‹</span></span><br><span class="line">        System.out.println(userList);</span><br><span class="line">        <span class="type">DataModel</span> <span class="variable">dataModel</span> <span class="operator">=</span> <span class="built_in">this</span>.createDataModel(userList);</span><br><span class="line">        <span class="comment">//è·å–ç”¨æˆ·ç›¸ä¼¼ç¨‹åº¦</span></span><br><span class="line">        <span class="type">UserSimilarity</span> <span class="variable">similarity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UncenteredCosineSimilarity</span>(dataModel);</span><br><span class="line">        <span class="comment">//è·å–ç”¨æˆ·é‚»å±…</span></span><br><span class="line">        <span class="type">UserNeighborhood</span> <span class="variable">userNeighborhood</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NearestNUserNeighborhood</span>(<span class="number">2</span>, similarity, dataModel);</span><br><span class="line">        <span class="comment">//æ„å»ºæ¨èå™¨</span></span><br><span class="line">        <span class="type">Recommender</span> <span class="variable">recommender</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericUserBasedRecommender</span>(dataModel, userNeighborhood, similarity);</span><br><span class="line">        <span class="comment">//æ¨è2ä¸ª</span></span><br><span class="line">        List&lt;RecommendedItem&gt; recommendedItems = recommender.recommend(userId, <span class="number">5</span>);</span><br><span class="line">        List&lt;Long&gt; itemIds = recommendedItems.stream().map(RecommendedItem::getItemID).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span> itemIds;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> DataModel <span class="title function_">createDataModel</span><span class="params">(List&lt;UserItemOperation&gt; userItemOperations)</span> &#123;</span><br><span class="line">        FastByIDMap&lt;PreferenceArray&gt; fastByIdMap = <span class="keyword">new</span> <span class="title class_">FastByIDMap</span>&lt;&gt;();</span><br><span class="line">        Map&lt;Long, List&lt;UserItemOperation&gt;&gt; map = userItemOperations.stream().collect(Collectors.groupingBy(UserItemOperation::getUserId));</span><br><span class="line">        Collection&lt;List&lt;UserItemOperation&gt;&gt; list = map.values();</span><br><span class="line">        <span class="keyword">for</span>(List&lt;UserItemOperation&gt; userPreferences : list)&#123;</span><br><span class="line">            GenericPreference[] array = <span class="keyword">new</span> <span class="title class_">GenericPreference</span>[userPreferences.size()];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; userPreferences.size(); i++)&#123;</span><br><span class="line">                <span class="type">UserItemOperation</span> <span class="variable">userPreference</span> <span class="operator">=</span> userPreferences.get(i);</span><br><span class="line">                System.out.println(userPreference);</span><br><span class="line">                <span class="type">GenericPreference</span> <span class="variable">item</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericPreference</span>(userPreference.getUserId(), userPreference.getItemId(), userPreference.getValue());</span><br><span class="line">                array[i] = item;</span><br><span class="line">            &#125;</span><br><span class="line">            fastByIdMap.put(array[<span class="number">0</span>].getUserID(), <span class="keyword">new</span> <span class="title class_">GenericUserPreferenceArray</span>(Arrays.asList(array)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">GenericDataModel</span>(fastByIdMap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="åŸºäºç‰©å“çš„æ¨èç®—æ³•"><a href="#åŸºäºç‰©å“çš„æ¨èç®—æ³•" class="headerlink" title="åŸºäºç‰©å“çš„æ¨èç®—æ³•"></a>åŸºäºç‰©å“çš„æ¨èç®—æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecommendUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserItemDao userItemDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Long&gt; <span class="title function_">recommend</span><span class="params">(Long userId)</span> <span class="keyword">throws</span> TasteException &#123;</span><br><span class="line">        List&lt;UserItemOperation&gt; userList = userItemDao.getAllUserPreference();</span><br><span class="line">        <span class="comment">// åˆ›å»ºæ•°æ®æ¨¡å‹</span></span><br><span class="line">        <span class="type">DataModel</span> <span class="variable">dataModel</span> <span class="operator">=</span> <span class="built_in">this</span>.createDataModel(userList);</span><br><span class="line">        <span class="comment">// è·å–ç‰©å“ç›¸ä¼¼ç¨‹åº¦</span></span><br><span class="line">        <span class="type">ItemSimilarity</span> <span class="variable">similarity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UncenteredCosineSimilarity</span>(dataModel);</span><br><span class="line">        <span class="comment">// æ„å»ºæ¨èå™¨</span></span><br><span class="line">        <span class="type">Recommender</span> <span class="variable">recommender</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericItemBasedRecommender</span>(dataModel, similarity);</span><br><span class="line">        <span class="comment">// æ¨è5ä¸ª</span></span><br><span class="line">        List&lt;RecommendedItem&gt; recommendedItems = recommender.recommend(userId, <span class="number">5</span>);</span><br><span class="line">        List&lt;Long&gt; itemIds = recommendedItems.stream().map(RecommendedItem::getItemID).collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span> itemIds;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DataModel <span class="title function_">createDataModel</span><span class="params">(List&lt;UserItemOperation&gt; userItemOperations)</span> &#123;</span><br><span class="line">        FastByIDMap&lt;PreferenceArray&gt; fastByIdMap = <span class="keyword">new</span> <span class="title class_">FastByIDMap</span>&lt;&gt;();</span><br><span class="line">        Map&lt;Long, List&lt;UserItemOperation&gt;&gt; map = userItemOperations.stream().collect(Collectors.groupingBy(UserItemOperation::getUserId));</span><br><span class="line">        Collection&lt;List&lt;UserItemOperation&gt;&gt; list = map.values();</span><br><span class="line">        <span class="keyword">for</span> (List&lt;UserItemOperation&gt; userPreferences : list) &#123;</span><br><span class="line">            GenericPreference[] array = <span class="keyword">new</span> <span class="title class_">GenericPreference</span>[userPreferences.size()];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; userPreferences.size(); i++) &#123;</span><br><span class="line">                <span class="type">UserItemOperation</span> <span class="variable">userPreference</span> <span class="operator">=</span> userPreferences.get(i);</span><br><span class="line">                <span class="type">GenericPreference</span> <span class="variable">item</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericPreference</span>(userPreference.getUserId(), userPreference.getItemId(), userPreference.getValue());</span><br><span class="line">                array[i] = item;</span><br><span class="line">            &#125;</span><br><span class="line">            fastByIdMap.put(array[<span class="number">0</span>].getUserID(), <span class="keyword">new</span> <span class="title class_">GenericUserPreferenceArray</span>(Arrays.asList(array)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">GenericDataModel</span>(fastByIdMap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sparkåˆ†ææ¡ˆä¾‹</title>
      <link href="/2025/06/29/Spark%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/"/>
      <url>/2025/06/29/Spark%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Spark Core and SQL --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-core_2.12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-slf4j-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.janino<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>janino<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.janino<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-compiler<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.spark<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spark-sql_2.12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.janino<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>janino<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.janino<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-compiler<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jul-to-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-slf4j-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ é…ç½®æ–‡ä»¶"><a href="#æ·»åŠ é…ç½®æ–‡ä»¶" class="headerlink" title="æ·»åŠ é…ç½®æ–‡ä»¶"></a>æ·»åŠ é…ç½®æ–‡ä»¶</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spark:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">ECommerceAnalysis</span></span><br><span class="line">  <span class="attr">home:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">master:</span></span><br><span class="line">    <span class="attr">uri:</span> <span class="string">spark://my.hadoop.cn:7077</span></span><br><span class="line">  <span class="attr">driver:</span></span><br><span class="line">    <span class="attr">memory:</span> <span class="string">450m</span></span><br><span class="line">    <span class="attr">maxResultSize:</span> <span class="string">450m</span></span><br><span class="line">  <span class="attr">worker:</span></span><br><span class="line">    <span class="attr">memory:</span> <span class="string">450m</span></span><br><span class="line">  <span class="attr">executor:</span></span><br><span class="line">    <span class="attr">cores:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">memory:</span> <span class="string">450m</span></span><br><span class="line">    <span class="attr">heartbeatInterval:</span> <span class="number">1000000</span></span><br><span class="line">  <span class="attr">num:</span></span><br><span class="line">    <span class="attr">executors:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">network:</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">1474830</span></span><br><span class="line">  <span class="attr">rpc:</span></span><br><span class="line">    <span class="attr">message:</span></span><br><span class="line">      <span class="attr">maxSize:</span> <span class="number">1024</span></span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ sparkçš„Spingbooté…ç½®"><a href="#æ·»åŠ sparkçš„Spingbooté…ç½®" class="headerlink" title="æ·»åŠ sparkçš„Spingbooté…ç½®"></a>æ·»åŠ sparkçš„Spingbooté…ç½®</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SparkConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.app.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String appName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.home&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sparkHome;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.master.uri&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sparkMasterUri;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.driver.memory&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sparkDriverMemory;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.worker.memory&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sparkWorkerMemory;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.executor.memory&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sparkExecutorMemory;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.executor.cores&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sparkExecutorCores;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.num.executors&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sparkExecutorsNum;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.network.timeout&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String networkTimeout;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.executor.heartbeatInterval&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String heartbeatIntervalTime;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.driver.maxResultSize&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String maxResultSize;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spark.rpc.message.maxSize&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sparkRpcMessageMaxSize;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SparkConf <span class="title function_">sparkConf</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SparkConf</span> <span class="variable">sparkConf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SparkConf</span>()</span><br><span class="line">                .setAppName(appName)</span><br><span class="line">                .setMaster(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">                .set(<span class="string">&quot;spark.driver.memory&quot;</span>,sparkDriverMemory)</span><br><span class="line">                .set(<span class="string">&quot;spark.driver.maxResultSize&quot;</span>,maxResultSize)</span><br><span class="line">                .set(<span class="string">&quot;spark.worker.memory&quot;</span>,sparkWorkerMemory) <span class="comment">//&quot;26g&quot;</span></span><br><span class="line">                .set(<span class="string">&quot;spark.executor.memory&quot;</span>,sparkExecutorMemory)</span><br><span class="line">                .set(<span class="string">&quot;spark.executor.cores&quot;</span>,sparkExecutorCores)</span><br><span class="line">                .set(<span class="string">&quot;spark.executor.heartbeatInterval&quot;</span>,heartbeatIntervalTime)</span><br><span class="line">                .set(<span class="string">&quot;spark.num.executors&quot;</span>,sparkExecutorsNum)</span><br><span class="line">                .set(<span class="string">&quot;spark.network.timeout&quot;</span>,networkTimeout)</span><br><span class="line">                .set(<span class="string">&quot;spark.rpc.message.maxSize&quot;</span>,sparkRpcMessageMaxSize);</span><br><span class="line">        <span class="comment">//                .set(&quot;spark.shuffle.memoryFraction&quot;,&quot;0&quot;) //é»˜è®¤0.2</span></span><br><span class="line">        <span class="keyword">return</span> sparkConf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(JavaSparkContext.class)</span></span><br><span class="line">    <span class="keyword">public</span> JavaSparkContext <span class="title function_">javaSparkContext</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JavaSparkContext</span>(sparkConf());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SparkSession <span class="title function_">sparkSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SparkSession</span><br><span class="line">                .builder()</span><br><span class="line">                .sparkContext(javaSparkContext().sc())</span><br><span class="line">                .appName(appName)</span><br><span class="line">                .getOrCreate();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> PropertySourcesPlaceholderConfigurer <span class="title function_">propertySourcesPlaceholderConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PropertySourcesPlaceholderConfigurer</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="sparkçš„æ•°æ®åˆ†æ"><a href="#sparkçš„æ•°æ®åˆ†æ" class="headerlink" title="sparkçš„æ•°æ®åˆ†æ"></a>sparkçš„æ•°æ®åˆ†æ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> my.io.hadoop.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.log4j.Log4j;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.SparkSession;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.apache.spark.sql.functions.col;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.apache.spark.sql.functions.count;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.apache.spark.sql.functions.sum;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author reisen7</span></span><br><span class="line"><span class="comment"> * Date 2025/4/4 13:03</span></span><br><span class="line"><span class="comment"> * Description</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataAnalysisService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SparkSession sparkSession;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String jdbcUrl;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">LIMIT</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">// å¯æ ¹æ®éœ€æ±‚è°ƒæ•´è¿™ä¸ªå€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">performAnalysis</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">connectionProperties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        connectionProperties.put(<span class="string">&quot;user&quot;</span>, username);</span><br><span class="line">        connectionProperties.put(<span class="string">&quot;password&quot;</span>, password);</span><br><span class="line">        log.info(<span class="string">&quot;è¿æ¥: &#123;&#125; &quot;</span>, jdbcUrl);</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹åˆ†ææ•°æ®&quot;</span>);</span><br><span class="line">        <span class="comment">// è¯»å– MySQL æ•°æ®</span></span><br><span class="line">        Dataset&lt;Row&gt; goodsDF = sparkSession.read()</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;goods&quot;</span>, connectionProperties);</span><br><span class="line">        Dataset&lt;Row&gt; orderGoodsDF = sparkSession.read()</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;order_goods&quot;</span>, connectionProperties);</span><br><span class="line">        Dataset&lt;Row&gt; tOderDF = sparkSession.read()</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;t_order&quot;</span>, connectionProperties);</span><br><span class="line">        Dataset&lt;Row&gt; userDF = sparkSession.read()</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;t_user&quot;</span>, connectionProperties);</span><br><span class="line">        Dataset&lt;Row&gt; cartDF = sparkSession.read()</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;cart&quot;</span>, connectionProperties);</span><br><span class="line">        Dataset&lt;Row&gt; collectDF = sparkSession.read()</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;collect&quot;</span>, connectionProperties);</span><br><span class="line">        Dataset&lt;Row&gt; categoryDF = sparkSession.read()</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;category&quot;</span>, connectionProperties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»´åº¦ 1ï¼šå„å•†å“åˆ†ç±»çš„é”€å”®æ€»é‡</span></span><br><span class="line">        Dataset&lt;Row&gt; categorySales = orderGoodsDF.join(goodsDF, orderGoodsDF.col(<span class="string">&quot;goods_id&quot;</span>).equalTo(goodsDF.col(<span class="string">&quot;id&quot;</span>)))</span><br><span class="line">                .join(categoryDF, goodsDF.col(<span class="string">&quot;category_id&quot;</span>).equalTo(categoryDF.col(<span class="string">&quot;id&quot;</span>)))</span><br><span class="line">                .groupBy(categoryDF.col(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">                .agg(sum(orderGoodsDF.col(<span class="string">&quot;count&quot;</span>)).alias(<span class="string">&quot;total_sales&quot;</span>))</span><br><span class="line">                .orderBy(col(<span class="string">&quot;total_sales&quot;</span>).desc())</span><br><span class="line">                .limit(LIMIT);</span><br><span class="line">        categorySales.write()</span><br><span class="line">                .mode(SaveMode.Overwrite)</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;spark_category_sales&quot;</span>, connectionProperties);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»´åº¦ 2ï¼šå„ç”¨æˆ·çš„è´­ç‰©è½¦å•†å“æ€»æ•°</span></span><br><span class="line">        Dataset&lt;Row&gt; userCartTotal = cartDF.join(userDF, cartDF.col(<span class="string">&quot;user_id&quot;</span>).equalTo(userDF.col(<span class="string">&quot;id&quot;</span>)))</span><br><span class="line">                .groupBy(userDF.col(<span class="string">&quot;username&quot;</span>))</span><br><span class="line">                .agg(sum(cartDF.col(<span class="string">&quot;count&quot;</span>)).alias(<span class="string">&quot;total_cart_items&quot;</span>))</span><br><span class="line">                .orderBy(col(<span class="string">&quot;total_cart_items&quot;</span>).desc())</span><br><span class="line">                .limit(LIMIT);</span><br><span class="line">        userCartTotal.write()</span><br><span class="line">                .mode(SaveMode.Overwrite)</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;spark_user_cart_total&quot;</span>, connectionProperties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»´åº¦ 3ï¼šå„å•†å“çš„æ”¶è—æ¬¡æ•°</span></span><br><span class="line">        Dataset&lt;Row&gt; goodsCollectCount = collectDF.join(goodsDF ,collectDF.col(<span class="string">&quot;goods_id&quot;</span>).equalTo(goodsDF.col(<span class="string">&quot;id&quot;</span>)))</span><br><span class="line">                .groupBy(goodsDF.col(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">                .agg(count(collectDF.col(<span class="string">&quot;id&quot;</span>)).alias(<span class="string">&quot;collect_count&quot;</span>))</span><br><span class="line">                .orderBy(col(<span class="string">&quot;collect_count&quot;</span>).desc())</span><br><span class="line">                .limit(LIMIT);</span><br><span class="line">        goodsCollectCount.write()</span><br><span class="line">                .mode(SaveMode.Overwrite)</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;spark_goods_collect_count&quot;</span>, connectionProperties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»´åº¦ 4ï¼šå„ç”¨æˆ·çš„è®¢å•æ•°é‡</span></span><br><span class="line">        Dataset&lt;Row&gt; userOrderCount = orderGoodsDF.join(tOderDF, orderGoodsDF.col(<span class="string">&quot;order_id&quot;</span>).equalTo(tOderDF.col(<span class="string">&quot;id&quot;</span>)))</span><br><span class="line">                .join(userDF, tOderDF.col(<span class="string">&quot;user_id&quot;</span>).equalTo(userDF.col(<span class="string">&quot;id&quot;</span>)))</span><br><span class="line">                .groupBy(userDF.col(<span class="string">&quot;username&quot;</span>))</span><br><span class="line">                .agg(count(orderGoodsDF.col(<span class="string">&quot;order_id&quot;</span>)).alias(<span class="string">&quot;order_count&quot;</span>))</span><br><span class="line">                .orderBy(col(<span class="string">&quot;order_count&quot;</span>).desc())</span><br><span class="line">                .limit(LIMIT);</span><br><span class="line">        userOrderCount.write()</span><br><span class="line">                .mode(SaveMode.Overwrite)</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;spark_user_order_count&quot;</span>, connectionProperties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»´åº¦ 5ï¼šå„å•†å“åˆ†ç±»çš„å•†å“æ•°é‡</span></span><br><span class="line">        Dataset&lt;Row&gt; categoryGoodsCount = goodsDF.join(categoryDF, goodsDF.col(<span class="string">&quot;category_id&quot;</span>).equalTo(categoryDF.col(<span class="string">&quot;id&quot;</span>)))</span><br><span class="line">                .groupBy(categoryDF.col(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">                .agg(count(goodsDF.col(<span class="string">&quot;id&quot;</span>)).alias(<span class="string">&quot;goods_count&quot;</span>))</span><br><span class="line">                .orderBy(col(<span class="string">&quot;goods_count&quot;</span>).desc())</span><br><span class="line">                .limit(LIMIT);</span><br><span class="line">        categoryGoodsCount.write()</span><br><span class="line">                .mode(SaveMode.Overwrite)</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;spark_category_goods_count&quot;</span>, connectionProperties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç»´åº¦ 6ï¼šå„ç”¨æˆ·çš„æ”¶è—å•†å“æ•°é‡</span></span><br><span class="line">        Dataset&lt;Row&gt; userCollectCount = collectDF.join(userDF, collectDF.col(<span class="string">&quot;user_id&quot;</span>).equalTo(userDF.col(<span class="string">&quot;id&quot;</span>)))</span><br><span class="line">                .groupBy(userDF.col(<span class="string">&quot;username&quot;</span>))</span><br><span class="line">                .agg(count(collectDF.col(<span class="string">&quot;id&quot;</span>)).alias(<span class="string">&quot;collect_goods_count&quot;</span>))</span><br><span class="line">                .orderBy(col(<span class="string">&quot;collect_goods_count&quot;</span>).desc())</span><br><span class="line">                .limit(LIMIT);</span><br><span class="line">        userCollectCount.write()</span><br><span class="line">                .mode(SaveMode.Overwrite)</span><br><span class="line">                .jdbc(jdbcUrl, <span class="string">&quot;spark_user_collect_count&quot;</span>, connectionProperties);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»¿Deepseeké¡µé¢çš„èŠå¤©çª—å£</title>
      <link href="/2025/06/29/%E4%BB%BFDeepseek%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%81%8A%E5%A4%A9%E7%AA%97%E5%8F%A3/"/>
      <url>/2025/06/29/%E4%BB%BFDeepseek%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%81%8A%E5%A4%A9%E7%AA%97%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="å…ˆåˆ°é˜¿é‡Œäº‘æ§åˆ¶å°æ³¨å†Œtoken"><a href="#å…ˆåˆ°é˜¿é‡Œäº‘æ§åˆ¶å°æ³¨å†Œtoken" class="headerlink" title="å…ˆåˆ°é˜¿é‡Œäº‘æ§åˆ¶å°æ³¨å†Œtoken"></a>å…ˆåˆ°é˜¿é‡Œäº‘æ§åˆ¶å°æ³¨å†Œtoken</h2><blockquote><p><a href="https://bailian.console.aliyun.com/">https://bailian.console.aliyun.com/</a></p></blockquote><p><img src="/img/posts/436be6ffea8d4559b8640e49175c49d0.png"></p><h2 id="åç«¯ä»£ç "><a href="#åç«¯ä»£ç " class="headerlink" title="åç«¯ä»£ç "></a>åç«¯ä»£ç </h2><h3 id="python-Django"><a href="#python-Django" class="headerlink" title="python Django"></a>python Django</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> openai <span class="keyword">import</span> OpenAI</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> StreamingHttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_only_api</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        content = request.GET.get(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">        client = OpenAI(</span><br><span class="line">            api_key=<span class="string">&quot;ç”³è¯·çš„token&quot;</span>,</span><br><span class="line">            base_url=<span class="string">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">event_stream</span>():</span><br><span class="line">            reasoning_content = <span class="string">&quot;&quot;</span></span><br><span class="line">            answer_content = <span class="string">&quot;&quot;</span></span><br><span class="line">            is_answering = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">            completion = client.chat.completions.create(</span><br><span class="line">                model=<span class="string">&quot;deepseek-r1&quot;</span>,</span><br><span class="line">                messages=[</span><br><span class="line">                    &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: content&#125;</span><br><span class="line">                ],</span><br><span class="line">                stream=<span class="literal">True</span></span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> chunk <span class="keyword">in</span> completion:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> chunk.choices:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                delta = chunk.choices[<span class="number">0</span>].delta</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">hasattr</span>(delta, <span class="string">&#x27;reasoning_content&#x27;</span>) <span class="keyword">and</span> delta.reasoning_content <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    reasoning_content += delta.reasoning_content</span><br><span class="line">                    data = &#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;msg1&#x27;</span>: delta.reasoning_content&#125;</span><br><span class="line">                    <span class="keyword">yield</span> <span class="string">f&quot;data: <span class="subst">&#123;json.dumps(data)&#125;</span>\n\n&quot;</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">if</span> delta.content != <span class="string">&quot;&quot;</span> <span class="keyword">and</span> <span class="keyword">not</span> is_answering:</span><br><span class="line">                        is_answering = <span class="literal">True</span></span><br><span class="line">                    <span class="keyword">if</span> delta.content:</span><br><span class="line">                        answer_content += delta.content</span><br><span class="line">                        <span class="built_in">print</span>(delta.content)</span><br><span class="line">                        data = &#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;msg&#x27;</span>: delta.content, <span class="string">&#x27;msg1&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line">                        <span class="keyword">yield</span> <span class="string">f&quot;data: <span class="subst">&#123;json.dumps(data)&#125;</span>\n\n&quot;</span></span><br><span class="line"></span><br><span class="line">        response = StreamingHttpResponse(event_stream(), content_type=<span class="string">&#x27;text/event-stream&#x27;</span>)</span><br><span class="line">        response[<span class="string">&#x27;Cache-Control&#x27;</span>] = <span class="string">&#x27;no-cache&#x27;</span></span><br><span class="line">        <span class="comment"># è·¨åŸŸ</span></span><br><span class="line">        response[<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>] = <span class="string">&#x27;è®¾ç½®æˆä½ çš„å‰ç«¯åœ°å€&#x27;</span>  <span class="comment"># è®¾ç½®å…è®¸çš„æ¥æº</span></span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        response = JsonResponse(&#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;Method not allowed&quot;</span>&#125;, status=<span class="number">405</span>)</span><br><span class="line">        <span class="comment"># è·¨åŸŸ</span></span><br><span class="line">        response[<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>] = <span class="string">&#x27;è®¾ç½®æˆä½ çš„å‰ç«¯åœ°å€&#x27;</span>  <span class="comment"># è®¾ç½®å…è®¸çš„æ¥æº</span></span><br><span class="line">        <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure><h3 id="java-Springboot"><a href="#java-Springboot" class="headerlink" title="java Springboot"></a>java Springboot</h3><ul><li>Mavenä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dashscope-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-simple<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.18.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ä»£ç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.Generation;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.aigc.generation.GenerationParam;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Message;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.dashscope.common.Role;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.method.annotation.SseEmitter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author reisen7</span></span><br><span class="line"><span class="comment"> * Date 2025/4/9 1:12</span></span><br><span class="line"><span class="comment"> * Description </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/deepSeek&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeepSeekController</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(DeepSeekController.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> GenerationParam <span class="title function_">buildGenerationParam</span><span class="params">(Message userMsg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> GenerationParam.builder()</span><br><span class="line">                .apiKey(<span class="string">&quot;sk-xxxxxx&quot;</span>)</span><br><span class="line">                .model(<span class="string">&quot;deepseek-r1&quot;</span>)</span><br><span class="line">                .messages(Arrays.asList(userMsg))</span><br><span class="line">                .resultFormat(GenerationParam.ResultFormat.MESSAGE)</span><br><span class="line">                .incrementalOutput(<span class="literal">true</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/query&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span></span><br><span class="line">    <span class="keyword">public</span> SseEmitter <span class="title function_">getBotContent</span><span class="params">(<span class="meta">@RequestParam</span> String question)</span> &#123;</span><br><span class="line">        <span class="type">SseEmitter</span> <span class="variable">emitter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SseEmitter</span>(<span class="number">60_000L</span>); <span class="comment">// 60ç§’è¶…æ—¶</span></span><br><span class="line"></span><br><span class="line">        executor.execute(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// å…ˆå‘é€æ€è€ƒä¸­çŠ¶æ€</span></span><br><span class="line">                Map&lt;String, Object&gt; thinkingResponse = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                thinkingResponse.put(<span class="string">&quot;code&quot;</span>, <span class="number">200</span>);</span><br><span class="line">                thinkingResponse.put(<span class="string">&quot;msg1&quot;</span>, <span class="string">&quot;æ­£åœ¨åˆ†ææ‚¨çš„é—®é¢˜...&quot;</span>);</span><br><span class="line">                emitter.send(SseEmitter.event().data(thinkingResponse));</span><br><span class="line"></span><br><span class="line">                <span class="type">Generation</span> <span class="variable">gen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Generation</span>();</span><br><span class="line">                <span class="type">Message</span> <span class="variable">userMsg</span> <span class="operator">=</span> Message.builder()</span><br><span class="line">                        .role(Role.USER.getValue())</span><br><span class="line">                        .content(question)</span><br><span class="line">                        .build();</span><br><span class="line"></span><br><span class="line">                <span class="type">GenerationParam</span> <span class="variable">param</span> <span class="operator">=</span> buildGenerationParam(userMsg);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å¤„ç†æµå¼å“åº”</span></span><br><span class="line">                gen.streamCall(param).blockingForEach(message -&gt; &#123;</span><br><span class="line">                    Map&lt;String, Object&gt; response = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                    response.put(<span class="string">&quot;code&quot;</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="type">String</span> <span class="variable">reasoning</span> <span class="operator">=</span> message.getOutput().getChoices().get(<span class="number">0</span>).getMessage().getReasoningContent();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> message.getOutput().getChoices().get(<span class="number">0</span>).getMessage().getContent();</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (reasoning != <span class="literal">null</span> &amp;&amp; !reasoning.isEmpty()) &#123;</span><br><span class="line">                        response.put(<span class="string">&quot;msg1&quot;</span>, reasoning);</span><br><span class="line">                        emitter.send(SseEmitter.event().data(response));</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (content != <span class="literal">null</span> &amp;&amp; !content.isEmpty()) &#123;</span><br><span class="line">                        response.remove(<span class="string">&quot;msg1&quot;</span>);</span><br><span class="line">                        response.put(<span class="string">&quot;msg&quot;</span>, content);</span><br><span class="line">                        emitter.send(SseEmitter.event().data(response));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                emitter.complete();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                logger.error(<span class="string">&quot;Error in streaming response&quot;</span>, e);</span><br><span class="line">                Map&lt;String, Object&gt; errorResponse = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                errorResponse.put(<span class="string">&quot;code&quot;</span>, <span class="number">500</span>);</span><br><span class="line">                errorResponse.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯: &quot;</span> + e.getMessage());</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    emitter.send(SseEmitter.event().data(errorResponse));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">                &#125;</span><br><span class="line">                emitter.completeWithError(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> emitter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‰ç«¯ä»¿Deepseeké¡µé¢"><a href="#å‰ç«¯ä»¿Deepseeké¡µé¢" class="headerlink" title="å‰ç«¯ä»¿Deepseeké¡µé¢"></a>å‰ç«¯ä»¿Deepseeké¡µé¢</h2><p>è¿™åªæ˜¯å®ç°äº†å¼¹çª—çš„å†…å®¹ï¼Œéœ€è¦å¼•å…¥åˆ°ä½¿ç”¨çš„é¡µé¢ä¸­ï¼Œè¿™é‡Œä¸å†è¡¥å……å¯ä»¥å‚è€ƒä¹‹å‰çš„ä»£ç </p><blockquote><p><a href="https://blog.csdn.net/qq_46150074/article/details/144575355?spm=1001.2014.3001.5502">https://blog.csdn.net/qq_46150074&#x2F;article&#x2F;details&#x2F;144575355?spm&#x3D;1001.2014.3001.5502</a></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-bg&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;show&quot;</span> @<span class="attr">mousemove</span>=<span class="string">&quot;modelMove&quot;</span> @<span class="attr">mouseup</span>=<span class="string">&quot;cancelMove&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-header&quot;</span> @<span class="attr">mousedown</span>=<span class="string">&quot;setStartingPoint&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; title &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-main&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;item.id == 2 ? &#x27;atalk&#x27; : &#x27;btalk&#x27;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; display: flex;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;wordone&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inputword&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;sendmsg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span> <span class="attr">round</span> @<span class="attr">click</span>=<span class="string">&quot;sendmsg&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;btnsend&quot;</span>&gt;</span>å‘é€<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-footer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">round</span> @<span class="attr">click</span>=<span class="string">&quot;cancel&quot;</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">show</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="string">&#x27;deepseek&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">x</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">y</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">node</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isCanMove</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isButtonDisabled</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">list</span>: [],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">wordone</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">wordtow</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">eventSource</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">currentIndex</span>: <span class="number">0</span>, <span class="comment">// å½“å‰æ˜¾ç¤ºçš„å­—ç¬¦ç´¢å¼•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">currentMessage</span>: <span class="literal">null</span>, <span class="comment">// å½“å‰æ­£åœ¨æ˜¾ç¤ºçš„æ¶ˆæ¯å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">typingTimer</span>: <span class="literal">null</span> <span class="comment">// é€å­—æ˜¾ç¤ºå®šæ—¶å™¨</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">node</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.model-container&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">sendmsg</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> == <span class="literal">false</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// é‡ç½®ç›¸å…³çŠ¶æ€å˜é‡</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">currentMessage</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">typingTimer</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;sigtuna&#x27;</span>, <span class="attr">content</span>: <span class="variable language_">this</span>.<span class="property">wordone</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">scrollToBottom</span>();</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">getBotContent</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">wordone</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">getBotContent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ·»åŠ æ€è€ƒä¸­çš„æç¤º</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;æ­£åœ¨æ€è€ƒä¸­...&#x27;</span>, <span class="attr">isThinking</span>: <span class="literal">true</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ”¹æˆåç«¯çš„æ¥å£</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">eventSource</span> = <span class="keyword">new</span> <span class="title class_">EventSource</span>(<span class="string">`/api/ai?content=<span class="subst">$&#123;<span class="variable language_">this</span>.wordone&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(event.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (data.<span class="property">code</span> === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (data.<span class="property">msg1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">// å¤„ç†æ€è€ƒé—®é¢˜æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">currentMessage</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">id</span> !== <span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å¦‚æœå½“å‰æ²¡æœ‰æ­£åœ¨æ˜¾ç¤ºçš„æ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ¶ˆæ¯ä¸æ˜¯æ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ€è€ƒé—®é¢˜æ¶ˆæ¯å·²ç»“æŸ</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">currentMessage</span> = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;æ€è€ƒé—®é¢˜ï¼š&#x27;</span> + data.<span class="property">msg1</span>, <span class="attr">isThinking</span>: <span class="literal">true</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">currentMessage</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ­£åœ¨æ˜¾ç¤ºæ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œè¿½åŠ å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> += data.<span class="property">msg1</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (data.<span class="property">msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å¤„ç†å›ç­”æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">currentMessage</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">id</span> !== <span class="number">2</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">isThinking</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ²¡æœ‰æ­£åœ¨æ˜¾ç¤ºçš„å›ç­”æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ¶ˆæ¯ä¸æ˜¯å›ç­”æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ˜¯æ€è€ƒé—®é¢˜æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span> = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;å›ç­”é—®é¢˜ï¼š&#x27;</span> + data.<span class="property">msg</span>, <span class="attr">isThinking</span>: <span class="literal">false</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">currentMessage</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ­£åœ¨æ˜¾ç¤ºå›ç­”æ¶ˆæ¯ï¼Œè¿½åŠ å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> += data.<span class="property">msg</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">scrollToBottom</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="property">onerror</span> = <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ·»åŠ æ–°çš„æ–¹æ³•ç”¨äºå¤„ç†å†…å®¹æ›´æ–°æ—¶çš„æ»šåŠ¨</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">scrollToBottom</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> div = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">box</span>;</span></span><br><span class="line"><span class="language-javascript">                div.<span class="property">scrollTop</span> = div.<span class="property">scrollHeight</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">startTyping</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">typingTimer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentIndex</span> &lt; <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span>.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> = <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">currentIndex</span> + <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">currentIndex</span>++;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> div = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">box</span>;</span></span><br><span class="line"><span class="language-javascript">                    div.<span class="property">scrollTop</span> = div.<span class="property">scrollHeight</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">50</span>); <span class="comment">// æ§åˆ¶é€å­—æ˜¾ç¤ºé€Ÿåº¦ï¼Œå¯è°ƒæ•´</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">cancel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">eventSource</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;cancel&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;submit&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setStartingPoint</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">x</span> = e.<span class="property">clientX</span> - <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">offsetLeft</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">y</span> = e.<span class="property">clientY</span> - <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">offsetTop</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">isCanMove</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">modelMove</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isCanMove</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">style</span>.<span class="property">left</span> = e.<span class="property">clientX</span> - <span class="variable language_">this</span>.<span class="property">x</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">style</span>.<span class="property">top</span> = e.<span class="property">clientY</span> - <span class="variable language_">this</span>.<span class="property">y</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">cancelMove</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">isCanMove</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-bg</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">1000</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#1a1a1a</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-width</span>: <span class="number">900px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">60vh</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-height</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">30px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-header</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="number">#2a2a2a</span>, <span class="number">#1a1a1a</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: move;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-header</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">90deg</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">#444</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-main</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow-y</span>: auto;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#1a1a1a</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">scrollbar-width</span>: thin;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">scrollbar-color</span>: <span class="number">#444</span> <span class="number">#1a1a1a</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-main</span>::-webkit-scrollbar &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-main</span>::-webkit-scrollbar-track &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#1a1a1a</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-main</span>::-webkit-scrollbar-thumb &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#444</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#1a1a1a</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-footer</span> <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.model-footer</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#444</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.atalk</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: flex-start;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.atalk</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">content</span>: <span class="string">&quot;ğŸ¤–&quot;</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.atalk</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#2a2a2a</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#e0e0e0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.btalk</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: flex-end;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.btalk</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">content</span>: <span class="string">&quot;ğŸ‘¤&quot;</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.btalk</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#0078d4</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.input-container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#1a1a1a</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.inputword</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#444</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#2a2a2a</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.inputword</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-color</span>: <span class="number">#0078d4</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.btnsend</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#0078d4</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: all <span class="number">0.2s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.btnsend</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#0063b1</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.btnsend</span><span class="selector-pseudo">:disabled</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#555</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: not-allowed;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* æ€è€ƒä¸­æ ·å¼ */</span></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.atalk</span><span class="selector-class">.thinking</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#aaa</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-style</span>: italic;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#2a2a2a</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* é—®é¢˜æ ·å¼ */</span></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.atalk</span><span class="selector-class">.question</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#4fc3f7</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* æ‰“å­—æ•ˆæœ */</span></span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> blink &#123;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="number">0%</span>,</span></span><br><span class="line"><span class="language-css">    <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="number">50%</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.typing-cursor</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">content</span>: <span class="string">&quot;|&quot;</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation</span>: blink <span class="number">1s</span> infinite;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#4fc3f7</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®é™…æ•ˆæœ"><a href="#å®é™…æ•ˆæœ" class="headerlink" title="å®é™…æ•ˆæœ"></a>å®é™…æ•ˆæœ</h2><p><img src="/img/posts/2cdfea6540dd46c0ac183d985fd40a7e.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµå¼è¾“å‡ºå“åº”æ•°æ®</title>
      <link href="/2025/06/29/%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE/"/>
      <url>/2025/06/29/%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨DeepSeekè¿›è¡Œå¯¹è¯ç”Ÿæˆæ—¶ï¼Œå¼€å¯æµå¼è¾“å‡ºï¼ˆincrementalOutput&#x3D;trueï¼‰å¯ä»¥è®©æˆ‘ä»¬å®æ—¶è·å–æ¨¡å‹çš„å›ç­”å†…å®¹ï¼Œè€Œä¸æ˜¯ç­‰å¾…å®Œæ•´å›ç­”ç”Ÿæˆåä¸€æ¬¡æ€§è¿”å›ã€‚è¿™å¯¹äºæå‡ç”¨æˆ·ä½“éªŒéå¸¸æœ‰å¸®åŠ©ï¼Œå°¤å…¶æ˜¯åœ¨å›ç­”è¾ƒé•¿æˆ–å¤æ‚é—®é¢˜æ—¶ã€‚</p><h3 id="mavenä¾èµ–"><a href="#mavenä¾èµ–" class="headerlink" title="mavenä¾èµ–"></a>mavenä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/dashscope-sdk-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dashscope-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-simple<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.18.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Springboot"><a href="#Springboot" class="headerlink" title="Springboot"></a>Springboot</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(AIController.class);</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> GenerationParam <span class="title function_">buildGenerationParam</span><span class="params">(Message userMsg)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> GenerationParam.builder()</span><br><span class="line">            .apiKey(<span class="string">&quot;XXX&quot;</span>)</span><br><span class="line">            .model(<span class="string">&quot;deepseek-r1&quot;</span>)</span><br><span class="line">            .messages(Arrays.asList(userMsg))</span><br><span class="line">            .resultFormat(GenerationParam.ResultFormat.MESSAGE)</span><br><span class="line">            .incrementalOutput(<span class="literal">true</span>)</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(value = &quot;/query&quot;, produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span></span><br><span class="line"><span class="keyword">public</span> SseEmitter <span class="title function_">getBotContent</span><span class="params">(<span class="meta">@RequestParam</span> String question)</span> &#123;</span><br><span class="line">    <span class="type">SseEmitter</span> <span class="variable">emitter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SseEmitter</span>(<span class="number">60_000L</span>); <span class="comment">// 60ç§’è¶…æ—¶</span></span><br><span class="line"></span><br><span class="line">    executor.execute(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å…ˆå‘é€æ€è€ƒä¸­çŠ¶æ€</span></span><br><span class="line">            Map&lt;String, Object&gt; thinkingResponse = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            thinkingResponse.put(<span class="string">&quot;code&quot;</span>, <span class="number">200</span>);</span><br><span class="line">            thinkingResponse.put(<span class="string">&quot;msg1&quot;</span>, <span class="string">&quot;æ­£åœ¨åˆ†ææ‚¨çš„é—®é¢˜...&quot;</span>);</span><br><span class="line">            emitter.send(SseEmitter.event().data(thinkingResponse));</span><br><span class="line"></span><br><span class="line">            <span class="type">Generation</span> <span class="variable">gen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Generation</span>();</span><br><span class="line">            <span class="type">Message</span> <span class="variable">userMsg</span> <span class="operator">=</span> Message.builder()</span><br><span class="line">                    .role(Role.USER.getValue())</span><br><span class="line">                    .content(question)</span><br><span class="line">                    .build();</span><br><span class="line"></span><br><span class="line">            <span class="type">GenerationParam</span> <span class="variable">param</span> <span class="operator">=</span> buildGenerationParam(userMsg);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¤„ç†æµå¼å“åº”</span></span><br><span class="line">            gen.streamCall(param).blockingForEach(message -&gt; &#123;</span><br><span class="line">                Map&lt;String, Object&gt; response = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">                response.put(<span class="string">&quot;code&quot;</span>, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">reasoning</span> <span class="operator">=</span> message.getOutput().getChoices().get(<span class="number">0</span>).getMessage().getReasoningContent();</span><br><span class="line">                <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> message.getOutput().getChoices().get(<span class="number">0</span>).getMessage().getContent();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (reasoning != <span class="literal">null</span> &amp;&amp; !reasoning.isEmpty()) &#123;</span><br><span class="line">                    response.put(<span class="string">&quot;msg1&quot;</span>, reasoning);</span><br><span class="line">                    emitter.send(SseEmitter.event().data(response));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (content != <span class="literal">null</span> &amp;&amp; !content.isEmpty()) &#123;</span><br><span class="line">                    response.remove(<span class="string">&quot;msg1&quot;</span>);</span><br><span class="line">                    response.put(<span class="string">&quot;msg&quot;</span>, content);</span><br><span class="line">                    emitter.send(SseEmitter.event().data(response));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            emitter.complete();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;Error in streaming response&quot;</span>, e);</span><br><span class="line">            Map&lt;String, Object&gt; errorResponse = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            errorResponse.put(<span class="string">&quot;code&quot;</span>, <span class="number">500</span>);</span><br><span class="line">            errorResponse.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯: &quot;</span> + e.getMessage());</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                emitter.send(SseEmitter.event().data(errorResponse));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">            &#125;</span><br><span class="line">            emitter.completeWithError(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> emitter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doubao-chat-container&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;show&quot;</span> @<span class="attr">mousemove</span>=<span class="string">&quot;modelMove&quot;</span> @<span class="attr">mouseup</span>=<span class="string">&quot;cancelMove&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doubao-chat-window&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doubao-header&quot;</span> @<span class="attr">mousedown</span>=<span class="string">&quot;setStartingPoint&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doubao-logo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doubao-title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doubao-close&quot;</span> @<span class="attr">click.stop</span>=<span class="string">&quot;cancel&quot;</span>&gt;</span>Ã—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doubao-messages&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:class</span>=<span class="string">&quot;[&#x27;message&#x27;, item.id == 2 ? &#x27;bot-message&#x27; : &#x27;user-message&#x27;]&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;message-content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;message-text&quot;</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;isButtonDisabled&quot;</span> <span class="attr">class</span>=<span class="string">&quot;typing-indicator&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;doubao-input-area&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;wordone&quot;</span> <span class="attr">class</span>=<span class="string">&quot;doubao-input&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ¶ˆæ¯...&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;sendmsg&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;doubao-send-btn&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;sendmsg&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span> <span class="attr">width</span>=<span class="string">&quot;20&quot;</span> <span class="attr">height</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">d</span>=<span class="string">&quot;M2.01 21L23 12 2.01 3 2 10l15 2-15 2z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">show</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">title</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="string">&#x27;deepseek&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">x</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">y</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">node</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isCanMove</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isButtonDisabled</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">list</span>: [],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">wordone</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">wordtow</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">eventSource</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">currentIndex</span>: <span class="number">0</span>, <span class="comment">// å½“å‰æ˜¾ç¤ºçš„å­—ç¬¦ç´¢å¼•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">currentMessage</span>: <span class="literal">null</span>, <span class="comment">// å½“å‰æ­£åœ¨æ˜¾ç¤ºçš„æ¶ˆæ¯å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">typingTimer</span>: <span class="literal">null</span> <span class="comment">// é€å­—æ˜¾ç¤ºå®šæ—¶å™¨</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">node</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.model-container&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">sendmsg</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> == <span class="literal">false</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// é‡ç½®ç›¸å…³çŠ¶æ€å˜é‡</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">currentMessage</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">typingTimer</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;sigtuna&#x27;</span>, <span class="attr">content</span>: <span class="variable language_">this</span>.<span class="property">wordone</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">scrollToBottom</span>();</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">getBotContent</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">wordone</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">getBotContent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ·»åŠ æ€è€ƒä¸­çš„æç¤º</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;æ­£åœ¨æ€è€ƒä¸­...&#x27;</span>, <span class="attr">isThinking</span>: <span class="literal">true</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">eventSource</span> = <span class="keyword">new</span> <span class="title class_">EventSource</span>(<span class="string">`http://localhost:8080/api/deepSeek/query?question=<span class="subst">$&#123;<span class="variable language_">this</span>.wordone&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(event.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (data.<span class="property">code</span> === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (data.<span class="property">msg1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å¤„ç†æ€è€ƒé—®é¢˜æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">currentMessage</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">id</span> !== <span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ²¡æœ‰æ­£åœ¨æ˜¾ç¤ºçš„æ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ¶ˆæ¯ä¸æ˜¯æ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ€è€ƒé—®é¢˜æ¶ˆæ¯å·²ç»“æŸ</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span> = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;æ€è€ƒé—®é¢˜ï¼š&#x27;</span> + data.<span class="property">msg1</span>, <span class="attr">isThinking</span>: <span class="literal">true</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">currentMessage</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ­£åœ¨æ˜¾ç¤ºæ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œè¿½åŠ å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> += data.<span class="property">msg1</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (data.<span class="property">msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å¤„ç†å›ç­”æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">currentMessage</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">id</span> !== <span class="number">2</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">isThinking</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ²¡æœ‰æ­£åœ¨æ˜¾ç¤ºçš„å›ç­”æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ¶ˆæ¯ä¸æ˜¯å›ç­”æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ˜¯æ€è€ƒé—®é¢˜æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span> = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;å›ç­”é—®é¢˜ï¼š&#x27;</span> + data.<span class="property">msg</span>, <span class="attr">isThinking</span>: <span class="literal">false</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">currentMessage</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ­£åœ¨æ˜¾ç¤ºå›ç­”æ¶ˆæ¯ï¼Œè¿½åŠ å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> += data.<span class="property">msg</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">scrollToBottom</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="property">onerror</span> = <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ·»åŠ æ–°çš„æ–¹æ³•ç”¨äºå¤„ç†å†…å®¹æ›´æ–°æ—¶çš„æ»šåŠ¨</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">scrollToBottom</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> div = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">box</span>;</span></span><br><span class="line"><span class="language-javascript">                div.<span class="property">scrollTop</span> = div.<span class="property">scrollHeight</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">startTyping</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">typingTimer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentIndex</span> &lt; <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span>.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> = <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">currentIndex</span> + <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">currentIndex</span>++;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> div = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">box</span>;</span></span><br><span class="line"><span class="language-javascript">                    div.<span class="property">scrollTop</span> = div.<span class="property">scrollHeight</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">50</span>); <span class="comment">// æ§åˆ¶é€å­—æ˜¾ç¤ºé€Ÿåº¦ï¼Œå¯è°ƒæ•´</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">cancel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">eventSource</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;cancel&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;submit&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setStartingPoint</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">x</span> = e.<span class="property">clientX</span> - <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">offsetLeft</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">y</span> = e.<span class="property">clientY</span> - <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">offsetTop</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">isCanMove</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">modelMove</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isCanMove</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">style</span>.<span class="property">left</span> = e.<span class="property">clientX</span> - <span class="variable language_">this</span>.<span class="property">x</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">style</span>.<span class="property">top</span> = e.<span class="property">clientY</span> - <span class="variable language_">this</span>.<span class="property">y</span> + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">cancelMove</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">isCanMove</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-chat-container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">1000</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-chat-window</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">25px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="string">&quot;Segoe UI&quot;</span>, Roboto, Helvetica, Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-header</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">135deg</span>, <span class="number">#6e8efb</span>, <span class="number">#a777e3</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: move;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-logo</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-right</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#6e8efb</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-title</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-close</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: background <span class="number">0.2s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-close</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-messages</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow-y</span>: auto;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#f5f7fb</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.message</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-bottom</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.user-message</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-self</span>: flex-end;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bot-message</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-self</span>: flex-start;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.message-content</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.user-message</span> <span class="selector-class">.message-content</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#6e8efb</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top-right-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bot-message</span> <span class="selector-class">.message-content</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top-left-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-input-area</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#e5e5e5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-input</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e5e5e5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: border <span class="number">0.2s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-input</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-color</span>: <span class="number">#6e8efb</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-send-btn</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#6e8efb</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: background <span class="number">0.2s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-send-btn</span><span class="selector-pseudo">:disabled</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#cccccc</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: not-allowed;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-send-btn</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:disabled</span>)<span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#5a7df4</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.typing-indicator</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-self</span>: flex-start;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dot</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#a777e3</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation</span>: bounce <span class="number">1.4s</span> infinite ease-in-out;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dot</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation-delay</span>: <span class="number">0s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dot</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation-delay</span>: <span class="number">0.2s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dot</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation-delay</span>: <span class="number">0.4s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> bounce &#123;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="number">0%</span>,</span></span><br><span class="line"><span class="language-css">    <span class="number">60%</span>,</span></span><br><span class="line"><span class="language-css">    <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="number">30%</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">5px</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* æ»šåŠ¨æ¡æ ·å¼ */</span></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-messages</span>::-webkit-scrollbar &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-messages</span>::-webkit-scrollbar-track &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#f1f1f1</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-messages</span>::-webkit-scrollbar-thumb &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#c1c1c1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-messages</span>::-webkit-scrollbar-thumb:hover &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#a8a8a8</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åŒæ—¶åœ¨ä¸»é¡µé¢ä¸­å¼•å…¥"><a href="#åŒæ—¶åœ¨ä¸»é¡µé¢ä¸­å¼•å…¥" class="headerlink" title="åŒæ—¶åœ¨ä¸»é¡µé¢ä¸­å¼•å…¥"></a>åŒæ—¶åœ¨ä¸»é¡µé¢ä¸­å¼•å…¥</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Model</span> <span class="attr">:show</span>=<span class="string">&quot;show&quot;</span> @<span class="attr">cancel</span>=<span class="string">&quot;cancel&quot;</span> @<span class="attr">submit</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Model</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">Model</span> <span class="keyword">from</span> <span class="string">&#x27;./Model.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">show</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">Model</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">cancel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">show</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">show</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">diaglog</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">show</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="uni-app"><a href="#uni-app" class="headerlink" title="uni-app"></a>uni-app</h3><p>ä¸‹è½½ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import uniIcons from <span class="string">&#x27;@dcloudio/uni-ui/lib/uni-icons/uni-icons.vue&#x27;</span></span><br></pre></td></tr></table></figure><p>é¡µé¢ä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;doubao-page&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;doubao-header&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;doubao-logo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;doubao-title&quot;</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;doubao-messages&quot;</span> <span class="attr">scroll-y</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:scroll-top</span>=<span class="string">&quot;scrollTop&quot;</span> <span class="attr">scroll-with-animation</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:class</span>=<span class="string">&quot;[&#x27;message-container&#x27;, item.id == 2 ? &#x27;bot-container&#x27; : &#x27;user-container&#x27;]&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;message-content&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;item.id == 2 ? &#x27;bot-message&#x27; : &#x27;user-message&#x27;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;message-text&quot;</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-if</span>=<span class="string">&quot;isButtonDisabled&quot;</span> <span class="attr">class</span>=<span class="string">&quot;typing-indicator&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;dot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;doubao-input-area&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;wordone&quot;</span> <span class="attr">class</span>=<span class="string">&quot;doubao-input&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ¶ˆæ¯...&quot;</span> @<span class="attr">confirm</span>=<span class="string">&quot;sendmsg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;doubao-send-btn&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span> @<span class="attr">tap</span>=<span class="string">&quot;sendmsg&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;paperplane&quot;</span> <span class="attr">size</span>=<span class="string">&quot;20&quot;</span> <span class="attr">color</span>=<span class="string">&quot;#fff&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> uniIcons <span class="keyword">from</span> <span class="string">&#x27;@dcloudio/uni-ui/lib/uni-icons/uni-icons.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      uniIcons</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;deepseek&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isButtonDisabled</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">list</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">content</span>: <span class="string">&#x27;æ‚¨å¥½ï¼æˆ‘æ˜¯æ™ºèƒ½åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">wordone</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">scrollTop</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">currentIndex</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">currentMessage</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">typingTimer</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">eventSource</span>: <span class="literal">null</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">sendmsg</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> || !<span class="variable language_">this</span>.<span class="property">wordone</span>.<span class="title function_">trim</span>()) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨å’ŒçŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">eventSource</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">currentMessage</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">typingTimer</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">content</span>: <span class="variable language_">this</span>.<span class="property">wordone</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">scrollToBottom</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// è·å–æœºå™¨äººå›å¤</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">getBotContent</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">wordone</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">getBotContent</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ·»åŠ æ€è€ƒä¸­çš„æç¤º</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;æ­£åœ¨æ€è€ƒä¸­...&#x27;</span>, <span class="attr">isThinking</span>: <span class="literal">true</span> &#125;);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">eventSource</span> = <span class="keyword">new</span> <span class="title class_">EventSource</span>(<span class="string">`http://localhost:8080/api/deepSeek/query?question=<span class="subst">$&#123;<span class="variable language_">this</span>.wordone&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(event.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (data.<span class="property">code</span> === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (data.<span class="property">msg1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="comment">// å¤„ç†æ€è€ƒé—®é¢˜æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">currentMessage</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">id</span> !== <span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ²¡æœ‰æ­£åœ¨æ˜¾ç¤ºçš„æ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ¶ˆæ¯ä¸æ˜¯æ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ€è€ƒé—®é¢˜æ¶ˆæ¯å·²ç»“æŸ</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span> = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;æ€è€ƒé—®é¢˜ï¼š&#x27;</span> + data.<span class="property">msg1</span>, <span class="attr">isThinking</span>: <span class="literal">true</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">currentMessage</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ­£åœ¨æ˜¾ç¤ºæ€è€ƒé—®é¢˜æ¶ˆæ¯ï¼Œè¿½åŠ å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> += data.<span class="property">msg1</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (data.<span class="property">msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// å¤„ç†å›ç­”æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">currentMessage</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">id</span> !== <span class="number">2</span> || <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">isThinking</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ²¡æœ‰æ­£åœ¨æ˜¾ç¤ºçš„å›ç­”æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ¶ˆæ¯ä¸æ˜¯å›ç­”æ¶ˆæ¯ï¼Œæˆ–è€…å½“å‰æ˜¯æ€è€ƒé—®é¢˜æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span> = &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;å›ç­”é—®é¢˜ï¼š&#x27;</span> + data.<span class="property">msg</span>, <span class="attr">isThinking</span>: <span class="literal">false</span> &#125;;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">currentMessage</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentIndex</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">// å¦‚æœå½“å‰æ­£åœ¨æ˜¾ç¤ºå›ç­”æ¶ˆæ¯ï¼Œè¿½åŠ å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> += data.<span class="property">msg</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">forceScrollToBottom</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="property">onerror</span> = <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">scrollToBottom</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">scrollTop</span> = <span class="number">999999</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å¼ºæ•ˆæ»šåŠ¨åˆ°åº•éƒ¨æ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">forceScrollToBottom</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> query = uni.<span class="title function_">createSelectorQuery</span>().<span class="title function_">in</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">                query.<span class="title function_">select</span>(<span class="string">&#x27;.doubao-messages&#x27;</span>).<span class="title function_">boundingClientRect</span>();</span></span><br><span class="line"><span class="language-javascript">                query.<span class="title function_">select</span>(<span class="string">&#x27;.doubao-messages&#x27;</span>).<span class="title function_">scrollOffset</span>();</span></span><br><span class="line"><span class="language-javascript">                query.<span class="title function_">exec</span>(<span class="function">(<span class="params">rects</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (rects &amp;&amp; rects[<span class="number">1</span>]) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> scrollHeight = rects[<span class="number">0</span>].<span class="property">height</span>;</span></span><br><span class="line"><span class="language-javascript">                        uni.<span class="title function_">pageScrollTo</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">scrollTop</span>: scrollHeight,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">duration</span>: <span class="number">300</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">startTyping</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">typingTimer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">currentIndex</span> &lt; <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span>.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span> = <span class="variable language_">this</span>.<span class="property">currentMessage</span>.<span class="property">content</span>.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">currentIndex</span> + <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">currentIndex</span>++;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">scrollToBottom</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">50</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// é¡µé¢å¸è½½æ—¶å…³é—­è¿æ¥</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">eventSource</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">eventSource</span>.<span class="title function_">close</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">typingTimer</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">typingTimer</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-page</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">90vh</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#f5f7fb</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-header</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">120</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">135deg</span>, <span class="number">#6e8efb</span>, <span class="number">#a777e3</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">40</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: sticky;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">10</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-logo</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">64</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">64</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-right</span>: <span class="number">24</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#6e8efb</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-title</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-messages</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">40</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#f5f7fb</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.message</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-bottom</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.user-message</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-self</span>: flex-end;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bot-message</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-self</span>: flex-start;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.message-content</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">24</span>rpx <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">36</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.user-message</span> <span class="selector-class">.message-content</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#6e8efb</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top-right-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bot-message</span> <span class="selector-class">.message-content</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4</span>rpx <span class="number">16</span>rpx <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top-left-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-input-area</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top</span>: <span class="number">1</span>rpx solid <span class="number">#e5e5e5</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-input</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#e5e5e5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">40</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-right</span>: <span class="number">20</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-send-btn</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">80</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#6e8efb</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.doubao-send-btn</span><span class="selector-attr">[disabled]</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#cccccc</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.typing-indicator</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">16</span>rpx <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">36</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4</span>rpx <span class="number">16</span>rpx <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">align-self</span>: flex-start;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">16</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dot</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">16</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">16</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#a777e3</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation</span>: bounce <span class="number">1.4s</span> infinite ease-in-out;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dot</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation-delay</span>: <span class="number">0s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dot</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation-delay</span>: <span class="number">0.2s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dot</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation-delay</span>: <span class="number">0.4s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> bounce &#123;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="number">0%</span>,</span></span><br><span class="line"><span class="language-css">    <span class="number">60%</span>,</span></span><br><span class="line"><span class="language-css">    <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="number">30%</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">10</span>rpx);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.message-container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-bottom</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.user-container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: flex-end;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bot-container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">justify-content</span>: flex-start;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* ä¿®æ”¹åŸæœ‰æ¶ˆæ¯æ ·å¼ */</span></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.message-content</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">max-width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">24</span>rpx <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">36</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.user-message</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#6e8efb</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top-right-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-bottom-left-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bot-message</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4</span>rpx <span class="number">16</span>rpx <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-top-left-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-bottom-right-radius</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cssä¸­gridçš„ä½¿ç”¨</title>
      <link href="/2025/06/29/css%E4%B8%ADgrid%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/06/29/css%E4%B8%ADgrid%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="CSS-Grid-å¸ƒå±€å®Œå…¨æŒ‡å—"><a href="#CSS-Grid-å¸ƒå±€å®Œå…¨æŒ‡å—" class="headerlink" title="CSS Grid å¸ƒå±€å®Œå…¨æŒ‡å—"></a>CSS Grid å¸ƒå±€å®Œå…¨æŒ‡å—</h2><ol><li>åŸºæœ¬æ¦‚å¿µ</li></ol><p>CSS Grid å¸ƒå±€æ˜¯ CSS ä¸­æœ€å¼ºå¤§çš„äºŒç»´å¸ƒå±€ç³»ç»Ÿï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡è¡Œå’Œåˆ—çš„æ–¹å¼æ¥åˆ›å»ºå¤æ‚çš„ç½‘é¡µå¸ƒå±€ã€‚</p><p>æ ¸å¿ƒç‰¹ç‚¹ï¼š<br>â€¢ äºŒç»´å¸ƒå±€ï¼šåŒæ—¶æ§åˆ¶è¡Œå’Œåˆ—</p><p>â€¢ ç²¾å‡†å®šä½ï¼šå¯ä»¥ç²¾ç¡®æ§åˆ¶æ¯ä¸ªç½‘æ ¼é¡¹çš„ä½ç½®</p><p>â€¢ å“åº”å¼å‹å¥½ï¼šè½»æ¾åˆ›å»ºé€‚åº”ä¸åŒå±å¹•å°ºå¯¸çš„å¸ƒå±€</p><p>â€¢ ä»£ç ç®€æ´ï¼šå‡å°‘å¸ƒå±€æ‰€éœ€çš„HTMLç»“æ„å’ŒCSSä»£ç </p><ol start="2"><li>åŸºç¡€è¯­æ³•</li></ol><p>2.1 åˆ›å»ºç½‘æ ¼å®¹å™¨</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid; <span class="comment">/* æˆ– inline-grid */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.2 å®šä¹‰ç½‘æ ¼è½¨é“</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">200px</span> <span class="number">1</span>fr; <span class="comment">/* 3åˆ— */</span></span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">50px</span> auto <span class="number">100px</span>; <span class="comment">/* 3è¡Œ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç½‘æ ¼å±æ€§è¯¦è§£</li></ol><p>3.1 å®¹å™¨å±æ€§</p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>grid-template-columns</code></td><td>å®šä¹‰åˆ—å®½</td><td><code>repeat(4, 1fr)</code></td></tr><tr><td><code>grid-template-rows</code></td><td>å®šä¹‰è¡Œé«˜</td><td><code>100px minmax(200px, auto)</code></td></tr><tr><td><code>grid-template-areas</code></td><td>å®šä¹‰å‘½åç½‘æ ¼åŒºåŸŸ</td><td><code>&quot;header header&quot; &quot;sidebar main&quot;</code></td></tr><tr><td><code>gap</code></td><td>ç½‘æ ¼é—´è·</td><td><code>gap: 20px 10px</code> (è¡Œ åˆ—)</td></tr><tr><td><code>justify-items</code></td><td>ç½‘æ ¼é¡¹æ°´å¹³å¯¹é½</td><td>&#96;start</td></tr><tr><td><code>align-items</code></td><td>ç½‘æ ¼é¡¹å‚ç›´å¯¹é½</td><td>&#96;start</td></tr><tr><td><code>grid-auto-flow</code></td><td>è‡ªåŠ¨æ”¾ç½®ç®—æ³•</td><td>&#96;row</td></tr></tbody></table><p>3.2 ç½‘æ ¼é¡¹å±æ€§</p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>grid-column</code></td><td>è·¨åˆ—æ§åˆ¶</td><td><code>1 / 3</code> æˆ– <code>span 2</code></td></tr><tr><td><code>grid-row</code></td><td>è·¨è¡Œæ§åˆ¶</td><td><code>2 / 4</code> æˆ– <code>span 3</code></td></tr><tr><td><code>grid-area</code></td><td>æŒ‡å®šå‘½ååŒºåŸŸ</td><td><code>header</code></td></tr><tr><td><code>justify-self</code></td><td>å•é¡¹æ°´å¹³å¯¹é½</td><td>&#96;start</td></tr><tr><td><code>align-self</code></td><td>å•é¡¹å‚ç›´å¯¹é½</td><td>&#96;start</td></tr></tbody></table><ol start="4"><li>å®ç”¨å¸ƒå±€æ¨¡å¼</li></ol><p>4.1 ç»å…¸12åˆ—å¸ƒå±€</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">12</span>, <span class="number">1</span>fr);</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-4col</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: span <span class="number">4</span>; <span class="comment">/* å 4åˆ— */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item-6col</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: span <span class="number">6</span>; <span class="comment">/* å 6åˆ— */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.2 å“åº”å¼ç½‘æ ¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.grid</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(auto-fill, <span class="built_in">minmax</span>(<span class="number">250px</span>, <span class="number">1</span>fr));</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.3 å¤§å±ä»ªè¡¨ç›˜å¸ƒå±€</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dashboard</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template</span>:</span><br><span class="line">    <span class="string">&quot;header header header&quot;</span> <span class="number">80px</span></span><br><span class="line">    <span class="string">&quot;sidebar chart chart&quot;</span> <span class="number">1</span>fr</span><br><span class="line">    <span class="string">&quot;sidebar stats stats&quot;</span> auto</span><br><span class="line">    / <span class="number">250px</span> <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123; <span class="attribute">grid-area</span>: header; &#125;</span><br><span class="line"><span class="selector-class">.sidebar</span> &#123; <span class="attribute">grid-area</span>: sidebar; &#125;</span><br><span class="line"><span class="selector-class">.chart</span> &#123; <span class="attribute">grid-area</span>: chart; &#125;</span><br><span class="line"><span class="selector-class">.stats</span> &#123; <span class="attribute">grid-area</span>: stats; &#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>é«˜çº§æŠ€å·§</li></ol><p>5.1 éšå¼ç½‘æ ¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">grid-auto-rows</span>: <span class="number">100px</span>; <span class="comment">/* éšå¼è¡Œé«˜ */</span></span><br><span class="line">  <span class="attribute">grid-auto-columns</span>: <span class="number">1</span>fr; <span class="comment">/* éšå¼åˆ—å®½ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.2 é‡å å…ƒç´ </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item1</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item2</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">2</span> / <span class="number">4</span>;</span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.3 å­ç½‘æ ¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: subgrid; <span class="comment">/* ç»§æ‰¿çˆ¶ç½‘æ ¼ */</span></span><br><span class="line">  <span class="attribute">grid-column</span>: span <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="6"><li>æœ€ä½³å®è·µ</li><li>å‘½åç½‘æ ¼çº¿æé«˜å¯è¯»æ€§ï¼š</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">grid-template-columns</span>: [start] <span class="number">1</span>fr [center] <span class="number">1</span>fr [end];</span><br></pre></td></tr></table></figure><ol start="8"><li>ç»“åˆCSSå˜é‡å®ç°åŠ¨æ€å¸ƒå±€ï¼š</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--columns</span>: <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.grid</span> &#123;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="built_in">var</span>(--columns), <span class="number">1</span>fr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="9"><li>æ¸è¿›å¢å¼ºç­–ç•¥ï¼š</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left; <span class="comment">/* æ—§æµè§ˆå™¨å›é€€ */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">@supports</span> (<span class="attribute">display</span>: <span class="attribute">grid</span>) &#123;</span><br><span class="line">    <span class="attribute">float</span>: none;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">    <span class="attribute">grid-column</span>: span <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="10"><li>æµè§ˆå™¨æ”¯æŒ</li></ol><p>â€¢ æ‰€æœ‰ç°ä»£æµè§ˆå™¨å®Œå…¨æ”¯æŒï¼ˆåŒ…æ‹¬Edge 16+ï¼‰</p><p>â€¢ IE10&#x2F;11æ”¯æŒæ—§ç‰ˆè¯­æ³•ï¼ˆåŠ <code>-ms-</code>å‰ç¼€ï¼‰</p><p>â€¢ æ¨èä½¿ç”¨Autoprefixerå¤„ç†å…¼å®¹æ€§</p><ol start="8"><li>å­¦ä¹ èµ„æº</li><li><a href="https://css-tricks.com/snippets/css/complete-guide-grid/">CSS Tricks Gridå®Œå…¨æŒ‡å—</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Grid_Layout">MDN Gridå¸ƒå±€</a></li><li><a href="https://gridbyexample.com/">Grid by Example</a></li></ol><hr><p>è¿™ä»½æ–‡æ¡£æ¶µç›–äº†CSS Gridçš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œå»ºè®®ä¿å­˜ä¸ºMarkdownæ–‡ä»¶(.md)ä»¥ä¾¿éšæ—¶æŸ¥é˜…ã€‚éœ€è¦ä»»ä½•éƒ¨åˆ†çš„è¯¦ç»†è§£é‡Šæˆ–å…·ä½“ç¤ºä¾‹ï¼Œå¯ä»¥éšæ—¶å‘Šè¯‰æˆ‘ï¼</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå®ç°Argon2åŠ å¯†</title>
      <link href="/2025/06/29/Java%E5%AE%9E%E7%8E%B0Argon2%E5%8A%A0%E5%AF%86/"/>
      <url>/2025/06/29/Java%E5%AE%9E%E7%8E%B0Argon2%E5%8A%A0%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ Argon2 ç®—æ³•çš„ Java å®ç°ï¼Œç”¨äºå®‰å…¨å¯†ç å“ˆå¸Œå­˜å‚¨ã€‚Argon2 æ˜¯å¯†ç å“ˆå¸Œç«èµ›ï¼ˆPHCï¼‰çš„è·èƒœè€…ï¼Œè¢«å…¬è®¤ä¸ºå½“å‰æœ€å®‰å…¨çš„å¯†ç å“ˆå¸Œç®—æ³•ä¹‹ä¸€ã€‚</p><hr><h2 id="1-æ·»åŠ ä¾èµ–"><a href="#1-æ·»åŠ ä¾èµ–" class="headerlink" title="1. æ·»åŠ ä¾èµ–"></a>1. æ·»åŠ ä¾èµ–</h2><p>é¦–å…ˆï¼Œåœ¨ <code>pom.xml</code> ä¸­æ·»åŠ  <a href="https://www.bouncycastle.org/">Bouncy Castle</a> æˆ– <a href="https://github.com/phxql/argon2-jvm">Argon2 JVM</a> æ”¯æŒï¼š</p><p><strong>é€‰é¡¹1ï¼šBouncy Castleï¼ˆæ¨èï¼‰</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.bouncycastle<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bcprov-jdk15on<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.70<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>é€‰é¡¹2ï¼šArgon2 JVM</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.mkammerer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>argon2-jvm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="2-å®Œæ•´ä»£ç å®ç°ï¼ˆåŸºäº-Bouncy-Castleï¼‰"><a href="#2-å®Œæ•´ä»£ç å®ç°ï¼ˆåŸºäº-Bouncy-Castleï¼‰" class="headerlink" title="2. å®Œæ•´ä»£ç å®ç°ï¼ˆåŸºäº Bouncy Castleï¼‰"></a>2. å®Œæ•´ä»£ç å®ç°ï¼ˆåŸºäº Bouncy Castleï¼‰</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.bouncycastle.crypto.generators.Argon2BytesGenerator;</span><br><span class="line"><span class="keyword">import</span> org.bouncycastle.crypto.params.Argon2Parameters;</span><br><span class="line"><span class="keyword">import</span> java.security.SecureRandom;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Argon2PasswordHasher</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Argon2 é…ç½®å‚æ•°ï¼ˆå¯æ ¹æ®ç¡¬ä»¶æ€§èƒ½è°ƒæ•´ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ITERATIONS</span> <span class="operator">=</span> <span class="number">10</span>;          <span class="comment">// è¿­ä»£æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MEMORY</span> <span class="operator">=</span> <span class="number">65536</span>;          <span class="comment">// å†…å­˜æ¶ˆè€—ï¼ˆKBï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PARALLELISM</span> <span class="operator">=</span> <span class="number">1</span>;         <span class="comment">// å¹¶è¡Œçº¿ç¨‹æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SALT_LENGTH</span> <span class="operator">=</span> <span class="number">16</span>;        <span class="comment">// ç›å€¼é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">HASH_LENGTH</span> <span class="operator">=</span> <span class="number">32</span>;        <span class="comment">// å“ˆå¸Œè¾“å‡ºé•¿åº¦ï¼ˆå­—èŠ‚ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆ Argon2 å“ˆå¸Œå¯†ç ï¼ˆæ ¼å¼ï¼šç›å€¼:å“ˆå¸Œå€¼ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">hashPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="comment">// ç”Ÿæˆéšæœºç›å€¼</span></span><br><span class="line">        <span class="type">byte</span>[] salt = generateSalt(SALT_LENGTH);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é…ç½® Argon2 å‚æ•°</span></span><br><span class="line">        Argon2Parameters.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Argon2Parameters</span>.Builder(Argon2Parameters.ARGON2_id)</span><br><span class="line">                .withSalt(salt)</span><br><span class="line">                .withIterations(ITERATIONS)</span><br><span class="line">                .withMemoryAsKB(MEMORY)</span><br><span class="line">                .withParallelism(PARALLELISM);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”Ÿæˆå“ˆå¸Œ</span></span><br><span class="line">        <span class="type">Argon2BytesGenerator</span> <span class="variable">generator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Argon2BytesGenerator</span>();</span><br><span class="line">        generator.init(builder.build());</span><br><span class="line">        <span class="type">byte</span>[] hash = <span class="keyword">new</span> <span class="title class_">byte</span>[HASH_LENGTH];</span><br><span class="line">        generator.generateBytes(password.toCharArray(), hash);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿”å› Base64 ç¼–ç çš„ç›å€¼å’Œå“ˆå¸Œ</span></span><br><span class="line">        <span class="keyword">return</span> Base64.getEncoder().encodeToString(salt) + <span class="string">&quot;:&quot;</span> + </span><br><span class="line">               Base64.getEncoder().encodeToString(hash);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éªŒè¯å¯†ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">verifyPassword</span><span class="params">(String inputPassword, String storedHash)</span> &#123;</span><br><span class="line">        <span class="comment">// æ‹†åˆ†ç›å€¼å’Œå“ˆå¸Œ</span></span><br><span class="line">        String[] parts = storedHash.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">        <span class="type">byte</span>[] salt = Base64.getDecoder().decode(parts[<span class="number">0</span>]);</span><br><span class="line">        <span class="type">byte</span>[] originalHash = Base64.getDecoder().decode(parts[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ç›¸åŒç›å€¼é‡æ–°è®¡ç®—å“ˆå¸Œ</span></span><br><span class="line">        Argon2Parameters.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Argon2Parameters</span>.Builder(Argon2Parameters.ARGON2_id)</span><br><span class="line">                .withSalt(salt)</span><br><span class="line">                .withIterations(ITERATIONS)</span><br><span class="line">                .withMemoryAsKB(MEMORY)</span><br><span class="line">                .withParallelism(PARALLELISM);</span><br><span class="line"></span><br><span class="line">        <span class="type">Argon2BytesGenerator</span> <span class="variable">generator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Argon2BytesGenerator</span>();</span><br><span class="line">        generator.init(builder.build());</span><br><span class="line">        <span class="type">byte</span>[] newHash = <span class="keyword">new</span> <span class="title class_">byte</span>[HASH_LENGTH];</span><br><span class="line">        generator.generateBytes(inputPassword.toCharArray(), newHash);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯¹æ¯”å“ˆå¸Œå€¼</span></span><br><span class="line">        <span class="keyword">return</span> MessageDigest.isEqual(originalHash, newHash);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿæˆéšæœºç›å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">byte</span>[] generateSalt(<span class="type">int</span> length) &#123;</span><br><span class="line">        <span class="type">SecureRandom</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">        <span class="type">byte</span>[] salt = <span class="keyword">new</span> <span class="title class_">byte</span>[length];</span><br><span class="line">        random.nextBytes(salt);</span><br><span class="line">        <span class="keyword">return</span> salt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•ç¤ºä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;MySecurePassword123!&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å“ˆå¸Œå¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">hashedPassword</span> <span class="operator">=</span> hashPassword(password);</span><br><span class="line">        System.out.println(<span class="string">&quot;Hashed Password: &quot;</span> + hashedPassword);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éªŒè¯å¯†ç </span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isValid</span> <span class="operator">=</span> verifyPassword(password, hashedPassword);</span><br><span class="line">        System.out.println(<span class="string">&quot;Password Valid: &quot;</span> + isValid); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">        isValid = verifyPassword(<span class="string">&quot;WrongPassword&quot;</span>, hashedPassword);</span><br><span class="line">        System.out.println(<span class="string">&quot;Wrong Password Valid: &quot;</span> + isValid); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-å…³é”®å‚æ•°è¯´æ˜"><a href="#3-å…³é”®å‚æ•°è¯´æ˜" class="headerlink" title="3. å…³é”®å‚æ•°è¯´æ˜"></a>3. å…³é”®å‚æ•°è¯´æ˜</h2><table><thead><tr><th>å‚æ•°</th><th>æ¨èå€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>ITERATIONS</td><td>10-20</td><td>å¢åŠ è®¡ç®—æ—¶é—´ï¼Œé˜²å¾¡æš´åŠ›ç ´è§£</td></tr><tr><td>MEMORY</td><td>64MB-1GB (65536 KB)</td><td>å¢åŠ å†…å­˜æ¶ˆè€—ï¼Œé˜²å¾¡GPU&#x2F;ASICæ”»å‡»</td></tr><tr><td>PARALLELISM</td><td>1-2</td><td>å¹¶è¡Œçº¿ç¨‹æ•°ï¼ˆé€šå¸¸1å³å¯ï¼‰</td></tr><tr><td>SALT_LENGTH</td><td>16å­—èŠ‚</td><td>ç¡®ä¿æ¯ä¸ªå¯†ç å“ˆå¸Œå”¯ä¸€</td></tr><tr><td>HASH_LENGTH</td><td>32å­—èŠ‚</td><td>è¾“å‡ºå“ˆå¸Œé•¿åº¦ï¼ˆä¸SHA-256ä¸€è‡´ï¼‰</td></tr></tbody></table><hr><h2 id="4-ä¸ºä»€ä¹ˆé€‰æ‹©-Argon2ï¼Ÿ"><a href="#4-ä¸ºä»€ä¹ˆé€‰æ‹©-Argon2ï¼Ÿ" class="headerlink" title="4. ä¸ºä»€ä¹ˆé€‰æ‹© Argon2ï¼Ÿ"></a>4. ä¸ºä»€ä¹ˆé€‰æ‹© Argon2ï¼Ÿ</h2><ol><li>æŠ—GPU&#x2F;ASICï¼šå†…å­˜å¯†é›†å‹è®¾è®¡ï¼Œæ˜¾è‘—å¢åŠ ç¡¬ä»¶æ”»å‡»æˆæœ¬ã€‚</li><li>çµæ´»é…ç½®ï¼šå¯è°ƒæ•´æ—¶é—´&#x2F;å†…å­˜&#x2F;çº¿ç¨‹å‚æ•°ï¼Œé€‚åº”ä¸åŒç¡¬ä»¶ã€‚</li><li>PHCè·èƒœè€…ï¼šå­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œå…¬è®¤çš„æœ€å®‰å…¨å¯†ç å“ˆå¸Œç®—æ³•ã€‚</li></ol><hr><h2 id="5-æ³¨æ„äº‹é¡¹"><a href="#5-æ³¨æ„äº‹é¡¹" class="headerlink" title="5. æ³¨æ„äº‹é¡¹"></a>5. æ³¨æ„äº‹é¡¹</h2><p>â€¢ å‚æ•°è°ƒä¼˜ï¼šæ ¹æ®æœåŠ¡å™¨æ€§èƒ½è°ƒæ•´ <code>ITERATIONS</code> å’Œ <code>MEMORY</code>ï¼ˆç›®æ ‡ï¼šå“ˆå¸Œè€—æ—¶çº¦0.5-1ç§’ï¼‰ã€‚</p><p>â€¢ å¯†ç ç¼–ç ï¼šå»ºè®®æ˜ç¡®æŒ‡å®šå­—ç¬¦é›†ï¼ˆå¦‚ <code>password.getBytes(StandardCharsets.UTF_8)</code>ï¼‰ã€‚</p><p>â€¢ ä¾èµ–æ›´æ–°ï¼šå®šæœŸæ£€æŸ¥ Bouncy Castle çš„<a href="https://www.bouncycastle.org/latest_releases.html">å®‰å…¨å…¬å‘Š</a>ã€‚</p><hr><h2 id="6-æ€§èƒ½å¯¹æ¯”ï¼ˆç¤ºä¾‹ï¼‰"><a href="#6-æ€§èƒ½å¯¹æ¯”ï¼ˆç¤ºä¾‹ï¼‰" class="headerlink" title="6. æ€§èƒ½å¯¹æ¯”ï¼ˆç¤ºä¾‹ï¼‰"></a>6. æ€§èƒ½å¯¹æ¯”ï¼ˆç¤ºä¾‹ï¼‰</h2><table><thead><tr><th>ç®—æ³•</th><th>å“ˆå¸Œè€—æ—¶ï¼ˆ1æ ¸CPUï¼‰</th><th>æŠ—GPUæ”»å‡»èƒ½åŠ›</th></tr></thead><tbody><tr><td>SHA-256</td><td>0.01ms</td><td>âŒ</td></tr><tr><td>PBKDF2</td><td>100ms</td><td>âš ï¸ä¸­ç­‰</td></tr><tr><td>Argon2</td><td>500ms</td><td>âœ…æœ€å¼º</td></tr></tbody></table><hr><p>ä»¥ä¸Šå®ç°å¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå¦‚éœ€è¿›ä¸€æ­¥å¼ºåŒ–ï¼Œå¯ç»“åˆåŠ å¯†ï¼ˆå¦‚AESï¼‰å­˜å‚¨ç›å€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Navicatå¯†ç ç ´è§£</title>
      <link href="/2025/06/29/Navicat%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3/"/>
      <url>/2025/06/29/Navicat%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">namespace</span> <span class="title class_">FatSmallTools</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NavicatPassword</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">protected</span> <span class="variable">$version</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">protected</span> <span class="variable">$aesKey</span> = <span class="string">&#x27;libcckeylibcckey&#x27;</span>;</span><br><span class="line">  <span class="keyword">protected</span> <span class="variable">$aesIv</span> = <span class="string">&#x27;libcciv libcciv &#x27;</span>;</span><br><span class="line">  <span class="keyword">protected</span> <span class="variable">$blowString</span> = <span class="string">&#x27;3DC5CA39&#x27;</span>;</span><br><span class="line">  <span class="keyword">protected</span> <span class="variable">$blowKey</span> = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">protected</span> <span class="variable">$blowIv</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$version</span> = <span class="number">12</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;version = <span class="variable">$version</span>;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;blowKey = <span class="title function_ invoke__">sha1</span>(<span class="string">&#x27;3DC5CA39&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;blowIv = <span class="title function_ invoke__">hex2bin</span>(<span class="string">&#x27;d9c7c3c8870d64bd&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">encrypt</span>(<span class="params"><span class="variable">$string</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="literal">FALSE</span>;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable language_">$this</span>-&gt;version) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">      <span class="variable">$result</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encryptEleven</span>(<span class="variable">$string</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">      <span class="variable">$result</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encryptTwelve</span>(<span class="variable">$string</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">encryptEleven</span>(<span class="params"><span class="variable">$string</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable">$round</span> = <span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$string</span>) / <span class="number">8</span>));</span><br><span class="line">    <span class="variable">$leftLength</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$string</span>) % <span class="number">8</span>;</span><br><span class="line">    <span class="variable">$result</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="variable">$currentVector</span> = <span class="variable language_">$this</span>-&gt;blowIv;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$round</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">      <span class="variable">$temp</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encryptBlock</span>(<span class="variable">$this</span>-&gt;<span class="title function_ invoke__">xorBytes</span>(<span class="title function_ invoke__">substr</span>(<span class="variable">$string</span>, <span class="number">8</span> * <span class="variable">$i</span>, <span class="number">8</span>), <span class="variable">$currentVector</span>));</span><br><span class="line">      <span class="variable">$currentVector</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">xorBytes</span>(<span class="variable">$currentVector</span>, <span class="variable">$temp</span>);</span><br><span class="line">      <span class="variable">$result</span> .= <span class="variable">$temp</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$leftLength</span>) &#123;</span><br><span class="line">      <span class="variable">$currentVector</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encryptBlock</span>(<span class="variable">$currentVector</span>);</span><br><span class="line">      <span class="variable">$result</span> .= <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">xorBytes</span>(<span class="title function_ invoke__">substr</span>(<span class="variable">$string</span>, <span class="number">8</span> * <span class="variable">$i</span>, <span class="variable">$leftLength</span>), <span class="variable">$currentVector</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">strtoupper</span>(<span class="title function_ invoke__">bin2hex</span>(<span class="variable">$result</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">encryptBlock</span>(<span class="params"><span class="variable">$block</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">openssl_encrypt</span>(<span class="variable">$block</span>, <span class="string">&#x27;BF-ECB&#x27;</span>, <span class="variable">$this</span>-&gt;blowKey, OPENSSL_RAW_DATA|OPENSSL_NO_PADDING); </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">decryptBlock</span>(<span class="params"><span class="variable">$block</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">openssl_decrypt</span>(<span class="variable">$block</span>, <span class="string">&#x27;BF-ECB&#x27;</span>, <span class="variable">$this</span>-&gt;blowKey, OPENSSL_RAW_DATA|OPENSSL_NO_PADDING); </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">xorBytes</span>(<span class="params"><span class="variable">$str1</span>, <span class="variable">$str2</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">strlen</span>(<span class="variable">$str1</span>); <span class="variable">$i</span>++) &#123;</span><br><span class="line">      <span class="variable">$result</span> .= <span class="title function_ invoke__">chr</span>(<span class="title function_ invoke__">ord</span>(<span class="variable">$str1</span>[<span class="variable">$i</span>]) ^ <span class="title function_ invoke__">ord</span>(<span class="variable">$str2</span>[<span class="variable">$i</span>]));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">encryptTwelve</span>(<span class="params"><span class="variable">$string</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="title function_ invoke__">openssl_encrypt</span>(<span class="variable">$string</span>, <span class="string">&#x27;AES-128-CBC&#x27;</span>, <span class="variable">$this</span>-&gt;aesKey, OPENSSL_RAW_DATA, <span class="variable">$this</span>-&gt;aesIv);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">strtoupper</span>(<span class="title function_ invoke__">bin2hex</span>(<span class="variable">$result</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">decrypt</span>(<span class="params"><span class="variable">$string</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="literal">FALSE</span>;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable language_">$this</span>-&gt;version) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">      <span class="variable">$result</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">decryptEleven</span>(<span class="variable">$string</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">      <span class="variable">$result</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">decryptTwelve</span>(<span class="variable">$string</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">decryptEleven</span>(<span class="params"><span class="variable">$upperString</span></span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="variable">$string</span> = <span class="title function_ invoke__">hex2bin</span>(<span class="title function_ invoke__">strtolower</span>(<span class="variable">$upperString</span>));</span><br><span class="line"></span><br><span class="line">    <span class="variable">$round</span> = <span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">floor</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$string</span>) / <span class="number">8</span>));</span><br><span class="line">    <span class="variable">$leftLength</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$string</span>) % <span class="number">8</span>;</span><br><span class="line">        <span class="variable">$result</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="variable">$currentVector</span> = <span class="variable language_">$this</span>-&gt;blowIv;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$round</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$encryptedBlock</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$string</span>, <span class="number">8</span> * <span class="variable">$i</span>, <span class="number">8</span>);</span><br><span class="line">            <span class="variable">$temp</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">xorBytes</span>(<span class="variable">$this</span>-&gt;<span class="title function_ invoke__">decryptBlock</span>(<span class="variable">$encryptedBlock</span>), <span class="variable">$currentVector</span>);</span><br><span class="line">            <span class="variable">$currentVector</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">xorBytes</span>(<span class="variable">$currentVector</span>, <span class="variable">$encryptedBlock</span>);</span><br><span class="line">            <span class="variable">$result</span> .= <span class="variable">$temp</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$leftLength</span>) &#123;</span><br><span class="line">            <span class="variable">$currentVector</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">encryptBlock</span>(<span class="variable">$currentVector</span>);</span><br><span class="line">            <span class="variable">$result</span> .= <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">xorBytes</span>(<span class="title function_ invoke__">substr</span>(<span class="variable">$string</span>, <span class="number">8</span> * <span class="variable">$i</span>, <span class="variable">$leftLength</span>), <span class="variable">$currentVector</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">decryptTwelve</span>(<span class="params"><span class="variable">$upperString</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$string</span> = <span class="title function_ invoke__">hex2bin</span>(<span class="title function_ invoke__">strtolower</span>(<span class="variable">$upperString</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">openssl_decrypt</span>(<span class="variable">$string</span>, <span class="string">&#x27;AES-128-CBC&#x27;</span>, <span class="variable">$this</span>-&gt;aesKey, OPENSSL_RAW_DATA, <span class="variable">$this</span>-&gt;aesIv);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">use</span> <span class="title">FatSmallTools</span>\<span class="title">NavicatPassword</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//éœ€è¦æŒ‡å®šç‰ˆæœ¬ï¼Œ11æˆ–12</span></span><br><span class="line"><span class="variable">$navicatPassword</span> = <span class="keyword">new</span> <span class="title class_">NavicatPassword</span>(<span class="number">12</span>);</span><br><span class="line"><span class="comment">//$navicatPassword = new NavicatPassword(11);</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//è§£å¯†</span></span><br><span class="line"><span class="variable">$decode</span> = <span class="variable">$navicatPassword</span>-&gt;<span class="title function_ invoke__">decrypt</span>(<span class="string">&#x27;83FE5103FF5714ABDC150F4DF889D435&#x27;</span>);</span><br><span class="line"><span class="comment">//$decode = $navicatPassword-&gt;decrypt(&#x27;83FE5103FF5714ABDC150F4DF889D435&#x27;);</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$decode</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ECharts View å¯è§†åŒ– IDEA æ’ä»¶</title>
      <link href="/2025/06/09/ECharts%20View%20%E5%8F%AF%E8%A7%86%E5%8C%96%20IDEA%20%E6%8F%92%E4%BB%B6/"/>
      <url>/2025/06/09/ECharts%20View%20%E5%8F%AF%E8%A7%86%E5%8C%96%20IDEA%20%E6%8F%92%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="ECharts-View-å¯è§†åŒ–-IDEA-æ’ä»¶"><a href="#ECharts-View-å¯è§†åŒ–-IDEA-æ’ä»¶" class="headerlink" title="ECharts View å¯è§†åŒ– IDEA æ’ä»¶"></a>ECharts View å¯è§†åŒ– IDEA æ’ä»¶</h1><p>æœ¬æ’ä»¶åŸºäº JCEFï¼Œä¸º JetBrains IDEA ç³»åˆ— IDE æä¾› ECharts option çš„ä¸€é”®å¯è§†åŒ–èƒ½åŠ›ã€‚æ”¯æŒè‡ªåŠ¨ mock&#x2F;æ¸…ç† option ä¸­çš„éæ³•å†…å®¹ï¼ˆå¦‚å˜é‡ã€è¡¨è¾¾å¼ã€å‡½æ•°ç­‰ï¼‰ï¼Œè®©å¤æ‚ option ä¹Ÿèƒ½é¡ºåˆ©æ¸²æŸ“ä¸ºå›¾è¡¨ï¼Œæå¤§æå‡å‰ç«¯&#x2F;æ•°æ®å¯è§†åŒ–å¼€å‘ä½“éªŒã€‚</p><h2 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h2><p>åœ¨IDEAçš„æ’ä»¶å¸‚åœºå®‰è£…Jtool<br><img src="/img/posts/c3c3dba1fb2e4f24b93a3e05c87b1baf.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å®‰è£…ä¹‹åï¼Œåœ¨ä»“åº“åœ°å€é‡Œé¢ä¸‹è½½jaråŒ…</p><blockquote><p><a href="https://github.com/jtools-plugins/jtool-echarts-view">https://github.com/jtools-plugins/jtool-echarts-view</a></p></blockquote><p><img src="/img/posts/927143dc112245c5ae25139987661b4d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>ä¸‹è½½å®Œæˆä¹‹åï¼Œå¯¼å…¥jaråŒ…<br><img src="/img/posts/c2c8ec94d7b34e99ad52dc78a0953024.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>jaråŒ…å¾€è¿™é‡Œé¢æ‹–æ‹½å°±è¡Œ</p><h2 id="æ’ä»¶ä½¿ç”¨"><a href="#æ’ä»¶ä½¿ç”¨" class="headerlink" title="æ’ä»¶ä½¿ç”¨"></a>æ’ä»¶ä½¿ç”¨</h2><h3 id="ä¸€èˆ¬ä½¿ç”¨"><a href="#ä¸€èˆ¬ä½¿ç”¨" class="headerlink" title="ä¸€èˆ¬ä½¿ç”¨"></a>ä¸€èˆ¬ä½¿ç”¨</h3><p><img src="/img/posts/018e7df9fe1c470599b14881b17f10f7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åœ¨å·¦è¾¹æ¡†é€‰ä½echartsçš„optioné…ç½®ï¼Œæ’ä»¶å³è¾¹ç‚¹å‡»å¯è§†åŒ–ï¼Œå³å¯æŸ¥çœ‹å›¾è¡¨çš„æ ·å¼</p><h3 id="å˜é‡è‡ªåŠ¨è·å–"><a href="#å˜é‡è‡ªåŠ¨è·å–" class="headerlink" title="å˜é‡è‡ªåŠ¨è·å–"></a>å˜é‡è‡ªåŠ¨è·å–</h3><p><img src="/img/posts/c2c195047cba46a0b87730fc9c302893.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å¦‚ä¸Šæ‰€ç¤ºï¼Œdata1ä¸data2çš„å˜é‡çš„å€¼ï¼Œå¹¶æœªåœ¨é€‰æ‹©æ¡†ä¸­ï¼Œä½†æ˜¯æ’ä»¶ä¼šè¿›è¡Œå…¨æ–‡ç´¢å¼•ï¼Œè·å–è¿™ä¸¤å˜é‡çš„å€¼æ–¹ä¾¿å¼€å‘è€…è¿›è¡Œè°ƒè¯•ï¼Œå¼€å‘è€…åªéœ€è¦åœ¨æ„è°ƒè¯•å›¾è¡¨æ ·å¼å³å¯ï¼Œå…¶ä»–çš„äº¤ç»™æ’ä»¶</p><h2 id="åŠŸèƒ½ç‰¹æ€§"><a href="#åŠŸèƒ½ç‰¹æ€§" class="headerlink" title="åŠŸèƒ½ç‰¹æ€§"></a>åŠŸèƒ½ç‰¹æ€§</h2><ul><li><strong>é€‰åŒºå¯è§†åŒ–</strong>ï¼šåœ¨ç¼–è¾‘å™¨ä¸­é€‰ä¸­ ECharts optionï¼ˆæ”¯æŒ JSON&#x2F;JSON5&#x2F;JS å¯¹è±¡ï¼‰ï¼Œç‚¹å‡»â€œå¯è§†åŒ–â€æŒ‰é’®å³å¯æ¸²æŸ“å›¾è¡¨ã€‚</li><li><strong>æ™ºèƒ½ mock</strong>ï¼šè‡ªåŠ¨ mock&#x2F;æ¸…ç† option é‡Œçš„ <code>data</code>ã€<code>formatter</code> ç­‰å­—æ®µçš„éæ³•å†…å®¹ï¼Œæ”¯æŒå˜é‡æŸ¥æ‰¾å’Œ mock æ›¿æ¢ï¼Œæœ€å¤§ç¨‹åº¦ä¿è¯ option å¯è¢« JSON5 è§£æã€‚</li><li><strong>JCEF å†…åµŒæ¸²æŸ“</strong>ï¼šåŸºäº JCEF å†…åµŒ ECharts å‰ç«¯é¡µé¢ï¼Œæ”¯æŒä¸°å¯Œçš„äº¤äº’å’Œç¾è§‚çš„å›¾è¡¨å±•ç¤ºã€‚</li><li><strong>å…¼å®¹å¤æ‚ option</strong>ï¼šæ”¯æŒ option ä¸­å­˜åœ¨å˜é‡ã€è¡¨è¾¾å¼ã€å‡½æ•°ã€this.xxxã€new è¡¨è¾¾å¼ç­‰å¤æ‚ JS ä»£ç ï¼Œè‡ªåŠ¨é™çº§ä¸º mock æ•°æ®ã€‚</li><li><strong>ä¿ç•™å­—ç¬¦ä¸² formatter</strong>ï¼šåªæ¸…ç†å‡½æ•°&#x2F;è¡¨è¾¾å¼ç±»å‹çš„ <code>formatter</code>ï¼Œå­—ç¬¦ä¸²ç±»å‹çš„ formatter ä¼šè¢«ä¿ç•™ã€‚</li></ul><h2 id="å®‰è£…ä¸æ„å»º"><a href="#å®‰è£…ä¸æ„å»º" class="headerlink" title="å®‰è£…ä¸æ„å»º"></a>å®‰è£…ä¸æ„å»º</h2><h3 id="ç¯å¢ƒè¦æ±‚"><a href="#ç¯å¢ƒè¦æ±‚" class="headerlink" title="ç¯å¢ƒè¦æ±‚"></a>ç¯å¢ƒè¦æ±‚</h3><ul><li>IntelliJ IDEA 2022.3 åŠä»¥ä¸Šï¼ˆæ¨è 2024.1+ï¼‰</li><li>JDK 17</li><li>Gradle</li></ul><h3 id="æ„å»ºæ’ä»¶"><a href="#æ„å»ºæ’ä»¶" class="headerlink" title="æ„å»ºæ’ä»¶"></a>æ„å»ºæ’ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew build</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„æ’ä»¶åŒ…ä½äº <code>build/libs/</code> ç›®å½•ä¸‹ï¼Œå¯ç›´æ¥åœ¨ IDEA ä¸­å®‰è£…ã€‚</p><h3 id="è¿è¡Œ-x2F-è°ƒè¯•"><a href="#è¿è¡Œ-x2F-è°ƒè¯•" class="headerlink" title="è¿è¡Œ&#x2F;è°ƒè¯•"></a>è¿è¡Œ&#x2F;è°ƒè¯•</h3><ol><li>ä½¿ç”¨ IDEA æ‰“å¼€æœ¬é¡¹ç›®ã€‚</li><li>è¿è¡Œ <code>PluginImpl</code> æˆ–ä½¿ç”¨ Gradle çš„ <code>runIde</code> ä»»åŠ¡å¯åŠ¨å¼€å‘ç‰ˆ IDEï¼Œè‡ªåŠ¨åŠ è½½æ’ä»¶ã€‚</li></ol><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ol><li>åœ¨ä»£ç åŒºé€‰ä¸­ ECharts çš„ optionï¼ˆæ”¯æŒ JSON&#x2F;JS&#x2F;JSON5 æ ¼å¼ï¼‰ã€‚</li><li>æ‰“å¼€æ’ä»¶å·¥å…·çª—å£ï¼Œç‚¹å‡»â€œå¯è§†åŒ–â€æŒ‰é’®ã€‚</li><li>æ’ä»¶ä¼šè‡ªåŠ¨ mock&#x2F;æ¸…ç†éæ³•å†…å®¹ï¼Œå¹¶åœ¨å³ä¾§æ¸²æŸ“å›¾è¡¨å’Œ option JSONã€‚</li></ol><h2 id="ä¸»è¦å®ç°è¯´æ˜"><a href="#ä¸»è¦å®ç°è¯´æ˜" class="headerlink" title="ä¸»è¦å®ç°è¯´æ˜"></a>ä¸»è¦å®ç°è¯´æ˜</h2><ul><li><strong>æ ¸å¿ƒç±»</strong>ï¼š<ul><li><code>PluginImpl.java</code>ï¼šæ’ä»¶ä¸»å…¥å£ï¼Œè´Ÿè´£ UIã€äº‹ä»¶ç»‘å®šã€JCEF åŠ è½½å’Œ option å¤„ç†ã€‚</li><li><code>OptionMocker.java</code>ï¼šæ™ºèƒ½ mock&#x2F;æ¸…ç† option å­—æ®µï¼Œæ”¯æŒå˜é‡æŸ¥æ‰¾ã€å †æ ˆæ³•æå– JS å€¼ã€mock æ›¿æ¢ç­‰ã€‚</li><li><code>echarts_view.html</code> + <code>static/echarts.min.js</code>ï¼šå‰ç«¯é¡µé¢å’Œ ECharts æ¸²æŸ“æ ¸å¿ƒã€‚</li></ul></li><li><strong>mock é€»è¾‘</strong>ï¼š<ul><li>æ”¯æŒä»æ•´ä¸ªæ–‡ä»¶å†…å®¹ä¸­æŸ¥æ‰¾å˜é‡å£°æ˜ï¼Œè‡ªåŠ¨æ›¿æ¢ option é‡Œçš„ <code>data: xxx</code> ä¸º mock æ•°ç»„æˆ–å˜é‡å€¼ã€‚</li><li>é€’å½’æ¸…ç† option ä¸­çš„å‡½æ•°ã€è¡¨è¾¾å¼ã€this.xxxã€new ç­‰éæ³•å†…å®¹ï¼Œæœ€å¤§ç¨‹åº¦ä¿è¯ JSON5 å¯è§£æã€‚</li><li>ä¿ç•™å­—ç¬¦ä¸²ç±»å‹çš„ <code>formatter</code>ï¼Œåª mock&#x2F;æ¸…ç†å‡½æ•°ç±»å‹çš„ formatterã€‚</li></ul></li></ul><h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">  main/</span><br><span class="line">    java/org/example/</span><br><span class="line">      PluginImpl.java         // æ’ä»¶ä¸»å…¥å£</span><br><span class="line">      OptionMocker.java       // option mock/æ¸…ç†æ ¸å¿ƒ</span><br><span class="line">      EchartsToolWindowFactory.java</span><br><span class="line">      DynamicLanguageTextField.java</span><br><span class="line">      Main.java</span><br><span class="line">    resources/</span><br><span class="line">      echarts_view.html       // å‰ç«¯é¡µé¢</span><br><span class="line">      static/</span><br><span class="line">        echarts.min.js        // ECharts æ ¸å¿ƒåº“</span><br><span class="line">        index.min.js          // å‰ç«¯äº¤äº’é€»è¾‘</span><br><span class="line">      META-INF/</span><br><span class="line">      *.svg                   // æ’ä»¶å›¾æ ‡</span><br><span class="line">      test.js</span><br><span class="line">build.gradle                 // æ„å»ºè„šæœ¬</span><br><span class="line">pluginInfo.json              // æ’ä»¶å…ƒä¿¡æ¯</span><br></pre></td></tr></table></figure><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><ul><li><strong>option ä¾ç„¶æ— æ³•æ¸²æŸ“ï¼Ÿ</strong><br>æç«¯å¤æ‚çš„ option å¯èƒ½ä»æœ‰æ— æ³•å®Œå…¨ mock çš„æƒ…å†µï¼Œå»ºè®®å°½é‡ä½¿ç”¨æ ‡å‡† JSON æ ¼å¼çš„ optionã€‚</li><li><strong>JCEF åŠ è½½å¤±è´¥ï¼Ÿ</strong><br>è¯·ç¡®ä¿ IDEA ç‰ˆæœ¬æ”¯æŒ JCEFï¼Œæˆ–å‡çº§åˆ° 2022.3 åŠä»¥ä¸Šã€‚</li></ul><h2 id="è´¡çŒ®ä¸åé¦ˆ"><a href="#è´¡çŒ®ä¸åé¦ˆ" class="headerlink" title="è´¡çŒ®ä¸åé¦ˆ"></a>è´¡çŒ®ä¸åé¦ˆ</h2><p>æ¬¢è¿ issueã€PR æˆ–å»ºè®®ï¼</p><hr><p>å¦‚éœ€æ›´è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜æˆ–é‡åˆ°å…·ä½“é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶åé¦ˆï¼</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoè·¨åŸŸé—®é¢˜</title>
      <link href="/2025/06/09/Django%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/"/>
      <url>/2025/06/09/Django%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>å…ˆå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django-cors-headers</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å†…å®¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># setting.py ä¿®æ”¹ä»¥ä¸‹å†…å®¹</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;corsheaders&#x27;</span>, <span class="comment"># æ³¨å†Œapp corsheaders</span></span><br><span class="line">    <span class="string">&#x27;app01&#x27;</span>,<span class="comment"># ä½ çš„app</span></span><br><span class="line">]</span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>, <span class="comment"># åŠ å…¥ä¸­é—´é”® ä½ç½®å¿…é¡»åœ¨è¿™é‡Œ ä¸èƒ½åœ¨å…¶ä»–ä½ç½®</span></span><br><span class="line">    <span class="string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,</span><br><span class="line">    <span class="comment"># &#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;, å¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰è€ƒè™‘åˆ° csrf ç½‘ç»œæ”»å‡»,å¯æ³¨é‡Šæ‰,å¦åˆ™ä¼šæŠ¥é”™æ²¡æœ‰ä¼ é€’ csrf cookie</span></span><br><span class="line">    <span class="string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>é…ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ setting.py æœ«å°¾æ·»åŠ ä»¥ä¸‹è®¾ç½®</span></span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span></span><br><span class="line">CORS_ALLOW_ALL_ORIGINS = <span class="literal">True</span></span><br><span class="line">CORS_ALLOW_HEADERS = (<span class="string">&#x27;*&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JPAæ€»ç»“</title>
      <link href="/2025/06/09/JPA%E6%80%BB%E7%BB%93/"/>
      <url>/2025/06/09/JPA%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="JPAæ€»ç»“"><a href="#JPAæ€»ç»“" class="headerlink" title="JPAæ€»ç»“"></a>JPAæ€»ç»“</h1><h2 id="1-JPAç®€ä»‹"><a href="#1-JPAç®€ä»‹" class="headerlink" title="1. JPAç®€ä»‹"></a>1. JPAç®€ä»‹</h2><p>JPAï¼ˆJava Persistence APIï¼‰æ˜¯Javaå®˜æ–¹æå‡ºçš„ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰è§„èŒƒï¼Œä¸»è¦ç”¨äºç®€åŒ–Javaåº”ç”¨ä¸­çš„æ•°æ®æŒä¹…åŒ–å¼€å‘ã€‚å¸¸è§å®ç°æœ‰Hibernateã€EclipseLinkç­‰ã€‚Spring Data JPAå¯¹JPAè¿›è¡Œäº†è¿›ä¸€æ­¥å°è£…ï¼Œæå¤§ç®€åŒ–äº†æ•°æ®åº“æ“ä½œã€‚</p><h2 id="2-é…ç½®ç¤ºä¾‹"><a href="#2-é…ç½®ç¤ºä¾‹" class="headerlink" title="2. é…ç½®ç¤ºä¾‹"></a>2. é…ç½®ç¤ºä¾‹</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/testdb?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">admin123</span></span><br><span class="line">  <span class="attr">jpa:</span></span><br><span class="line">    <span class="attr">database-platform:</span> <span class="string">org.hibernate.dialect.MySQL8Dialect</span></span><br><span class="line">    <span class="attr">hibernate:</span></span><br><span class="line">      <span class="attr">ddl-auto:</span> <span class="string">update</span></span><br><span class="line">      <span class="attr">naming:</span></span><br><span class="line">        <span class="attr">physical-strategy:</span> <span class="string">org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl</span></span><br><span class="line">    <span class="attr">show-sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &#123;&quot;com.dao&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EntityScan(basePackages = &quot;com.entity&quot;)</span> <span class="comment">// æŒ‡å®šå®ä½“ç±»æ‰€åœ¨åŒ…</span></span><br><span class="line"><span class="meta">@EnableJpaRepositories(basePackages = &quot;com.dao&quot;)</span> <span class="comment">// æŒ‡å®šä»“åº“æ¥å£æ‰€åœ¨åŒ…</span></span><br><span class="line"><span class="meta">@EnableJpaAuditing</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootSchemaApplication</span> <span class="keyword">extends</span> <span class="title class_">SpringBootServletInitializer</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringbootSchemaApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> SpringApplicationBuilder <span class="title function_">configure</span><span class="params">(SpringApplicationBuilder applicationBuilder)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> applicationBuilder.sources(SpringbootSchemaApplication.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-å¸¸ç”¨JPAæ³¨è§£è¯´æ˜"><a href="#3-å¸¸ç”¨JPAæ³¨è§£è¯´æ˜" class="headerlink" title="3. å¸¸ç”¨JPAæ³¨è§£è¯´æ˜"></a>3. å¸¸ç”¨JPAæ³¨è§£è¯´æ˜</h2><ul><li><code>@Entity</code>ï¼šæ ‡è®°ä¸ºå®ä½“ç±»</li><li><code>@Table</code>ï¼šæŒ‡å®šè¡¨å</li><li><code>@Id</code>ï¼šä¸»é”®</li><li><code>@GeneratedValue</code>ï¼šä¸»é”®ç”Ÿæˆç­–ç•¥</li><li><code>@Column</code>ï¼šå­—æ®µæ˜ å°„</li><li><code>@Lob</code>&#x2F;<code>@Basic</code>ï¼šå¤§å­—æ®µåŠæ‡’åŠ è½½</li><li><code>@CreatedDate</code>&#x2F;<code>@LastModifiedDate</code>ï¼šè‡ªåŠ¨å¡«å……åˆ›å»º&#x2F;æ›´æ–°æ—¶é—´</li><li><code>@EntityListeners</code>ï¼šç›‘å¬å®ä½“å˜åŒ–</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.annotation.CreatedDate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.annotation.LastModifiedDate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.domain.support.AuditingEntityListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Author reisen7</span></span><br><span class="line"><span class="comment"> * Date 2025/4/22 12:30</span></span><br><span class="line"><span class="comment"> * Description</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = true)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@DynamicUpdate</span></span><br><span class="line"><span class="meta">@Table(name = &quot;user_evaluation&quot;)</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@EntityListeners(value = AuditingEntityListener.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserEvaluation</span> <span class="keyword">extends</span> <span class="title class_">Profile</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Lob</span></span><br><span class="line">    <span class="meta">@Basic(fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;evaluation&quot; , columnDefinition = &quot;text&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String evaluation;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column(name = &quot;user_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long userId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@CreatedDate</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;create_time&quot;, nullable = false, updatable = false)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@LastModifiedDate</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;update_time&quot;)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-Repositoryæ¥å£ä¸å¸¸ç”¨æ–¹æ³•"><a href="#4-Repositoryæ¥å£ä¸å¸¸ç”¨æ–¹æ³•" class="headerlink" title="4. Repositoryæ¥å£ä¸å¸¸ç”¨æ–¹æ³•"></a>4. Repositoryæ¥å£ä¸å¸¸ç”¨æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.entity.UserEvaluation;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserEvaluationRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;UserEvaluation, Long&gt; &#123;</span><br><span class="line">    <span class="comment">// æŒ‰ç”¨æˆ·IDæŸ¥è¯¢</span></span><br><span class="line">    List&lt;UserEvaluation&gt; <span class="title function_">getUserEvaluationByUserId</span><span class="params">(Long userId)</span>;</span><br><span class="line">    <span class="comment">// è¿˜å¯ä»¥è‡ªå®šä¹‰æ›´å¤šæ–¹æ³•ï¼Œå¦‚ï¼š</span></span><br><span class="line">    <span class="comment">// List&lt;UserEvaluation&gt; findByEvaluationContaining(String keyword);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>save(entity)</code> ä¿å­˜æˆ–æ›´æ–°</li><li><code>findById(id)</code> æŒ‰IDæŸ¥æ‰¾</li><li><code>findAll()</code> æŸ¥è¯¢å…¨éƒ¨</li><li><code>deleteById(id)</code> æŒ‰IDåˆ é™¤</li><li><code>count()</code> ç»Ÿè®¡æ•°é‡</li></ul><h2 id="5-åˆ†ç»„ä¸å¤æ‚æŸ¥è¯¢"><a href="#5-åˆ†ç»„ä¸å¤æ‚æŸ¥è¯¢" class="headerlink" title="5. åˆ†ç»„ä¸å¤æ‚æŸ¥è¯¢"></a>5. åˆ†ç»„ä¸å¤æ‚æŸ¥è¯¢</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;GoodsPlatformPrice&gt; <span class="title function_">getPriceByGoodsId</span><span class="params">(Long goodsId)</span> &#123;</span><br><span class="line">    Specification&lt;GoodsPlatformPrice&gt; specification = (root, query, criteriaBuilder) -&gt; &#123;</span><br><span class="line">        <span class="comment">// 1. æ„å»ºæŸ¥è¯¢ï¼šé€‰æ‹©å¹³å°åç§°å’Œæœ€ä½ä»·æ ¼</span></span><br><span class="line">        query.multiselect(</span><br><span class="line">            root.get(<span class="string">&quot;platformName&quot;</span>),</span><br><span class="line">            criteriaBuilder.min(root.get(<span class="string">&quot;price&quot;</span>))</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">// 2. æ·»åŠ å•†å“IDæ¡ä»¶</span></span><br><span class="line">        <span class="type">Predicate</span> <span class="variable">goodsPredicate</span> <span class="operator">=</span> criteriaBuilder.equal(root.get(<span class="string">&quot;goodsId&quot;</span>), goodsId);</span><br><span class="line">        <span class="comment">// 3. æ·»åŠ åˆ†ç»„æ¡ä»¶</span></span><br><span class="line">        query.groupBy(root.get(<span class="string">&quot;platformName&quot;</span>));</span><br><span class="line">        <span class="comment">// 4. æ·»åŠ æ’åºæ¡ä»¶ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line">        query.orderBy(criteriaBuilder.asc(root.get(<span class="string">&quot;platformName&quot;</span>)));</span><br><span class="line">        <span class="keyword">return</span> goodsPredicate;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> repository.findAll(specification);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šä¸Šè¿°ä»£ç é€šè¿‡JPAçš„Specificationå®ç°åˆ†ç»„ã€èšåˆã€æ’åºç­‰å¤æ‚æŸ¥è¯¢ï¼Œé€‚ç”¨äºåŠ¨æ€æ¡ä»¶åœºæ™¯ã€‚</p><h2 id="6-å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®"><a href="#6-å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®" class="headerlink" title="6. å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®"></a>6. å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®</h2><ul><li><strong>å®ä½“ç±»å¿…é¡»æœ‰æ— å‚æ„é€ æ–¹æ³•</strong>ï¼Œå¦åˆ™JPAæ— æ³•å®ä¾‹åŒ–ã€‚</li><li><strong>@EntityScan&#x2F;@EnableJpaRepositories</strong> è·¯å¾„è¦é…ç½®æ­£ç¡®ï¼Œå¦åˆ™æ‰«æä¸åˆ°å®ä½“æˆ–ä»“åº“æ¥å£ã€‚</li><li><strong>æ‡’åŠ è½½å¼‚å¸¸</strong>ï¼šå»ºè®®åœ¨Serviceå±‚å¤„ç†æ•°æ®ï¼Œé¿å…åœ¨Controllerå±‚ç›´æ¥è®¿é—®æ‡’åŠ è½½å±æ€§ã€‚</li><li><strong>æ‰¹é‡æ“ä½œä¼˜åŒ–</strong>ï¼šå¯ç”¨<code>@Modifying</code>å’Œ<code>@Query</code>è‡ªå®šä¹‰SQLå®ç°æ‰¹é‡æ›´æ–°&#x2F;åˆ é™¤ã€‚</li><li><strong>åˆ†é¡µæŸ¥è¯¢</strong>ï¼šå¯ç”¨<code>Pageable</code>å‚æ•°ï¼Œè¿”å›<code>Page&lt;T&gt;</code>ç±»å‹ã€‚</li></ul><h2 id="7-å‚è€ƒèµ„æ–™"><a href="#7-å‚è€ƒèµ„æ–™" class="headerlink" title="7. å‚è€ƒèµ„æ–™"></a>7. å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">Spring Data JPA å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html">Hibernate å®˜æ–¹æ–‡æ¡£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨electronæ‰“åŒ…é™æ€é¡µé¢</title>
      <link href="/2024/12/28/%E4%BD%BF%E7%94%A8electron%E6%89%93%E5%8C%85%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/12/28/%E4%BD%BF%E7%94%A8electron%E6%89%93%E5%8C%85%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<ol><li><p>å…ˆåˆ°é™æ€é¡µé¢åŒ…å¤–é¢å®‰è£…<code>electron-packager</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install electron</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å†å®‰è£…<code>electron-packager</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install electron-packager</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆ°é™æ€é¡µé¢æ–‡ä»¶å¤¹é‡Œé¢åˆ›å»º<code>main.js</code> æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;app,<span class="title class_">BrowserWindow</span>&#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>); <span class="comment">//å¼•å…¥electron</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> win;</span><br><span class="line"><span class="keyword">let</span> windowConfig = &#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="number">600</span></span><br><span class="line">&#125;; <span class="comment">//çª—å£é…ç½®ç¨‹åºè¿è¡Œçª—å£çš„å¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">   win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(windowConfig); <span class="comment">//åˆ›å»ºä¸€ä¸ªçª—å£</span></span><br><span class="line">   win.<span class="title function_">loadURL</span>(<span class="string">`file://<span class="subst">$&#123;__dirname&#125;</span>/index.html`</span>); <span class="comment">//åœ¨çª—å£å†…è¦å±•ç¤ºçš„å†…å®¹index.html å°±æ˜¯æ‰“åŒ…ç”Ÿæˆçš„index.html</span></span><br><span class="line"> <span class="comment">//win.webContents.openDevTools(); //å¼€å¯è°ƒè¯•å·¥å…·</span></span><br><span class="line">   win.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//å›æ”¶BrowserWindowå¯¹è±¡</span></span><br><span class="line">   win = <span class="literal">null</span>;</span><br><span class="line">   &#125;);</span><br><span class="line">   win.<span class="title function_">on</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">   win.<span class="title function_">reload</span>();</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, createWindow);</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">app.<span class="title function_">quit</span>();</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (win == <span class="literal">null</span>) &#123;</span><br><span class="line"> <span class="title function_">createWindow</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">   </span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åœ¨é™æ€æ–‡ä»¶å¤¹é‡Œé¢åˆ›å»ºæ–‡ä»¶<code>package.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;demo&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;productName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;demo&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;reisen&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a electron demo&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;pack&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron-builder --dir&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;dist&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron-builder&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;postinstall&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron-builder install-app-deps&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;electronVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;11.5.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;win&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;requestedExecutionLevel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;highestAvailable&quot;</span><span class="punctuation">,</span></span><br><span class="line">     <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">       <span class="punctuation">&#123;</span></span><br><span class="line">         <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nsis&quot;</span><span class="punctuation">,</span></span><br><span class="line">         <span class="attr">&quot;arch&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">           <span class="string">&quot;x64&quot;</span></span><br><span class="line">         <span class="punctuation">]</span></span><br><span class="line">       <span class="punctuation">&#125;</span></span><br><span class="line">     <span class="punctuation">]</span></span><br><span class="line">   <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;appId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;artifactName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;demo-versionâˆ’&#123;arch&#125;.$&#123;ext&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;nsis&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;artifactName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;demo-versionâˆ’&#123;arch&#125;.$&#123;ext&#125;&quot;</span></span><br><span class="line">   <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;extraResources&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">     <span class="punctuation">&#123;</span></span><br><span class="line">       <span class="attr">&quot;from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">       <span class="attr">&quot;to&quot;</span><span class="punctuation">:</span> <span class="string">&quot;app-server&quot;</span><span class="punctuation">,</span></span><br><span class="line">       <span class="attr">&quot;filter&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">         <span class="string">&quot;**/*&quot;</span></span><br><span class="line">       <span class="punctuation">]</span></span><br><span class="line">     <span class="punctuation">&#125;</span></span><br><span class="line">   <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;publish&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">     <span class="punctuation">&#123;</span></span><br><span class="line">       <span class="attr">&quot;provider&quot;</span><span class="punctuation">:</span> <span class="string">&quot;generic&quot;</span><span class="punctuation">,</span></span><br><span class="line">       <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;reisen&quot;</span></span><br><span class="line">     <span class="punctuation">&#125;</span></span><br><span class="line">   <span class="punctuation">]</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;electron&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^31.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;electron-builder&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^24.13.3&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;core-js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;electron-packager&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^12.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;electron-updater&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;fs-extra&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;install.js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;moment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.18.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;moment-es6&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.0&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ç„¶ååœ¨é™æ€æ–‡ä»¶å¤¹å¤–é¢çš„<code>package.json</code>é‡Œä¿®æ”¹å¦‚ä¸‹script</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line"> <span class="string">&quot;serve&quot;</span>: <span class="string">&quot;vue-cli-service serve&quot;</span>,</span><br><span class="line"> <span class="string">&quot;build&quot;</span>: <span class="string">&quot;vue-cli-service build&quot;</span>,</span><br><span class="line"> <span class="string">&quot;test&quot;</span>: <span class="string">&quot;vue-cli-service build --mode test&quot;</span>,</span><br><span class="line"> <span class="string">&quot;lint&quot;</span>: <span class="string">&quot;vue-cli-service lint&quot;</span>,</span><br><span class="line"> <span class="string">&quot;electron_dev&quot;</span>: <span class="string">&quot;npm run build &amp;&amp; electron main.js&quot;</span>,</span><br><span class="line"> <span class="string">&quot;electron_build&quot;</span>: <span class="string">&quot;electron-packager ./dist demo --platform=win32 --arch=x64 --overwrite&quot;</span>,</span><br><span class="line">  </span><br><span class="line"> <span class="string">&quot;dist&quot;</span>: <span class="string">&quot;electron-packager ./dist name --platform=win32 --arch=ia32 --overwrite&quot;</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æœ€åæ‰§è¡Œè¿™ä¸ª<code>electron_build</code>å°±èƒ½å®Œæˆæ‰“åŒ…äº†ï¼Œæ‰“å®ŒåŒ…èƒ½çœ‹åˆ°ä¸€ä¸ªdemo.exeå¯åŠ¨å°±okäº†</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> electron </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/12/28/hello-world/"/>
      <url>/2024/12/28/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>layui ä½¿ç”¨cronå¯è§†åŒ–ç»„ä»¶</title>
      <link href="/2024/12/18/layui%20%E4%BD%BF%E7%94%A8cron%E5%8F%AF%E8%A7%86%E5%8C%96%E7%BB%84%E4%BB%B6/"/>
      <url>/2024/12/18/layui%20%E4%BD%BF%E7%94%A8cron%E5%8F%AF%E8%A7%86%E5%8C%96%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>layuiç‰ˆæœ¬ä¸€å®šæ˜¯æœ€æ–°ç‰ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">layui</span><br><span class="line">  .<span class="title function_">config</span>(&#123;</span><br><span class="line">    <span class="attr">base</span>: <span class="string">&quot;../static/layui_exts/&quot;</span>, <span class="comment">// æ‰©å±•ç»„ä»¶è·Ÿè·¯å¾„</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">cron</span>: <span class="string">&quot;cron/cron&quot;</span> <span class="comment">// æ‰©å±•ç»„ä»¶</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">use</span>([<span class="string">&quot;cron&quot;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> $ = layui.<span class="property">$</span>,</span><br><span class="line">      cron = layui.<span class="property">cron</span>;</span><br><span class="line">    cron.<span class="title function_">render</span>(&#123;</span><br><span class="line">      <span class="attr">elem</span>: <span class="string">&quot;#cron&quot;</span>, <span class="comment">// ç»‘å®šå…ƒç´ </span></span><br><span class="line">      <span class="attr">run</span>: <span class="string">&quot;../static/json/run.json&quot;</span>, <span class="comment">// è·å–æœ€è¿‘è¿è¡Œæ—¶é—´çš„æ¥å£</span></span><br><span class="line">      <span class="attr">done</span>: <span class="keyword">function</span>(<span class="params">cronStr</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(cronStr);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>é¡µé¢ä¸Šä½¿ç”¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span> <span class="attr">id</span>=<span class="string">&quot;cron&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0/20 * * * * ?&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Layui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEAå¿«é€Ÿéƒ¨ç½²åˆ°dockerä¸­</title>
      <link href="/2024/12/17/IDEA%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E5%88%B0docker%E4%B8%AD/"/>
      <url>/2024/12/17/IDEA%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2%E5%88%B0docker%E4%B8%AD/</url>
      
        <content type="html"><![CDATA[<h3 id="æœåŠ¡å™¨ä¸Šéƒ¨ç½²docker"><a href="#æœåŠ¡å™¨ä¸Šéƒ¨ç½²docker" class="headerlink" title="æœåŠ¡å™¨ä¸Šéƒ¨ç½²docker"></a>æœåŠ¡å™¨ä¸Šéƒ¨ç½²docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·</span></span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"><span class="comment"># Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯</span></span><br><span class="line">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment"># Step 3</span></span><br><span class="line">sudo sed -i <span class="string">&#x27;s+download.docker.com+mirrors.aliyun.com/docker-ce+&#x27;</span> /etc/yum.repos.d/docker-ce.repo</span><br><span class="line"><span class="comment"># Step 4: æ›´æ–°å¹¶å®‰è£…Docker-CE</span></span><br><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br><span class="line"><span class="comment"># Step 4: å¼€å¯DockeræœåŠ¡</span></span><br><span class="line">sudo service docker start</span><br><span class="line"><span class="comment"># å¼€æœºè‡ªå¯åŠ¨</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure><h3 id="dockeré•œåƒ"><a href="#dockeré•œåƒ" class="headerlink" title="dockeré•œåƒ"></a>dockeré•œåƒ</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://docker.hpcloud.cloud&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker.m.daocloud.io&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker.unsee.tech&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker.1panel.live&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;http://mirrors.ustc.edu.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker.chenby.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;http://mirror.azure.cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://dockerpull.org&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://dockerhub.icu&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://hub.rat.dev&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å¼€å¯Dockerçš„è¿œç¨‹è¿æ¥"><a href="#å¼€å¯Dockerçš„è¿œç¨‹è¿æ¥" class="headerlink" title="å¼€å¯Dockerçš„è¿œç¨‹è¿æ¥"></a>å¼€å¯Dockerçš„è¿œç¨‹è¿æ¥</h3><ul><li>å…ˆstatusçœ‹dockeråœ¨å“ª</li><li><img src="/img/posts/c7b72b6fdbf820137cf55943aa19e944.png"></li><li>æŠŠè¯¥æ–‡ä»¶é‡Œé¢çš„å‚æ•°ä¿®æ”¹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock</span><br></pre></td></tr></table></figure><ul><li>é‡å¯</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload </span><br><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure><h3 id="IDEAä¸‹è½½dockeræ’ä»¶ï¼Œé…ç½®dockeræœåŠ¡å™¨"><a href="#IDEAä¸‹è½½dockeræ’ä»¶ï¼Œé…ç½®dockeræœåŠ¡å™¨" class="headerlink" title="IDEAä¸‹è½½dockeræ’ä»¶ï¼Œé…ç½®dockeræœåŠ¡å™¨"></a>IDEAä¸‹è½½dockeræ’ä»¶ï¼Œé…ç½®dockeræœåŠ¡å™¨</h3><p><img src="/img/posts/bd22d8c2237ac0cf0f61556f489042b2.png"></p><p>æ ¹æ®dockerfileæ–‡ä»¶èƒ½ç›´æ¥éƒ¨ç½²åˆ°å®¹å™¨ä¸­äº†</p><hr><p>å¦‚æœbuildå‡ºç°<code>Failed to deploy &#39;exam Dockerfile: Dockerfile&#39;: Not connected to docker</code>åˆ™éœ€è¦ç”¨ç®¡ç†å‘˜æ‰“å¼€IDEA</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonå°†printè¾“å‡ºé‡å®šå‘åˆ°tkinteré¡µé¢</title>
      <link href="/2024/12/17/Python%E5%B0%86print%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0tkinter%E9%A1%B5%E9%9D%A2/"/>
      <url>/2024/12/17/Python%E5%B0%86print%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0tkinter%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> Text, END</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StdoutRedirector</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, text_widget: Text</span>):</span><br><span class="line">        self.text_widget = text_widget</span><br><span class="line">        self.last_line_start = <span class="number">0</span>  <span class="comment"># è·Ÿè¸ªæœ€åä¸€è¡Œçš„èµ·å§‹ä½ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">write</span>(<span class="params">self, output: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="keyword">if</span> output.startswith(<span class="string">&#x27;/r&#x27;</span>):</span><br><span class="line">            <span class="comment"># å»é™¤å‰ç¼€ &#x27;/r&#x27;</span></span><br><span class="line">            output = output[<span class="number">2</span>:]</span><br><span class="line"></span><br><span class="line">            <span class="comment"># åˆ é™¤æœ€åä¸€è¡Œå†…å®¹</span></span><br><span class="line">            <span class="keyword">if</span> self.last_line_start != <span class="number">0</span>:</span><br><span class="line">                self.text_widget.delete(<span class="string">f&quot;<span class="subst">&#123;self.last_line_start&#125;</span>.0&quot;</span>, END)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ’å…¥æ–°å†…å®¹</span></span><br><span class="line">            self.text_widget.insert(END, output)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ›´æ–°æœ€åä¸€è¡Œçš„èµ·å§‹ä½ç½®</span></span><br><span class="line">            self.last_line_start = <span class="built_in">int</span>(self.text_widget.index(<span class="string">&#x27;end-1c&#x27;</span>).split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># æ­£å¸¸å†™å…¥</span></span><br><span class="line">            self.text_widget.insert(END, output)</span><br><span class="line">            <span class="keyword">if</span> output.endswith(<span class="string">&#x27;\n&#x27;</span>):</span><br><span class="line">                self.last_line_start = <span class="built_in">int</span>(self.text_widget.index(<span class="string">&#x27;end-1c&#x27;</span>).split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>]) + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.last_line_start = <span class="built_in">int</span>(self.text_widget.index(<span class="string">&#x27;end-1c&#x27;</span>).split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ»šåŠ¨åˆ°æ–‡æœ¬ç»„ä»¶çš„æœ«å°¾</span></span><br><span class="line">        self.text_widget.see(END)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">flush</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆ·æ–°ç¼“å†²åŒºï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®è¢«ç«‹å³å†™å‡ºã€‚</span></span><br><span class="line"><span class="string">        å¯¹äºTkinterçš„Textç»„ä»¶æ¥è¯´ï¼Œè¿™é€šå¸¸æ„å‘³ç€ç¡®ä¿æ‰€æœ‰å·²å†™å…¥çš„å†…å®¹ç«‹å³æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># åœ¨Tkinterçš„Textç»„ä»¶ä¸­ï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰çœŸæ­£çš„â€œåˆ·æ–°â€æ¦‚å¿µï¼Œ</span></span><br><span class="line">        <span class="comment"># å› ä¸ºå†™å…¥æ“ä½œæ˜¯ç«‹å³å¯è§çš„ã€‚ä½†ä¸ºäº†ä¿æŒæ¥å£ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬ä»ç„¶æä¾›è¿™ä¸ªæ–¹æ³•ã€‚</span></span><br><span class="line">        <span class="comment"># å¦‚æœéœ€è¦ï¼Œè¿™é‡Œå¯ä»¥æ·»åŠ ä»£ç æ¥å¼ºåˆ¶æ›´æ–°GUIã€‚</span></span><br><span class="line">        self.text_widget.update_idletasks()  <span class="comment"># å¼ºåˆ¶åˆ·æ–°GUIï¼Œç¡®ä¿æ‰€æœ‰æŒ‚èµ·çš„ä»»åŠ¡éƒ½è¢«å¤„ç†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹ç”¨æ³•</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"></span><br><span class="line">    root = tk.Tk()</span><br><span class="line">    text = tk.Text(root, wrap=<span class="string">&#x27;word&#x27;</span>)  <span class="comment"># è®¾ç½®wrapä¸º&#x27;word&#x27;ä»¥é˜²æ­¢å•è¯è¢«åˆ†å‰²</span></span><br><span class="line">    text.pack(fill=tk.BOTH, expand=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># é‡å®šå‘stdoutåˆ°text widget</span></span><br><span class="line">    sys.stdout = StdoutRedirector(text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æµ‹è¯•</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¿™æ˜¯ç¬¬ä¸€è¡Œ&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;/rè¿™æ˜¯æ›¿æ¢åçš„ç¬¬ä¸€è¡Œ&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¿™æ˜¯ç¬¬äºŒè¡Œ&quot;</span>)</span><br><span class="line"></span><br><span class="line">    root.mainloop()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YUMå®‰è£…docker-compose</title>
      <link href="/2024/12/17/YUM%E5%AE%89%E8%A3%85docker-compose/"/>
      <url>/2024/12/17/YUM%E5%AE%89%E8%A3%85docker-compose/</url>
      
        <content type="html"><![CDATA[<h2 id="Docker-Composeç®€ä»‹"><a href="#Docker-Composeç®€ä»‹" class="headerlink" title="Docker Composeç®€ä»‹"></a>Docker Composeç®€ä»‹</h2><p>Docker Composeæ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨YAMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå‘½ä»¤åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚å®ƒæå¤§åœ°ç®€åŒ–äº†å®¹å™¨ç¼–æ’å·¥ä½œï¼Œç‰¹åˆ«é€‚åˆå¼€å‘ã€æµ‹è¯•å’ŒCIå·¥ä½œæµç¨‹ã€‚</p><h2 id="å®‰è£…å‰æ"><a href="#å®‰è£…å‰æ" class="headerlink" title="å®‰è£…å‰æ"></a>å®‰è£…å‰æ</h2><p>åœ¨å®‰è£…Docker Composeä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²ç»å®‰è£…äº†Dockerã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥Dockeræ˜¯å¦å·²å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br></pre></td></tr></table></figure><p>å¦‚æœæœªå®‰è£…Dockerï¼Œè¯·å…ˆå®‰è£…Dockerï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker</span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨YUMå®‰è£…Docker-Compose"><a href="#ä½¿ç”¨YUMå®‰è£…Docker-Compose" class="headerlink" title="ä½¿ç”¨YUMå®‰è£…Docker Compose"></a>ä½¿ç”¨YUMå®‰è£…Docker Compose</h2><h3 id="1-æ·»åŠ EPELæº"><a href="#1-æ·»åŠ EPELæº" class="headerlink" title="1. æ·»åŠ EPELæº"></a>1. æ·»åŠ EPELæº</h3><p>EPEL (Extra Packages for Enterprise Linux) æ˜¯ä¸ºä¼ä¸šçº§Linuxæä¾›é¢å¤–è½¯ä»¶åŒ…çš„ä»“åº“ï¼Œå®ƒåŒ…å«äº†è®¸å¤šåœ¨æ ‡å‡†ä»“åº“ä¸­ä¸å¯ç”¨çš„è½¯ä»¶åŒ…ï¼ŒåŒ…æ‹¬docker-composeã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y epel-release</span><br></pre></td></tr></table></figure><h3 id="2-å®‰è£…Docker-Compose"><a href="#2-å®‰è£…Docker-Compose" class="headerlink" title="2. å®‰è£…Docker Compose"></a>2. å®‰è£…Docker Compose</h3><p>å®‰è£…å®ŒEPELæºåï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨yumå‘½ä»¤å®‰è£…docker-composeï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-compose</span><br></pre></td></tr></table></figure><h3 id="3-éªŒè¯å®‰è£…"><a href="#3-éªŒè¯å®‰è£…" class="headerlink" title="3. éªŒè¯å®‰è£…"></a>3. éªŒè¯å®‰è£…</h3><p>å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹ç‰ˆæœ¬å·æ¥éªŒè¯docker-composeæ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure><p>å¦‚æœå®‰è£…æˆåŠŸï¼Œå°†æ˜¾ç¤ºç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose version 1.29.2, build unknown</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨Docker-Compose"><a href="#ä½¿ç”¨Docker-Compose" class="headerlink" title="ä½¿ç”¨Docker Compose"></a>ä½¿ç”¨Docker Compose</h2><h3 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h3><ol><li><p><strong>åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure></li><li><p><strong>åœæ­¢å¹¶ç§»é™¤å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹è¿è¡Œä¸­çš„æœåŠ¡</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose ps</span><br></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æœåŠ¡æ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose logs</span><br></pre></td></tr></table></figure></li></ol><h3 id="ç¤ºä¾‹docker-compose-ymlæ–‡ä»¶"><a href="#ç¤ºä¾‹docker-compose-ymlæ–‡ä»¶" class="headerlink" title="ç¤ºä¾‹docker-compose.ymlæ–‡ä»¶"></a>ç¤ºä¾‹docker-compose.ymlæ–‡ä»¶</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„docker-compose.ymlç¤ºä¾‹ï¼Œç”¨äºéƒ¨ç½²WordPresså’ŒMySQLï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db_data:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">rootpassword</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">wordpress</span></span><br><span class="line">      <span class="attr">MYSQL_USER:</span> <span class="string">wordpress</span></span><br><span class="line">      <span class="attr">MYSQL_PASSWORD:</span> <span class="string">wordpress</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">wordpress:</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">wordpress:latest</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8000:80&quot;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">WORDPRESS_DB_HOST:</span> <span class="string">db:3306</span></span><br><span class="line">      <span class="attr">WORDPRESS_DB_USER:</span> <span class="string">wordpress</span></span><br><span class="line">      <span class="attr">WORDPRESS_DB_PASSWORD:</span> <span class="string">wordpress</span></span><br><span class="line">      <span class="attr">WORDPRESS_DB_NAME:</span> <span class="string">wordpress</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">db_data:</span></span><br></pre></td></tr></table></figure><h2 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h2><ol><li><p><strong>å¦‚æœå®‰è£…å¤±è´¥</strong>ï¼Œå¯èƒ½æ˜¯å› ä¸ºEPELæºæœªæ­£ç¡®é…ç½®ï¼Œå°è¯•æ›´æ–°æºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure></li><li><p><strong>å¦‚æœç‰ˆæœ¬è¿‡ä½</strong>ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br><span class="line"><span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure></li><li><p><strong>æƒé™é—®é¢˜</strong>ï¼šç¡®ä¿å½“å‰ç”¨æˆ·åœ¨dockerç»„ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -aG docker $(<span class="built_in">whoami</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä½¿ç”¨YUMå®‰è£…Docker Composeæ˜¯åœ¨CentOS&#x2F;RHELç³»ç»Ÿä¸Šå¿«é€Ÿéƒ¨ç½²Docker Composeçš„ç®€ä¾¿æ–¹æ³•ã€‚é€šè¿‡EPELæºï¼Œæ‚¨å¯ä»¥è½»æ¾è·å–å’Œå®‰è£…Docker Composeï¼Œä»è€Œç®€åŒ–å¤šå®¹å™¨åº”ç”¨ç¨‹åºçš„ç®¡ç†ã€‚</p><p>Docker Composeæå¤§åœ°ç®€åŒ–äº†å¼€å‘å’Œéƒ¨ç½²æµç¨‹ï¼Œä½¿å¾—å®šä¹‰ã€è¿è¡Œå’Œæ‰©å±•å¤šå®¹å™¨åº”ç”¨å˜å¾—æ›´åŠ å®¹æ˜“ã€‚æ— è®ºæ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒï¼ŒDocker Composeéƒ½æ˜¯å®¹å™¨ç¼–æ’çš„æœ‰åŠ›å·¥å…·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯Œæ–‡æœ¬åŠformatterçš„ä½¿ç”¨</title>
      <link href="/2024/12/17/%E5%AF%8C%E6%96%87%E6%9C%AC%E5%8F%8Aformatter%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2024/12/17/%E5%AF%8C%E6%96%87%E6%9C%AC%E5%8F%8Aformatter%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>å…ˆçœ‹æ•ˆæœå›¾ï¼šè¯¥é¥¼å›¾ç»Ÿè®¡æ€»å…±çš„æ•°æ®ï¼Œå…¶ä¸­æ¯å—é¥¼å›¾æ—è¾¹æ˜¾ç¤ºäº†3æ¡ç›¸åº”çš„è¯¦ç»†æ•°æ®</p><p><img src="/img/posts/885888ffc5b8d7fbccc880f14d88f398.png"></p><h3 id="å…¶ä¸­åç«¯æä¾›çš„æ•°æ®ç»“æ„å¦‚ä¸‹"><a href="#å…¶ä¸­åç«¯æä¾›çš„æ•°æ®ç»“æ„å¦‚ä¸‹" class="headerlink" title="å…¶ä¸­åç«¯æä¾›çš„æ•°æ®ç»“æ„å¦‚ä¸‹"></a>å…¶ä¸­åç«¯æä¾›çš„æ•°æ®ç»“æ„å¦‚ä¸‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;randomSelectedList&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;åŒ—äº¬å¤§å­¦-æ‚‰å°¼å¤§å­¦é£Ÿç‰©å®‰å…¨å’Œå†œä¸šå¯æŒç»­å‘å±•è”åˆä¸­å¿ƒæ­ç‰Œä»ªå¼æš¨å­¦æœ¯ç ”è®¨ä¼šä¸¾è¡Œ&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;â€œæ²‰æµ¸å¼ä¼ æ’­è§†åŸŸä¸‹ä¼ ç»Ÿæ–‡åŒ–+è™šæ‹Ÿç°å®çš„åˆ›æ–°è·¯å¾„â€ç ”è®¨ä¼šåœ¨åŒ—äº¬å¤§å­¦ä¸¾è¡Œ&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;ç¾å›½æ°”è±¡å­¦ä¼šç†äº‹é•¿è®¿é—®åŒ—äº¬å¤§å­¦&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;å·´åŸºæ–¯å¦å‰æ€»ç†é˜¿å·´è¥¿è®¿é—®åŒ—äº¬å¤§å­¦&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;å¼ è¾›ï¼šå°é›ª&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;â€œå¼‚å½©åŒé£ï¼Œå…±é¸£æœªåâ€â€”â€”åŒ—äº¬å¤§å­¦ç¬¬äºŒåä¸€å±Šå›½é™…æ–‡åŒ–èŠ‚ä¸¾è¡Œ&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;ç”µå­å­¦é™¢å¼ å¿—å‹‡æ•™æˆå›¢é˜Ÿåœ¨ç¢³åŸºé«˜çµæ•çº¢å¤–æ¢æµ‹é¢†åŸŸå–å¾—è¿›å±•&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;æ ¡é¢†å¯¼ç‡é˜Ÿèµ´äº‘å—å¼¥æ¸¡æ¨è¿›å®šç‚¹å¸®æ‰¶å·¥ä½œ&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;â€œå›½åˆ«å’ŒåŒºåŸŸç ”ç©¶è§†åŸŸä¸‹çš„åº“å°”å¾·é—®é¢˜â€ç ”è®¨ä¼šæš¨ã€Šä¼Šæ‹‰å…‹åº“å°”å¾·é—®é¢˜ç ”ç©¶ï¼ˆ1958â€”2003ï¼‰ã€‹æ–°ä¹¦å‘å¸ƒä¼šä¸¾è¡Œ&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a1&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;åŒ—äº¬å¤§å­¦å¬å¼€å…šçºªå­¦ä¹ æ•™è‚²åŠ¨å‘˜æš¨2024å¹´æ·±åŒ–å…¨é¢ä»ä¸¥æ²»å…šå·¥ä½œä¼šè®®&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;åŒ—äº¬å¤§å­¦æ ¼è‡´è®ºå›ï¼ˆç¬¬23è®²ï¼‰æš—ç‰©è´¨ç²’å­å¯»æ‰¾çš„ç§‘å­¦ä¹‹æ—…&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;ç”°æ™–ï¼šæˆ‘ä»¬çš„ç›®å…‰ï¼Œæ­£è·ƒå‡ºå¤ªé˜³ç³»&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a2&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;â€œå›½åˆ«å’ŒåŒºåŸŸç ”ç©¶è§†åŸŸä¸‹çš„åº“å°”å¾·é—®é¢˜â€ç ”è®¨ä¼šæš¨ã€Šä¼Šæ‹‰å…‹åº“å°”å¾·é—®é¢˜ç ”ç©¶ï¼ˆ1958â€”2003ï¼‰ã€‹æ–°ä¹¦å‘å¸ƒä¼šä¸¾è¡Œ&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a3&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;â€œå›½åˆ«å’ŒåŒºåŸŸç ”ç©¶è§†åŸŸä¸‹çš„åº“å°”å¾·é—®é¢˜â€ç ”è®¨ä¼šæš¨ã€Šä¼Šæ‹‰å…‹åº“å°”å¾·é—®é¢˜ç ”ç©¶ï¼ˆ1958â€”2003ï¼‰ã€‹æ–°ä¹¦å‘å¸ƒä¼šä¸¾è¡Œ&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a3&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;æ ¡é¢†å¯¼ç‡é˜Ÿèµ´äº‘å—å¼¥æ¸¡æ¨è¿›å®šç‚¹å¸®æ‰¶å·¥ä½œ&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;username&quot;</span>: <span class="string">&quot;a3&quot;</span>,</span><br><span class="line">      <span class="string">&quot;newsName&quot;</span>: <span class="string">&quot;å¼˜å·¥åŒ ç²¾ç¥ï¼Œå±•åå‹¤é£é‡‡â€”â€”åŒ—äº¬å¤§å­¦é¦–å±Šåå‹¤ç³»ç»ŸèŒå·¥èŒä¸šæŠ€èƒ½å¤§èµ›ä¸¾è¡Œ&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯¹dataæ•°æ®è¿›è¡Œå¦‚ä¸‹çš„å¤„ç†"><a href="#å¯¹dataæ•°æ®è¿›è¡Œå¦‚ä¸‹çš„å¤„ç†" class="headerlink" title="å¯¹dataæ•°æ®è¿›è¡Œå¦‚ä¸‹çš„å¤„ç†"></a>å¯¹dataæ•°æ®è¿›è¡Œå¦‚ä¸‹çš„å¤„ç†</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = data.<span class="property">list</span>;</span><br><span class="line"><span class="keyword">let</span> randomSelectedList = data.<span class="property">randomSelectedList</span></span><br><span class="line"><span class="keyword">let</span> yAxis = [];</span><br><span class="line"><span class="keyword">let</span> xAxis = [];</span><br><span class="line"><span class="keyword">var</span> option = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> paraData = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; res.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  yAxis.<span class="title function_">push</span>(res[i].<span class="property">userCollection</span>);</span><br><span class="line">  xAxis.<span class="title function_">push</span>(res[i].<span class="property">username</span>);</span><br><span class="line">  <span class="keyword">let</span> details = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; randomSelectedList.<span class="property">length</span>; j++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (res[i].<span class="property">username</span> == randomSelectedList[j].<span class="property">username</span>) &#123;</span><br><span class="line">      details.<span class="title function_">push</span>(randomSelectedList[j].<span class="property">newsName</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  paraData.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: res[i].<span class="property">username</span>,</span><br><span class="line">    <span class="attr">value</span>: res[i].<span class="property">userCollection</span>,</span><br><span class="line">    <span class="attr">details</span>: details</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯¹åº”çš„option"><a href="#å¯¹åº”çš„option" class="headerlink" title="å¯¹åº”çš„option"></a>å¯¹åº”çš„option</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">option = &#123;</span><br><span class="line">  <span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;æ”¶è—ç»Ÿè®¡&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">tooltip</span>: &#123;</span><br><span class="line">    <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">    <span class="attr">formatter</span>: <span class="string">&#x27;&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">series</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;æ”¶è—æ•°&#x27;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>,</span><br><span class="line">      <span class="attr">radius</span>: <span class="string">&#x27;65%&#x27;</span>,</span><br><span class="line">      <span class="attr">center</span>: [<span class="string">&#x27;50%&#x27;</span>, <span class="string">&#x27;50%&#x27;</span>],</span><br><span class="line">      <span class="attr">selectedMode</span>: <span class="string">&#x27;single&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: paraData,</span><br><span class="line">      <span class="attr">emphasis</span>: &#123;</span><br><span class="line">        <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">          <span class="attr">shadowBlur</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="attr">shadowOffsetX</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">shadowColor</span>: <span class="string">&#x27;rgba(0, 0, 0, 0.5)&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">label</span>: &#123;</span><br><span class="line">        <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">params</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> data = params.<span class="property">data</span></span><br><span class="line">          <span class="keyword">var</span> arr = </span><br><span class="line">            <span class="string">&#x27;&#123;title|ç”¨æˆ·åï¼š&#x27;</span>+ data.<span class="property">name</span> +<span class="string">&#x27;&#125;&#123;abg|&#125;\n&#x27;</span>+</span><br><span class="line">            <span class="string">&#x27;&#123;weatherHead|æ”¶è—çš„æ–°é—»&#125;\n&#x27;</span>+</span><br><span class="line">            <span class="string">&#x27;&#123;hr|&#125;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">var</span> length = data.<span class="property">details</span>.<span class="property">length</span></span><br><span class="line">          <span class="keyword">var</span> detail = data.<span class="property">details</span></span><br><span class="line">          <span class="keyword">if</span>(length &gt; <span class="number">3</span>)&#123;</span><br><span class="line">            length = <span class="number">3</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">let</span> i =<span class="number">0</span> ;i&lt;length;i++)&#123;</span><br><span class="line">            arr = arr +<span class="string">&#x27; &#123;value|&#x27;</span>+ detail[i] +<span class="string">&#x27;&#125;\n&#x27;</span></span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br><span class="line">          <span class="keyword">return</span> arr;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// formatter: [</span></span><br><span class="line">        <span class="comment">//   &#x27;&#123;title|&#123;b&#125;&#125;&#123;abg|&#125;&#x27;,</span></span><br><span class="line">        <span class="comment">//   &#x27;  &#123;weatherHead|æ”¶è—çš„æ–°é—»&#125;&#x27;,</span></span><br><span class="line">        <span class="comment">//   &#x27;&#123;hr|&#125;&#x27;,</span></span><br><span class="line">        <span class="comment">//   &#x27;  &#123;value|&#125;&#x27;,</span></span><br><span class="line">        <span class="comment">//   &#x27;  &#123;value|142&#125;&#x27;,</span></span><br><span class="line">        <span class="comment">//   &#x27;  &#123;value|21&#125;&#x27;</span></span><br><span class="line">        <span class="comment">// ].join(&#x27;\n&#x27;),</span></span><br><span class="line">        <span class="attr">backgroundColor</span>: <span class="string">&#x27;#eee&#x27;</span>,</span><br><span class="line">        <span class="attr">borderColor</span>: <span class="string">&#x27;#777&#x27;</span>,</span><br><span class="line">        <span class="attr">borderWidth</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">borderRadius</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">rich</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#eee&#x27;</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="string">&#x27;center&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">abg</span>: &#123;</span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;#333&#x27;</span>,</span><br><span class="line">            <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">25</span>,</span><br><span class="line">            <span class="attr">borderRadius</span>: [<span class="number">4</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="title class_">Sunny</span>: &#123;</span><br><span class="line">            <span class="attr">height</span>: <span class="number">30</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">            <span class="attr">backgroundColor</span>: &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="title class_">Cloudy</span>: &#123;</span><br><span class="line">            <span class="attr">height</span>: <span class="number">30</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">            <span class="attr">backgroundColor</span>: &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="title class_">Showers</span>: &#123;</span><br><span class="line">            <span class="attr">height</span>: <span class="number">30</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">            <span class="attr">backgroundColor</span>: &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">weatherHead</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#333&#x27;</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">24</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="string">&#x27;center&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">hr</span>: &#123;</span><br><span class="line">            <span class="attr">borderColor</span>: <span class="string">&#x27;#777&#x27;</span>,</span><br><span class="line">            <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">            <span class="attr">borderWidth</span>: <span class="number">0.5</span>,</span><br><span class="line">                        <span class="attr">height</span>: <span class="number">0</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">value</span>: &#123;</span><br><span class="line">                        <span class="attr">width</span>: <span class="number">40</span>,</span><br><span class="line">                        <span class="attr">padding</span>: [<span class="number">0</span>, <span class="number">20</span>, <span class="number">0</span>, <span class="number">30</span>],</span><br><span class="line">                        <span class="attr">align</span>: <span class="string">&#x27;center&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">valueHead</span>: &#123;</span><br><span class="line">                        <span class="attr">color</span>: <span class="string">&#x27;#333&#x27;</span>,</span><br><span class="line">                        <span class="attr">width</span>: <span class="number">20</span>,</span><br><span class="line">                        <span class="attr">padding</span>: [<span class="number">0</span>, <span class="number">20</span>, <span class="number">0</span>, <span class="number">30</span>],</span><br><span class="line">                        <span class="attr">align</span>: <span class="string">&#x27;center&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">rate</span>: &#123;</span><br><span class="line">                        <span class="attr">width</span>: <span class="number">40</span>,</span><br><span class="line">                        <span class="attr">align</span>: <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">                        <span class="attr">padding</span>: [<span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">rateHead</span>: &#123;</span><br><span class="line">                        <span class="attr">color</span>: <span class="string">&#x27;#333&#x27;</span>,</span><br><span class="line">                        <span class="attr">width</span>: <span class="number">40</span>,</span><br><span class="line">                        <span class="attr">align</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                        <span class="attr">padding</span>: [<span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li><strong>å®šä¹‰å¯Œæ–‡æœ¬æ ·å¼</strong>ï¼š<ul><li>åœ¨<code>label.rich</code>ä¸­ï¼Œå®šä¹‰äº†å¤šä¸ªæ ·å¼åç§°ï¼ˆå¦‚<code>title</code>, <code>abg</code>, <code>weatherHead</code>, <code>hr</code>, <code>value</code>ç­‰ï¼‰ï¼Œå¹¶ä¸ºæ¯ä¸ªæ ·å¼æŒ‡å®šäº†å±æ€§ï¼ˆå¦‚é¢œè‰²ã€å¯¹é½æ–¹å¼ã€èƒŒæ™¯é¢œè‰²ã€å®½åº¦ã€é«˜åº¦ã€è¾¹æ¡†é¢œè‰²ã€è¾¹æ¡†å®½åº¦ã€å†…è¾¹è·ç­‰ï¼‰ã€‚</li><li>è¿™äº›æ ·å¼åç§°å¯ä»¥åœ¨<code>formatter</code>å‡½æ•°ä¸­è¢«å¼•ç”¨ï¼Œä»¥åº”ç”¨ç‰¹å®šçš„æ ·å¼åˆ°æ–‡æœ¬çš„æŸä¸€éƒ¨åˆ†ã€‚</li></ul></li><li><strong>ä½¿ç”¨å¯Œæ–‡æœ¬æ ·å¼</strong>ï¼š<ul><li>åœ¨<code>formatter</code>å‡½æ•°ä¸­ï¼Œé€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨åå¼•å·<code>`</code>ï¼‰å’Œå ä½ç¬¦ï¼ˆå¦‚<code>&#123;title|ç”¨æˆ·åï¼š...&#125;</code>ï¼‰æ¥æ„å»ºæ ‡ç­¾çš„æ–‡æœ¬å†…å®¹ã€‚</li><li>æ¯ä¸ªå ä½ç¬¦ä¸­çš„ç¬¬ä¸€ä¸ªéƒ¨åˆ†ï¼ˆå¦‚<code>title</code>ï¼‰æ˜¯<code>rich</code>ä¸­å®šä¹‰çš„æ ·å¼åç§°ï¼Œåé¢çš„éƒ¨åˆ†ï¼ˆå¦‚<code>ç”¨æˆ·åï¼š...</code>ï¼‰æ˜¯è¦æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚</li><li>è¿™ç§æ–¹å¼å…è®¸åœ¨æ ‡ç­¾çš„ä¸åŒéƒ¨åˆ†åº”ç”¨ä¸åŒçš„æ ·å¼ã€‚</li></ul></li><li><strong>åŠ¨æ€å†…å®¹</strong>ï¼š<ul><li><code>formatter</code>å‡½æ•°å¯ä»¥æ ¹æ®æ•°æ®ï¼ˆ<code>params.data</code>ï¼‰åŠ¨æ€ç”Ÿæˆæ ‡ç­¾å†…å®¹ã€‚</li><li>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒç”¨äºæ˜¾ç¤ºç”¨æˆ·çš„æ”¶è—ç»Ÿè®¡ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€æ”¶è—çš„æ–°é—»æ ‡é¢˜ï¼Œä»¥åŠï¼ˆå¦‚æœå¯ç”¨çš„è¯ï¼‰å‰ä¸‰æ¡æ–°é—»æ ‡é¢˜ã€‚</li></ul></li><li><strong>ç‰¹æ®Šæ ·å¼</strong>ï¼š<ul><li><code>abg</code>æ ·å¼è¢«ç”¨ä½œä¸€ä¸ªç‰¹æ®Šçš„èƒŒæ™¯å—ï¼Œå¯èƒ½ç”¨äºåˆ†éš”æ–‡æœ¬æˆ–æä¾›è§†è§‰ä¸Šçš„å±‚æ¬¡æ„Ÿã€‚</li><li><code>hr</code>æ ·å¼æ¨¡æ‹Ÿäº†ä¸€ä¸ªæ°´å¹³åˆ†éš”çº¿ï¼Œé€šè¿‡æŒ‡å®šå®½åº¦ã€è¾¹æ¡†é¢œè‰²ã€è¾¹æ¡†å®½åº¦å’Œé«˜åº¦æ¥å®ç°ã€‚</li></ul></li><li><strong>æœªä½¿ç”¨çš„æ ·å¼</strong>ï¼š<ul><li>åœ¨<code>rich</code>ä¸­å®šä¹‰äº†ä¸€äº›æ ·å¼ï¼ˆå¦‚<code>Sunny</code>, <code>Cloudy</code>, <code>Showers</code>ï¼‰ï¼Œä½†åœ¨<code>formatter</code>å‡½æ•°ä¸­å¹¶æœªä½¿ç”¨ã€‚è¿™äº›å¯èƒ½æ˜¯ä¸ºäº†å…¶ä»–ç›®çš„è€Œé¢„ç•™çš„ï¼Œæˆ–è€…æ˜¯åœ¨ç¤ºä¾‹ä¸­è¢«çœç•¥äº†ã€‚</li></ul></li><li><strong>è°ƒè¯•</strong>ï¼š<ul><li><code>console.log(arr)</code>è¯­å¥ç”¨äºåœ¨æ§åˆ¶å°è¾“å‡ºæ„å»ºçš„æ ‡ç­¾æ–‡æœ¬ï¼Œè¿™æœ‰åŠ©äºè°ƒè¯•å’ŒéªŒè¯<code>formatter</code>å‡½æ•°çš„è¾“å‡ºã€‚</li></ul></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯Œæ–‡æœ¬çš„ä½¿ç”¨åœ¨EChartsä¸­æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥å®šåˆ¶å›¾è¡¨æ ‡ç­¾çš„æ ·å¼å’Œå†…å®¹ï¼Œä½¿å…¶èƒ½å¤Ÿæ›´ç›´è§‚åœ°å±•ç¤ºæ•°æ®å’Œæä¾›ç”¨æˆ·å‹å¥½çš„ç•Œé¢ã€‚</p><blockquote><p>echartså®˜ç½‘æ¥æºï¼š <a href="https://echarts.apache.org/examples/zh/editor.html?c=pie-rich-text">https://echarts.apache.org/examples/zh/editor.html?c=pie-rich-text</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Echarts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€šç”¨dockerfileæ–‡ä»¶</title>
      <link href="/2024/12/17/%E9%80%9A%E7%94%A8dockerfile%E6%96%87%E4%BB%B6/"/>
      <url>/2024/12/17/%E9%80%9A%E7%94%A8dockerfile%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="å…ˆå†™é¡¹ç›®çš„å¯åŠ¨è„šæœ¬ï¼Œå‘½åä¸ºrun-sh"><a href="#å…ˆå†™é¡¹ç›®çš„å¯åŠ¨è„šæœ¬ï¼Œå‘½åä¸ºrun-sh" class="headerlink" title="å…ˆå†™é¡¹ç›®çš„å¯åŠ¨è„šæœ¬ï¼Œå‘½åä¸ºrun.sh"></a>å…ˆå†™é¡¹ç›®çš„å¯åŠ¨è„šæœ¬ï¼Œå‘½åä¸º<code>run.sh</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$JAVA_OPTS</span> ];<span class="keyword">then</span></span><br><span class="line">    JAVA_OPTS=<span class="string">&quot;-Xms256m -Xmx512m&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$JAR_PATH</span> ];<span class="keyword">then</span></span><br><span class="line">    JAR_PATH=<span class="string">&quot;/opt/server&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$EXAM_ENV</span> ];<span class="keyword">then</span></span><br><span class="line">    EXAM_ENV=<span class="string">&quot;prod&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$LOG</span> != <span class="string">&quot;xfalse&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">mkdir</span> -p logs</span><br><span class="line">    LOGGING_OPT=<span class="string">&quot;--logging.path=./logs&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$JAVA_OPTS</span> -Dlogging.path=./logs -DSpring.profiles.active=<span class="variable">$EXAM_ENV</span> -jar <span class="variable">$&#123;JAR_PATH&#125;</span>/*.jar</span><br><span class="line"></span><br><span class="line">java <span class="variable">$JAVA_OPTS</span> -Dlogging.path=./logs -DSpring.profiles.active=<span class="variable">$EXAM_ENV</span> -jar <span class="variable">$&#123;JAR_PATH&#125;</span>/*.jar</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="dockerfileæ–‡ä»¶æ‰“åŒ…é•œåƒ"><a href="#dockerfileæ–‡ä»¶æ‰“åŒ…é•œåƒ" class="headerlink" title="dockerfileæ–‡ä»¶æ‰“åŒ…é•œåƒ"></a><code>dockerfile</code>æ–‡ä»¶æ‰“åŒ…é•œåƒ</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /opt/server/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> target/<span class="variable">$&#123;&#x27;é¡¹ç›®åç§°&#x27;&#125;</span>-SNAPSHOT.jar /opt/server</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> run.sh /opt/server/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> src/main/resources/static /server</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8888</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /opt/server</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;sh&quot;</span>, <span class="string">&quot;/opt/server/run.sh&quot;</span>]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="docker-compose-ymlæ–‡ä»¶ï¼Œä¾èµ–çš„é•œåƒä¸ºMySQLä»¥åŠredis"><a href="#docker-compose-ymlæ–‡ä»¶ï¼Œä¾èµ–çš„é•œåƒä¸ºMySQLä»¥åŠredis" class="headerlink" title="docker-compose.ymlæ–‡ä»¶ï¼Œä¾èµ–çš„é•œåƒä¸ºMySQLä»¥åŠredis"></a><code>docker-compose.yml</code>æ–‡ä»¶ï¼Œä¾èµ–çš„é•œåƒä¸ºMySQLä»¥åŠredis</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;2.1&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">exam:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">exam_server</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">exam:1.0</span> </span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8888</span><span class="string">:8888</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_HOST=mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_PORT=3306</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_NAME=exam_system</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_USER=root</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_PASSWORD=123456</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REDIS_HOST=redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">REDIS_PASSWORD=123456</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">exam_mysql</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">3306</span><span class="string">:3306</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=123456</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/exam/volume_data/mysql/data:/var/lib/mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/exam/volume_data/mysql/conf:/etc/mysql/conf.d</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/exam/init_sql:/docker-entrypoint-initdb.d</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">exam_redis</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:6</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">/etc/redis/redis.conf</span> <span class="string">--requirepass</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">6379</span><span class="string">:6379</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/exam/volume_data/redis/data:/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/opt/exam/volume_data/redis/redis.conf:/etc/redis/redis.conf</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä¸­éœ€è¦æŠŠåˆå§‹åŒ–æ•°æ®åº“è„šæœ¬æ”¾åœ¨<code>/opt/server/init_sql</code>ç›®å½•ä¸‹é¢</p><p>redisçš„é…ç½®æ–‡ä»¶æ”¾åœ¨<code>/opt/server/volume_data/redis</code>ä¸‹é¢</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ å¯†ymlæ–‡ä»¶</title>
      <link href="/2024/06/16/%E5%8A%A0%E5%AF%86yml%E6%96%87%E4%BB%B6/"/>
      <url>/2024/06/16/%E5%8A%A0%E5%AF%86yml%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="1-ä½ç‰ˆæœ¬2-x"><a href="#1-ä½ç‰ˆæœ¬2-x" class="headerlink" title="1. ä½ç‰ˆæœ¬2.x"></a>1. ä½ç‰ˆæœ¬2.x</h3><h4 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.ulisesbocchio<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jasypt-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰‹åŠ¨å¼•å…¥ä¾èµ–ï¼ˆå†…ç½‘ç¯å¢ƒï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jasypt<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jasypt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.ulisesbocchio<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jasypt-spring-boot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆå¯†ç "><a href="#ç”Ÿæˆå¯†ç " class="headerlink" title="ç”Ÿæˆå¯†ç "></a>ç”Ÿæˆå¯†ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PasswordEncrypt</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// write your code here</span></span><br><span class="line">    <span class="type">StandardPBEStringEncryptor</span> <span class="variable">standardPBEStringEncryptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StandardPBEStringEncryptor</span>();</span><br><span class="line">    <span class="type">EnvironmentPBEConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EnvironmentPBEConfig</span>();</span><br><span class="line"></span><br><span class="line">    config.setAlgorithm(<span class="string">&quot;PBEWithMD5AndDES&quot;</span>);          <span class="comment">// åŠ å¯†çš„ç®—æ³•ï¼Œè¿™ä¸ªç®—æ³•æ˜¯é»˜è®¤çš„</span></span><br><span class="line">    config.setPassword(<span class="string">&quot;sigtuna&quot;</span>);                        <span class="comment">// åŠ å¯†çš„å¯†é’¥ï¼Œéšä¾¿è‡ªå·±å¡«å†™ï¼Œå¾ˆé‡è¦åƒä¸‡ä¸è¦å‘Šè¯‰åˆ«äºº</span></span><br><span class="line">    standardPBEStringEncryptor.setConfig(config);</span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://xxx.xxx.xxx.xxx:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=FALSE&amp;serverTimezone=UTC&amp;useOldAliasMetadataBehavior=true&quot;</span>;         <span class="comment">//è‡ªå·±çš„å¯†ç </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">root</span> <span class="operator">=</span> <span class="string">&quot;test&quot;</span>;         <span class="comment">//è‡ªå·±çš„å¯†ç </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> <span class="string">&quot;test&quot;</span>;         <span class="comment">//è‡ªå·±çš„å¯†ç </span></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;url &quot;</span>+ standardPBEStringEncryptor.encrypt(url));</span><br><span class="line">    System.out.println(<span class="string">&quot;root &quot;</span>+ standardPBEStringEncryptor.encrypt(root));</span><br><span class="line">    System.out.println(<span class="string">&quot;pwd &quot;</span>+ standardPBEStringEncryptor.encrypt(pwd));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è§£å¯†"><a href="#è§£å¯†" class="headerlink" title="è§£å¯†"></a>è§£å¯†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">decrypt</span><span class="params">(String url, String username, String pwd)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">StandardPBEStringEncryptor</span> <span class="variable">standardPBEStringEncryptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StandardPBEStringEncryptor</span>();</span><br><span class="line">    <span class="type">EnvironmentPBEConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EnvironmentPBEConfig</span>();</span><br><span class="line"> </span><br><span class="line">    config.setAlgorithm(<span class="string">&quot;PBEWithMD5AndDES&quot;</span>);</span><br><span class="line">    config.setPassword(<span class="string">&quot;sigtuna&quot;</span>);</span><br><span class="line">    standardPBEStringEncryptor.setConfig(config);</span><br><span class="line">    <span class="type">String</span> <span class="variable">plainTextUrl</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(url);</span><br><span class="line">    <span class="type">String</span> <span class="variable">plainTextUser</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(username);</span><br><span class="line">    <span class="type">String</span> <span class="variable">plainTextPwd</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(pwd);</span><br><span class="line">    System.out.println(<span class="string">&quot;url: &quot;</span>+plainTextUrl);</span><br><span class="line">    System.out.println(<span class="string">&quot;username: &quot;</span>+plainTextUser);</span><br><span class="line">    System.out.println(<span class="string">&quot;password: &quot;</span>+plainTextPwd);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨è·å–ymlæ–‡ä»¶é‡Œçš„æ•°æ®åº“é…ç½®"><a href="#è‡ªåŠ¨è·å–ymlæ–‡ä»¶é‡Œçš„æ•°æ®åº“é…ç½®" class="headerlink" title="è‡ªåŠ¨è·å–ymlæ–‡ä»¶é‡Œçš„æ•°æ®åº“é…ç½®"></a>è‡ªåŠ¨è·å–ymlæ–‡ä»¶é‡Œçš„æ•°æ®åº“é…ç½®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PasswordDecrypt</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line"><span class="comment">//        decrypt(&quot;ç§˜é’¥&quot;,</span></span><br><span class="line"><span class="comment">//                &quot;ç§˜é’¥&quot;,</span></span><br><span class="line"><span class="comment">//                &quot;ç§˜é’¥&quot;);</span></span><br><span class="line">        EaseDecrypt();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">Encrypt</span><span class="params">(String url,String username,String pwd)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">StandardPBEStringEncryptor</span> <span class="variable">standardPBEStringEncryptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StandardPBEStringEncryptor</span>();</span><br><span class="line">        <span class="type">EnvironmentPBEConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EnvironmentPBEConfig</span>();</span><br><span class="line"></span><br><span class="line">        config.setAlgorithm(<span class="string">&quot;PBEWithMD5AndDES&quot;</span>);          <span class="comment">// åŠ å¯†çš„ç®—æ³•ï¼Œè¿™ä¸ªç®—æ³•æ˜¯é»˜è®¤çš„</span></span><br><span class="line">        config.setPassword(<span class="string">&quot;sigtuna&quot;</span>);                        <span class="comment">// åŠ å¯†çš„å¯†é’¥ï¼Œéšä¾¿è‡ªå·±å¡«å†™ï¼Œå¾ˆé‡è¦åƒä¸‡ä¸è¦å‘Šè¯‰åˆ«äºº</span></span><br><span class="line">        standardPBEStringEncryptor.setConfig(config);</span><br><span class="line">        <span class="comment">// String url = &quot;jdbc:mysql://xxx.xxxx.xxx.xxx:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT&amp;autoReconnect=true&amp;useSSL=false&quot;;         //è‡ªå·±çš„å¯†ç </span></span><br><span class="line">        <span class="comment">// String root = &quot;test&quot;;         //è‡ªå·±çš„å¯†ç </span></span><br><span class="line">        <span class="comment">// String pwd = &quot;test&quot;;         //è‡ªå·±çš„å¯†ç </span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;url &quot;</span>+ standardPBEStringEncryptor.encrypt(url));</span><br><span class="line">        System.out.println(<span class="string">&quot;root &quot;</span>+ standardPBEStringEncryptor.encrypt(username));</span><br><span class="line">        System.out.println(<span class="string">&quot;pwd &quot;</span>+ standardPBEStringEncryptor.encrypt(pwd));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">decrypt</span><span class="params">(String url, String username, String pwd)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">StandardPBEStringEncryptor</span> <span class="variable">standardPBEStringEncryptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StandardPBEStringEncryptor</span>();</span><br><span class="line">        <span class="type">EnvironmentPBEConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EnvironmentPBEConfig</span>();</span><br><span class="line"> </span><br><span class="line">        config.setAlgorithm(<span class="string">&quot;PBEWithMD5AndDES&quot;</span>);</span><br><span class="line">        config.setPassword(<span class="string">&quot;sigtuna&quot;</span>);</span><br><span class="line">        standardPBEStringEncryptor.setConfig(config);</span><br><span class="line">        <span class="type">String</span> <span class="variable">plainTextUrl</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(url);</span><br><span class="line">        <span class="type">String</span> <span class="variable">plainTextUser</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(username);</span><br><span class="line">        <span class="type">String</span> <span class="variable">plainTextPwd</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(pwd);</span><br><span class="line">        System.out.println(<span class="string">&quot;url: &quot;</span>+plainTextUrl);</span><br><span class="line">        System.out.println(<span class="string">&quot;username: &quot;</span>+plainTextUser);</span><br><span class="line">        System.out.println(<span class="string">&quot;password: &quot;</span>+plainTextPwd);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">EaseDecrypt</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// System.out.println(&quot;è¾“å…¥è§£å¯†çš„é…ç½®æ–‡ä»¶åœ°å€&quot;);</span></span><br><span class="line">        <span class="comment">// Scanner scanner = new Scanner(System.in);</span></span><br><span class="line">        <span class="comment">// String filePath = scanner.nextLine();</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">io</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;x:\\xxx\\application-dev.yml&quot;</span>);</span><br><span class="line">        Yaml yaml=<span class="keyword">new</span> <span class="title class_">Yaml</span>();</span><br><span class="line">        Map&lt;String, Object&gt; map =yaml.load(io);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="comment">//        System.out.println(map);</span></span><br><span class="line"><span class="comment">//        System.out.println(map.get(&quot;spring&quot;));</span></span><br><span class="line"><span class="comment">//        System.out.println();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å¾—url</span></span><br><span class="line">        <span class="keyword">if</span> (map.get(<span class="string">&quot;spring&quot;</span>) != <span class="literal">null</span> &amp;&amp; !map.get(<span class="string">&quot;spring&quot;</span>).equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">            Map&lt;String,Object&gt; mapd = (Map&lt;String, Object&gt;) map.get(<span class="string">&quot;spring&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (mapd.get(<span class="string">&quot;datasource&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">                Map&lt;String,Object&gt; mapdata = (Map&lt;String, Object&gt;) mapd.get(<span class="string">&quot;datasource&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (mapdata.get(<span class="string">&quot;druid&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">                    Map&lt;String,Object&gt; mapdata1 = (Map&lt;String, Object&gt;) mapdata.get(<span class="string">&quot;druid&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (mapdata1.get(<span class="string">&quot;master&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">                        Map&lt;String,Object&gt; mapdata2 = (Map&lt;String, Object&gt;) mapdata1.get(<span class="string">&quot;master&quot;</span>);</span><br><span class="line">                        <span class="keyword">if</span> (mapdata2.get(<span class="string">&quot;url&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">                            url = (String) mapdata2.get(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">                            username = (String) mapdata2.get(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">                            pwd = (String) mapdata2.get(<span class="string">&quot;password&quot;</span>);;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å¾—åŠ å¯†å¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">algorithm</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">prefix</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (map.get(<span class="string">&quot;jasypt&quot;</span>) != <span class="literal">null</span> &amp;&amp; !map.get(<span class="string">&quot;jasypt&quot;</span>).equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">            Map&lt;String,Object&gt; mapd = (Map&lt;String, Object&gt;) map.get(<span class="string">&quot;jasypt&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (mapd.get(<span class="string">&quot;encryptor&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">                Map&lt;String,Object&gt; mapdata = (Map&lt;String, Object&gt;) mapd.get(<span class="string">&quot;encryptor&quot;</span>);</span><br><span class="line">                algorithm = (String) mapdata.get(<span class="string">&quot;algorithm&quot;</span>);</span><br><span class="line">                password = (String) mapdata.get(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(mapdata.get(<span class="string">&quot;property&quot;</span>)!= <span class="literal">null</span>)&#123;</span><br><span class="line">                    Map&lt;String,Object&gt; mapdata1 = (Map&lt;String, Object&gt;) mapdata.get(<span class="string">&quot;property&quot;</span>);</span><br><span class="line">                    prefix = (String) mapdata1.get(<span class="string">&quot;prefix&quot;</span>);</span><br><span class="line">                    suffix = (String) mapdata1.get(<span class="string">&quot;suffix&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">StandardPBEStringEncryptor</span> <span class="variable">standardPBEStringEncryptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StandardPBEStringEncryptor</span>();</span><br><span class="line">        <span class="comment">// å»é™¤å‰ç¼€</span></span><br><span class="line">        url = removePro(url,prefix,suffix);</span><br><span class="line">        username = removePro(username,prefix,suffix);</span><br><span class="line">        pwd = removePro(pwd,prefix,suffix);</span><br><span class="line"></span><br><span class="line">        <span class="type">EnvironmentPBEConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EnvironmentPBEConfig</span>();</span><br><span class="line"> </span><br><span class="line">        config.setAlgorithm(algorithm);</span><br><span class="line">        config.setPassword(password);</span><br><span class="line">        standardPBEStringEncryptor.setConfig(config);</span><br><span class="line">        <span class="type">String</span> <span class="variable">plainTextUrl</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(url);</span><br><span class="line">        <span class="type">String</span> <span class="variable">plainTextUser</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(username);</span><br><span class="line">        <span class="type">String</span> <span class="variable">plainTextPwd</span> <span class="operator">=</span> standardPBEStringEncryptor.decrypt(pwd);</span><br><span class="line">        System.out.println(<span class="string">&quot;url: &quot;</span>+plainTextUrl);</span><br><span class="line">        System.out.println(<span class="string">&quot;username: &quot;</span>+plainTextUser);</span><br><span class="line">        System.out.println(<span class="string">&quot;password: &quot;</span>+plainTextPwd);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">removePro</span><span class="params">(String oString,String prefix,String suffix)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> oString;</span><br><span class="line">        <span class="keyword">if</span> (prefix!=<span class="literal">null</span>) &#123;</span><br><span class="line">            str = oString.substring(prefix.length(), oString.length());</span><br><span class="line">            oString = str;</span><br><span class="line">            <span class="keyword">if</span> (suffix!=<span class="literal">null</span>) &#123;</span><br><span class="line">                str = oString.substring(<span class="number">0</span>, oString.length()-suffix.length());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">getMapKey</span><span class="params">(String key , Map&lt;String,Object&gt; map)</span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Map&lt;String,Object&gt; keyMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (key != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.get(key) != <span class="literal">null</span>) &#123;</span><br><span class="line">                keyMap = (Map&lt;String, Object&gt;) map.get(key);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            keyMap = map;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(String x : keyMap.keySet())&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h4 id="ymlé…ç½®"><a href="#ymlé…ç½®" class="headerlink" title="ymlé…ç½®"></a>ymlé…ç½®</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jasypt:</span></span><br><span class="line">  <span class="attr">encryptor:</span></span><br><span class="line">    <span class="attr">algorithm:</span> <span class="string">PBEWithMD5AndDES</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">sigtuna</span></span><br><span class="line">    <span class="attr">property:</span></span><br><span class="line">      <span class="attr">prefix:</span> <span class="string">reisen</span></span><br><span class="line">      <span class="attr">suffix:</span></span><br></pre></td></tr></table></figure><p>æ•°æ®åº“çš„é…ç½®ç”¨reisenåŒ…è£¹å°±å¯ä»¥äº†ï¼Œè¿™å—å¯ä»¥è‡ªå®šä¹‰ï¼Œé»˜è®¤çš„ENC</p><h3 id="2-é«˜ç‰ˆæœ¬3-x"><a href="#2-é«˜ç‰ˆæœ¬3-x" class="headerlink" title="2.é«˜ç‰ˆæœ¬3.x"></a>2.é«˜ç‰ˆæœ¬3.x</h3><h4 id="å¼•å…¥ä¾èµ–åŒ…"><a href="#å¼•å…¥ä¾èµ–åŒ…" class="headerlink" title="å¼•å…¥ä¾èµ–åŒ…"></a>å¼•å…¥ä¾èµ–åŒ…</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.ulisesbocchio<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jasypt-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†…ç½‘æƒ…å†µå¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.jasypt/jasypt --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jasypt<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jasypt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.ulisesbocchio/jasypt-spring-boot --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.ulisesbocchio<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jasypt-spring-boot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆç§˜é’¥"><a href="#ç”Ÿæˆç§˜é’¥" class="headerlink" title="ç”Ÿæˆç§˜é’¥"></a>ç”Ÿæˆç§˜é’¥</h4><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå·¥å…·ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.jasypt.encryption.pbe.PooledPBEStringEncryptor;</span><br><span class="line"><span class="keyword">import</span> org.jasypt.encryption.pbe.config.SimpleStringPBEConfig;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JasypUtil</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PBEWITHHMACSHA512ANDAES_256</span> <span class="operator">=</span> <span class="string">&quot;PBEWITHHMACSHA512ANDAES_256&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: Jasyp åŠ å¯†ï¼ˆPBEWITHHMACSHA512ANDAES_256ï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span>:      Rambo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@CreateDate</span>:  2020/7/25 14:34</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@UpdateUser</span>:  Rambo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@UpdateDate</span>:  2020/7/25 14:34</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> plainText  å¾…åŠ å¯†çš„åŸæ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> factor     åŠ å¯†ç§˜é’¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>       java.lang.String</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Version</span>:     1.0.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">encryptWithSHA512</span><span class="params">(String plainText, String factor)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºåŠ è§£å¯†å·¥å…·å®ä¾‹</span></span><br><span class="line">        <span class="type">PooledPBEStringEncryptor</span> <span class="variable">encryptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PooledPBEStringEncryptor</span>();</span><br><span class="line">        <span class="comment">// 2. åŠ è§£å¯†é…ç½®</span></span><br><span class="line">        <span class="type">SimpleStringPBEConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleStringPBEConfig</span>();</span><br><span class="line">        config.setPassword(factor);</span><br><span class="line">        config.setAlgorithm(PBEWITHHMACSHA512ANDAES_256);</span><br><span class="line">        <span class="comment">// ä¸ºå‡å°‘é…ç½®æ–‡ä»¶çš„ä¹¦å†™ï¼Œä»¥ä¸‹éƒ½æ˜¯ Jasyp 3.x ç‰ˆæœ¬ï¼Œé…ç½®æ–‡ä»¶é»˜è®¤é…ç½®</span></span><br><span class="line">        config.setKeyObtentionIterations( <span class="string">&quot;1000&quot;</span>);</span><br><span class="line">        config.setPoolSize(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        config.setProviderName(<span class="string">&quot;SunJCE&quot;</span>);</span><br><span class="line">        config.setSaltGeneratorClassName(<span class="string">&quot;org.jasypt.salt.RandomSaltGenerator&quot;</span>);</span><br><span class="line">        config.setIvGeneratorClassName(<span class="string">&quot;org.jasypt.iv.RandomIvGenerator&quot;</span>);</span><br><span class="line">        config.setStringOutputType(<span class="string">&quot;base64&quot;</span>);</span><br><span class="line">        encryptor.setConfig(config);</span><br><span class="line">        <span class="comment">// 3. åŠ å¯†</span></span><br><span class="line">        <span class="keyword">return</span> encryptor.encrypt(plainText);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: Jaspyè§£å¯†ï¼ˆPBEWITHHMACSHA512ANDAES_256ï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span>:      Rambo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@CreateDate</span>:  2020/7/25 14:40</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@UpdateUser</span>:  Rambo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@UpdateDate</span>:  2020/7/25 14:40</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> encryptedText  å¾…è§£å¯†å¯†æ–‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> factor         è§£å¯†ç§˜é’¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>       java.lang.String</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Version</span>:     1.0.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">decryptWithSHA512</span><span class="params">(String encryptedText, String factor)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. åˆ›å»ºåŠ è§£å¯†å·¥å…·å®ä¾‹</span></span><br><span class="line">        <span class="type">PooledPBEStringEncryptor</span> <span class="variable">encryptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PooledPBEStringEncryptor</span>();</span><br><span class="line">        <span class="comment">// 2. åŠ è§£å¯†é…ç½®</span></span><br><span class="line">        <span class="type">SimpleStringPBEConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleStringPBEConfig</span>();</span><br><span class="line">        config.setPassword(factor);</span><br><span class="line">        config.setAlgorithm(PBEWITHHMACSHA512ANDAES_256);</span><br><span class="line">        <span class="comment">// ä¸ºå‡å°‘é…ç½®æ–‡ä»¶çš„ä¹¦å†™ï¼Œä»¥ä¸‹éƒ½æ˜¯ Jasyp 3.x ç‰ˆæœ¬ï¼Œé…ç½®æ–‡ä»¶é»˜è®¤é…ç½®</span></span><br><span class="line">        config.setKeyObtentionIterations( <span class="string">&quot;1000&quot;</span>);</span><br><span class="line">        config.setPoolSize(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        config.setProviderName(<span class="string">&quot;SunJCE&quot;</span>);</span><br><span class="line">        config.setSaltGeneratorClassName(<span class="string">&quot;org.jasypt.salt.RandomSaltGenerator&quot;</span>);</span><br><span class="line">        config.setIvGeneratorClassName(<span class="string">&quot;org.jasypt.iv.RandomIvGenerator&quot;</span>);</span><br><span class="line">        config.setStringOutputType(<span class="string">&quot;base64&quot;</span>);</span><br><span class="line">        encryptor.setConfig(config);</span><br><span class="line">        <span class="comment">// 3. è§£å¯†</span></span><br><span class="line">        <span class="keyword">return</span> encryptor.decrypt(encryptedText);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">factor</span> <span class="operator">=</span> <span class="string">&quot;Angel&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">plainText</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="type">String</span> <span class="variable">encryptWithSHA512Str</span> <span class="operator">=</span> encryptWithSHA512(plainText, factor);</span><br><span class="line">        <span class="type">String</span> <span class="variable">decryptWithSHA512Str</span> <span class="operator">=</span> decryptWithSHA512(encryptWithSHA512Str, factor);</span><br><span class="line">        System.out.println(<span class="string">&quot;é‡‡ç”¨AES256åŠ å¯†å‰åŸæ–‡å¯†æ–‡ï¼š&quot;</span> + encryptWithSHA512Str);</span><br><span class="line">        System.out.println(<span class="string">&quot;é‡‡ç”¨AES256è§£å¯†åå¯†æ–‡åŸæ–‡:&quot;</span> + decryptWithSHA512Str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ymlçš„é…ç½®"><a href="#ymlçš„é…ç½®" class="headerlink" title="ymlçš„é…ç½®"></a>ymlçš„é…ç½®</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"> <span class="attr">datasource:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">ENC(8jLUdq0Fr7UhJGNwK/Nc6i6/WV4+UBpvtfBLDh4e3jZMJZAhPqfZdGlpFEUk24UZ)</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test?useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC</span></span><br><span class="line">  <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">jasypt:</span></span><br><span class="line"> <span class="attr">encryptor:</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">Angel</span></span><br><span class="line">  <span class="attr">algorithm:</span> <span class="string">PBEWITHHMACSHA512ANDAES_256</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2è®¾ç½®é€šçŸ¥æé†’æ¡†</title>
      <link href="/2024/06/12/Vue2%E8%AE%BE%E7%BD%AE%E9%80%9A%E7%9F%A5%E6%8F%90%E9%86%92%E6%A1%86/"/>
      <url>/2024/06/12/Vue2%E8%AE%BE%E7%BD%AE%E9%80%9A%E7%9F%A5%E6%8F%90%E9%86%92%E6%A1%86/</url>
      
        <content type="html"><![CDATA[<p>å¯è‡ªå®šä¹‰è®¾ç½®ä»¥ä¸‹å±æ€§ï¼š</p><ul><li>è‡ªåŠ¨å…³é—­çš„å»¶æ—¶æ—¶é•¿ï¼ˆdurationï¼‰ï¼Œå•ä½msï¼Œé»˜è®¤4500ms</li><li>æ¶ˆæ¯ä»é¡¶éƒ¨å¼¹å‡ºæ—¶ï¼Œè·ç¦»é¡¶éƒ¨çš„ä½ç½®ï¼ˆtopï¼‰ï¼Œå•ä½pxï¼Œé»˜è®¤24px</li><li>æ¶ˆæ¯ä»åº•éƒ¨å¼¹å‡ºæ—¶ï¼Œè·ç¦»åº•éƒ¨çš„ä½ç½®ï¼ˆbottomï¼‰ï¼Œå•ä½pxï¼Œé»˜è®¤24px</li><li>æ¶ˆæ¯å¼¹å‡ºä½ç½®ï¼ˆplacementï¼‰ï¼Œå¯é€‰ï¼šå·¦ä¸ŠtopLeftï¼Œå³ä¸ŠtopRightï¼ˆé»˜è®¤ï¼‰ï¼Œå·¦ä¸‹bottomLeftï¼Œå³ä¸‹bottomRight</li></ul><p>è°ƒç”¨æ—¶å¯é€‰ä»¥ä¸‹äº”ä¸ªæ–¹æ³•å¯¹åº”äº”ç§ä¸åŒæ ·å¼ï¼š</p><ul><li>this.$refs.notification.open(notification) &#x2F;&#x2F; é»˜è®¤ä½¿ç”¨</li><li>this.$refs.notification.info(notification) &#x2F;&#x2F; infoè°ƒç”¨</li><li>this.$refs.notification.success(notification) &#x2F;&#x2F; successè°ƒç”¨</li><li>this.$refs.notification.error(notification) &#x2F;&#x2F; errorè°ƒç”¨</li><li>this.$refs.notification.warn(notification) &#x2F;&#x2F; warnè°ƒç”¨</li></ul><h3 id="åˆ›å»ºé€šçŸ¥æ¡†æ¶ç»„ä»¶å‘½åä¸ºNotification"><a href="#åˆ›å»ºé€šçŸ¥æ¡†æ¶ç»„ä»¶å‘½åä¸ºNotification" class="headerlink" title="åˆ›å»ºé€šçŸ¥æ¡†æ¶ç»„ä»¶å‘½åä¸ºNotification"></a>åˆ›å»ºé€šçŸ¥æ¡†æ¶ç»„ä»¶å‘½åä¸º<code>Notification</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;m-notification-wrap&#x27;, placement]&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;`top: $&#123;placement.includes(&#x27;top&#x27;) ? top : &#x27;&#x27;&#125;px; bottom: $&#123;placement.includes(&#x27;bottom&#x27;) ? bottom : &#x27;&#x27;&#125;px;`&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">name</span>=<span class="string">&quot;slide-fade&quot;</span> <span class="attr">tag</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;m-notification&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">mouseenter</span>=<span class="string">&quot;onEnter(index)&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">mouseleave</span>=<span class="string">&quot;onLeave(index)&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-show</span>=<span class="string">&quot;!hideIndex.includes(index)&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">&quot;(data, index) in notificationData&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">&quot;`n$&#123;index&#125;`&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;u-status-svg&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;mode===&#x27;info&#x27;&quot;</span> <span class="attr">:fill</span>=<span class="string">&quot;colorStyle[mode]&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;64 64 896 896&quot;</span> <span class="attr">data-icon</span>=<span class="string">&quot;info-circle&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attr">focusable</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;u-status-svg&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;mode===&#x27;success&#x27;&quot;</span> <span class="attr">:fill</span>=<span class="string">&quot;colorStyle[mode]&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;64 64 896 896&quot;</span> <span class="attr">data-icon</span>=<span class="string">&quot;check-circle&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attr">focusable</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;u-status-svg&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;mode===&#x27;warn&#x27;&quot;</span> <span class="attr">:fill</span>=<span class="string">&quot;colorStyle[mode]&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;64 64 896 896&quot;</span> <span class="attr">data-icon</span>=<span class="string">&quot;exclamation-circle&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attr">focusable</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;u-status-svg&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;mode===&#x27;error&#x27;&quot;</span> <span class="attr">:fill</span>=<span class="string">&quot;colorStyle[mode]&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;64 64 896 896&quot;</span> <span class="attr">data-icon</span>=<span class="string">&quot;close-circle&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attr">focusable</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;u-title&#x27;, &#123;&#x27;mb4&#x27;: mode!==&#x27;open&#x27;, &#x27;ml48&#x27;: mode!==&#x27;open&#x27;&#125;]&quot;</span>&gt;</span>&#123;&#123; data.title || &#x27;--&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;u-description&#x27;, &#123;&#x27;ml48&#x27;: mode!==&#x27;open&#x27;&#125;]&quot;</span>&gt;</span>&#123;&#123; index + data.description || &#x27;--&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;u-close&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onHideNotification(index)&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;64 64 896 896&quot;</span> <span class="attr">data-icon</span>=<span class="string">&quot;close&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span> <span class="attr">focusable</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Notification&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">duration</span>: &#123; <span class="comment">// è‡ªåŠ¨å…³é—­çš„å»¶æ—¶æ—¶é•¿,å•ä½msï¼Œé»˜è®¤4500msï¼›è®¾ç½®nullæ—¶ï¼Œä¸è‡ªåŠ¨å…³é—­</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="number">4500</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">top</span>: &#123; <span class="comment">// æ¶ˆæ¯ä»é¡¶éƒ¨å¼¹å‡ºæ—¶ï¼Œè·ç¦»é¡¶éƒ¨çš„ä½ç½®ï¼Œå•ä½åƒç´ px</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="number">24</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">bottom</span>: &#123; <span class="comment">// æ¶ˆæ¯ä»åº•éƒ¨å¼¹å‡ºæ—¶ï¼Œè·ç¦»åº•éƒ¨çš„ä½ç½®ï¼Œå•ä½åƒç´ </span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="number">24</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">placement</span>: &#123; <span class="comment">// æ¶ˆæ¯å¼¹å‡ºä½ç½®ï¼Œå¯é€‰topLeft,topRight,bottomLeft,bottomRight</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="string">&#x27;topRight&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  data () &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">colorStyle</span>: &#123; <span class="comment">// é¢œè‰²ä¸»é¢˜å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">info</span>: <span class="string">&#x27;#1890FF&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">success</span>: <span class="string">&#x27;#52c41a&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">error</span>: <span class="string">&#x27;#f5222d&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">warn</span>: <span class="string">&#x27;#faad14&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">mode</span>: <span class="string">&#x27;info&#x27;</span>, <span class="comment">// è°ƒç”¨æ–¹æ³•å¯¹åº”çš„æ ·å¼ä¸»é¢˜</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">resetTimer</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">hideIndex</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">hideTimers</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">notificationData</span>: []</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    clear () &#123; <span class="comment">// æ‰€æœ‰æç¤ºæ˜¯å¦å·²ç»å…¨éƒ¨å˜ä¸ºfalse</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">hideIndex</span>.<span class="property">length</span> === <span class="variable language_">this</span>.<span class="property">notificationData</span>.<span class="property">length</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    clear (to, <span class="keyword">from</span>) &#123; <span class="comment">// æ‰€æœ‰æç¤ºéƒ½æ¶ˆå¤±åé‡ç½®</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!<span class="keyword">from</span> &amp;&amp; to) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">resetTimer</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">hideIndex</span>.<span class="title function_">splice</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">notificationData</span>.<span class="title function_">splice</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">500</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    onEnter (index) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">hideTimers</span>[index])</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">hideTimers</span>, index, <span class="literal">null</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    onLeave (index) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">duration</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">hideTimers</span>, index, <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">onHideNotification</span>(index)</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="variable language_">this</span>.<span class="property">duration</span>))</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    show (notification) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">resetTimer</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">notificationData</span>.<span class="title function_">push</span>(notification)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">hideTimers</span>.<span class="title function_">push</span>(<span class="literal">null</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> index = <span class="variable language_">this</span>.<span class="property">notificationData</span>.<span class="property">length</span> - <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">duration</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">hideTimers</span>, index, <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">onHideNotification</span>(index)</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="variable language_">this</span>.<span class="property">duration</span>))</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    open (notification) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">mode</span> = <span class="string">&#x27;open&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">show</span>(notification)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    info (notification) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">mode</span> = <span class="string">&#x27;info&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">show</span>(notification)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    success (notification) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">mode</span> = <span class="string">&#x27;success&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">show</span>(notification)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    error (notification) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">mode</span> = <span class="string">&#x27;error&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">show</span>(notification)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    warn (notification) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">mode</span> = <span class="string">&#x27;warn&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">show</span>(notification)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    onHideNotification (index) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">hideIndex</span>.<span class="title function_">push</span>(index)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;close&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">// æ¸å˜è¿‡æ¸¡æ•ˆæœ</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.fade-enter-active</span>, <span class="selector-class">.fade-leave-active</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">transition</span>: opacity .<span class="number">3s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.fade-enter</span>, <span class="selector-class">.fade-leave-to</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css">// æ»‘åŠ¨æ¸å˜è¿‡æ¸¡æ•ˆæœ</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.slide-fade-enter-active</span>, <span class="selector-class">.slide-fade-leave-active</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">transition</span>: all .<span class="number">3s</span> ease;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.slide-fade-enter</span>, <span class="selector-class">.slide-fade-leave-to</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">408px</span>);</span></span><br><span class="line"><span class="language-css">  -ms-<span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">408px</span>); <span class="comment">/* IE 9 */</span></span></span><br><span class="line"><span class="language-css">  -webkit-<span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">408px</span>); <span class="comment">/* Safari and Chrome */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.topRight</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-right</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.topLeft</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-left</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bottomRight</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-right</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bottomLeft</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-left</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.m-notification-wrap</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">z-index</span>: <span class="number">999</span>; // çªå‡ºæ˜¾ç¤ºè¯¥å±‚çº§</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">384px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">65</span>);</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.m-notification</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-bottom</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">16px</span> <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">15%</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: all .<span class="number">3s</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.u-status-svg</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.u-title</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding-right</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">85</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">line-height</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.u-description</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.mb4</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-bottom</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.ml48</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.u-close</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">top</span>: <span class="number">21px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">right</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">      fill: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">45</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>: fill .<span class="number">3s</span> ease;</span></span><br><span class="line"><span class="language-css">      &amp;<span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">        fill: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">75</span>);</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åœ¨è¦ä½¿ç”¨çš„é¡µé¢å¼•å…¥"><a href="#åœ¨è¦ä½¿ç”¨çš„é¡µé¢å¼•å…¥" class="headerlink" title="åœ¨è¦ä½¿ç”¨çš„é¡µé¢å¼•å…¥"></a>åœ¨è¦ä½¿ç”¨çš„é¡µé¢å¼•å…¥</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Notification</span></span><br><span class="line">      ref=<span class="string">&quot;notification&quot;</span></span><br><span class="line">      placement=<span class="string">&quot;topRight&quot;</span></span><br><span class="line">      :duration=<span class="string">&quot;null&quot;</span></span><br><span class="line">      :top=<span class="string">&quot;30&quot;</span></span><br><span class="line">      @close=<span class="string">&quot;onClose&quot;</span> /&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Notification</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Notification&#x27;</span></span><br><span class="line"><span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">Notification</span></span><br><span class="line">&#125;</span><br><span class="line">onShowNotification () &#123;</span><br><span class="line">      <span class="keyword">const</span> notification = &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;Notification Title&#x27;</span>,</span><br><span class="line">        <span class="attr">description</span>: <span class="string">&#x27;This is the content of the notification. This is the content of the notification. This is the content of the notification.&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">notification</span>.<span class="title function_">open</span>(notification) <span class="comment">// é»˜è®¤ä½¿ç”¨</span></span><br><span class="line">      <span class="comment">// this.$refs.notification.info(notification) // infoè°ƒç”¨</span></span><br><span class="line">      <span class="comment">// this.$refs.notification.success(notification) // successè°ƒç”¨</span></span><br><span class="line">      <span class="comment">// this.$refs.notification.error(notification) // errorè°ƒç”¨</span></span><br><span class="line">      <span class="comment">// this.$refs.notification.warn(notification) // warningè°ƒç”¨</span></span><br><span class="line">&#125;,</span><br><span class="line">onClose () &#123; <span class="comment">// ç‚¹å‡»é»˜è®¤å…³é—­æŒ‰é’®æ—¶è§¦å‘çš„å›è°ƒå‡½æ•°</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å…³é—­notification&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Layuiå®ç°æ”¾å¤§å›¾ç‰‡çš„æ•ˆæœ</title>
      <link href="/2024/06/03/Layui%E5%AE%9E%E7%8E%B0%E6%94%BE%E5%A4%A7%E5%9B%BE%E7%89%87%E7%9A%84%E6%95%88%E6%9E%9C/"/>
      <url>/2024/06/03/Layui%E5%AE%9E%E7%8E%B0%E6%94%BE%E5%A4%A7%E5%9B%BE%E7%89%87%E7%9A%84%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<p>éœ€è¦åœ¨è¡¨æ ¼é‡Œé¢æ·»åŠ æŸ¥çœ‹å›¾ç‰‡çš„æ¨¡æ¿</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 400px;height: 200px&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;showLarge(&#x27;../images/lidong.jpg&#x27;)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span>  <span class="attr">src</span>=<span class="string">&quot;../images/lidong.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ”¾å¤§çš„function</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> &gt;</span><br><span class="line"><span class="comment">//æŸ¥çœ‹å¤§å›¾</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">showLarge</span>(<span class="params">src</span>) &#123;</span><br><span class="line">        layer.<span class="title function_">photos</span>(&#123;</span><br><span class="line">            <span class="attr">photos</span>: &#123;</span><br><span class="line">                <span class="string">&quot;title&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">//ç›¸å†Œæ ‡é¢˜</span></span><br><span class="line">                <span class="string">&quot;id&quot;</span>: <span class="number">123</span>, <span class="comment">//ç›¸å†Œid</span></span><br><span class="line">                <span class="string">&quot;start&quot;</span>: <span class="number">0</span>, <span class="comment">//åˆå§‹æ˜¾ç¤ºçš„å›¾ç‰‡åºå·ï¼Œé»˜è®¤0</span></span><br><span class="line">                <span class="string">&quot;data&quot;</span>: [   <span class="comment">//ç›¸å†ŒåŒ…å«çš„å›¾ç‰‡ï¼Œæ•°ç»„æ ¼å¼</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="string">&quot;alt&quot;</span>: <span class="string">&quot;å›¾ç‰‡å&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;pid&quot;</span>: <span class="number">666</span>, <span class="comment">//å›¾ç‰‡id</span></span><br><span class="line">                        <span class="string">&quot;src&quot;</span>: src, <span class="comment">//åŸå›¾åœ°å€</span></span><br><span class="line">                        <span class="string">&quot;thumb&quot;</span>: <span class="string">&quot;&quot;</span> <span class="comment">//ç¼©ç•¥å›¾åœ°å€</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="string">&quot;alt&quot;</span>: <span class="string">&quot;å›¾ç‰‡å&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;pid&quot;</span>: <span class="number">555</span>, <span class="comment">//å›¾ç‰‡id</span></span><br><span class="line">                        <span class="string">&quot;src&quot;</span>: <span class="string">&#x27;../images/lidong.jpg&#x27;</span>, <span class="comment">//åŸå›¾åœ°å€</span></span><br><span class="line">                        <span class="string">&quot;thumb&quot;</span>: <span class="string">&quot;&quot;</span> <span class="comment">//ç¼©ç•¥å›¾åœ°å€</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">            ,<span class="attr">anim</span>: <span class="number">0</span> <span class="comment">//0-6çš„é€‰æ‹©ï¼ŒæŒ‡å®šå¼¹å‡ºå›¾ç‰‡åŠ¨ç”»ç±»å‹ï¼Œé»˜è®¤éšæœºï¼ˆè¯·æ³¨æ„ï¼Œ3.0ä¹‹å‰çš„ç‰ˆæœ¬ç”¨shiftå‚æ•°ï¼‰</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Layui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é•œåƒ</title>
      <link href="/2024/05/08/%E9%95%9C%E5%83%8F/"/>
      <url>/2024/05/08/%E9%95%9C%E5%83%8F/</url>
      
        <content type="html"><![CDATA[<p>npm  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br></pre></td></tr></table></figure><p>nvm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node_mirror: https://npmmirror.com/mirrors/node/</span><br><span class="line">npm_mirror: https://npmmirror.com/mirrors/npm/</span><br></pre></td></tr></table></figure><p>python</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install  -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br></pre></td></tr></table></figure><p>kali</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ä¸­ç§‘å¤§ </span><br><span class="line">deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib </span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line"> </span><br><span class="line">é˜¿é‡Œäº‘ </span><br><span class="line">deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib </span><br><span class="line">deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line"> </span><br><span class="line">æ¸…åå¤§å­¦ </span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free </span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free</span><br><span class="line"> </span><br><span class="line">è¯´æ˜ï¼šdebä»£è¡¨è½¯ä»¶çš„ä½ç½®ï¼Œdeb-srcä»£è¡¨è½¯ä»¶çš„æºä»£ç ä½ç½®</span><br><span class="line"> </span><br><span class="line">é…ç½®kali aptä¸ºé˜¿é‡Œæºå®ä¾‹ï¼š</span><br><span class="line">é…ç½®æ€è·¯æ–¹æ³• ä¿®æ”¹ /etc/apt/sources.listï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹å°†ç›¸å…³urlæ”¹æˆé˜¿é‡Œäº‘çš„æºã€‚ </span><br><span class="line"> </span><br><span class="line">deb https://mirrors.aliyun.com/kali kali-rolling main non-free contrib </span><br><span class="line">deb-src https://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å°ç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue2ä½¿ç”¨g2</title>
      <link href="/2024/05/05/Vue2%E4%BD%BF%E7%94%A8g2/"/>
      <url>/2024/05/05/Vue2%E4%BD%BF%E7%94%A8g2/</url>
      
        <content type="html"><![CDATA[<h3 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h3><p><em>å…¶å®vue2å’Œvue3ç”¨æ³•å·®ä¸å¤šï¼Œä½¿ç”¨çš„g2ä¹Ÿæ˜¯5.xçš„é¢„é˜²ï¼Œå…¶ä¸­çš„åŒºåˆ«å°±æ˜¯scriptå—çš„å†™æ³•ä¸å¤ªä¸€æ ·ï¼Œvue3æ›´ç®€æ´æ›´æ–¹ä¾¿</em>  </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;chartRef&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; <span class="title class_">Chart</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@antv/g2&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;ChartComponent&#x27;</span>, <span class="comment">// ç»„ä»¶åç§°  </span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">chart</span>: <span class="literal">null</span>, <span class="comment">// ç”¨äºå­˜å‚¨å›¾è¡¨å®ä¾‹  </span></span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">initChart</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">initChart</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> chartRef = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">chartRef</span>; <span class="comment">// ä½¿ç”¨ this.$refs å¼•ç”¨ DOM å…ƒç´   </span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> keys = <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">dataHeader</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(keys)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">chart</span> = <span class="keyword">new</span> <span class="title class_">Chart</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">container</span>: chartRef,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">autoFit</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ... å›¾è¡¨é…ç½®ä»£ç ä¿æŒä¸å˜ ...  </span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//   chart.coordinate(&#123; type: &#x27;theta&#x27; &#125;);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">chart</span></span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">title</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: <span class="string">`æ˜å¹´é¢„æµ‹`</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// .interval()</span></span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">data</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;fetch&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">value</span>: process.<span class="property">env</span>.<span class="property">VUE_APP_HADOOP_BASE_API</span> + <span class="string">&#x27;/hdfs/read-csv/yuce?path=/output/hdfsJobByYear/part-r-00000&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// process.env.VUE_APP_HADOOP_BASE_API ä¸ºæ‰€è®¿é—®çš„åç«¯åœ°å€</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">format</span>: <span class="string">&#x27;csv&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">autoType</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">transform</span>: [</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">type</span>: <span class="string">&#x27;map&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">callback</span>: <span class="function">(<span class="params">val</span>) =&gt;</span> &#123; val[<span class="string">&#x27;å¹´&#x27;</span>] = val[<span class="string">&#x27;æ—¶é—´&#x27;</span>] + <span class="string">&#x27;å¹´&#x27;</span>; <span class="keyword">return</span> val; &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// &#123;</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//   type: &#x27;custom&#x27;,</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//   callback: (data) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//     const result = keys.map(key =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//       const re = data.reduce((currentSum, item) =&gt;  currentSum + item[key] , 0)</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//       return data</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//     &#125;)</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//     return result</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// &#125;,</span></span></span><br><span class="line"><span class="language-javascript">                        &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">type</span>: <span class="string">&#x27;fold&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">fields</span>: <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">dataHeader</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">key</span>: <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">chartX</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">value</span>: <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">chartY</span>,</span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">type</span>: <span class="string">&#x27;sortBy&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">fields</span>: [<span class="string">&#x27;æ—¶é—´&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="attr">type</span>: <span class="string">&#x27;log&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                    ],</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">encode</span>(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;æ—¶é—´&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">encode</span>(<span class="string">&#x27;y&#x27;</span>, <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">chartY</span>)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">encode</span>(<span class="string">&#x27;color&#x27;</span>, <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">chartX</span>)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">scale</span>(<span class="string">&#x27;x&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">range</span>: [<span class="number">0</span>, <span class="number">1</span>],</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">scale</span>(<span class="string">&#x27;y&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">nice</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">axis</span>(<span class="string">&#x27;x&#x27;</span>, &#123; <span class="attr">title</span>: <span class="literal">null</span>, <span class="attr">line</span>: <span class="literal">true</span>, <span class="attr">tick</span>: <span class="literal">true</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">axis</span>(<span class="string">&#x27;y&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">title</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">line</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">chart</span>.<span class="title function_">line</span>().<span class="title function_">encode</span>(<span class="string">&#x27;shape&#x27;</span>, <span class="string">&#x27;smooth&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">chart</span>.<span class="title function_">render</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// å¦‚æœéœ€è¦ä»çˆ¶ç»„ä»¶ä¼ é€’ propï¼Œå¯ä»¥è¿™æ ·å®šä¹‰  </span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-pseudo">:root</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-family</span>: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">400</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>-scheme: light dark;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.87</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#242424</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-synthesis</span>: none;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-rendering</span>: optimizeLegibility;</span></span><br><span class="line"><span class="language-css">    -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span></span><br><span class="line"><span class="language-css">    -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#646cff</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-decoration</span>: inherit;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#535bf2</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* display: flex; */</span></span></span><br><span class="line"><span class="language-css">    place-items: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-width</span>: <span class="number">320px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">3.2em</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">1.1</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid transparent;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0.6em</span> <span class="number">1.2em</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">1em</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-family</span>: inherit;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#fffbfb</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transition</span>: border-color <span class="number">0.25s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-color</span>: <span class="number">#646cff</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span><span class="selector-pseudo">:focus</span>,</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span><span class="selector-pseudo">:focus</span>-visible &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">outline</span>: <span class="number">4px</span> auto -webkit-focus-ring-color;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* .card &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">  padding: 2em;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">&#125; */</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* #app &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">  max-width: 1280px;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">  margin: 0 auto;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">  padding: 2rem;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">  text-align: center;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">&#125; */</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme</span>: light) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="selector-pseudo">:root</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#213547</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#747bff</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#f9f9f9</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> G2 </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸè®¿é—®</title>
      <link href="/2024/05/03/%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE/"/>
      <url>/2024/05/03/%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ä½¿ç”¨Vueå¯¹åå°çš„èµ„æºè¿›è¡Œè®¿é—®ï¼Œå‘ç”Ÿè·¨åŸŸçš„è¯·æ±‚ï¼Œä¼šäº§ç”Ÿå¦‚ä¸‹çš„æŠ¥é”™</p><blockquote><p>Access to fetch at â€˜<a href="http://localhost:8080/hdfs/read-csv?path=/output/hdfsJobByMonth/part-r-00000">http://localhost:8080/hdfs/read-csv?path=/output/hdfsJobByMonth/part-r-00000</a>â€˜ from origin â€˜<a href="http://localhost:9528/">http://localhost:9528</a>â€˜ has been blocked by CORS policy: No â€˜Access-Control-Allow-Originâ€™ header is present on the requested resource. If an opaque response serves your needs, set the requestâ€™s mode to â€˜no-corsâ€™ to fetch the resource with CORS disabled.</p></blockquote><p>è¿™ä¸ªé”™è¯¯è¡¨æ˜å‰ç«¯åº”ç”¨ï¼ˆè¿è¡Œåœ¨ <a href="http://localhost:9528ï¼‰è¯•å›¾é€šè¿‡">http://localhost:9528ï¼‰è¯•å›¾é€šè¿‡</a> fetch API è®¿é—®åç«¯æœåŠ¡ï¼ˆè¿è¡Œåœ¨ <a href="http://localhost:8080ï¼‰çš„æŸä¸ªèµ„æºï¼Œä½†æ˜¯ç”±äºè·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰ç­–ç•¥çš„é™åˆ¶ï¼Œè¿™ä¸ªè¯·æ±‚è¢«æµè§ˆå™¨é˜»æ­¢äº†">http://localhost:8080ï¼‰çš„æŸä¸ªèµ„æºï¼Œä½†æ˜¯ç”±äºè·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰ç­–ç•¥çš„é™åˆ¶ï¼Œè¿™ä¸ªè¯·æ±‚è¢«æµè§ˆå™¨é˜»æ­¢äº†</a>  </p><p>CORS ç­–ç•¥è¦æ±‚æœåŠ¡å™¨åœ¨å“åº”ä¸­åŒ…å«ä¸€äº›ç‰¹å®šçš„ HTTP å¤´ä¿¡æ¯ï¼Œæ¯”å¦‚ <code>Access-Control-Allow-Origin</code>ï¼Œæ¥å‘Šè¯‰æµè§ˆå™¨å“ªäº›æºï¼ˆå³å“ªäº›åŸŸã€åè®®å’Œç«¯å£ï¼‰æœ‰æƒè®¿é—®è¯¥èµ„æºã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒæœåŠ¡å™¨æ²¡æœ‰åœ¨å“åº”ä¸­åŒ…å«è¿™ä¸ªå¿…è¦çš„å¤´ä¿¡æ¯ã€‚</p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å‡ ç§è§£å†³åŠæ³•ï¼š</p><ol><li><p><strong>é…ç½®åç«¯æœåŠ¡ä»¥æ”¯æŒ CORS</strong>ï¼š<br>åœ¨åç«¯æœåŠ¡ï¼ˆ<code>http://localhost:8080</code>ï¼‰ä¸Šæ·»åŠ  CORS æ”¯æŒã€‚è¿™é€šå¸¸æ„å‘³ç€åœ¨å“åº”ä¸­åŒ…å«é€‚å½“çš„ HTTP å¤´ï¼Œå¦‚ <code>Access-Control-Allow-Origin: *</code>ï¼ˆå…è®¸æ‰€æœ‰æºï¼‰æˆ– <code>Access-Control-Allow-Origin: http://localhost:9528</code>ï¼ˆä»…å…è®¸æ¥è‡ª <code>http://localhost:9528</code> çš„è¯·æ±‚ï¼‰ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œå°† <code>Access-Control-Allow-Origin</code> è®¾ç½®ä¸º <code>*</code> å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼Œç‰¹åˆ«æ˜¯å¦‚æœæœåŠ¡æ¶‰åŠæ•æ„Ÿæ•°æ®ã€‚</p></li><li><p><strong>ä½¿ç”¨ä»£ç†æœåŠ¡å™¨</strong>ï¼š<br>å¯ä»¥åœ¨å‰ç«¯åº”ç”¨ä¸­è®¾ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡ï¼Œå¹¶åœ¨è½¬å‘å“åº”æ—¶æ·»åŠ  CORS å¤´ã€‚è¿™é€šå¸¸å¯ä»¥é€šè¿‡é…ç½®å¼€å‘æœåŠ¡å™¨ï¼ˆå¦‚ webpack-dev-serverã€Create React App çš„å¼€å‘æœåŠ¡å™¨ç­‰ï¼‰æ¥å®ç°ã€‚</p></li><li><p><strong>ä½¿ç”¨ <code>no-cors</code> æ¨¡å¼</strong>ï¼ˆä¸æ¨èï¼‰ï¼š<br>å¯ä»¥å°† fetch è¯·æ±‚çš„æ¨¡å¼è®¾ç½®ä¸º <code>no-cors</code> æ¥ç»•è¿‡ CORS ç­–ç•¥ï¼Œä½†è¿™å°†å¯¼è‡´å“åº”å˜å¾—ä¸é€æ˜ï¼ˆopaqueï¼‰ï¼Œå‰ç«¯æ— æ³•è¯»å–å“åº”çš„å†…å®¹ã€‚å› æ­¤ï¼Œè¿™é€šå¸¸ä¸æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œé™¤éç¡®å®ä¸éœ€è¦è¯»å–å“åº”çš„å†…å®¹ã€‚</p></li><li><p><strong>åœ¨æœ¬åœ°å¼€å‘æ—¶ç¦ç”¨æµè§ˆå™¨çš„ CORS æ£€æŸ¥</strong>ï¼š<br>è¿™å¯ä»¥é€šè¿‡åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨æ’ä»¶æˆ–ç‰¹æ®Šæ¨¡å¼æ¥å®ç°ï¼Œä½†è¯·æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ä¸ªä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”ä¸åº”è¯¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šæš´éœ²åº”ç”¨äºå®‰å…¨é£é™©ã€‚</p></li><li><p><strong>ä½¿ç”¨ JSONP</strong>ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ï¼š<br>å¦‚æœåç«¯æœåŠ¡æ”¯æŒ JSONPï¼Œå¹¶ä¸”åªæ˜¯æƒ³è·å– JSON æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ JSONP æ¥ç»•è¿‡ CORS ç­–ç•¥ã€‚ä½†æ˜¯ï¼ŒJSONP æœ‰ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚å®ƒåªæ”¯æŒ GET è¯·æ±‚ï¼Œå¹¶ä¸”åªèƒ½è¿”å› JSONP æ ¼å¼çš„å“åº”ã€‚</p></li></ol><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œåœ¨åç«¯æœåŠ¡é…ç½®å…è®¸è·¨åŸŸè®¿é—®<br>å¦‚ä¸‹æœ‰å‡ ç§æ–¹å¼ï¼š</p><h3 id="æ–¹æ³•ä¸€ï¼šå…¨å±€CORSé…ç½®"><a href="#æ–¹æ³•ä¸€ï¼šå…¨å±€CORSé…ç½®" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå…¨å±€CORSé…ç½®"></a>æ–¹æ³•ä¸€ï¼šå…¨å±€CORSé…ç½®</h3><p>å¯ä»¥é€šè¿‡é…ç½®ç±»ä¸­æ·»åŠ ä¸€ä¸ª<code>WebMvcConfigurer</code> beanæ¥å…¨å±€é…ç½®CORSã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>) <span class="comment">// å…è®¸æ‰€æœ‰è·¯å¾„</span></span><br><span class="line">                .allowedOrigins(<span class="string">&quot;http://localhost:9528&quot;</span>) <span class="comment">// å…è®¸å“ªäº›æºçš„è¯·æ±‚</span></span><br><span class="line">                .allowedMethods(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;DELETE&quot;</span>) <span class="comment">// å…è®¸å“ªäº›æ–¹æ³•</span></span><br><span class="line">                .allowedHeaders(<span class="string">&quot;*&quot;</span>) <span class="comment">// å…è®¸å“ªäº›è¯·æ±‚å¤´</span></span><br><span class="line">                .allowCredentials(<span class="literal">true</span>) <span class="comment">// æ˜¯å¦å…è®¸æºå¸¦è®¤è¯ä¿¡æ¯ï¼ˆcookies, HTTPè®¤è¯åŠå®¢æˆ·ç«¯SSLè¯æ˜ç­‰ï¼‰</span></span><br><span class="line">                .maxAge(<span class="number">3600</span>); <span class="comment">// ç¼“å­˜CORSä¿¡æ¯çš„æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤æ˜¯1800ç§’</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šä½¿ç”¨-CrossOriginæ³¨è§£"><a href="#æ–¹æ³•äºŒï¼šä½¿ç”¨-CrossOriginæ³¨è§£" class="headerlink" title="æ–¹æ³•äºŒï¼šä½¿ç”¨@CrossOriginæ³¨è§£"></a>æ–¹æ³•äºŒï¼šä½¿ç”¨<code>@CrossOrigin</code>æ³¨è§£</h3><p>ä¹Ÿå¯ä»¥åœ¨Controllerç±»æˆ–è€…ç‰¹å®šçš„æ–¹æ³•ä¸Šä½¿ç”¨<code>@CrossOrigin</code>æ³¨è§£æ¥å¯ç”¨CORSã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.CrossOrigin;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@CrossOrigin(origins = &quot;http://localhost:9528&quot;)</span> <span class="comment">// å…è®¸å“ªäº›æºçš„è¯·æ±‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hdfs/read-csv&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">readCsv</span><span class="params">(<span class="meta">@RequestParam</span> String path)</span> &#123;</span><br><span class="line">        <span class="comment">// ... é€»è¾‘ä»£ç  ...</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Data from CSV&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰ï¼šè‡ªå®šä¹‰CORSè¿‡æ»¤å™¨"><a href="#æ–¹æ³•ä¸‰ï¼šè‡ªå®šä¹‰CORSè¿‡æ»¤å™¨" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šè‡ªå®šä¹‰CORSè¿‡æ»¤å™¨"></a>æ–¹æ³•ä¸‰ï¼šè‡ªå®šä¹‰CORSè¿‡æ»¤å™¨</h3><p>éœ€è¦æ›´å¤æ‚çš„CORSé…ç½®ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„CORSè¿‡æ»¤å™¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.core.Ordered;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomCorsFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span>, Ordered &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest req, ServletResponse res, FilterChain chain)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) res;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) req;</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;http://localhost:9528&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;POST, GET, OPTIONS, DELETE&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Max-Age&quot;</span>, <span class="string">&quot;3600&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;x-requested-with&quot;</span>);</span><br><span class="line">        chain.doFilter(req, res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// è®¾ç½®è¿‡æ»¤å™¨é¡ºåº</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li>å½“ä½¿ç”¨<code>allowedOrigins</code>æ—¶ï¼Œå¦‚æœåªæƒ³å…è®¸æ¥è‡ªç‰¹å®šåŸŸåçš„è¯·æ±‚ï¼Œå°±æŒ‡å®šé‚£ä¸ªåŸŸåã€‚å¦‚æœæƒ³å…è®¸æ¥è‡ªä»»ä½•åŸŸåçš„è¯·æ±‚ï¼ˆæ³¨æ„ï¼šè¿™å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨<code>&quot;*&quot;</code>ã€‚</li><li><code>allowCredentials(true)</code>å…è®¸è·¨åŸŸè¯·æ±‚æºå¸¦è®¤è¯ä¿¡æ¯ï¼ˆå¦‚cookiesï¼‰ï¼Œä½†è¿™è¦æ±‚<code>Access-Control-Allow-Origin</code>ä¸èƒ½æ˜¯<code>&quot;*&quot;</code>ï¼Œè€Œå¿…é¡»æ˜¯ä¸€ä¸ªæ˜ç¡®çš„åŸŸåã€‚</li><li>å¦‚æœå‰ç«¯åº”ç”¨éœ€è¦å¤„ç†é¢„æ£€è¯·æ±‚ï¼ˆOPTIONSè¯·æ±‚ï¼‰ï¼Œç¡®ä¿åç«¯é…ç½®ä¹Ÿæ”¯æŒè¿™äº›è¯·æ±‚ã€‚é¢„æ£€è¯·æ±‚æ˜¯æµè§ˆå™¨åœ¨å‘é€å®é™…è¯·æ±‚ä¹‹å‰å‘é€çš„ï¼Œä»¥æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> G2 </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>privateMap.get is not a function</title>
      <link href="/2024/05/01/privateMap%20get%20is%20not%20a%20function/"/>
      <url>/2024/05/01/privateMap%20get%20is%20not%20a%20function/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>åœ¨ä½¿ç”¨G2å›¾è¡¨åº“è¿›è¡Œæ•°æ®å¯è§†åŒ–å¼€å‘æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Uncaught (in promise) TypeError: privateMap.get is not a function</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé”™è¯¯é€šå¸¸å‡ºç°åœ¨G2å›¾è¡¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„G2ï¼ˆå¦‚G2 4.xï¼‰æ—¶ã€‚é”™è¯¯ä¿¡æ¯æ¥è‡ªäº<code>tslib.es6.js</code>æ–‡ä»¶çš„ç¬¬233è¡Œï¼Œè¿™æ˜¯TypeScriptè¿è¡Œæ—¶åº“çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºæ”¯æŒTypeScriptç¼–è¯‘åçš„JavaScriptä»£ç ã€‚</p><h2 id="é”™è¯¯åŸå› åˆ†æ"><a href="#é”™è¯¯åŸå› åˆ†æ" class="headerlink" title="é”™è¯¯åŸå› åˆ†æ"></a>é”™è¯¯åŸå› åˆ†æ</h2><p>è¿™ä¸ªé”™è¯¯ä¸»è¦æ˜¯ç”±äºç¼ºå°‘<code>tslib</code>ä¾èµ–å¼•èµ·çš„ã€‚G2å›¾è¡¨åº“æ˜¯åŸºäºTypeScriptå¼€å‘çš„ï¼Œå®ƒåœ¨è¿è¡Œæ—¶ä¾èµ–<code>tslib</code>æä¾›çš„ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œç‰¹åˆ«æ˜¯ä¸ç§æœ‰å­—æ®µå’Œæ–¹æ³•ç›¸å…³çš„åŠŸèƒ½ã€‚</p><p>å½“é¡¹ç›®ä¸­æ²¡æœ‰æ­£ç¡®å®‰è£…<code>tslib</code>æˆ–è€…ç‰ˆæœ¬ä¸åŒ¹é…æ—¶ï¼Œå°±ä¼šå‡ºç°<code>privateMap.get is not a function</code>è¿™æ ·çš„é”™è¯¯ï¼Œè¿™è¡¨æ˜TypeScriptçš„ç§æœ‰å­—æ®µå®ç°æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…<code>tslib</code>ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨npm</span></span><br><span class="line">npm install --save tslib</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨yarn</span></span><br><span class="line">yarn add tslib</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œé‡æ–°å¯åŠ¨åº”ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½è§£å†³<code>privateMap.get is not a function</code>çš„é”™è¯¯ã€‚</p><h2 id="æ›´å…¨é¢çš„æ’æŸ¥æ­¥éª¤"><a href="#æ›´å…¨é¢çš„æ’æŸ¥æ­¥éª¤" class="headerlink" title="æ›´å…¨é¢çš„æ’æŸ¥æ­¥éª¤"></a>æ›´å…¨é¢çš„æ’æŸ¥æ­¥éª¤</h2><p>å¦‚æœå®‰è£…<code>tslib</code>åé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p><strong>æ£€æŸ¥G2å’Œtslibçš„ç‰ˆæœ¬å…¼å®¹æ€§</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm list @antv/g2 tslib</span><br></pre></td></tr></table></figure></li><li><p><strong>æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°å®‰è£…ä¾èµ–</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm cache clean --force</span><br><span class="line"><span class="built_in">rm</span> -rf node_modules</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¡®ä¿æ²¡æœ‰å¤šä¸ªç‰ˆæœ¬çš„tslib</strong>ï¼š<br>æœ‰æ—¶å€™é¡¹ç›®ä¸­å¯èƒ½å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„tslibï¼Œå¯¼è‡´å†²çªã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="built_in">ls</span> tslib</span><br></pre></td></tr></table></figure></li><li><p><strong>æ›´æ–°G2åˆ°æœ€æ–°ç‰ˆæœ¬</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update @antv/g2</span><br></pre></td></tr></table></figure></li></ol><h2 id="ç›¸å…³èµ„æº"><a href="#ç›¸å…³èµ„æº" class="headerlink" title="ç›¸å…³èµ„æº"></a>ç›¸å…³èµ„æº</h2><ul><li><a href="https://github.com/descope/react-sdk/issues/301">GitHub Issue: TypeError: privateMap.get is not a function</a></li><li><a href="https://www.npmjs.com/package/tslib">tslibå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://g2.antv.vision/zh">G2å›¾è¡¨å®˜æ–¹æ–‡æ¡£</a></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>privateMap.get is not a function</code>é”™è¯¯é€šå¸¸æ˜¯ç”±äºç¼ºå°‘<code>tslib</code>ä¾èµ–å¯¼è‡´çš„ï¼Œè¿™æ˜¯G2å›¾è¡¨åº“åœ¨å¤„ç†TypeScriptç§æœ‰å­—æ®µæ—¶çš„ä¸€ä¸ªå¸¸è§é—®é¢˜ã€‚é€šè¿‡å®‰è£…<code>tslib</code>ä¾èµ–ï¼Œå¯ä»¥è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¡®ä¿G2å›¾è¡¨èƒ½å¤Ÿæ­£å¸¸æ¸²æŸ“ã€‚</p><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œäº†è§£ä¾èµ–å…³ç³»å’Œç‰ˆæœ¬å…¼å®¹æ€§æ˜¯è§£å†³æ­¤ç±»é—®é¢˜çš„å…³é”®ã€‚å½“é‡åˆ°ç±»ä¼¼é”™è¯¯æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥ç›¸å…³ä¾èµ–æ˜¯å¦å®Œæ•´å®‰è£…ï¼Œç‰ˆæœ¬æ˜¯å¦å…¼å®¹ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå¤§é‡çš„è°ƒè¯•æ—¶é—´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> G2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Can&#39;t find dependent libraries</title>
      <link href="/2024/04/30/Can&#39;t%20find%20dependent%20libraries/"/>
      <url>/2024/04/30/Can&#39;t%20find%20dependent%20libraries/</url>
      
        <content type="html"><![CDATA[<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>åœ¨éƒ¨ç½²hadoopé¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†è¿™ä¸ªæŠ¥é”™<br><em>Exception in thread â€œmainâ€ java.lang.UnsatisfiedLinkError: E:\winutils-master\hadoop-3.3.5\bin\hadoop.dll: Canâ€™t find dependent libraries</em><br>è¿™ä¸ªæŠ¥é”™å¤§æ¦‚æ„æ€å°±æ˜¯ï¼šdllç¼ºæ‰€éœ€çš„ä¾èµ–  </p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>ä½¿ç”¨dependsæ¥æŸ¥æ‰¾æ‰€ç¼ºçš„ä¾èµ–ï¼Œè¯¥å·¥å…·çš„ä¸‹è½½åœ°å€ï¼š<a href="http://www.dependencywalker.com/">depends</a>  </p><p>ä½¿ç”¨çš„æ—¶å€™ç›´æ¥æŠŠdllæ–‡ä»¶æ‹½è¿›å»ç­‰ç€æœç´¢å°±è¡Œäº†<br> <img src="/img/posts/20240430.png" alt="alt"><br>å¦‚å›¾å¯ä»¥çœ‹åˆ°ç¼ºäº†å“ªäº›ä¾èµ–ï¼Œç›´æ¥ä¸Šç½‘æœç´¢æ·»åŠ å³å¯<br>åªéœ€è¦æŸ¥çœ‹ç¬¬ä¸€å±‚å³å¯</p><h3 id="dependsæŸ¥æ‰¾å¾ˆæ…¢"><a href="#dependsæŸ¥æ‰¾å¾ˆæ…¢" class="headerlink" title="dependsæŸ¥æ‰¾å¾ˆæ…¢"></a>dependsæŸ¥æ‰¾å¾ˆæ…¢</h3><ul><li><p>åˆ›å»ºrun_depends.txtæ–‡ä»¶</p></li><li><p>è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼ˆä¸¤è¡Œï¼‰</p> <figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> <span class="built_in">PATH</span>=&quot;&quot;</span><br><span class="line">&quot;D:\Tools\depends\depends22_x64\depends.exe&quot;</span><br></pre></td></tr></table></figure><p><em>æ³¨æ„è¦è®²ä¸Šé¢çš„è·¯å¾„æ”¹æˆdependsçš„è·¯å¾„</em></p></li><li><p>å°†run_depends.txtåç¼€åæ”¹ä¸ºbat</p></li></ul><p>ç„¶åç›´æ¥å¯åŠ¨è¿™ä¸ªbatæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œè¿™æ ·æŸ¥æ‰¾å¾ˆå¿«é€Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‚«é…·çš„borderæ ·å¼</title>
      <link href="/2024/04/28/%E7%82%AB%E9%85%B7%E7%9A%84border%E6%A0%B7%E5%BC%8F/"/>
      <url>/2024/04/28/%E7%82%AB%E9%85%B7%E7%9A%84border%E6%A0%B7%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">info</span>=<span class="string">&quot;å½©è™¹è¾¹æ¡†&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.item</span> <span class="selector-tag">div</span>&#123; </span><br><span class="line">    <span class="attr">--borderWidth</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attr">--bRadius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60%</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2rem</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: --bRadius;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span>, &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">left</span>: -<span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">top</span>: -<span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">        <span class="attribute">z-index</span>: -<span class="number">2</span>;</span><br><span class="line">        <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">        <span class="attribute">background-size</span>: <span class="number">50%</span> <span class="number">50%</span>, <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">100%</span>, <span class="number">0</span> <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">#399953</span>, <span class="number">#399953</span>), <span class="built_in">linear-gradient</span>(<span class="number">#fbb300</span>, <span class="number">#fbb300</span>), <span class="built_in">linear-gradient</span>(<span class="number">#d53e33</span>, <span class="number">#d53e33</span>), <span class="built_in">linear-gradient</span>(<span class="number">#377af5</span>, <span class="number">#377af5</span>);</span><br><span class="line">        <span class="attribute">animation</span>: rotate <span class="number">4s</span> linear infinite;</span><br><span class="line">        <span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line">            <span class="number">100%</span> &#123;</span><br><span class="line">                <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">1turn</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line"><span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="built_in">calc</span>(<span class="built_in">var</span>(--borderWidth) / <span class="number">2</span>);</span><br><span class="line"><span class="attribute">top</span>: <span class="built_in">calc</span>(<span class="built_in">var</span>(--borderWidth) / <span class="number">2</span>);</span><br><span class="line"><span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="built_in">var</span>(--borderWidth));</span><br><span class="line"><span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="built_in">var</span>(--borderWidth));</span><br><span class="line"><span class="attribute">background</span>: white;</span><br><span class="line"><span class="attribute">border-radius</span>: --bRadius;</span><br><span class="line">        <span class="comment">/*  è¿™ä¸€è¡Œæ˜¯ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹åŸæ¥çš„æ ·å­çš„ */</span></span><br><span class="line"><span class="attribute">animation</span>: opacityChange <span class="number">3s</span> infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">@keyframes</span> opacityChange &#123;</span><br><span class="line">        <span class="number">50%</span> &#123;</span><br><span class="line">            <span class="attribute">opacity</span>:<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="number">100%</span> &#123;</span><br><span class="line">            <span class="attribute">opacity</span>: .<span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">info</span>=<span class="string">&quot;è´¨æ„Ÿè¾¹æ¡†&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> opacityChange &#123;</span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>:.<span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> rotate &#123;</span><br><span class="line"><span class="number">100%</span> &#123;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">1turn</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="selector-tag">div</span>&#123; </span><br><span class="line">        <span class="attr">--borderWidth</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attr">--bRadius</span>: <span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">60%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">60%</span>;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">2rem</span>;</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: --bRadius;</span><br><span class="line">        &amp;<span class="selector-pseudo">::after</span>, &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">            <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="attribute">position</span>: absolute;</span><br><span class="line">            <span class="attribute">z-index</span>: -<span class="number">2</span>;</span><br><span class="line">            <span class="attribute">left</span>: -<span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">top</span>: -<span class="number">50%</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: <span class="number">#1a232a</span>;</span><br><span class="line">            <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">            <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">            <span class="attribute">background-image</span>: <span class="built_in">conic-gradient</span>(transparent, <span class="built_in">rgba</span>(<span class="number">168</span>, <span class="number">239</span>, <span class="number">255</span>, <span class="number">1</span>), transparent <span class="number">30%</span>);</span><br><span class="line">            <span class="attribute">animation</span>: rotate <span class="number">4s</span> linear infinite;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="attribute">position</span>: absolute;</span><br><span class="line">            <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">            <span class="attribute">left</span>: <span class="built_in">calc</span>(<span class="built_in">var</span>(--borderWidth) / <span class="number">2</span>);</span><br><span class="line">            <span class="attribute">top</span>: <span class="built_in">calc</span>(<span class="built_in">var</span>(--borderWidth) / <span class="number">2</span>);</span><br><span class="line">            <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="built_in">var</span>(--borderWidth));</span><br><span class="line">            <span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="built_in">var</span>(--borderWidth));</span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">            <span class="comment">/* è¿™å¥æ•ˆæœæ‰“å¼€æœ‰åŠ©äºç†è§£åŠ¨ç”» */</span></span><br><span class="line">            <span class="comment">/*animation: opacityChange 5s infinite linear;*/</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">9</span>) <span class="selector-tag">div</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: opacityChange <span class="number">5s</span> infinite linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attr">--bRadius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="selector-tag">div</span>&#123;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">text-align</span>: center;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">rgb</span>(<span class="number">179</span>, <span class="number">191</span>, <span class="number">231</span>);</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--bRadius);</span><br><span class="line">        <span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">        &amp;<span class="selector-pseudo">::before</span>, &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="attribute">position</span>: absolute;</span><br><span class="line">            <span class="attribute">top</span>: -<span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">left</span>: -<span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">right</span>: -<span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">bottom</span>: -<span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="built_in">rgb</span>(<span class="number">17</span>, <span class="number">36</span>, <span class="number">100</span>);</span><br><span class="line">            <span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--bRadius);</span><br><span class="line">            <span class="attribute">animation</span>: clippath <span class="number">3s</span> infinite linear;</span><br><span class="line">        &#125;</span><br><span class="line">        &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">            <span class="attribute">animation</span>: clippath <span class="number">3s</span> infinite -<span class="number">1.5s</span> linear;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">@keyframes</span> clippath &#123;</span><br><span class="line">            <span class="number">0%</span>, <span class="number">100%</span> &#123; <span class="attribute">clip-path</span>: <span class="built_in">inset</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">98%</span> <span class="number">0</span>); &#125;</span><br><span class="line">            <span class="number">25%</span> &#123; <span class="attribute">clip-path</span>: <span class="built_in">inset</span>(<span class="number">0</span> <span class="number">98%</span> <span class="number">0</span> <span class="number">0</span>); &#125;</span><br><span class="line">            <span class="number">50%</span> &#123; <span class="attribute">clip-path</span>: <span class="built_in">inset</span>(<span class="number">98%</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>); &#125;</span><br><span class="line">            <span class="number">75%</span> &#123; <span class="attribute">clip-path</span>: <span class="built_in">inset</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">98%</span>); &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªç”¨-ymlé…ç½®æ–‡ä»¶</title>
      <link href="/2024/04/28/%EF%BC%88%E8%87%AA%E7%94%A8%EF%BC%89yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
      <url>/2024/04/28/%EF%BC%88%E8%87%AA%E7%94%A8%EF%BC%89yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server :</span></span><br><span class="line">  <span class="attr">port :</span> <span class="number">8080</span></span><br><span class="line">  <span class="comment">##é¡¹ç›®åå­—é…ç½®</span></span><br><span class="line">  <span class="comment">#servlet :</span></span><br><span class="line">  <span class="comment">#  context-path : /demo</span></span><br><span class="line">  <span class="attr">tomcat :</span></span><br><span class="line">    <span class="attr">uri-encoding :</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="comment">#xx æŠ¥é”™ä¿®æ”¹çš„åœ°æ–¹</span></span><br><span class="line">    <span class="attr">max-connections:</span> <span class="number">200000</span></span><br><span class="line">    <span class="attr">max-http-form-post-size:</span> <span class="number">9000000</span></span><br><span class="line">    <span class="attr">threads:</span></span><br><span class="line">      <span class="attr">max:</span> <span class="number">128</span></span><br><span class="line">      <span class="attr">min-spare:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">spring :</span></span><br><span class="line">  <span class="comment"># ç¯å¢ƒ dev|test|prod</span></span><br><span class="line">  <span class="attr">profiles :</span></span><br><span class="line">    <span class="attr">active :</span> <span class="string">dev</span></span><br><span class="line">    <span class="comment">#å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ftpHX æœªé…ç½®æ–‡ä»¶application-ftpHX.yml</span></span><br><span class="line">    <span class="comment">#include: ftpHX,ftpCloud</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="comment">#è®¾ç½®æ€»ä¸Šä¼ çš„æ•°æ®å¤§å°</span></span><br><span class="line">      <span class="attr">max-request-size:</span> <span class="string">100MB</span></span><br><span class="line">      <span class="comment">#å•ä¸ªæ–‡ä»¶å¤§å°</span></span><br><span class="line">      <span class="attr">maxFileSize :</span> <span class="string">30MB</span></span><br><span class="line">        <span class="comment">#xx æŠ¥é”™ä¿®æ”¹çš„åœ°æ–¹</span></span><br><span class="line">    <span class="attr">max-connections:</span> <span class="number">200000</span></span><br><span class="line">    <span class="attr">max-http-post-size:</span> <span class="number">9000000</span></span><br><span class="line">  <span class="comment">#çƒ­éƒ¨ç½²æ¨¡å—</span></span><br><span class="line">  <span class="attr">devtools:</span></span><br><span class="line">    <span class="attr">restart:</span></span><br><span class="line">      <span class="comment">#çƒ­éƒ¨ç½²å¼€å…³</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment">#æŒ‡å®šçƒ­éƒ¨ç½²çš„ç›®å½•</span></span><br><span class="line">      <span class="attr">additional-paths:</span> <span class="string">src/main/java</span></span><br><span class="line">      <span class="comment">#æŒ‡å®šç›®å½•ä¸æ›´æ–°</span></span><br><span class="line">      <span class="attr">exclude:</span> <span class="string">test/**</span></span><br><span class="line">  <span class="attr">mvc:</span>   <span class="comment">#é™æ€æ–‡ä»¶</span></span><br><span class="line">    <span class="attr">static-path-pattern :</span> <span class="string">/static/**</span></span><br><span class="line">    <span class="attr">pathmatch:</span></span><br><span class="line">      <span class="attr">matching-strategy:</span> <span class="string">ant_path_matcher</span></span><br><span class="line">  <span class="comment">#æ¨¡æ¿å¼•æ“</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">model:</span> <span class="string">HTML5</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="comment">#æŒ‡å®šç¼–ç </span></span><br><span class="line">    <span class="attr">encoding:</span> <span class="string">utf-8</span></span><br><span class="line">    <span class="comment">#ç¦ç”¨ç¼“å­˜ é»˜è®¤false</span></span><br><span class="line">    <span class="attr">cache:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">time-zone:</span> <span class="string">GMT+8</span></span><br><span class="line">    <span class="attr">date-format:</span> <span class="string">yyyy-MM-dd</span> <span class="string">HH:mm:ss</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">ssl:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> </span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">1000</span></span><br><span class="line">    <span class="attr">lettuce:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="attr">max-active:</span> <span class="number">200</span></span><br><span class="line">        <span class="attr">max-wait:</span> <span class="number">-1</span></span><br><span class="line">        <span class="attr">max-idle:</span> <span class="number">10</span></span><br><span class="line">        <span class="attr">min-idle:</span> <span class="number">0</span></span><br><span class="line"><span class="comment">#mybatis:</span></span><br><span class="line"><span class="comment">#  #é…ç½®mapperçš„æ‰«æï¼Œæ‰¾åˆ°æ‰€æœ‰çš„mapper.xmlæ˜ å°„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#  mapperLocations : classpath*:mybatis/*/*.xml</span></span><br><span class="line"><span class="comment">#  #mybatisæä¾›ä¸‰ç§sqlæ‰§è¡Œå™¨ï¼Œåˆ†åˆ«æ˜¯SIMPLEã€REUSEã€BATCHã€‚</span></span><br><span class="line"><span class="comment">#  executor-type : reuse</span></span><br><span class="line"><span class="comment">#  #æœç´¢æŒ‡å®šåŒ…åˆ«å</span></span><br><span class="line"><span class="comment">#  typeAliasesPackage : com.*.model</span></span><br><span class="line"><span class="comment">#  #è¯¥é…ç½®é¡¹å°±æ˜¯æŒ‡å°†å¸¦æœ‰ä¸‹åˆ’çº¿çš„è¡¨å­—æ®µæ˜ å°„ä¸ºé©¼å³°æ ¼å¼çš„å®ä½“ç±»å±æ€§ã€‚</span></span><br><span class="line"><span class="comment">#  configuration :</span></span><br><span class="line"><span class="comment">#    map-underscore-to-camel-case : true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ§åˆ¶å°è¾“å‡ºsqlã€ä¸‹åˆ’çº¿è½¬é©¼å³°</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:/mybatis-plus/*.xml</span></span><br><span class="line">  <span class="attr">typeAliasesPackage:</span> <span class="string">com.fc.pilotSchool.model</span></span><br><span class="line">  <span class="comment"># æ§åˆ¶å°è¾“å‡ºsqlã€ä¸‹åˆ’çº¿è½¬é©¼å³°</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pagehelperåˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="attr">pagehelper:</span></span><br><span class="line">    <span class="attr">helperDialect:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">reasonable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">supportMethodsArguments:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">params:</span> <span class="string">count=countSql</span></span><br><span class="line"><span class="attr">oss:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">info:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">path-style-access:</span> <span class="literal">false</span>  <span class="comment">#ä½¿ç”¨äº‘OSS éœ€è¦å…³é—­</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">http://127.0.0.1:9000</span> <span class="comment">#å¯¹åº”ä¸Šå›¾ â‘¢ å¤„é…ç½®</span></span><br><span class="line">  <span class="attr">access-key:</span> <span class="string">minioadmin</span>  <span class="comment"># ä¸Šæ–‡åˆ›å»ºçš„AK</span></span><br><span class="line">  <span class="attr">secret-key:</span> <span class="string">minioadmin</span> <span class="comment"># ä¸Šæ–‡åˆ›å»ºçš„SK</span></span><br><span class="line">  <span class="attr">bucket-name:</span> <span class="string">v2-cloud</span>  <span class="comment"># ä¸Šæ–‡åˆ›å»ºçš„æ¡¶åç§°</span></span><br></pre></td></tr></table></figure><p>application-dev.ymlæ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#devç¯å¢ƒ  mysql7.0</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driverClassName:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="comment">#druidè¿æ¥æ± é…ç½®</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">     <span class="comment">#ä¸»åº“æ•°æ®æº</span></span><br><span class="line">     <span class="attr">master:</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://xxx.xxx.xxx.xxx:3306/xxxx?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;serverTimezone=GMT</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">xxxxx</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">xxxxx</span></span><br><span class="line">     <span class="comment">#å¤‡æ•°æ®æº #å…³é—­</span></span><br><span class="line">     <span class="attr">slave:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/xxxx?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT&amp;autoReconnect=true&amp;useSSL=false</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">xxxx</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">xxxx</span></span><br><span class="line">        <span class="comment">#é…ç½®åˆå§‹åŒ–è¿æ¥æ•°å¤§å°</span></span><br><span class="line">     <span class="attr">initial-size:</span> <span class="number">10</span></span><br><span class="line">     <span class="comment"># æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line">     <span class="attr">maxActive:</span> <span class="number">50</span></span><br><span class="line">     <span class="comment">#æœ€å°è¿æ¥æ•°</span></span><br><span class="line">     <span class="attr">minIdle:</span> <span class="number">10</span></span><br><span class="line">     <span class="comment">#è·å–è¿æ¥ç­‰å¾…è¶…æ—¶æ—¶é—´</span></span><br><span class="line">     <span class="attr">maxWait:</span> <span class="number">5000</span></span><br><span class="line">     <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCacheã€‚PSCacheå¯¹æ”¯æŒæ¸¸æ ‡çš„æ•°æ®åº“æ€§èƒ½æå‡å·¨å¤§ï¼Œæ¯”å¦‚è¯´oracleã€‚åœ¨mysqlä¸‹å»ºè®®å…³é—­ã€‚</span></span><br><span class="line">     <span class="attr">maxPoolPreparedStatementPerConnection-size:</span> <span class="number">20</span></span><br><span class="line">     <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">     <span class="attr">validationQueryTimeout:</span> <span class="number">20000</span></span><br><span class="line">     <span class="attr">testOnBorrow:</span> <span class="literal">false</span> <span class="comment">#ç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚</span></span><br><span class="line">     <span class="attr">testOnReturn:</span> <span class="literal">false</span> <span class="comment">#å½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚</span></span><br><span class="line">     <span class="attr">testWhileIdle:</span> <span class="literal">true</span> <span class="comment">#å»ºè®®é…ç½®ä¸ºtrueï¼Œä¸å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”ä¿è¯å®‰å…¨æ€§ã€‚ç”³è¯·è¿æ¥çš„æ—¶å€™æ£€æµ‹ï¼Œå¦‚æœç©ºé—²æ—¶é—´å¤§äºtimeBetweenEvictionRunsMillisï¼Œæ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚</span></span><br><span class="line">     <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span> <span class="comment">#é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">     <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span>  <span class="comment">#ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">     <span class="attr">maxEvictableIdleTimeMillis:</span> <span class="number">900000</span>  <span class="comment"># é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å¤§ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line">     <span class="comment">#StatViewServleté…ç½®ã€‚ï¼ˆå› ä¸ºæš´éœ²çš„ç›‘æ§ä¿¡æ¯æ¯”è¾ƒæ•æ„Ÿï¼Œæ”¯æŒå¯†ç åŠ å¯†å’Œè®¿é—®ipé™å®šï¼‰</span></span><br><span class="line">     <span class="attr">webStatFilter:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">     <span class="attr">statViewServlet:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">urlPattern:</span> <span class="string">/druid/*</span></span><br><span class="line">      <span class="comment">#å¯ä»¥å¢åŠ è®¿é—®è´¦å·å¯†ç ã€å»æ‰æ³¨é‡Šå°±å¯ä»¥ã€‘</span></span><br><span class="line">      <span class="comment">#login-username: admin</span></span><br><span class="line">      <span class="comment">#login-password: admin</span></span><br><span class="line">     <span class="attr">filter:</span></span><br><span class="line">      <span class="attr">stat:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># æ…¢SQLè®°å½•</span></span><br><span class="line">        <span class="attr">log-slow-sql:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">slow-sql-millis:</span> <span class="number">1000</span></span><br><span class="line">        <span class="attr">merge-sql:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">wall:</span></span><br><span class="line">        <span class="attr">config:</span></span><br><span class="line">          <span class="attr">multi-statement-allow:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#mysql 8.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#spring:</span></span><br><span class="line"><span class="comment">#  datasource:</span></span><br><span class="line"><span class="comment">#    type: com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="comment">#    driverClassName: com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">#    #druidè¿æ¥æ± é…ç½®</span></span><br><span class="line"><span class="comment">#    druid:</span></span><br><span class="line"><span class="comment">#     # ä¸»åº“æ•°æ®æº</span></span><br><span class="line"><span class="comment">#     master:</span></span><br><span class="line"><span class="comment">#        url: jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT&amp;autoReconnect=true&amp;useSSL=false</span></span><br><span class="line"><span class="comment">#        username: root</span></span><br><span class="line"><span class="comment">#        password: root</span></span><br><span class="line"><span class="comment">#        #æ ‘ç†Šæ•°æ®æº</span></span><br><span class="line"><span class="comment">#     slave:</span></span><br><span class="line"><span class="comment">#        enabled : false</span></span><br><span class="line"><span class="comment">#        url: jdbc:mysql://localhost:3306/test2?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT&amp;autoReconnect=true&amp;useSSL=false</span></span><br><span class="line"><span class="comment">#        username: root</span></span><br><span class="line"><span class="comment">#        password: root</span></span><br><span class="line"><span class="comment">#        #é…ç½®åˆå§‹åŒ–è¿æ¥æ•°å¤§å°</span></span><br><span class="line"><span class="comment">#     initial-size: 10</span></span><br><span class="line"><span class="comment">#     # æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line"><span class="comment">#     max-active: 50</span></span><br><span class="line"><span class="comment">#     #æœ€å°è¿æ¥æ•°</span></span><br><span class="line"><span class="comment">#     min-idle: 10</span></span><br><span class="line"><span class="comment">#     #è·å–è¿æ¥ç­‰å¾…è¶…æ—¶æ—¶é—´</span></span><br><span class="line"><span class="comment">#     max-wait: 5000</span></span><br><span class="line"><span class="comment">#     pool-prepared-statements: true #æ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCacheã€‚PSCacheå¯¹æ”¯æŒæ¸¸æ ‡çš„æ•°æ®åº“æ€§èƒ½æå‡å·¨å¤§ï¼Œæ¯”å¦‚è¯´oracleã€‚åœ¨mysqlä¸‹å»ºè®®å…³é—­ã€‚</span></span><br><span class="line"><span class="comment">#     max-pool-prepared-statement-per-connection-size: 20</span></span><br><span class="line"><span class="comment">#     validation-query: SELECT 1 FROM DUAL</span></span><br><span class="line"><span class="comment">#     validation-query-timeout: 20000</span></span><br><span class="line"><span class="comment">#     test-on-borrow: false #ç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚</span></span><br><span class="line"><span class="comment">#     test-on-return: false #å½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚</span></span><br><span class="line"><span class="comment">#     test-while-idle: true #å»ºè®®é…ç½®ä¸ºtrueï¼Œä¸å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”ä¿è¯å®‰å…¨æ€§ã€‚ç”³è¯·è¿æ¥çš„æ—¶å€™æ£€æµ‹ï¼Œå¦‚æœç©ºé—²æ—¶é—´å¤§äºtimeBetweenEvictionRunsMillisï¼Œæ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚</span></span><br><span class="line"><span class="comment">#     time-between-eviction-runs-millis: 60000 #é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line"><span class="comment">#     min-evictable-idle-time-millis: 300000  #ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span><br><span class="line"><span class="comment">#     #StatViewServleté…ç½®ã€‚ï¼ˆå› ä¸ºæš´éœ²çš„ç›‘æ§ä¿¡æ¯æ¯”è¾ƒæ•æ„Ÿï¼Œæ”¯æŒå¯†ç åŠ å¯†å’Œè®¿é—®ipé™å®šï¼‰</span></span><br><span class="line"><span class="comment">#     stat-view-servlet:</span></span><br><span class="line"><span class="comment">#      enabled: true</span></span><br><span class="line"><span class="comment">#      url-pattern: /druid/*</span></span><br><span class="line"><span class="comment">#      #å¯ä»¥å¢åŠ è®¿é—®è´¦å·å¯†ç ã€å»æ‰æ³¨é‡Šå°±å¯ä»¥ã€‘</span></span><br><span class="line"><span class="comment">#      #login-username: admin</span></span><br><span class="line"><span class="comment">#      #login-password: admin</span></span><br><span class="line"><span class="comment">#     filter:</span></span><br><span class="line"><span class="comment">#      stat:</span></span><br><span class="line"><span class="comment">#        log-slow-sql: true</span></span><br><span class="line"><span class="comment">#        slow-sql-millis: 1000</span></span><br><span class="line"><span class="comment">#        merge-sql: true</span></span><br><span class="line"><span class="comment">#      wall:</span></span><br><span class="line"><span class="comment">#        config:</span></span><br><span class="line"><span class="comment">#          multi-statement-allow: true</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> YML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dorisè®°å½•</title>
      <link href="/2024/04/24/Doris%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/04/24/Doris%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="Apache-Doris-ç®€ä»‹"><a href="#Apache-Doris-ç®€ä»‹" class="headerlink" title="Apache Doris ç®€ä»‹"></a>Apache Doris ç®€ä»‹</h2><p>Apache Dorisï¼ˆåŸç™¾åº¦ Paloï¼‰æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„MPPï¼ˆå¤§è§„æ¨¡å¹¶è¡Œå¤„ç†ï¼‰åˆ†æå‹æ•°æ®åº“ï¼Œä¸“ä¸ºé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„å®æ—¶åˆ†æåœºæ™¯è®¾è®¡ã€‚å®ƒç»“åˆäº†Google Mesaå’ŒApache Impalaçš„ä¼˜ç‚¹ï¼Œæä¾›äº†é«˜æ€§èƒ½ã€æ˜“æ‰©å±•ã€é«˜å¯ç”¨çš„åˆ†å¸ƒå¼SQLæ•°æ®åˆ†æè§£å†³æ–¹æ¡ˆã€‚Dorisé‡‡ç”¨åˆ—å¼å­˜å‚¨å¼•æ“ï¼Œæ”¯æŒå¤šç»´åˆ†æã€å³å¸­æŸ¥è¯¢ã€ç»Ÿä¸€çš„æ‰¹æµå¤„ç†ç­‰ç‰¹æ€§ï¼Œå¹¿æ³›åº”ç”¨äºæŠ¥è¡¨åˆ†æã€å³å¸­æŸ¥è¯¢ã€æ•°æ®å¯è§†åŒ–ã€å®æ—¶å¤§å±ç­‰åœºæ™¯ã€‚</p><h2 id="æ ¸å¿ƒç‰¹æ€§"><a href="#æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h2><ol><li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šå…¼å®¹MySQLåè®®ï¼Œæ”¯æŒæ ‡å‡†SQLï¼Œæ— éœ€å¤æ‚ETL</li><li><strong>é«˜æ€§èƒ½</strong>ï¼šMPPæ¶æ„ï¼Œå‘é‡åŒ–æ‰§è¡Œå¼•æ“ï¼Œæ™ºèƒ½ç´¢å¼•</li><li><strong>é«˜å¯ç”¨</strong>ï¼šæ”¯æŒå¤šå‰¯æœ¬è‡ªåŠ¨åŒæ­¥ï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤</li><li><strong>å¯æ‰©å±•</strong>ï¼šæ”¯æŒåœ¨çº¿æ‰©ç¼©å®¹ï¼Œæ— éœ€åœæœº</li><li><strong>ç»Ÿä¸€çš„æ•°æ®åˆ†æå¹³å°</strong>ï¼šæ”¯æŒå¤šç§æ•°æ®æ¨¡å‹ï¼ˆæ˜ç»†ã€èšåˆã€æ›´æ–°ï¼‰å’Œæ•°æ®æºæ¥å…¥</li></ol><h2 id="Dorisæ¶æ„"><a href="#Dorisæ¶æ„" class="headerlink" title="Dorisæ¶æ„"></a>Dorisæ¶æ„</h2><p>Dorisä¸»è¦ç”±ä¸¤ç§è§’è‰²ç»„æˆï¼š</p><ol><li>**FE (Frontend)**ï¼šè´Ÿè´£å…ƒæ•°æ®ç®¡ç†ã€æŸ¥è¯¢è§£æã€è§„åˆ’å’Œè°ƒåº¦</li><li>**BE (Backend)**ï¼šè´Ÿè´£æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢æ‰§è¡Œ</li></ol><p><img src="https://doris.apache.org/images/architecture.png" alt="Dorisæ¶æ„å›¾"></p><h3 id="FEè§’è‰²"><a href="#FEè§’è‰²" class="headerlink" title="FEè§’è‰²"></a>FEè§’è‰²</h3><ul><li><strong>Leader FE</strong>ï¼šå¤„ç†æ‰€æœ‰å…ƒæ•°æ®å†™æ“ä½œï¼Œä¿è¯å…ƒæ•°æ®ä¸€è‡´æ€§</li><li><strong>Follower FE</strong>ï¼šæ¥æ”¶Leaderçš„å…ƒæ•°æ®æ›´æ–°ï¼Œæä¾›è¯»æœåŠ¡ï¼Œå¯åœ¨Leaderæ•…éšœæ—¶è¢«é€‰ä¸ºæ–°Leader</li><li><strong>Observer FE</strong>ï¼šåªæä¾›è¯»æœåŠ¡ï¼Œä¸å‚ä¸é€‰ä¸¾ï¼Œç”¨äºæ‰©å±•æŸ¥è¯¢ååé‡</li></ul><h3 id="BEè§’è‰²"><a href="#BEè§’è‰²" class="headerlink" title="BEè§’è‰²"></a>BEè§’è‰²</h3><p>æ‰€æœ‰BEèŠ‚ç‚¹å¯¹ç­‰ï¼Œè´Ÿè´£æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢æ‰§è¡Œï¼Œæ”¯æŒæ¨ªå‘æ‰©å±•ã€‚</p><h2 id="å®‰è£…éƒ¨ç½²Doris"><a href="#å®‰è£…éƒ¨ç½²Doris" class="headerlink" title="å®‰è£…éƒ¨ç½²Doris"></a>å®‰è£…éƒ¨ç½²Doris</h2><h3 id="ç¯å¢ƒè¦æ±‚"><a href="#ç¯å¢ƒè¦æ±‚" class="headerlink" title="ç¯å¢ƒè¦æ±‚"></a>ç¯å¢ƒè¦æ±‚</h3><ul><li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼šCentOS 7+&#x2F;Ubuntu 16.04+</li><li><strong>JDK</strong>ï¼š1.8+</li><li><strong>GCC</strong>ï¼š4.8.2+</li><li><strong>å†…å­˜</strong>ï¼šå»ºè®®FE â‰¥ 16GBï¼ŒBE â‰¥ 32GB</li><li><strong>ç£ç›˜</strong>ï¼šSSDä¸ºä½³</li><li><strong>ç½‘ç»œ</strong>ï¼šä¸‡å…†ç½‘å¡ä¸ºä½³</li></ul><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><h4 id="1-ä¸‹è½½å®‰è£…åŒ…"><a href="#1-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="1. ä¸‹è½½å®‰è£…åŒ…"></a>1. ä¸‹è½½å®‰è£…åŒ…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½æœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">wget https://downloads.apache.org/doris/2.0.2/apache-doris-2.0.2-bin.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -zxvf apache-doris-2.0.2-bin.tar.gz</span><br></pre></td></tr></table></figure><h4 id="2-é…ç½®FE"><a href="#2-é…ç½®FE" class="headerlink" title="2. é…ç½®FE"></a>2. é…ç½®FE</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> apache-doris-2.0.2/fe</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim conf/fe.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ä»¥ä¸‹é…ç½®</span></span><br><span class="line">priority_networks=192.168.1.0/24  <span class="comment"># æ›¿æ¢ä¸ºå®é™…ç½‘æ®µ</span></span><br><span class="line">meta_dir=/path/to/doris/fe/meta   <span class="comment"># å…ƒæ•°æ®ç›®å½•</span></span><br><span class="line">http_port=8030</span><br><span class="line">rpc_port=9020</span><br><span class="line">query_port=9030</span><br><span class="line">edit_log_port=9010</span><br></pre></td></tr></table></figure><h4 id="3-é…ç½®BE"><a href="#3-é…ç½®BE" class="headerlink" title="3. é…ç½®BE"></a>3. é…ç½®BE</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> apache-doris-2.0.2/be</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim conf/be.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ä»¥ä¸‹é…ç½®</span></span><br><span class="line">priority_networks=192.168.1.0/24  <span class="comment"># æ›¿æ¢ä¸ºå®é™…ç½‘æ®µ</span></span><br><span class="line">storage_root_path=/path/to/doris/be/storage  <span class="comment"># æ•°æ®å­˜å‚¨ç›®å½•</span></span><br></pre></td></tr></table></figure><h4 id="4-å¯åŠ¨FE"><a href="#4-å¯åŠ¨FE" class="headerlink" title="4. å¯åŠ¨FE"></a>4. å¯åŠ¨FE</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> apache-doris-2.0.2/fe</span><br><span class="line">bin/start_fe.sh --daemon</span><br></pre></td></tr></table></figure><h4 id="5-å¯åŠ¨BE"><a href="#5-å¯åŠ¨BE" class="headerlink" title="5. å¯åŠ¨BE"></a>5. å¯åŠ¨BE</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> apache-doris-2.0.2/be</span><br><span class="line">bin/start_be.sh --daemon</span><br></pre></td></tr></table></figure><h4 id="6-æ·»åŠ BEèŠ‚ç‚¹åˆ°é›†ç¾¤"><a href="#6-æ·»åŠ BEèŠ‚ç‚¹åˆ°é›†ç¾¤" class="headerlink" title="6. æ·»åŠ BEèŠ‚ç‚¹åˆ°é›†ç¾¤"></a>6. æ·»åŠ BEèŠ‚ç‚¹åˆ°é›†ç¾¤</h4><p>ä½¿ç”¨MySQLå®¢æˆ·ç«¯è¿æ¥FEï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 127.0.0.1 -P 9030 -u root</span><br></pre></td></tr></table></figure><p>æ·»åŠ BEèŠ‚ç‚¹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">ADD</span> BACKEND &quot;192.168.1.10:9050&quot;;</span><br></pre></td></tr></table></figure><h2 id="å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h2><h3 id="1-FEéƒ¨ç½²é—®é¢˜"><a href="#1-FEéƒ¨ç½²é—®é¢˜" class="headerlink" title="1. FEéƒ¨ç½²é—®é¢˜"></a>1. FEéƒ¨ç½²é—®é¢˜</h3><h4 id="é—®é¢˜ï¼špriority-networksé…ç½®é”™è¯¯"><a href="#é—®é¢˜ï¼špriority-networksé…ç½®é”™è¯¯" class="headerlink" title="é—®é¢˜ï¼špriority_networksé…ç½®é”™è¯¯"></a>é—®é¢˜ï¼špriority_networksé…ç½®é”™è¯¯</h4><blockquote><p>ip address range configured for priority_networks does not include the current IP address</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><p>éœ€è¦åœ¨FEçš„confç›®å½•ä¸‹æ­£ç¡®è®¾ç½®<code>priority_networks</code>ç½‘æ®µï¼Œç¡®ä¿åŒ…å«å½“å‰èŠ‚ç‚¹IPåœ°å€ã€‚</p><ol><li><p>æŸ¥çœ‹æœ¬æœºIPåœ°å€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show eth0 | grep inet | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | awk -F<span class="string">&#x27;/&#x27;</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹<code>fe.conf</code>æ–‡ä»¶ï¼Œè®¾ç½®æ­£ç¡®çš„ç½‘æ®µï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">priority_networks=192.168.1.0/24</span><br></pre></td></tr></table></figure></li></ol><h4 id="é—®é¢˜ï¼šFEå¯åŠ¨æ—¶å¡åœ¨UNKNOWNçŠ¶æ€"><a href="#é—®é¢˜ï¼šFEå¯åŠ¨æ—¶å¡åœ¨UNKNOWNçŠ¶æ€" class="headerlink" title="é—®é¢˜ï¼šFEå¯åŠ¨æ—¶å¡åœ¨UNKNOWNçŠ¶æ€"></a>é—®é¢˜ï¼šFEå¯åŠ¨æ—¶å¡åœ¨UNKNOWNçŠ¶æ€</h4><blockquote><p>wait catalog to be ready. FE type: UNKNOWN. is ready: false, counter: 658341</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><p>æ£€æŸ¥æ˜¯å¦å­˜åœ¨è™šæ‹ŸIPåœ°å€å†²çªï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥å…ƒæ•°æ®ç›®å½•æƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R doris:doris /path/to/doris/fe/meta</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥æ—¥å¿—æ–‡ä»¶æŸ¥æ‰¾å…·ä½“é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f <span class="built_in">log</span>/fe.log</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœæ˜¯å…¨æ–°å®‰è£…ï¼Œå¯ä»¥å°è¯•æ¸…ç©ºå…ƒæ•°æ®ç›®å½•é‡æ–°å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /path/to/doris/fe/meta/*</span><br><span class="line">bin/start_fe.sh --daemon</span><br></pre></td></tr></table></figure></li></ol><h3 id="2-BEéƒ¨ç½²é—®é¢˜"><a href="#2-BEéƒ¨ç½²é—®é¢˜" class="headerlink" title="2. BEéƒ¨ç½²é—®é¢˜"></a>2. BEéƒ¨ç½²é—®é¢˜</h3><h4 id="é—®é¢˜ï¼šè¦æ±‚ç¦ç”¨swapå†…å­˜"><a href="#é—®é¢˜ï¼šè¦æ±‚ç¦ç”¨swapå†…å­˜" class="headerlink" title="é—®é¢˜ï¼šè¦æ±‚ç¦ç”¨swapå†…å­˜"></a>é—®é¢˜ï¼šè¦æ±‚ç¦ç”¨swapå†…å­˜</h4><blockquote><p>Please disable swap memory before installation</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><p>Dorisè¦æ±‚ç¦ç”¨swapä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</p><ol><li><p>ä¸´æ—¶ç¦ç”¨swapï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo swapoff -a</span><br></pre></td></tr></table></figure></li><li><p>æ°¸ä¹…ç¦ç”¨swapï¼ˆä¿®æ”¹&#x2F;etc&#x2F;fstabï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘/etc/fstabï¼Œæ³¨é‡Šæ‰åŒ…å«swapçš„è¡Œ</span></span><br><span class="line">sudo vim /etc/fstab</span><br><span class="line"><span class="comment"># æ³¨é‡Šæ‰ç±»ä¼¼ä¸‹é¢çš„è¡Œ</span></span><br><span class="line"><span class="comment"># /dev/mapper/centos-swap swap swap defaults 0 0</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="é—®é¢˜ï¼šJAVA-HOMEæœªå®šä¹‰"><a href="#é—®é¢˜ï¼šJAVA-HOMEæœªå®šä¹‰" class="headerlink" title="é—®é¢˜ï¼šJAVA_HOMEæœªå®šä¹‰"></a>é—®é¢˜ï¼šJAVA_HOMEæœªå®šä¹‰</h4><blockquote><p>The JAVA_HOME environment variable is not defined correctly</p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><p>è®¾ç½®JAVA_HOMEç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure></li><li><p>æˆ–åœ¨å¯åŠ¨è„šæœ¬ä¸­ç›´æ¥æŒ‡å®šï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk bin/start_fe.sh --daemon</span><br></pre></td></tr></table></figure></li></ol><h3 id="3-é›†ç¾¤é—®é¢˜"><a href="#3-é›†ç¾¤é—®é¢˜" class="headerlink" title="3. é›†ç¾¤é—®é¢˜"></a>3. é›†ç¾¤é—®é¢˜</h3><h4 id="é—®é¢˜ï¼šBEèŠ‚ç‚¹æ— æ³•åŠ å…¥é›†ç¾¤"><a href="#é—®é¢˜ï¼šBEèŠ‚ç‚¹æ— æ³•åŠ å…¥é›†ç¾¤" class="headerlink" title="é—®é¢˜ï¼šBEèŠ‚ç‚¹æ— æ³•åŠ å…¥é›†ç¾¤"></a>é—®é¢˜ï¼šBEèŠ‚ç‚¹æ— æ³•åŠ å…¥é›†ç¾¤</h4><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li><p>æ£€æŸ¥BEçŠ¶æ€ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> BACKENDS;</span><br></pre></td></tr></table></figure></li><li><p>ç¡®è®¤ç½‘ç»œè¿é€šæ€§ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet BE_IP 9050</span><br></pre></td></tr></table></figure></li><li><p>æ£€æŸ¥BEæ—¥å¿—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f /path/to/doris/be/log/be.INFO</span><br></pre></td></tr></table></figure></li><li><p>å°è¯•é‡æ–°æ·»åŠ BEï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> DECOMMISSION BACKEND &quot;BE_IP:9050&quot;;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">SYSTEM</span> <span class="keyword">ADD</span> BACKEND &quot;BE_IP:9050&quot;;</span><br></pre></td></tr></table></figure></li></ol><h4 id="é—®é¢˜ï¼šè¡¨åˆ›å»ºåæ— æ³•å†™å…¥æ•°æ®"><a href="#é—®é¢˜ï¼šè¡¨åˆ›å»ºåæ— æ³•å†™å…¥æ•°æ®" class="headerlink" title="é—®é¢˜ï¼šè¡¨åˆ›å»ºåæ— æ³•å†™å…¥æ•°æ®"></a>é—®é¢˜ï¼šè¡¨åˆ›å»ºåæ— æ³•å†™å…¥æ•°æ®</h4><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li>æ£€æŸ¥è¡¨çš„åˆ†åŒºå’Œåˆ†æ¡¶è®¾è®¡æ˜¯å¦åˆç†</li><li>ç¡®è®¤BEèŠ‚ç‚¹çŠ¶æ€æ­£å¸¸</li><li>æ£€æŸ¥å†™å…¥è¯­å¥æ˜¯å¦æ­£ç¡®</li><li>æŸ¥çœ‹FEå’ŒBEæ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯</li></ol><h2 id="æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2><ol><li><strong>åˆç†è®¾è®¡è¡¨æ¨¡å‹</strong>ï¼šé€‰æ‹©é€‚å½“çš„æ¨¡å‹ï¼ˆAggregateã€Uniqueã€Duplicateï¼‰</li><li><strong>ä¼˜åŒ–åˆ†åŒºåˆ†æ¡¶</strong>ï¼šæ ¹æ®æŸ¥è¯¢æ¨¡å¼è®¾è®¡åˆ†åŒºå’Œåˆ†æ¡¶ç­–ç•¥</li><li><strong>åˆç†è®¾ç½®Bloom Filter</strong>ï¼šå¯¹é«˜åŸºæ•°åˆ—å¯ç”¨Bloom Filter</li><li><strong>ä½¿ç”¨ç‰©åŒ–è§†å›¾</strong>ï¼šé’ˆå¯¹å¸¸è§æŸ¥è¯¢æ¨¡å¼åˆ›å»ºç‰©åŒ–è§†å›¾</li><li><strong>åˆç†è®¾ç½®å‰¯æœ¬æ•°</strong>ï¼šæ ¹æ®å¯é æ€§éœ€æ±‚å’Œèµ„æºæƒ…å†µè®¾ç½®</li><li><strong>å®šæœŸCompaction</strong>ï¼šæ‰§è¡Œ<code>ADMIN MANUAL COMPACT</code>ä¼˜åŒ–å­˜å‚¨</li><li><strong>ç›‘æ§èµ„æºä½¿ç”¨</strong>ï¼šå…³æ³¨CPUã€å†…å­˜ã€ç£ç›˜å’Œç½‘ç»œä½¿ç”¨æƒ…å†µ</li></ol><h2 id="å¸¸ç”¨è¿ç»´å‘½ä»¤"><a href="#å¸¸ç”¨è¿ç»´å‘½ä»¤" class="headerlink" title="å¸¸ç”¨è¿ç»´å‘½ä»¤"></a>å¸¸ç”¨è¿ç»´å‘½ä»¤</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥çœ‹FEèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">SHOW</span> FRONTENDS;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹BEèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">SHOW</span> BACKENDS;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹è¡¨ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tbl_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹è¡¨åˆ†åŒº</span></span><br><span class="line"><span class="keyword">SHOW</span> PARTITIONS <span class="keyword">FROM</span> tbl_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹è¡¨çš„æ•°æ®åˆ†å¸ƒ</span></span><br><span class="line"><span class="keyword">SHOW</span> TABLET <span class="keyword">FROM</span> tbl_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‰‹åŠ¨è§¦å‘Compaction</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name MANUAL COMPACT;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Apache Dorisæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åˆ†æå‹æ•°æ®åº“ï¼Œé€‚åˆå„ç§å®æ—¶åˆ†æåœºæ™¯ã€‚æ­£ç¡®éƒ¨ç½²å’Œé…ç½®Dorisæ˜¯å……åˆ†å‘æŒ¥å…¶æ€§èƒ½çš„å…³é”®ã€‚æœ¬æ–‡è®°å½•äº†Doriséƒ¨ç½²è¿‡ç¨‹ä¸­çš„å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Œå¸Œæœ›èƒ½å¸®åŠ©ç”¨æˆ·æ›´é¡ºåˆ©åœ°éƒ¨ç½²å’Œä½¿ç”¨Dorisã€‚</p><h2 id="å‚è€ƒèµ„æº"><a href="#å‚è€ƒèµ„æº" class="headerlink" title="å‚è€ƒèµ„æº"></a>å‚è€ƒèµ„æº</h2><ul><li><a href="https://doris.apache.org/docs/dev/install/install-deploy/">Apache Doriså®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/apache/doris">Apache Doris GitHubä»“åº“</a></li><li><a href="https://lists.apache.org/list.html?dev@doris.apache.org">Apache Dorisç”¨æˆ·é‚®ä»¶åˆ—è¡¨</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Doris </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœåŠ¡å™¨å·¡æ£€</title>
      <link href="/2024/04/24/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B7%A1%E6%A3%80/"/>
      <url>/2024/04/24/%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B7%A1%E6%A3%80/</url>
      
        <content type="html"><![CDATA[<h3 id="å·¡æ£€å‘½ä»¤"><a href="#å·¡æ£€å‘½ä»¤" class="headerlink" title="å·¡æ£€å‘½ä»¤"></a>å·¡æ£€å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line"><span class="comment"># æŸ¥çœ‹cpuçš„ç©ºé—²æ—¶é—´ä»¥åŠIOç­‰å¾…å®Œæˆæ—¶é—´</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br><span class="line"><span class="comment"># æŸ¥çœ‹avaliableçš„ä½¿ç”¨æƒ…å†µ</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µ</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getenforce</span><br><span class="line"><span class="comment"># ä½¿ç”¨getenforceå‘½ä»¤å¯ä»¥åœ¨Linuxä¸‹æŸ¥çœ‹æ˜¯å¦å¼€å¯äº†SELinux</span></span><br><span class="line"><span class="comment"># å¦‚æœä¸ºdisableåˆ™æœ‰é£é™©</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br><span class="line"><span class="comment"># æŸ¥çœ‹é˜²ç«å¢™æ˜¯å¦å¼€å¯</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br><span class="line"><span class="comment"># æŸ¥çœ‹æœ‰æ²¡æœ‰æœªçŸ¥çš„å®šæ—¶ä»»åŠ¡</span></span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“å·¡æ£€"><a href="#æ•°æ®åº“å·¡æ£€" class="headerlink" title="æ•°æ®åº“å·¡æ£€"></a>æ•°æ®åº“å·¡æ£€</h3><hr><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> instance_name,host_name,startup_time,status,database_status <span class="keyword">from</span> v$instance;</span><br><span class="line"><span class="comment">-- æŸ¥çœ‹Oraclå®ä¾‹çš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">group</span>#,status,type,<span class="keyword">member</span> <span class="keyword">from</span> v$logfile; </span><br><span class="line"><span class="comment">-- æ£€æŸ¥Oracleåœ¨çº¿æ—¥å¿—çŠ¶æ€</span></span><br></pre></td></tr></table></figure><blockquote><p>åœ¨Oracleæ•°æ®åº“ä¸­ï¼Œ<code>v$logfile</code>æ˜¯ä¸€ä¸ªåŠ¨æ€æ€§èƒ½è§†å›¾ï¼Œå®ƒæä¾›äº†å…³äºåœ¨çº¿é‡åšæ—¥å¿—æ–‡ä»¶çš„ä¿¡æ¯ã€‚è¿™äº›æ—¥å¿—æ–‡ä»¶æ˜¯Oracleç”¨äºè®°å½•æ‰€æœ‰æ•°æ®åº“æ›´æ”¹ï¼ˆå¦‚æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼‰çš„ç‰©ç†æ–‡ä»¶ã€‚è¿™äº›æ›´æ”¹éšåå¯ç”¨äºæ¢å¤æ“ä½œï¼Œä¾‹å¦‚å®ä¾‹æ¢å¤æˆ–ä»‹è´¨æ¢å¤ã€‚<br>ä»v$logfileè§†å›¾ä¸­æ£€ç´¢ä»¥ä¸‹åˆ—çš„ä¿¡æ¯ï¼š</p><ol><li><strong>group#</strong> - è¿™æ˜¯é‡åšæ—¥å¿—ç»„çš„ç¼–å·ã€‚åœ¨Oracleä¸­ï¼Œä½ å¯ä»¥æœ‰å¤šä¸ªåœ¨çº¿é‡åšæ—¥å¿—ç»„ï¼Œæ¯ä¸ªç»„å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼ˆå³ç‰©ç†æ–‡ä»¶ï¼‰ã€‚</li></ol><ul><li><code>group#</code>åˆ—è¡¨ç¤ºæ—¥å¿—ç»„çš„ç¼–å·ã€‚</li></ul><ol start="2"><li><strong>status</strong> - è¿™åˆ—æ˜¾ç¤ºäº†é‡åšæ—¥å¿—çš„çŠ¶æ€ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼š</li></ol><ul><li><p><code>CURRENT</code> - è¡¨ç¤ºè¯¥æ—¥å¿—æ–‡ä»¶æ˜¯å½“å‰æ­£åœ¨å†™å…¥çš„æ—¥å¿—æ–‡ä»¶ã€‚</p></li><li><p><code>ACTIVE</code> - è¡¨ç¤ºè¯¥æ—¥å¿—æ–‡ä»¶åŒ…å«å°šæœªè¢«å½’æ¡£çš„æ›´æ”¹ã€‚</p></li><li><p><code>INACTIVE</code> - è¡¨ç¤ºè¯¥æ—¥å¿—æ–‡ä»¶ä¸å†ç”¨äºå†™å…¥ï¼Œä½†å¯èƒ½åŒ…å«å°šæœªè¢«è¦†ç›–çš„æ›´æ”¹ã€‚</p></li><li><p><code>UNUSED</code> - è¡¨ç¤ºè¯¥æ—¥å¿—æ–‡ä»¶å°šæœªä½¿ç”¨ã€‚</p></li></ul><ol start="3"><li><p><strong>type</strong> - è¿™åˆ—æè¿°äº†é‡åšæ—¥å¿—æ–‡ä»¶çš„ç±»å‹ã€‚å¯¹äºåœ¨çº¿é‡åšæ—¥å¿—æ–‡ä»¶ï¼Œå®ƒé€šå¸¸æ˜¾ç¤ºä¸º<code>ONLINE</code>ã€‚</p></li><li><p><strong>member</strong> - è¿™åˆ—æ˜¾ç¤ºäº†é‡åšæ—¥å¿—æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œåç§°ã€‚æ¯ä¸ªæ—¥å¿—ç»„å¯ä»¥æœ‰å¤šä¸ªæˆå‘˜ï¼Œè¿™æ„å‘³ç€è¯¥ç»„çš„æ—¥å¿—æ•°æ®è¢«å†™å…¥å¤šä¸ªç‰©ç†æ–‡ä»¶ä¸­ã€‚è¿™æä¾›äº†å†—ä½™å’Œå®¹é”™èƒ½åŠ›ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªç‰©ç†æ–‡ä»¶æŸåï¼Œå…¶ä»–æ–‡ä»¶ä»ç„¶å¯ç”¨ã€‚</p></li></ol><p>é€šè¿‡æŸ¥è¯¢<code>v$logfile</code>è§†å›¾ï¼Œæ•°æ®åº“ç®¡ç†å‘˜å¯ä»¥äº†è§£å½“å‰å“ªäº›æ—¥å¿—æ–‡ä»¶æ­£åœ¨ä½¿ç”¨ï¼Œå“ªäº›å¤„äºç©ºé—²çŠ¶æ€ï¼Œä»¥åŠè¿™äº›æ—¥å¿—æ–‡ä»¶çš„ç‰©ç†ä½ç½®ã€‚è¿™å¯¹äºè¯Šæ–­é—®é¢˜ã€è§„åˆ’ç£ç›˜ç©ºé—´ä»¥åŠè¿›è¡Œæ¢å¤æ“ä½œéƒ½éå¸¸é‡è¦ã€‚</p></blockquote><hr><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> tablespace_name,status <span class="keyword">from</span> dba_tablespaces; </span><br><span class="line"><span class="comment">-- æ£€æŸ¥Oracleè¡¨ç©ºé—´çš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name,status <span class="keyword">from</span> v$datafile;</span><br><span class="line"><span class="comment">-- æ£€æŸ¥Oracleæ‰€æœ‰æ•°æ®æ–‡ä»¶çŠ¶æ€</span></span><br></pre></td></tr></table></figure><blockquote><ol><li><p><strong>name</strong> - è¿™åˆ—æ˜¾ç¤ºäº†æ•°æ®æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œåç§°ã€‚å®ƒæä¾›äº†æ•°æ®æ–‡ä»¶çš„ç‰©ç†ä½ç½®ä¿¡æ¯ã€‚</p></li><li><p><strong>status</strong> - è¿™åˆ—æè¿°äº†æ•°æ®æ–‡ä»¶çš„çŠ¶æ€ã€‚å¯èƒ½çš„çŠ¶æ€å€¼åŒ…æ‹¬ï¼š</p><ul><li><code>AVAILABLE</code> - æ•°æ®æ–‡ä»¶å¯ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«è®¿é—®ã€‚</li><li><code>RECOVER</code> - æ•°æ®æ–‡ä»¶æ­£åœ¨æ¢å¤ä¸­ï¼Œå¯èƒ½ç”±äºä»‹è´¨æ•…éšœæˆ–å…¶ä»–åŸå› ã€‚</li><li><code>OFFLINE</code> - æ•°æ®æ–‡ä»¶å½“å‰ä¸å¯ç”¨ï¼Œå¯èƒ½ç”±äºç®¡ç†å‘˜æ‰‹åŠ¨å°†å…¶è®¾ç½®ä¸ºç¦»çº¿çŠ¶æ€ï¼Œæˆ–è€…ç”±äºå…¶ä»–åŸå› ï¼ˆå¦‚ç£ç›˜æ•…éšœï¼‰ã€‚</li><li><code>INVALID</code> - æ•°æ®æ–‡ä»¶çš„çŠ¶æ€æ— æ•ˆæˆ–æŸåã€‚</li><li><code>DELETED</code> - æ•°æ®æ–‡ä»¶å·²è¢«æ ‡è®°ä¸ºåˆ é™¤ï¼Œä½†å…¶ç©ºé—´å¯èƒ½å°šæœªè¢«é‡Šæ”¾ã€‚</li></ul></li></ol><p>é€šè¿‡æŸ¥è¯¢<code>v$datafile</code>è§†å›¾ï¼Œæ•°æ®åº“ç®¡ç†å‘˜å¯ä»¥äº†è§£æ•°æ®åº“ä¸­æ‰€æœ‰æ•°æ®æ–‡ä»¶çš„çŠ¶æ€å’Œä½ç½®ã€‚è¿™å¯¹äºè¯Šæ–­é—®é¢˜ã€ç®¡ç†ç£ç›˜ç©ºé—´ã€å¤‡ä»½å’Œæ¢å¤æ“ä½œä»¥åŠç›‘æ§æ•°æ®åº“çš„å¥åº·çŠ¶å†µéƒ½è‡³å…³é‡è¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªæ•°æ®æ–‡ä»¶çš„çŠ¶æ€ä¸º<code>OFFLINE</code>ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦è¿›ä¸€æ­¥è°ƒæŸ¥ä¸ºä»€ä¹ˆå®ƒä¸å¯ç”¨ï¼Œå¹¶è€ƒè™‘å°†å…¶æ¢å¤ä¸º<code>AVAILABLE</code>çŠ¶æ€ã€‚åŒæ ·ï¼Œå¦‚æœæ•°æ®æ–‡ä»¶çš„çŠ¶æ€ä¸º<code>INVALID</code>æˆ–<code>RECOVER</code>ï¼Œåˆ™å¯èƒ½éœ€è¦è¿›è¡Œæ¢å¤æ“ä½œä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œå¯ç”¨æ€§ã€‚</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> segment_name,status <span class="keyword">from</span> dba_rollback_segs;</span><br><span class="line"><span class="comment">-- æ£€æŸ¥æ‰€æœ‰å›æ»šæ®µçŠ¶æ€</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">Upper</span>(F.TABLESPACE_NAME)         &quot;è¡¨ç©ºé—´å&quot;,</span><br><span class="line">       D.TOT_GROOTTE_MB                 &quot;è¡¨ç©ºé—´å¤§å°(M)&quot;,</span><br><span class="line">       D.TOT_GROOTTE_MB <span class="operator">-</span> F.TOTAL_BYTES &quot;å·²ä½¿ç”¨ç©ºé—´(M)&quot;,</span><br><span class="line">       To_char(Round(( D.TOT_GROOTTE_MB <span class="operator">-</span> F.TOTAL_BYTES ) <span class="operator">/</span> D.TOT_GROOTTE_MB <span class="operator">*</span> <span class="number">100</span>, <span class="number">2</span>), <span class="string">&#x27;990.99&#x27;</span>)</span><br><span class="line">       <span class="operator">||</span> <span class="string">&#x27;%&#x27;</span>                           &quot;ä½¿ç”¨æ¯”&quot;,</span><br><span class="line">       F.TOTAL_BYTES                    &quot;ç©ºé—²ç©ºé—´(M)&quot;,</span><br><span class="line">       F.MAX_BYTES                      &quot;æœ€å¤§å—(M)&quot;</span><br><span class="line"><span class="keyword">FROM</span>   (<span class="keyword">SELECT</span> TABLESPACE_NAME,</span><br><span class="line">               Round(<span class="built_in">Sum</span>(BYTES) <span class="operator">/</span> ( <span class="number">1024</span> <span class="operator">*</span> <span class="number">1024</span> ), <span class="number">2</span>) TOTAL_BYTES,</span><br><span class="line">               Round(<span class="built_in">Max</span>(BYTES) <span class="operator">/</span> ( <span class="number">1024</span> <span class="operator">*</span> <span class="number">1024</span> ), <span class="number">2</span>) MAX_BYTES</span><br><span class="line">        <span class="keyword">FROM</span>   SYS.DBA_FREE_SPACE</span><br><span class="line">        <span class="keyword">GROUP</span>  <span class="keyword">BY</span> TABLESPACE_NAME) F,</span><br><span class="line">       (<span class="keyword">SELECT</span> DD.TABLESPACE_NAME,</span><br><span class="line">               Round(<span class="built_in">Sum</span>(DD.BYTES) <span class="operator">/</span> ( <span class="number">1024</span> <span class="operator">*</span> <span class="number">1024</span> ), <span class="number">2</span>) TOT_GROOTTE_MB</span><br><span class="line">        <span class="keyword">FROM</span>   SYS.DBA_DATA_FILES DD</span><br><span class="line">        <span class="keyword">GROUP</span>  <span class="keyword">BY</span> DD.TABLESPACE_NAME) D</span><br><span class="line"><span class="keyword">WHERE</span>  D.TABLESPACE_NAME <span class="operator">=</span> F.TABLESPACE_NAME</span><br><span class="line"><span class="keyword">ORDER</span>  <span class="keyword">BY</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ£€æŸ¥è¡¨ç©ºé—´ä½¿ç”¨æƒ…å†µ</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.VALUE <span class="operator">+</span> b.VALUE logical_reads,</span><br><span class="line">       c.VALUE phys_reads,</span><br><span class="line">       round(<span class="number">100</span> <span class="operator">*</span> (<span class="number">1</span> <span class="operator">-</span> c.value <span class="operator">/</span> (a.value <span class="operator">+</span> b.value)), <span class="number">4</span>) hit_ratio</span><br><span class="line">  <span class="keyword">FROM</span> v$sysstat a, v$sysstat b, v$sysstat c</span><br><span class="line"> <span class="keyword">WHERE</span> a.NAME <span class="operator">=</span> <span class="string">&#x27;db block gets&#x27;</span></span><br><span class="line">   <span class="keyword">AND</span> b.NAME <span class="operator">=</span> <span class="string">&#x27;consistent gets&#x27;</span></span><br><span class="line">   <span class="keyword">AND</span> c.NAME <span class="operator">=</span> <span class="string">&#x27;physical reads&#x27;</span>;</span><br><span class="line"><span class="comment">-- æ£€æŸ¥ç¼“å†²åŒºå‘½ä¸­ç‡</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">select</span> index_name, table_name, tablespace_name, status</span><br><span class="line">  <span class="keyword">From</span> dba_indexes</span><br><span class="line"> <span class="keyword">Where</span> owner <span class="operator">=</span> <span class="string">&#x27;CTAIS2&#x27;</span></span><br><span class="line">   <span class="keyword">And</span> status <span class="operator">&lt;&gt;</span> <span class="string">&#x27;VALID&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ£€æŸ¥å¤±æ•ˆçš„ç´¢å¼•</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> owner, constraint_name, table_name, constraint_type, status</span><br><span class="line">  <span class="keyword">FROM</span> dba_constraints</span><br><span class="line"> <span class="keyword">WHERE</span> status <span class="operator">=</span> <span class="string">&#x27;DISABLE&#x27;</span></span><br><span class="line"><span class="keyword">and</span> constraint_type <span class="operator">=</span> <span class="string">&#x27;P&#x27;</span>;</span><br><span class="line"><span class="comment">-- æ£€æŸ¥ä¸èµ·ä½œç”¨çš„çº¦æŸ</span></span><br></pre></td></tr></table></figure><p><em>ä¸‹é¢çš„å‘½ä»¤éœ€è¦åœ¨sqlplusä¸Šæ‰§è¡Œ</em>  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su - oracle</span><br><span class="line">sqlplus /nolog</span><br><span class="line">conn sys/ as sysdba;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">parameter</span> process;   </span><br><span class="line"><span class="comment">-- æŸ¥çœ‹db_write_processæ•°è®¾å®šå€¼</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">parameter</span> sessions;  </span><br><span class="line"><span class="comment">-- æŸ¥çœ‹sessionæ•°è®¾å®šå€¼</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> v$session;</span><br><span class="line"><span class="comment">-- æŸ¥çœ‹sessionæ•°å®é™…å€¼</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(percent_space_used) <span class="keyword">from</span> v$flash_recovery_area_usage;</span><br><span class="line"><span class="comment">-- æŸ¥çœ‹å½’æ¡£æ—¥å¿—å æ¯”</span></span><br></pre></td></tr></table></figure><hr><h3 id="æ‰©å±•è¡¨ç©ºé—´"><a href="#æ‰©å±•è¡¨ç©ºé—´" class="headerlink" title="æ‰©å±•è¡¨ç©ºé—´"></a>æ‰©å±•è¡¨ç©ºé—´</h3><p>æŸ¥çœ‹è¡¨ç©ºé—´ä½¿ç”¨ç™¾åˆ†æ¯”</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> b.file_id æ–‡ä»¶IDå·,</span><br><span class="line"> b.tablespace_name è¡¨ç©ºé—´å,</span><br><span class="line"> b.bytes <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> <span class="operator">||</span> <span class="string">&#x27;M&#x27;</span> å­—èŠ‚æ•°,</span><br><span class="line"> (</span><br><span class="line">  b.bytes <span class="operator">-</span> <span class="built_in">sum</span>(nvl(a.bytes, <span class="number">0</span>))</span><br><span class="line"> ) <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> <span class="operator">||</span> <span class="string">&#x27;M&#x27;</span> å·²ä½¿ç”¨,</span><br><span class="line"> <span class="built_in">sum</span>(nvl(a.bytes, <span class="number">0</span>)) <span class="operator">/</span> <span class="number">1024</span> <span class="operator">/</span> <span class="number">1024</span> <span class="operator">||</span> <span class="string">&#x27;M&#x27;</span> å‰©ä½™ç©ºé—´,</span><br><span class="line"> <span class="number">100</span> <span class="operator">-</span> <span class="built_in">sum</span>(nvl(a.bytes, <span class="number">0</span>)) <span class="operator">/</span> (b.bytes) <span class="operator">*</span> <span class="number">100</span> å ç”¨ç™¾åˆ†æ¯”</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"> dba_free_space a,</span><br><span class="line"> dba_data_files b</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"> a.file_id <span class="operator">=</span> b.file_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line"> b.tablespace_name,</span><br><span class="line"> b.file_id,</span><br><span class="line"> b.bytes</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line"> b.file_id;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è¡¨ç©ºé—´è·¯å¾„</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"> tablespace_name,</span><br><span class="line"> file_id,</span><br><span class="line"> file_name,</span><br><span class="line"> round(bytes <span class="operator">/</span>(<span class="number">1024</span> <span class="operator">*</span> <span class="number">1024</span>), <span class="number">0</span>) total_space</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"> dba_data_files</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line"> tablespace_name;</span><br></pre></td></tr></table></figure><p>æ‰©å±•è¡¨ç©ºé—´</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>SPACE USERS <span class="keyword">ADD</span> DATAFILE <span class="string">&#x27;D:\APP\ADMINISTRATOR\ORADATA\ORCL\USERS04.DBF&#x27;</span> SIZE <span class="number">10000</span>M;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE DATAFILE <span class="string">&#x27;+DATA/jhszws/datafile/phistablespace2017.ora&#x27;</span> RESIZE <span class="number">10</span>G;</span><br></pre></td></tr></table></figure><p>è®¾ç½®è‡ªåŠ¨æ‰©å±•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> database datafile <span class="string">&#x27;/erp/TEST/db/data/cux_arch_03.dbf&#x27;</span> autoextend <span class="keyword">on</span> next <span class="number">1000</span>M maxsize <span class="number">16000</span>M;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mapçš„å››ç§éå†æ–¹å¼</title>
      <link href="/2024/04/24/map%E7%9A%84%E5%9B%9B%E7%A7%8D%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F/"/>
      <url>/2024/04/24/map%E7%9A%84%E5%9B%9B%E7%A7%8D%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="Entry"><a href="#Entry" class="headerlink" title="Entry"></a>Entry</h2><p>ç”±äºMapä¸­å­˜æ”¾çš„å…ƒç´ å‡ä¸ºé”®å€¼å¯¹ï¼Œæ•…æ¯ä¸€ä¸ªé”®å€¼å¯¹å¿…ç„¶å­˜åœ¨ä¸€ä¸ªæ˜ å°„å…³ç³»ã€‚<br>Mapä¸­é‡‡ç”¨Entryå†…éƒ¨ç±»æ¥è¡¨ç¤ºä¸€ä¸ªæ˜ å°„é¡¹ï¼Œæ˜ å°„é¡¹åŒ…å«Keyå’ŒValue (æˆ‘ä»¬æ€»è¯´é”®å€¼å¯¹é”®å€¼å¯¹, æ¯ä¸€ä¸ªé”®å€¼å¯¹ä¹Ÿå°±æ˜¯ä¸€ä¸ªEntry)<br>Map.Entryé‡Œé¢åŒ…å«getKey()å’ŒgetValue()æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; it=map.entrySet().iterator();</span><br><span class="line">    <span class="keyword">while</span>(it.hasNext()) &#123;</span><br><span class="line">        Map.Entry&lt;Integer,Integer&gt; entry=it.next();</span><br><span class="line">        <span class="type">int</span> key=entry.getKey();</span><br><span class="line">        <span class="type">int</span> value=entry.getValue();</span><br><span class="line">        System.out.println(key+<span class="string">&quot; &quot;</span>+value);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="entrySet"><a href="#entrySet" class="headerlink" title="entrySet"></a>entrySet</h2><p>entrySetæ˜¯ javaä¸­ é”®-å€¼ å¯¹çš„é›†åˆï¼ŒSeté‡Œé¢çš„ç±»å‹æ˜¯Map.Entryï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡map.entrySet()å¾—åˆ°ã€‚</p><p>entrySetå®ç°äº†Setæ¥å£ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯é”®å€¼å¯¹ã€‚ä¸€ä¸ªKå¯¹åº”ä¸€ä¸ªVã€‚<br>ç”¨æ¥éå†mapçš„ä¸€ç§æ–¹æ³•.  </p><p>å³é€šè¿‡getKeyï¼ˆï¼‰å¾—åˆ°Kï¼ŒgetValueå¾—åˆ°Vã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;Map.Entry&lt;String, String&gt;&gt; entryseSet=map.entrySet();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry:entryseSet) &#123;</span><br><span class="line"> </span><br><span class="line">    System.out.println(entry.getKey()+<span class="string">&quot;,&quot;</span>+entry.getValue());</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="keySet"><a href="#keySet" class="headerlink" title="keySet"></a>keySet</h2><p>è¿˜æœ‰ä¸€ç§æ˜¯keySet, keySetæ˜¯é”®çš„é›†åˆï¼ŒSeté‡Œé¢çš„ç±»å‹å³keyçš„ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; set = map.keySet();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (String s:set) &#123;</span><br><span class="line"> </span><br><span class="line">    System.out.println(s+<span class="string">&quot;,&quot;</span>+map.get(s));</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="value"><a href="#value" class="headerlink" title="value"></a>value</h2><p>é€šè¿‡ä½¿ç”¨mapçš„valueæ–¹æ³•è¿›è¡Œéå†<br><em>$\color{red}{ä¸èƒ½éå†key}$</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (String v : map.values()) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> v;</span><br><span class="line">    System.out.println(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å››ç§éå†Mapæ–¹å¼:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"> </span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;value1&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;2&quot;</span>, <span class="string">&quot;value2&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;3&quot;</span>, <span class="string">&quot;value3&quot;</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ç§ï¼šæ™®éä½¿ç”¨ï¼ŒäºŒæ¬¡å–å€¼</span></span><br><span class="line">    System.out.println(<span class="string">&quot;é€šè¿‡Map.keySetéå†keyå’Œvalueï¼š&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;key= &quot;</span>+ key + <span class="string">&quot; and value= &quot;</span> + map.get(key));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ç¬¬äºŒç§</span></span><br><span class="line">    System.out.println(<span class="string">&quot;é€šè¿‡Map.entrySetä½¿ç”¨iteratoréå†keyå’Œvalueï¼š&quot;</span>);</span><br><span class="line">    Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = map.entrySet().iterator();</span><br><span class="line">    <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">        Map.Entry&lt;String, String&gt; entry = it.next();</span><br><span class="line">        System.out.println(<span class="string">&quot;key= &quot;</span> + entry.getKey() + <span class="string">&quot; and value= &quot;</span> + entry.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//ç¬¬ä¸‰ç§ï¼šæ¨èï¼Œå°¤å…¶æ˜¯å®¹é‡å¤§æ—¶</span></span><br><span class="line">    System.out.println(<span class="string">&quot;é€šè¿‡Map.entrySetéå†keyå’Œvalue&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : map.entrySet()) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;key= &quot;</span> + entry.getKey() + <span class="string">&quot; and value= &quot;</span> + entry.getValue());</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ç¬¬å››ç§</span></span><br><span class="line">    System.out.println(<span class="string">&quot;é€šè¿‡Map.values()éå†æ‰€æœ‰çš„valueï¼Œä½†ä¸èƒ½éå†key&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String v : map.values()) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;value= &quot;</span> + v);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Doris SQL ç‰¹æŠ€</title>
      <link href="/2024/04/23/Doris%20SQL%20%E7%89%B9%E6%8A%80/"/>
      <url>/2024/04/23/Doris%20SQL%20%E7%89%B9%E6%8A%80/</url>
      
        <content type="html"><![CDATA[<h2 id="group-concat"><a href="#group-concat" class="headerlink" title="group_concat"></a><font style="color:rgb(29, 29, 29);">group_concat</font></h2><h3 id="description"><a href="#description" class="headerlink" title="description"></a><font style="color:rgb(29, 29, 29);">description</font></h3><h4 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a><font style="color:rgb(29, 29, 29);">Syntax</font></h4><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;VARCHAR GROUP_CONCAT([DISTINCT] VARCHAR str[, VARCHAR sep] [ORDER BY &#123; col_name | expr&#125; [ASC | DESC])&lt;/font&gt;</code><br><font style="color:rgb(42, 47, 52);">è¯¥å‡½æ•°æ˜¯ç±»ä¼¼äº sum() çš„èšåˆå‡½æ•°ï¼Œgroup_concat å°†ç»“æœé›†ä¸­çš„å¤šè¡Œç»“æœè¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ç¬¬äºŒä¸ªå‚æ•° sep ä¸ºå­—ç¬¦ä¸²ä¹‹é—´çš„è¿æ¥ç¬¦å·ï¼Œè¯¥å‚æ•°å¯ä»¥çœç•¥ã€‚è¯¥å‡½æ•°é€šå¸¸éœ€è¦å’Œ group by è¯­å¥ä¸€èµ·ä½¿ç”¨ã€‚</font></p><p><font style="color:rgb(42, 47, 52);"></font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">value</span> <span class="keyword">from</span> test;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">value</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"><span class="operator">|</span> a     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> b     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> c     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> c     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> GROUP_CONCAT(<span class="keyword">value</span>) <span class="keyword">from</span> test;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="operator">|</span> GROUP_CONCAT(`<span class="keyword">value</span>`) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="operator">|</span> a, b, c, c               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> GROUP_CONCAT(<span class="keyword">DISTINCT</span> <span class="keyword">value</span>) <span class="keyword">from</span> test;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="operator">|</span> GROUP_CONCAT(`<span class="keyword">value</span>`) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"><span class="operator">|</span> a, b, c               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> GROUP_CONCAT(<span class="keyword">value</span>, &quot; &quot;) <span class="keyword">from</span> test;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> GROUP_CONCAT(`<span class="keyword">value</span>`, <span class="string">&#x27; &#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> a b c c                    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> GROUP_CONCAT(<span class="keyword">value</span>, <span class="keyword">NULL</span>) <span class="keyword">from</span> test;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> GROUP_CONCAT(`<span class="keyword">value</span>`, <span class="keyword">NULL</span>)<span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>                       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">abs</span>(k3), group_concat(<span class="keyword">distinct</span> <span class="built_in">cast</span>(<span class="built_in">abs</span>(k2) <span class="keyword">as</span> <span class="type">varchar</span>) <span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">abs</span>(k1), k5) <span class="keyword">FROM</span> bigtable <span class="keyword">group</span> <span class="keyword">by</span> <span class="built_in">abs</span>(k3) <span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">abs</span>(k3);     <span class="operator">+</span><span class="comment">------------+-------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">abs</span>(`k3`)  <span class="operator">|</span> group_concat(<span class="keyword">DISTINCT</span> <span class="built_in">CAST</span>(<span class="built_in">abs</span>(`k2`) <span class="keyword">AS</span> <span class="type">CHARACTER</span>), <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">abs</span>(`k1`), `k5`) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">103</span> <span class="operator">|</span> <span class="number">255</span>                                                                           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1001</span> <span class="operator">|</span> <span class="number">1989</span>, <span class="number">1986</span>                                                                    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1002</span> <span class="operator">|</span> <span class="number">1989</span>, <span class="number">32767</span>                                                                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">3021</span> <span class="operator">|</span> <span class="number">1991</span>, <span class="number">32767</span>, <span class="number">1992</span>                                                             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">5014</span> <span class="operator">|</span> <span class="number">1985</span>, <span class="number">1991</span>                                                                    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">25699</span> <span class="operator">|</span> <span class="number">1989</span>                                                                          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2147483647</span> <span class="operator">|</span> <span class="number">255</span>, <span class="number">1991</span>, <span class="number">32767</span>, <span class="number">32767</span>                                                       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+-------------------------------------------------------------------------------+</span></span><br></pre></td></tr></table></figure><h2 id="row-number"><a href="#row-number" class="headerlink" title="row_number"></a><font style="color:rgb(29, 29, 29);">row_number</font></h2><h3 id="description-1"><a href="#description-1" class="headerlink" title="description"></a><font style="color:rgb(29, 29, 29);">description</font></h3><p><font style="color:rgb(42, 47, 52);">ä¸ºæ¯ä¸ª Partition çš„æ¯ä¸€è¡Œè¿”å›ä¸€ä¸ªä»1å¼€å§‹è¿ç»­é€’å¢çš„æ•´æ•°ã€‚ä¸ RANK() å’Œ DENSE_RANK() ä¸åŒçš„æ˜¯ï¼ŒROW_NUMBER() è¿”å›çš„å€¼ä¸ä¼šé‡å¤ä¹Ÿä¸ä¼šå‡ºç°ç©ºç¼ºï¼Œæ˜¯è¿ç»­é€’å¢çš„ã€‚</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span>(partition_by_clause order_by_clause)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> x, y, <span class="built_in">row_number</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> x <span class="keyword">order</span> <span class="keyword">by</span> y) <span class="keyword">as</span> rank <span class="keyword">from</span> int_t;</span><br><span class="line"></span><br><span class="line"><span class="operator">|</span> x <span class="operator">|</span> y    <span class="operator">|</span> rank     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span><span class="comment">---|------|----------|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> <span class="number">1</span>    <span class="operator">|</span> <span class="number">1</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> <span class="number">2</span>    <span class="operator">|</span> <span class="number">2</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span> <span class="operator">|</span> <span class="number">2</span>    <span class="operator">|</span> <span class="number">3</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> <span class="number">1</span>    <span class="operator">|</span> <span class="number">1</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> <span class="number">2</span>    <span class="operator">|</span> <span class="number">2</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span> <span class="operator">|</span> <span class="number">3</span>    <span class="operator">|</span> <span class="number">3</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> <span class="number">1</span>    <span class="operator">|</span> <span class="number">1</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> <span class="number">1</span>    <span class="operator">|</span> <span class="number">2</span>        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span> <span class="operator">|</span> <span class="number">2</span>    <span class="operator">|</span> <span class="number">3</span>        <span class="operator">|</span></span><br></pre></td></tr></table></figure><h2 id="timestampdiff"><a href="#timestampdiff" class="headerlink" title="timestampdiff"></a><font style="color:rgb(29, 29, 29);">timestampdiff</font></h2><h3 id="description-2"><a href="#description-2" class="headerlink" title="description"></a><font style="color:rgb(29, 29, 29);">description</font></h3><h4 id="Syntax-1"><a href="#Syntax-1" class="headerlink" title="Syntax"></a><font style="color:rgb(29, 29, 29);">Syntax</font></h4><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;INT&lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt; &lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;TIMESTAMPDIFF&lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;(unit, DATETIME datetime_expr1, DATETIME datetime_expr2)&lt;/font&gt;</code></p><p><font style="color:rgb(42, 47, 52);">è¿”å›datetime_expr2âˆ’datetime_expr1ï¼Œå…¶ä¸­datetime_expr1å’Œdatetime_expr2æ˜¯æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼ã€‚</font></p><p><font style="color:rgb(42, 47, 52);">ç»“æœ(æ•´æ•°)çš„å•ä½ç”±unitå‚æ•°ç»™å‡ºã€‚intervalçš„å•ä½ç”±unitå‚æ•°ç»™å‡ºï¼Œå®ƒåº”è¯¥æ˜¯ä¸‹åˆ—å€¼ä¹‹ä¸€:</font></p><p><font style="color:rgb(42, 47, 52);">SECOND, MINUTE, HOUR, DAY, WEEK, MONTH, or YEARã€‚</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">MySQL<span class="operator">&gt;</span> <span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">MONTH</span>,<span class="string">&#x27;2003-02-01&#x27;</span>,<span class="string">&#x27;2003-05-01&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> timestampdiff(<span class="keyword">MONTH</span>, <span class="string">&#x27;2003-02-01 00:00:00&#x27;</span>, <span class="string">&#x27;2003-05-01 00:00:00&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span>                                                                  <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------------------------------------+</span></span><br><span class="line"></span><br><span class="line">MySQL<span class="operator">&gt;</span> <span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">YEAR</span>,<span class="string">&#x27;2002-05-01&#x27;</span>,<span class="string">&#x27;2001-01-01&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> timestampdiff(<span class="keyword">YEAR</span>, <span class="string">&#x27;2002-05-01 00:00:00&#x27;</span>, <span class="string">&#x27;2001-01-01 00:00:00&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span>                                                                <span class="number">-1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------------------------------------------+</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MySQL<span class="operator">&gt;</span> <span class="keyword">SELECT</span> TIMESTAMPDIFF(<span class="keyword">MINUTE</span>,<span class="string">&#x27;2003-02-01&#x27;</span>,<span class="string">&#x27;2003-05-01 12:05:55&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> timestampdiff(<span class="keyword">MINUTE</span>, <span class="string">&#x27;2003-02-01 00:00:00&#x27;</span>, <span class="string">&#x27;2003-05-01 12:05:55&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span>                                                              <span class="number">128885</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------------+</span></span><br></pre></td></tr></table></figure><h2 id="array-distinct"><a href="#array-distinct" class="headerlink" title="array_distinct"></a><font style="color:rgb(29, 29, 29);">array_distinct</font></h2><h3 id="description-3"><a href="#description-3" class="headerlink" title="description"></a><font style="color:rgb(29, 29, 29);">description</font></h3><h4 id="Syntax-2"><a href="#Syntax-2" class="headerlink" title="Syntax"></a><font style="color:rgb(29, 29, 29);">Syntax</font></h4><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;ARRAY&lt;T&gt;&lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt; &lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;array_distinct&lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;(ARRAY&lt;T&gt; arr)&lt;/font&gt;</code></p><p><font style="color:rgb(42, 47, 52);">è¿”å›å»é™¤äº†é‡å¤å…ƒç´ çš„æ•°ç»„ï¼Œå¦‚æœè¾“å…¥æ•°ç»„ä¸ºNULLï¼Œåˆ™è¿”å›NULLã€‚</font></p><h3 id="notice"><a href="#notice" class="headerlink" title="notice"></a><font style="color:rgb(29, 29, 29);">notice</font></h3><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;ä»…æ”¯æŒå‘é‡åŒ–å¼•æ“ä¸­ä½¿ç”¨&lt;/font&gt;</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> k1, k2, array_distinct(k2) <span class="keyword">from</span> array_test;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> k1   <span class="operator">|</span> k2                          <span class="operator">|</span> array_distinct(k2)        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>    <span class="operator">|</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]             <span class="operator">|</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>    <span class="operator">|</span> [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]                   <span class="operator">|</span> [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]                 <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>    <span class="operator">|</span> []                          <span class="operator">|</span> []                        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4</span>    <span class="operator">|</span> <span class="keyword">NULL</span>                        <span class="operator">|</span> <span class="keyword">NULL</span>                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span>    <span class="operator">|</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>] <span class="operator">|</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">6</span>    <span class="operator">|</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="keyword">NULL</span>]             <span class="operator">|</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="keyword">NULL</span>]           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">7</span>    <span class="operator">|</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>]       <span class="operator">|</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="keyword">NULL</span>]     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------------------------+---------------------------+</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> k1, k2, array_distinct(k2) <span class="keyword">from</span> array_test01;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------------------------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> k1   <span class="operator">|</span> k2                                       <span class="operator">|</span> array_distinct(`k2`)      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------------------------------------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>    <span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]                <span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>] <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>    <span class="operator">|</span> [<span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;h&#x27;</span>]                          <span class="operator">|</span> [<span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;h&#x27;</span>]           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>    <span class="operator">|</span> [<span class="string">&#x27;&#x27;</span>]                                     <span class="operator">|</span> [<span class="string">&#x27;&#x27;</span>]                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>    <span class="operator">|</span> [<span class="keyword">NULL</span>]                                   <span class="operator">|</span> [<span class="keyword">NULL</span>]                    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span>    <span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] <span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>] <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">6</span>    <span class="operator">|</span> <span class="keyword">NULL</span>                                     <span class="operator">|</span> <span class="keyword">NULL</span>                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">7</span>    <span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="keyword">NULL</span>]                         <span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="keyword">NULL</span>]          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">8</span>    <span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>]                   <span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="keyword">NULL</span>]    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------------------------------------+---------------------------+</span></span><br></pre></td></tr></table></figure><h2 id="split-by-string"><a href="#split-by-string" class="headerlink" title="split_by_string"></a><font style="color:rgb(29, 29, 29);">split_by_string</font></h2><h3 id="description-4"><a href="#description-4" class="headerlink" title="description"></a><font style="color:rgb(29, 29, 29);">description</font></h3><h4 id="Syntax-3"><a href="#Syntax-3" class="headerlink" title="Syntax"></a><font style="color:rgb(29, 29, 29);">Syntax</font></h4><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;ARRAY&lt;STRING&gt;&lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt; &lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;split_by_string&lt;/font&gt;&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;(STRING s, STRING separator)&lt;/font&gt;</code><font style="color:rgb(42, 47, 52);"> </font><font style="color:rgb(42, 47, 52);">å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºç”±å­—ç¬¦ä¸²åˆ†éš”çš„å­å­—ç¬¦ä¸²ã€‚å®ƒä½¿ç”¨å¤šä¸ªå­—ç¬¦çš„å¸¸é‡å­—ç¬¦ä¸²åˆ†éš”ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ã€‚å¦‚æœå­—ç¬¦ä¸²åˆ†éš”ç¬¦ä¸ºç©ºï¼Œå®ƒå°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºå•ä¸ªå­—ç¬¦æ•°ç»„ã€‚</font></p><h4 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments"></a><font style="color:rgb(29, 29, 29);">Arguments</font></h4><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;separator&lt;/font&gt;</code><font style="color:rgb(42, 47, 52);"> </font><font style="color:rgb(42, 47, 52);">â€” åˆ†éš”ç¬¦æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ç”¨æ¥åˆ†å‰²çš„æ ‡å¿—å­—ç¬¦. ç±»å‹:</font><font style="color:rgb(42, 47, 52);"> </font><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;String&lt;/font&gt;</code></p><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;s&lt;/font&gt;</code><font style="color:rgb(42, 47, 52);"> </font><font style="color:rgb(42, 47, 52);">â€” éœ€è¦åˆ†å‰²çš„å­—ç¬¦ä¸². ç±»å‹:</font><font style="color:rgb(42, 47, 52);"> </font><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;String&lt;/font&gt;</code></p><h4 id="Returned-value-s"><a href="#Returned-value-s" class="headerlink" title="Returned value(s)"></a><font style="color:rgb(29, 29, 29);">Returned value(s)</font></h4><p><font style="color:rgb(42, 47, 52);">è¿”å›ä¸€ä¸ªåŒ…å«å­å­—ç¬¦ä¸²çš„æ•°ç»„. ä»¥ä¸‹æƒ…å†µä¼šè¿”å›ç©ºçš„å­å­—ç¬¦ä¸²:</font></p><p><font style="color:rgb(42, 47, 52);">éœ€è¦åˆ†å‰²çš„å­—ç¬¦ä¸²çš„é¦–å°¾æ˜¯åˆ†éš”ç¬¦;</font></p><p><font style="color:rgb(42, 47, 52);">å¤šä¸ªåˆ†éš”ç¬¦è¿ç»­å‡ºç°;</font></p><p><font style="color:rgb(42, 47, 52);">éœ€è¦åˆ†å‰²çš„å­—ç¬¦ä¸²ä¸ºç©ºï¼Œè€Œåˆ†éš”ç¬¦ä¸ä¸ºç©º.</font></p><p><font style="color:rgb(42, 47, 52);">Type:</font><font style="color:rgb(42, 47, 52);"> </font><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;Array(String)&lt;/font&gt;</code></p><h3 id="notice-1"><a href="#notice-1" class="headerlink" title="notice"></a><font style="color:rgb(29, 29, 29);">notice</font></h3><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;ä»…æ”¯æŒå‘é‡åŒ–å¼•æ“ä¸­ä½¿ç”¨&lt;/font&gt;</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> split_by_string(<span class="string">&#x27;a1b1c1d&#x27;</span>,<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> split_by_string(<span class="string">&#x27;a1b1c1d&#x27;</span>, <span class="string">&#x27;1&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> split_by_string(<span class="string">&#x27;,,a,b,c,&#x27;</span>,<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> split_by_string(<span class="string">&#x27;,,a,b,c,&#x27;</span>, <span class="string">&#x27;,&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;&#x27;</span>]      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> split_by_string(<span class="keyword">NULL</span>,<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> split_by_string(<span class="keyword">NULL</span>, <span class="string">&#x27;,&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span>                       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> split_by_string(<span class="string">&#x27;a,b,c,abcde&#x27;</span>,<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> split_by_string(<span class="string">&#x27;a,b,c,abcde&#x27;</span>, <span class="string">&#x27;,&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;abcde&#x27;</span>]            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> split_by_string(<span class="string">&#x27;1,,2,3,,4,5,,abcde&#x27;</span>, <span class="string">&#x27;,,&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> split_by_string(<span class="string">&#x27;1,,2,3,,4,5,,abcde&#x27;</span>, <span class="string">&#x27;,,&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2,3&#x27;</span>, <span class="string">&#x27;4,5&#x27;</span>, <span class="string">&#x27;abcde&#x27;</span>]                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> split_by_string(<span class="string">&#x27;,,,,&#x27;</span>,<span class="string">&#x27;,,&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> split_by_string(<span class="string">&#x27;,,,,&#x27;</span>, <span class="string">&#x27;,,&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------+</span></span><br><span class="line"><span class="operator">|</span> [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>]                  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> split_by_string(<span class="string">&#x27;,,a,,b,,c,,&#x27;</span>,<span class="string">&#x27;,,&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> split_by_string(<span class="string">&#x27;,,a,,b,,c,,&#x27;</span>, <span class="string">&#x27;,,&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;&#x27;</span>]              <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Doris </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dorisç´¢å¼•å°æ€»ç»“</title>
      <link href="/2024/04/23/Doris%E7%B4%A2%E5%BC%95%E5%B0%8F%E6%80%BB%E7%BB%93/"/>
      <url>/2024/04/23/Doris%E7%B4%A2%E5%BC%95%E5%B0%8F%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Dorisä¸­ï¼Œæ·»åŠ ç´¢å¼•æ˜¯æå‡æŸ¥è¯¢æ€§èƒ½çš„é‡è¦æ‰‹æ®µã€‚Dorisæ”¯æŒä¸¤ç§ç±»å‹çš„ç´¢å¼•ï¼šå†…ç½®æ™ºèƒ½ç´¢å¼•å’Œç”¨æˆ·åˆ›å»ºçš„äºŒçº§ç´¢å¼•ã€‚ä»¥ä¸‹æ˜¯å…³äºå¦‚ä½•åœ¨Dorisä¸­æ·»åŠ ç´¢å¼•çš„è¯¦ç»†æ­¥éª¤å’Œæ³¨æ„äº‹é¡¹ï¼š</p><h3 id="å†…ç½®æ™ºèƒ½ç´¢å¼•"><a href="#å†…ç½®æ™ºèƒ½ç´¢å¼•" class="headerlink" title="å†…ç½®æ™ºèƒ½ç´¢å¼•"></a>å†…ç½®æ™ºèƒ½ç´¢å¼•</h3><ol><li><strong>å‰ç¼€ç´¢å¼•</strong>ï¼š<ul><li>åŸºäºæ’åºé”®ä»¥æœ‰åºçš„æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œä¸ºæ¯1024è¡Œæ•°æ®åˆ›å»ºä¸€ä¸ªå‰ç¼€ç´¢å¼•ã€‚</li><li>ç´¢å¼•ä¸­çš„é”®æ˜¯å½“å‰1024è¡Œç»„çš„ç¬¬ä¸€è¡Œä¸­å·²æ’åºåˆ—çš„å€¼ã€‚</li><li>æŸ¥è¯¢æ—¶ï¼Œé€šè¿‡å‰ç¼€ç´¢å¼•å¯ä»¥å¿«é€Ÿå®šä½åˆ°ç›¸å…³çš„1024è¡Œç»„ï¼Œå¹¶ä»é‚£é‡Œå¼€å§‹æ‰«æã€‚</li><li>ç‰¹åˆ«æ³¨æ„ï¼šDorisåªæœ‰å‰36ä¸ªå­—èŠ‚èƒ½èµ°å‰ç¼€ç´¢å¼•ã€‚å› æ­¤ï¼Œåœ¨åˆ›å»ºè¡¨æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®škeyï¼Œå¹¶ä¸”ç´¢å¼•å­—æ®µçš„ç±»å‹å’Œé•¿åº¦è¦å°½å¯èƒ½ç²¾ç¡®ï¼Œä»¥å¢å¤§ç´¢å¼•èŒƒå›´ã€‚</li></ul></li><li><strong>ZoneMapç´¢å¼•</strong>ï¼š<ul><li>åœ¨åˆ—å­˜æ ¼å¼ä¸Šï¼Œå¯¹æ¯ä¸€åˆ—è‡ªåŠ¨ç»´æŠ¤çš„ç´¢å¼•ä¿¡æ¯ï¼ŒåŒ…æ‹¬Min&#x2F;Maxå€¼ã€nullå€¼ä¸ªæ•°ç­‰ã€‚</li><li>æŸ¥è¯¢æ—¶ï¼Œä¼šæ ¹æ®èŒƒå›´æ¡ä»¶è¿‡æ»¤çš„å­—æ®µæŒ‰ç…§ZoneMapç»Ÿè®¡ä¿¡æ¯é€‰å–æ‰«æçš„æ•°æ®èŒƒå›´ã€‚</li><li>ZoneMapç´¢å¼•å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œæ— éœ€é¢å¤–æ“ä½œã€‚</li></ul></li></ol><h3 id="ç”¨æˆ·åˆ›å»ºçš„äºŒçº§ç´¢å¼•"><a href="#ç”¨æˆ·åˆ›å»ºçš„äºŒçº§ç´¢å¼•" class="headerlink" title="ç”¨æˆ·åˆ›å»ºçš„äºŒçº§ç´¢å¼•"></a>ç”¨æˆ·åˆ›å»ºçš„äºŒçº§ç´¢å¼•</h3><ol><li><strong>å€’æ’ç´¢å¼•</strong>ï¼š<ul><li>ç”¨äºæ–‡æœ¬ç±»å‹çš„å…¨æ–‡æ£€ç´¢å’Œæ™®é€šæ•°å€¼æ—¥æœŸç±»å‹çš„ç­‰å€¼èŒƒå›´æŸ¥è¯¢ã€‚</li><li>å¯ä»¥ä»æµ·é‡æ•°æ®ä¸­å¿«é€Ÿè¿‡æ»¤å‡ºæ»¡è¶³æ¡ä»¶çš„è¡Œã€‚</li><li>ä¸åŒæ•°æ®æ¨¡å‹ä¸‹çš„åˆ›å»ºè§„åˆ™ï¼š<ul><li>Aggregate KEYè¡¨æ¨¡å‹ï¼šåªèƒ½ä¸ºKeyåˆ—å»ºç«‹å€’æ’ç´¢å¼•ã€‚</li><li>Unique KEYè¡¨æ¨¡å‹ï¼šéœ€è¦å¼€å¯merge on writeç‰¹æ€§åï¼Œå¯ä»¥ä¸ºä»»æ„åˆ—å»ºç«‹å€’æ’ç´¢å¼•ã€‚</li><li>Duplicate KEYè¡¨æ¨¡å‹ï¼šå¯ä»¥ä¸ºä»»æ„åˆ—å»ºç«‹å€’æ’ç´¢å¼•ã€‚</li></ul></li></ul></li><li><strong>BloomFilterç´¢å¼•</strong>ï¼š<ul><li>ä¸€ç§é«˜ç©ºé—´æ•ˆç‡çš„æ¦‚ç‡æ•°æ®ç»“æ„ï¼Œç”¨äºæ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­ã€‚</li><li>é€‚ç”¨äºé«˜åŸºæ•°ï¼ˆ5000ä»¥ä¸Šï¼‰åˆ—ä¸Šçš„ç­‰å€¼æŸ¥è¯¢åœºæ™¯ã€‚</li><li>åˆ›å»ºæ–¹å¼ï¼šåœ¨è¡¨åˆ›å»ºè¯­å¥çš„PROPERTIESä¸­æ·»åŠ â€bloom_filter_columnsâ€&#x3D;â€k1,k2,k3â€ï¼Œå…¶ä¸­k1,k2,k3ä¸ºè¦åˆ›å»ºBloomFilterç´¢å¼•çš„å…³é”®åˆ—åç§°ã€‚</li></ul></li><li><strong>NGram BloomFilterç´¢å¼•</strong>ï¼š<ul><li>ä¸ºäº†æå‡LIKEçš„æŸ¥è¯¢æ€§èƒ½ã€‚</li><li>é€‚ç”¨äºäº¿çº§åˆ«ä»¥ä¸Šæ•°æ®ï¼Œä¸”åªæœ‰æ¨¡ç³ŠåŒ¹é…éœ€æ±‚æ—¶ä½¿ç”¨ã€‚</li><li>åªæ”¯æŒå­—ç¬¦ä¸²åˆ—ï¼Œä¸”å’ŒBloomFilterç´¢å¼•ä¸ºäº’æ–¥å…³ç³»ï¼Œå³åŒä¸€ä¸ªåˆ—åªèƒ½è®¾ç½®ä¸¤è€…ä¸­çš„ä¸€ä¸ªã€‚</li></ul></li><li><strong>Bitmapç´¢å¼•</strong>ï¼š<ul><li>èƒ½å¤Ÿåº”ç”¨åœ¨Duplicateã€Uniqueæ•°æ®æ¨¡å‹çš„æ‰€æœ‰åˆ—å’ŒAggregateæ¨¡å‹çš„keyåˆ—ä¸Šã€‚</li><li>ä»…åœ¨Segment V2ä¸‹ç”Ÿæ•ˆï¼Œåˆ›å»ºç´¢å¼•æ—¶è¡¨çš„å­˜å‚¨æ ¼å¼å°†é»˜è®¤è½¬æ¢ä¸ºV2æ ¼å¼ã€‚</li><li>é€‚ç”¨äºä½åŸºæ•°çš„åˆ—ä¸Šï¼ˆå»ºè®®åœ¨100åˆ°100,000ä¹‹é—´ï¼‰ï¼Œå¦‚èŒä¸šã€åœ°å¸‚ç­‰ã€‚</li><li>ç‰¹å®šç±»å‹çš„æŸ¥è¯¢ï¼ˆå¦‚COUNTã€ORã€ANDç­‰é€»è¾‘æ“ä½œï¼‰å› ä¸ºåªéœ€è¦è¿›è¡Œä½è¿ç®—ï¼Œæ‰€ä»¥æ›´é€‚åˆä½¿ç”¨Bitmapç´¢å¼•ã€‚</li></ul></li></ol><hr><h3 id="æ·»åŠ ç´¢å¼•"><a href="#æ·»åŠ ç´¢å¼•" class="headerlink" title="æ·»åŠ ç´¢å¼•"></a>æ·»åŠ ç´¢å¼•</h3><h5 id="BloomFilterç´¢å¼•"><a href="#BloomFilterç´¢å¼•" class="headerlink" title="BloomFilterç´¢å¼•"></a>BloomFilterç´¢å¼•</h5><p>ï¼ˆå…¨ç‰ˆæœ¬é€‚ç”¨ï¼‰</p><ul><li>åˆ›å»ºè¡¨æ—¶æ·»åŠ ç´¢å¼•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PROPERTIES (<span class="string">&quot;bloom_filter_columns&quot;</span>=<span class="string">&quot;saler_id,category_id&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹è¡¨æ—¶æ·»åŠ ç´¢å¼•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE ods_test_bloom_delta SET (<span class="string">&quot;bloom_filter_columns&quot;</span> = <span class="string">&quot;city_org_code&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹ç´¢å¼•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE TABLE example_db.example_bloom_index_tbl;</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤ç´¢å¼•</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE ods_test_bloom_delta SET (<span class="string">&quot;bloom_filter_columns&quot;</span> = <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>BloomFilterç´¢å¼•çš„æ³¨æ„äº‹é¡¹<ol><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<br>BloomFilterç´¢å¼•é€‚ç”¨äºé«˜åŸºæ•°åˆ—çš„ç­‰å€¼æŸ¥è¯¢åœºæ™¯ï¼Œå¦‚ç”¨æˆ·IDã€å•†å“IDç­‰ã€‚å¯¹äºä½åŸºæ•°åˆ—ï¼ˆå¦‚æ€§åˆ«ã€çŠ¶æ€ç­‰ï¼‰ï¼Œç”±äºæ¯ä¸ªæ•°æ®å—å‡ ä¹éƒ½ä¼šåŒ…å«æ‰€æœ‰å–å€¼ï¼Œå› æ­¤BloomFilterç´¢å¼•çš„åŠ é€Ÿæ•ˆæœæœ‰é™ã€‚</li><li><strong>æ•°æ®ç±»å‹é™åˆ¶</strong>ï¼š<br>ç›®å‰Dorisä¸æ”¯æŒå¯¹Tinyintã€Floatã€Doubleç±»å‹çš„åˆ—åˆ›å»ºBloomFilterç´¢å¼•ã€‚</li><li><strong>æ€§èƒ½æƒè¡¡</strong>ï¼š<br>è™½ç„¶BloomFilterç´¢å¼•èƒ½å¤Ÿæå‡æŸ¥è¯¢æ€§èƒ½ï¼Œä½†ä¹Ÿä¼šå¢åŠ å†™å…¥å’Œæ›´æ–°çš„å¼€é”€ã€‚å› æ­¤ï¼Œåœ¨åˆ›å»ºç´¢å¼•æ—¶éœ€è¦æƒè¡¡æ€§èƒ½æå‡å’Œå­˜å‚¨å¼€é”€ä¹‹é—´çš„å¹³è¡¡ã€‚</li><li><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼š<br>åœ¨æŸ¥è¯¢æ—¶ï¼ŒDorisä¼šè‡ªåŠ¨é€‰æ‹©æ˜¯å¦ä½¿ç”¨BloomFilterç´¢å¼•ã€‚å¦‚æœå¸Œæœ›æŸ¥çœ‹æŸä¸ªæŸ¥è¯¢æ˜¯å¦å‘½ä¸­äº†BloomFilterç´¢å¼•ï¼Œå¯ä»¥é€šè¿‡æŸ¥è¯¢çš„Profileä¿¡æ¯æ¥ç¡®è®¤ã€‚</li></ol></li></ul><p>1. </p><h5 id="Bitmapç´¢å¼•"><a href="#Bitmapç´¢å¼•" class="headerlink" title="Bitmapç´¢å¼•"></a><font style="color:rgb(29, 29, 29);">Bitmapç´¢å¼•</font></h5><p>ï¼ˆè¯¥ç´¢å¼•é€‚ç”¨äº1.2ç‰ˆæœ¬ï¼‰</p><ul><li><font style="color:rgb(42, 47, 52);">bitmap indexï¼šä½å›¾ç´¢å¼•ï¼Œæ˜¯ä¸€ç§å¿«é€Ÿæ•°æ®ç»“æ„ï¼Œèƒ½å¤ŸåŠ å¿«æŸ¥è¯¢é€Ÿåº¦</font></li><li><font style="color:rgb(42, 47, 52);">åˆ›å»ºç´¢å¼•ï¼š</font></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX [IF NOT EXISTS] index_name ON table1 (siteid) USING BITMAP COMMENT <span class="string">&#x27;balabala&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li><font style="color:rgb(42, 47, 52);">æŸ¥çœ‹ç´¢å¼•ï¼š</font></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW INDEX FROM example_db.table_name;</span><br></pre></td></tr></table></figure><ul><li><font style="color:rgb(42, 47, 52);">åˆ é™¤ç´¢å¼•ï¼š</font></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX [IF EXISTS] index_name ON [db_name.]table_name;</span><br></pre></td></tr></table></figure><h5 id="å€’æ’ç´¢å¼•"><a href="#å€’æ’ç´¢å¼•" class="headerlink" title="å€’æ’ç´¢å¼•"></a><font style="color:rgb(29, 29, 29);">å€’æ’ç´¢å¼•</font></h5><p>ï¼ˆ2.0ç‰ˆæœ¬ä»¥ä¸Šé€‚ç”¨ï¼‰</p><ul><li>å¯ç”¨äºè¿›è¡Œæ–‡æœ¬ç±»å‹çš„å…¨æ–‡ç´¢å¼•ï¼Œä»¥åŠæ™®é€šæ•°å€¼<font style="color:rgb(42, 47, 52);">æ—¥æœŸç±»å‹çš„ç­‰å€¼èŒƒå›´æŸ¥è¯¢</font></li><li><font style="color:rgb(42, 47, 52);">å»ºè¡¨çš„æ—¶å€™å»ºç´¢å¼•ï¼š</font></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE table_name</span><br><span class="line">(</span><br><span class="line">  column_name1 TYPE1,</span><br><span class="line">  column_name2 TYPE2,</span><br><span class="line">  column_name3 TYPE3,</span><br><span class="line">  INDEX idx_name1(column_name1) USING INVERTED [PROPERTIES(...)] [COMMENT <span class="string">&#x27;your comment&#x27;</span>],</span><br><span class="line">  INDEX idx_name2(column_name2) USING INVERTED [PROPERTIES(...)] [COMMENT <span class="string">&#x27;your comment&#x27;</span>]</span><br><span class="line">)</span><br><span class="line">table_properties;</span><br></pre></td></tr></table></figure><ol><li><code>idx_column_name(column_name)</code> æ˜¯å¿…é¡»çš„ï¼Œ<code>column_name</code> æ˜¯å»ºç´¢å¼•çš„åˆ—åï¼Œå¿…é¡»æ˜¯å‰é¢åˆ—å®šä¹‰ä¸­å‡ºç°è¿‡çš„ï¼Œ<code>idx_column_name</code> æ˜¯ç´¢å¼•åå­—ï¼Œå¿…é¡»è¡¨çº§åˆ«å”¯ä¸€ï¼Œå»ºè®®å‘½åè§„èŒƒï¼šåˆ—åå‰é¢åŠ å‰ç¼€ <code>idx_</code></li><li><code>USING INVERTED</code> æ˜¯å¿…é¡»çš„ï¼Œç”¨äºæŒ‡å®šç´¢å¼•ç±»å‹æ˜¯å€’æ’ç´¢å¼•</li><li><code>PROPERTIES</code> æ˜¯å¯é€‰çš„ï¼Œç”¨äºæŒ‡å®šå€’æ’ç´¢å¼•çš„é¢å¤–å±æ€§ï¼Œç›®å‰æ”¯æŒçš„å±æ€§å¦‚ä¸‹ï¼š</li></ol><details class="lake-collapse"><summary id="u5223fe10"><span class="ne-text" style="background-color: rgb(238, 249, 253); font-size: 16px">parser æŒ‡å®šåˆ†è¯å™¨</span></summary><ul class="ne-ul"><li id="u395f2e55" data-lake-index-type="0"><span class="ne-text">é»˜è®¤ä¸æŒ‡å®šä»£è¡¨ä¸åˆ†è¯</span></li><li id="udce606be" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">english</span></code><span class="ne-text"> æ˜¯è‹±æ–‡åˆ†è¯ï¼Œé€‚åˆè¢«ç´¢å¼•åˆ—æ˜¯è‹±æ–‡çš„æƒ…å†µï¼Œç”¨ç©ºæ ¼å’Œæ ‡ç‚¹ç¬¦å·åˆ†è¯ï¼Œæ€§èƒ½é«˜</span></li><li id="uac2b6d4e" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">chinese</span></code><span class="ne-text"> æ˜¯ä¸­æ–‡åˆ†è¯ï¼Œé€‚åˆè¢«ç´¢å¼•åˆ—ä¸»è¦æ˜¯ä¸­æ–‡çš„æƒ…å†µï¼Œæ€§èƒ½æ¯” English åˆ†è¯ä½</span></li><li id="ubf4f123b" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">unicode</span></code><span class="ne-text"> æ˜¯å¤šè¯­è¨€æ··åˆç±»å‹åˆ†è¯ï¼Œé€‚ç”¨äºä¸­è‹±æ–‡æ··åˆã€å¤šè¯­è¨€æ··åˆçš„æƒ…å†µã€‚å®ƒèƒ½å¤Ÿå¯¹é‚®ç®±å‰ç¼€å’Œåç¼€ã€IP åœ°å€ä»¥åŠå­—ç¬¦æ•°å­—æ··åˆè¿›è¡Œåˆ†è¯ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ä¸­æ–‡æŒ‰å­—ç¬¦åˆ†è¯ã€‚</span></li></ul></details><details class="lake-collapse"><summary id="u9c40f6a7"><span class="ne-text" style="background-color: rgb(238, 249, 253); font-size: 16px">parser_mode</span></summary><ul class="ne-ul"><li id="u3372205b" data-lake-index-type="0"><span class="ne-text">ç”¨äºæŒ‡å®šåˆ†è¯çš„æ¨¡å¼ï¼Œç›®å‰ parser = chinese æ—¶æ”¯æŒå¦‚ä¸‹å‡ ç§æ¨¡å¼ï¼š</span></li><li id="u33e7d639" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">fine_grained</span></code><span class="ne-text">ï¼šç»†ç²’åº¦æ¨¡å¼ï¼Œå€¾å‘äºåˆ†å‡ºæ¯”è¾ƒçŸ­ã€è¾ƒå¤šçš„è¯ï¼Œæ¯”å¦‚ 'æ­¦æ±‰å¸‚é•¿æ±Ÿå¤§æ¡¥' ä¼šåˆ†æˆ 'æ­¦æ±‰', 'æ­¦æ±‰å¸‚', 'å¸‚é•¿', 'é•¿æ±Ÿ', 'é•¿æ±Ÿå¤§æ¡¥', 'å¤§æ¡¥' 6 ä¸ªè¯</span></li><li id="uf3cd26d4" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">coarse_grained</span></code><span class="ne-text">ï¼šç²—ç²’åº¦æ¨¡å¼ï¼Œå€¾å‘äºåˆ†å‡ºæ¯”è¾ƒé•¿ã€è¾ƒå°‘çš„è¯ï¼Œï¼Œæ¯”å¦‚ 'æ­¦æ±‰å¸‚é•¿æ±Ÿå¤§æ¡¥' ä¼šåˆ†æˆ 'æ­¦æ±‰å¸‚' 'é•¿æ±Ÿå¤§æ¡¥' 2 ä¸ªè¯</span></li><li id="u90a5a5ae" data-lake-index-type="0"><span class="ne-text">é»˜è®¤ </span><code class="ne-code"><span class="ne-text">coarse_grained</span></code></li></ul></details><details class="lake-collapse"><summary id="ubab2f76d"><span class="ne-text" style="background-color: rgb(238, 249, 253); font-size: 16px">support_phrase</span></summary><ul class="ne-ul"><li id="u1fc8275e" data-lake-index-type="0"><span class="ne-text">ç”¨äºæŒ‡å®šç´¢å¼•æ˜¯å¦æ”¯æŒ MATCH_PHRASE çŸ­è¯­æŸ¥è¯¢åŠ é€Ÿ</span></li><li id="ua06f46f3" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">true</span></code><span class="ne-text"> ä¸ºæ”¯æŒï¼Œä½†æ˜¯ç´¢å¼•éœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´</span></li><li id="u85d98b4a" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">false</span></code><span class="ne-text"> ä¸ºä¸æ”¯æŒï¼Œæ›´çœå­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥ç”¨ MATCH_ALL æŸ¥è¯¢å¤šä¸ªå…³é”®å­—</span></li><li id="u6675a685" data-lake-index-type="0"><span class="ne-text">é»˜è®¤ </span><code class="ne-code"><span class="ne-text">false</span></code></li></ul><p id="u6479496b" class="ne-p"><span class="ne-text">ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­æŒ‡å®šä¸­æ–‡åˆ†è¯ï¼Œç²—ç²’åº¦æ¨¡å¼ï¼Œæ”¯æŒçŸ­è¯­æŸ¥è¯¢åŠ é€Ÿ</span></p><pre data-language="sql" id="UrvyK" class="ne-codeblock language-sql"><code>INDEX idx_name(column_name) USING INVERTED PROPERTIES(&quot;parser&quot; = &quot;chinese&quot;, &quot;parser_mode&quot; = &quot;coarse_grained&quot;, &quot;support_phrase&quot; = &quot;true&quot;)</code></pre></details><details class="lake-collapse"><summary id="u3ec7d1b2"><span class="ne-text" style="background-color: rgb(238, 249, 253); font-size: 16px">char_filter</span></summary><ul class="ne-ul"><li id="ud30e428a" data-lake-index-type="0"><span class="ne-text">ç”¨äºæŒ‡å®šåœ¨åˆ†è¯å‰å¯¹æ–‡æœ¬è¿›è¡Œé¢„å¤„ç†ï¼Œé€šå¸¸ç”¨äºå½±å“åˆ†è¯è¡Œä¸º</span></li><li id="udd6b4842" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">char_filter_type</span></code><span class="ne-text">ï¼šæŒ‡å®šä½¿ç”¨ä¸åŒåŠŸèƒ½çš„ char_filterï¼ˆç›®å‰ä»…æ”¯æŒ char_replaceï¼‰</span></li><li id="u4f6cd0ce" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">char_replace</span></code><span class="ne-text"> å°† pattern ä¸­æ¯ä¸ª char æ›¿æ¢ä¸ºä¸€ä¸ª replacement ä¸­çš„ char</span></li></ul><ul class="ne-ul"><li id="u954f6d2c" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">char_filter_pattern</span></code><span class="ne-text">ï¼šéœ€è¦è¢«æ›¿æ¢æ‰çš„å­—ç¬¦æ•°</span></li><li id="u474c9fc9" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">char_filter_replacement</span></code><span class="ne-text">ï¼šæ›¿æ¢åçš„å­—ç¬¦æ•°ç»„ï¼Œå¯ä»¥ä¸ç”¨é…ç½®ï¼Œé»˜è®¤ä¸ºä¸€ä¸ªç©ºæ ¼å­—ç¬¦</span></li></ul><p id="u51fb42b8" class="ne-p"><span class="ne-text">ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­å°†ç‚¹å’Œä¸‹åˆ’çº¿æ›¿æ¢æˆç©ºæ ¼ï¼Œè¾¾åˆ°å°†ç‚¹å’Œä¸‹åˆ’çº¿ä½œä¸ºå•è¯åˆ†éš”ç¬¦çš„ç›®çš„ï¼Œå½±å“åˆ†è¯è¡Œä¸ºã€‚</span></p><pre data-language="sql" id="dF7J9" class="ne-codeblock language-sql"><code>INDEX idx_name(column_name) USING INVERTED PROPERTIES(&quot;parser&quot; = &quot;unicode&quot;, &quot;char_filter_type&quot; = &quot;char_replace&quot;, &quot;char_filter_pattern&quot; = &quot;._&quot;, &quot;char_filter_replacement&quot; = &quot; &quot;)</code></pre></details><details class="lake-collapse"><summary id="ub5c4f7a4"><span class="ne-text" style="background-color: rgb(238, 249, 253); font-size: 16px">ignore_above</span></summary><ul class="ne-ul"><li id="ud2f7eb11" data-lake-index-type="0"><span class="ne-text">ç”¨äºæŒ‡å®šä¸åˆ†è¯å­—ç¬¦ä¸²ç´¢å¼•ï¼ˆæ²¡æœ‰æŒ‡å®šparserï¼‰çš„é•¿åº¦é™åˆ¶</span></li><li id="u6a5a4669" data-lake-index-type="0"><span class="ne-text">é•¿åº¦è¶…è¿‡ </span><code class="ne-code"><span class="ne-text">ignore_above</span></code><span class="ne-text"> è®¾ç½®çš„å­—ç¬¦ä¸²ä¸ä¼šè¢«ç´¢å¼•ã€‚å¯¹äºå­—ç¬¦ä¸²æ•°ç»„ï¼Œignore_above å°†åˆ†åˆ«åº”ç”¨äºæ¯ä¸ªæ•°ç»„å…ƒç´ ï¼Œé•¿åº¦è¶…è¿‡ ignore_above çš„å­—ç¬¦ä¸²å…ƒç´ å°†ä¸è¢«ç´¢å¼•ã€‚</span></li><li id="u1715c381" data-lake-index-type="0"><span class="ne-text">é»˜è®¤ä¸º 256ï¼Œå•ä½æ˜¯å­—èŠ‚</span></li></ul></details><details class="lake-collapse"><summary id="u3e0af09b"><span class="ne-text" style="background-color: rgb(238, 249, 253); font-size: 16px">lower_case</span></summary><ul class="ne-ul"><li id="u25f8b77d" data-lake-index-type="0"><span class="ne-text">æ˜¯å¦å°†åˆ†è¯è¿›è¡Œå°å†™è½¬æ¢ï¼Œä»è€Œåœ¨åŒ¹é…çš„æ—¶å€™å®ç°å¿½ç•¥å¤§å°å†™</span></li><li id="u2857ddf3" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">true</span></code><span class="ne-text">: è½¬æ¢å°å†™</span></li><li id="u734e63b4" data-lake-index-type="0"><code class="ne-code"><span class="ne-text">false</span></code><span class="ne-text">ï¼šä¸è½¬æ¢å°å†™</span></li><li id="ubaaef888" data-lake-index-type="0"><span class="ne-text">ä» 2.1.2 ç‰ˆæœ¬å¼€å§‹é»˜è®¤ä¸º trueï¼Œè‡ªåŠ¨è½¬å°å†™ï¼Œä¹‹å‰çš„ç‰ˆæœ¬é»˜è®¤ä¸º false</span></li></ul></details>+ æ·»åŠ å€’æ’ç´¢å¼•<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¯­æ³• 1</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_name <span class="keyword">ON</span> table_name(column_name) <span class="keyword">USING</span> INVERTED [PROPERTIES(...)] [COMMENT <span class="string">&#x27;your comment&#x27;</span>];</span><br><span class="line"><span class="comment">-- è¯­æ³• 2</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> INDEX idx_name(column_name) <span class="keyword">USING</span> INVERTED [PROPERTIES(...)] [COMMENT <span class="string">&#x27;your comment&#x27;</span>];</span><br></pre></td></tr></table></figure><ul><li>æ„å»ºå€’æ’ç´¢å¼•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¯­æ³• 1ï¼Œé»˜è®¤ç»™å…¨è¡¨çš„æ‰€æœ‰åˆ†åŒº BUILD INDEX</span></span><br><span class="line">BUILD INDEX index_name <span class="keyword">ON</span> table_name;</span><br><span class="line"><span class="comment">-- è¯­æ³• 2ï¼Œå¯æŒ‡å®š Partitionï¼Œå¯æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ª</span></span><br><span class="line">BUILD INDEX index_name <span class="keyword">ON</span> table_name PARTITIONS(partition_name1, partition_name2);</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹æ„å»ºé€Ÿåº¦</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> BUILD INDEX [<span class="keyword">FROM</span> db_name];</span><br><span class="line"><span class="comment">-- ç¤ºä¾‹ 1ï¼ŒæŸ¥çœ‹æ‰€æœ‰çš„ BUILD INDEX ä»»åŠ¡è¿›å±•</span></span><br><span class="line"><span class="keyword">SHOW</span> BUILD INDEX;</span><br><span class="line"><span class="comment">-- ç¤ºä¾‹ 2ï¼ŒæŸ¥çœ‹æŒ‡å®š table çš„ BUILD INDEX ä»»åŠ¡è¿›å±•</span></span><br><span class="line"><span class="keyword">SHOW</span> BUILD INDEX <span class="keyword">where</span> TableName <span class="operator">=</span> &quot;table1&quot;;</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤å€’æ’ç´¢å¼•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¯­æ³• 1</span></span><br><span class="line"><span class="keyword">DROP</span> INDEX idx_name <span class="keyword">ON</span> table_name;</span><br><span class="line"><span class="comment">-- è¯­æ³• 2</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">DROP</span> INDEX idx_name;</span><br></pre></td></tr></table></figure><ul><li>åŠ é€ŸæŸ¥è¯¢çš„ä¾‹å­</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. å…¨æ–‡æ£€ç´¢å…³é”®è¯åŒ¹é…ï¼Œé€šè¿‡ MATCH_ANY MATCH_ALL å®Œæˆ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> column_name MATCH_ANY <span class="operator">|</span> MATCH_ALL <span class="string">&#x27;keyword1 ...&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.1 content åˆ—ä¸­åŒ…å« keyword1 çš„è¡Œ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_ANY <span class="string">&#x27;keyword1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.2 content åˆ—ä¸­åŒ…å« keyword1 æˆ–è€… keyword2 çš„è¡Œï¼Œåé¢è¿˜å¯ä»¥æ·»åŠ å¤šä¸ª keyword</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_ANY <span class="string">&#x27;keyword1 keyword2&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.3 content åˆ—ä¸­åŒæ—¶åŒ…å« keyword1 å’Œ keyword2 çš„è¡Œï¼Œåé¢è¿˜å¯ä»¥æ·»åŠ å¤šä¸ª keyword</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_ALL <span class="string">&#x27;keyword1 keyword2&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. å…¨æ–‡æ£€ç´¢çŸ­è¯­åŒ¹é…ï¼Œé€šè¿‡ MATCH_PHRASE å®Œæˆ</span></span><br><span class="line"><span class="comment">-- 2.1 content åˆ—ä¸­åŒæ—¶åŒ…å« keyword1 å’Œ keyword2 çš„è¡Œï¼Œè€Œä¸” keyword2 å¿…é¡»ç´§è·Ÿåœ¨ keyword1 åé¢</span></span><br><span class="line"><span class="comment">-- &#x27;keyword1 keyword2&#x27;ï¼Œ&#x27;wordx keyword1 keyword2&#x27;ï¼Œ&#x27;wordx keyword1 keyword2 wordy&#x27; èƒ½åŒ¹é…ï¼Œå› ä¸ºä»–ä»¬éƒ½åŒ…å«keyword1 keyword2ï¼Œè€Œä¸”keyword2 ç´§è·Ÿåœ¨ keyword1 åé¢</span></span><br><span class="line"><span class="comment">-- &#x27;keyword1 wordx keyword2&#x27; ä¸èƒ½åŒ¹é…ï¼Œå› ä¸º keyword1 keyword2 ä¹‹é—´éš”äº†ä¸€ä¸ªè¯ wordx</span></span><br><span class="line"><span class="comment">-- &#x27;keyword2 keyword1&#x27;ï¼Œå› ä¸º keyword1 keyword2 çš„é¡ºåºåäº†</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_PHRASE <span class="string">&#x27;keyword1 keyword2&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.2 content åˆ—ä¸­åŒæ—¶åŒ…å« keyword1 å’Œ keyword2 çš„è¡Œï¼Œè€Œä¸” keyword1 keyword2 çš„ `è¯è·`ï¼ˆslopï¼‰ ä¸è¶…è¿‡3</span></span><br><span class="line"><span class="comment">-- &#x27;keyword1 keyword2&#x27;, &#x27;keyword1 a keyword2&#x27;, &#x27;keyword1 a b c keyword2&#x27; éƒ½èƒ½åŒ¹é…ï¼Œå› ä¸ºkeyword1 keyword2ä¸­é—´éš”çš„è¯åˆ†åˆ«æ˜¯0 1 3 éƒ½ä¸è¶…è¿‡3</span></span><br><span class="line"><span class="comment">-- &#x27;keyword1 a b c d keyword2&#x27; ä¸èƒ½èƒ½åŒ¹é…ï¼Œå› ä¸ºkeyword1 keyword2ä¸­é—´éš”çš„è¯æœ‰4ä¸ªï¼Œè¶…è¿‡3</span></span><br><span class="line"><span class="comment">-- &#x27;keyword2 keyword1&#x27;, &#x27;keyword2 a keyword1&#x27;, &#x27;keyword2 a b c keyword1&#x27; ä¹Ÿèƒ½åŒ¹é…ï¼Œå› ä¸ºæŒ‡å®š slop &gt; 0 æ—¶ä¸å†è¦æ±‚keyword1 keyword2 çš„é¡ºåºã€‚è¿™ä¸ªè¡Œä¸ºå‚è€ƒäº† ESï¼Œä¸ç›´è§‰çš„é¢„æœŸä¸ä¸€æ ·ï¼Œå› æ­¤ Doris æä¾›äº†åœ¨ slop åé¢æŒ‡å®šæ­£æ•°ç¬¦å·ï¼ˆ+ï¼‰è¡¨ç¤ºéœ€è¦ä¿æŒ keyword1 keyword2 çš„å…ˆåé¡ºåº</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_PHRASE <span class="string">&#x27;keyword1 keyword2 ~3&#x27;</span>;</span><br><span class="line"><span class="comment">-- slop æŒ‡å®šæ­£å·ï¼Œ&#x27;keyword1 a b c keyword2&#x27; èƒ½åŒ¹é…ï¼Œè€Œ &#x27;keyword2 a b c keyword1&#x27; ä¸èƒ½åŒ¹é…</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_PHRASE <span class="string">&#x27;keyword1 keyword2 ~3+&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.3 åœ¨ä¿æŒè¯é¡ºåºçš„å‰æä¸‹ï¼Œå¯¹æœ€åä¸€ä¸ªè¯keyword2åšå‰ç¼€åŒ¹é…ï¼Œé»˜è®¤æ‰¾50ä¸ªå‰ç¼€è¯ï¼ˆsessionå˜é‡inverted_index_max_expansionsæ§åˆ¶ï¼‰</span></span><br><span class="line"><span class="comment">-- &#x27;keyword1 keyword2abc&#x27; èƒ½åŒ¹é…ï¼Œå› ä¸ºkeyword1å®Œå…¨ä¸€æ ·ï¼Œæœ€åä¸€ä¸ª keyword2abc æ˜¯ keyword2 çš„å‰ç¼€</span></span><br><span class="line"><span class="comment">-- &#x27;keyword1 keyword2&#x27; ä¹Ÿèƒ½åŒ¹é…ï¼Œå› ä¸º keyword2 ä¹Ÿæ˜¯ keyword2 çš„å‰ç¼€</span></span><br><span class="line"><span class="comment">-- &#x27;keyword1 keyword3&#x27; ä¸èƒ½åŒ¹é…ï¼Œå› ä¸º keyword3 ä¸æ˜¯ keyword2 çš„å‰ç¼€</span></span><br><span class="line"><span class="comment">-- &#x27;keyword1 keyword3abc&#x27; ä¹Ÿä¸èƒ½åŒ¹é…ï¼Œå› ä¸º keyword3abc ä¹Ÿä¸æ˜¯ keyword2 çš„å‰ç¼€</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_PHRASE_PREFIX <span class="string">&#x27;keyword1 keyword2&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.4 å¦‚æœåªå¡«ä¸€ä¸ªè¯ä¼šé€€åŒ–ä¸ºå‰ç¼€æŸ¥è¯¢ï¼Œé»˜è®¤æ‰¾50ä¸ªå‰ç¼€è¯ï¼ˆsessionå˜é‡inverted_index_max_expansionsæ§åˆ¶ï¼‰</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_PHRASE_PREFIX <span class="string">&#x27;keyword1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.5 å¯¹åˆ†è¯åçš„è¯è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œé»˜è®¤åŒ¹é…50ä¸ªï¼ˆsessionå˜é‡inverted_index_max_expansionsæ§åˆ¶ï¼‰</span></span><br><span class="line"><span class="comment">-- ç±»ä¼¼ MATCH_PHRASE_PREFIX çš„åŒ¹é…è§„åˆ™ï¼Œåªæ˜¯å‰ç¼€å˜æˆäº†æ­£åˆ™</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> content MATCH_REGEXP <span class="string">&#x27;key*&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. æ™®é€šç­‰å€¼ã€èŒƒå›´ã€INã€NOT INï¼Œæ­£å¸¸çš„ SQL è¯­å¥å³å¯ï¼Œä¾‹å¦‚</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">123</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> ts <span class="operator">&gt;</span> <span class="string">&#x27;2023-01-01 00:00:00&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> op_type <span class="keyword">IN</span> (<span class="string">&#x27;add&#x27;</span>, <span class="string">&#x27;delete&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li>åœ¨åˆ›å»ºç´¢å¼•æ—¶ï¼Œéœ€è¦æ ¹æ®å®é™…çš„æŸ¥è¯¢éœ€æ±‚å’Œæ•°æ®ç‰¹ç‚¹æ¥é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç±»å‹ã€‚</li><li>ç´¢å¼•è™½ç„¶å¯ä»¥æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œä½†ä¹Ÿä¼šå¢åŠ å†™å…¥å’Œæ›´æ–°çš„å¼€é”€ã€‚å› æ­¤ï¼Œéœ€è¦åœ¨æ€§èƒ½å’Œå†™å…¥æ•ˆç‡ä¹‹é—´åšå‡ºæƒè¡¡ã€‚</li><li>å®šæœŸç›‘æ§ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µå’Œæ€§èƒ½è¡¨ç°ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ã€‚</li></ul><p>æ€»ä¹‹ï¼Œåœ¨Dorisä¸­æ·»åŠ ç´¢å¼•æ˜¯ä¸€ä¸ªå¤æ‚ä½†é‡è¦çš„è¿‡ç¨‹ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„åœºæ™¯å’Œéœ€æ±‚æ¥é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç±»å‹å’Œåˆ›å»ºæ–¹å¼ã€‚é€šè¿‡åˆç†çš„ç´¢å¼•è®¾è®¡ï¼Œå¯ä»¥æ˜¾è‘—æå‡æŸ¥è¯¢æ€§èƒ½å¹¶ä¼˜åŒ–æ•°æ®åº“çš„æ•´ä½“è¡¨ç°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Doris </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoopä¸hiveç‰ˆæœ¬å¯¹åº”</title>
      <link href="/2024/04/23/Hadoop%E4%B8%8Ehive%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94/"/>
      <url>/2024/04/23/Hadoop%E4%B8%8Ehive%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94/</url>
      
        <content type="html"><![CDATA[<blockquote><p> <a href="https://blog.csdn.net/qq_33772352/article/details/132234919">https://blog.csdn.net/qq_33772352&#x2F;article&#x2F;details&#x2F;132234919</a></p></blockquote><h3 id="Hadoopä¸Hbaseç‰ˆæœ¬å¯¹åº”"><a href="#Hadoopä¸Hbaseç‰ˆæœ¬å¯¹åº”" class="headerlink" title="Hadoopä¸Hbaseç‰ˆæœ¬å¯¹åº”"></a>Hadoopä¸Hbaseç‰ˆæœ¬å¯¹åº”</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/34758360/1732957998405-aaf8a889-67ba-438f-a4cf-4541c109e18f.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/34758360/1732958007034-b6ade2ee-6fe2-4055-a657-79282a492125.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/34758360/1732958016425-8c854ab7-be7b-403e-8aee-1692c27ac767.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/34758360/1732958025850-658d2aa2-4722-418f-bee1-4d5281d13c2d.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/34758360/1732958037786-90d6e842-a4a4-4be7-9e72-0d69e21113d7.png"></p><hr><h3 id="Hadoopä¸Hiveç‰ˆæœ¬å¯¹åº”"><a href="#Hadoopä¸Hiveç‰ˆæœ¬å¯¹åº”" class="headerlink" title="Hadoopä¸Hiveç‰ˆæœ¬å¯¹åº”"></a>Hadoopä¸Hiveç‰ˆæœ¬å¯¹åº”</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/34758360/1732958090385-0669bd00-832e-4aaa-ac46-7036b67ed001.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/34758360/1732958103298-02e53f77-2e2c-4efd-9611-a7d9b466a3e8.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/34758360/1732958110079-93e247ca-8609-494b-bdac-0febae780511.png"></p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>G2å›¾ä½¿ç”¨-åˆ›å»ºç®€å•çš„æŸ±çŠ¶å›¾</title>
      <link href="/2024/04/23/G2%E5%9B%BE%E4%BD%BF%E7%94%A8-%E5%88%9B%E5%BB%BA%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%B1%E7%8A%B6%E5%9B%BE/"/>
      <url>/2024/04/23/G2%E5%9B%BE%E4%BD%BF%E7%94%A8-%E5%88%9B%E5%BB%BA%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%B1%E7%8A%B6%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>g2plot æ˜¯ä¸€å¥—ç®€å•ã€æ˜“ç”¨ã€å¹¶å…·å¤‡ä¸€å®šæ‰©å±•èƒ½åŠ›å’Œç»„åˆèƒ½åŠ›çš„ç»Ÿè®¡å›¾è¡¨åº“ï¼ŒåŸºäºå›¾å½¢è¯­æ³•ç†è®ºæ­å»ºè€Œæˆï¼Œâ€g2plotâ€ä¸­çš„ g2 å³æ„æŒ‡å›¾å½¢è¯­æ³• (the Gramma of Graphics)ï¼ŒåŒæ—¶ä¹Ÿè‡´æ•¬äº† ggplot2ã€‚</p></blockquote><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ˜¯ç”¨ä¾‹å­</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;chartRef&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; onMounted, ref, defineProps, toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; <span class="title class_">Chart</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@antv/g2&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123; <span class="attr">config</span>: <span class="title class_">Object</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; config &#125; = <span class="title function_">toRefs</span>(props)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> chartRef = <span class="title function_">ref</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">initChart</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> chart = <span class="keyword">new</span> <span class="title class_">Chart</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    ...config.<span class="property">value</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">container</span>: chartRef.<span class="property">value</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">autoFit</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">forceFit</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  chart</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// .theme(&#123; type: &#x27;classicDark&#x27; &#125;)</span></span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">title</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">title</span>: <span class="string">`æœˆ<span class="subst">$&#123;<span class="variable language_">window</span>.CONFIG.systemName&#125;</span>åˆ†æ`</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// subtitle: &#x27;world&#x27;,</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">interval</span>()</span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">data</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="string">&#x27;fetch&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">value</span>: <span class="string">&#x27;/api/hdfs/read-csv?path=/output/hdfsJobByMonth/part-r-00000&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">format</span>: <span class="string">&#x27;csv&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// å¦‚æœæ˜¯csvæ–‡ä»¶ï¼Œåˆ™è‡ªåŠ¨åˆ¤æ–­æ•°æ®ç±»å‹</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">autoType</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">transform</span>: [</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// &#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//   type: &#x27;log&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// &#125;,</span></span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&#x27;map&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">callback</span>: <span class="function">(<span class="params">val</span>) =&gt;</span> &#123; val[<span class="string">&#x27;å¹´æœˆ&#x27;</span>] = val[<span class="string">&#x27;æ—¶é—´&#x27;</span>] + <span class="string">&#x27;æœˆ&#x27;</span>; <span class="keyword">return</span> val; &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&#x27;sortBy&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">fields</span>: [<span class="string">&#x27;æ—¶é—´&#x27;</span>], <span class="comment">// æ ¹æ® sold å­—æ®µæ’åº</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// fold è¿™æ˜¯ç”Ÿæˆä¸€ä¸ªkey value çš„map</span></span></span><br><span class="line"><span class="language-javascript">        &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&#x27;fold&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">fields</span>: <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">dataHeader</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">key</span>: <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">chartX</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">value</span>: <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">chartY</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      ],</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">encode</span>(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;å¹´æœˆ&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">encode</span>(<span class="string">&#x27;y&#x27;</span>, <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">chartY</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// dodgeX ç”Ÿæˆ series é€šé“å€¼ä¸º color é€šé“çš„å€¼ï¼Œæ ¹æ® series é€šé“å®ç°åˆ†ç»„æ•ˆæœ</span></span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">transform</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;dodgeX&#x27;</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ ¹æ® window.CONFIG.chartX é¢œè‰²è¿›è¡ŒåŒºåˆ†ï¼Œå¦‚æœä¸åŠ ï¼Œåˆ™æ˜¾ç¤ºå…¨éƒ¨æ•°æ®é¢œè‰²å›ºå®š</span></span></span><br><span class="line"><span class="language-javascript">    .<span class="title function_">encode</span>(<span class="string">&#x27;color&#x27;</span>, <span class="variable language_">window</span>.<span class="property">CONFIG</span>.<span class="property">chartX</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// .encode(&#x27;shape&#x27;, &#x27;hv&#x27;)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// .scale(&#x27;x&#x27;, &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     range: [0, 1],</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// .scale(&#x27;y&#x27;, &#123;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//     nice: true,</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// .axis(&#x27;x&#x27;, &#123; title: null, line: true, tick: true &#125;)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// .axis(&#x27;y&#x27;, &#123; </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//   title: null, </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//   line: true, </span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// chart.line()</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// // chart.line().encode(&#x27;shape&#x27;, &#x27;smooth&#x27;);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// chart.point().encode(&#x27;shape&#x27;, &#x27;point&#x27;).tooltip(false);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  chart.<span class="title function_">render</span>();</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">return</span> chart;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(chartRef.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">initChart</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼š <em>.encode(â€˜colorâ€™, window.CONFIG.chartX)</em> ç”¨æ¥å®ç°çš„æ˜¯å›¾ä¾‹ï¼Œå›¾ä¾‹çš„å†…å®¹ä¸º window.CONFIG.chartX ï¼Œå…¶ä¸­color å¯ä»¥è¿›è¡Œå˜åŒ–</p><p>å› ä¸º <em>prop</em> æ¥å—äº†ä¸»é¢˜çš„é…ç½®ï¼Œæ‰€æœ‰çš„é¢œè‰²éƒ½ä¼šæ ¹æ®ä¸»é¢˜çš„index.jsè¿›è¡Œå˜åŒ–</p><hr><p>å¦å¤– <em>fetch</em> é€šè¿‡æ‹‰å– hdfs ä¸­ç®—å¥½çš„ csv æ–‡ä»¶æ¥è·å¾—å€¼ï¼Œé‡Œé¢çš„ <em>transform</em> å¯¹å€¼è¿›è¡Œè½¬æ¢ï¼Œå…¶ä¸­ <em>type fold</em> èƒ½ç”Ÿæˆä¸€ä¸ª <em>key value</em> çš„map</p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> G2 </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoopå®‰è£…å’Œå¯ç”¨</title>
      <link href="/2024/04/23/Hadoop%E5%AE%89%E8%A3%85%E5%92%8C%E5%90%AF%E7%94%A8/"/>
      <url>/2024/04/23/Hadoop%E5%AE%89%E8%A3%85%E5%92%8C%E5%90%AF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="Hadoopç®€ä»‹"><a href="#Hadoopç®€ä»‹" class="headerlink" title="Hadoopç®€ä»‹"></a>Hadoopç®€ä»‹</h2><p>Hadoopæ˜¯Apacheè½¯ä»¶åŸºé‡‘ä¼šçš„ä¸€ä¸ªå¼€æºåˆ†å¸ƒå¼è®¡ç®—å¹³å°ï¼Œä¸»è¦ç”±HDFSï¼ˆåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰ã€MapReduceï¼ˆåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼‰å’ŒYARNï¼ˆèµ„æºç®¡ç†ç³»ç»Ÿï¼‰ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆã€‚å®ƒå…è®¸ä½¿ç”¨ç®€å•çš„ç¼–ç¨‹æ¨¡å‹åœ¨ç”±å¤šå°è®¡ç®—æœºç»„æˆçš„å¤§å‹é›†ç¾¤ä¸Šåˆ†å¸ƒå¼å¤„ç†å¤§æ•°æ®é›†ã€‚Hadoopå…·æœ‰é«˜å¯é æ€§ã€é«˜æ‰©å±•æ€§ã€é«˜å®¹é”™æ€§å’Œé«˜æ•ˆæ€§ç­‰ç‰¹ç‚¹ï¼Œå·²æˆä¸ºå¤§æ•°æ®å¤„ç†çš„æ ‡å‡†å¹³å°ã€‚</p><h2 id="å‰ææ¡ä»¶"><a href="#å‰ææ¡ä»¶" class="headerlink" title="å‰ææ¡ä»¶"></a>å‰ææ¡ä»¶</h2><p>åœ¨å®‰è£…Hadoopä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š</p><ol><li>å·²å®‰è£…JDKï¼ˆæ¨èJDK 8æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰</li><li>é…ç½®äº†SSHæ— å¯†ç ç™»å½•ï¼ˆå¯¹äºé›†ç¾¤ç¯å¢ƒï¼‰</li><li>åˆ†é…äº†è¶³å¤Ÿçš„ç³»ç»Ÿèµ„æºï¼ˆå†…å­˜ã€å­˜å‚¨ç©ºé—´ï¼‰</li></ol><h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><h3 id="è®¾ç½®Hadoopç¯å¢ƒå˜é‡"><a href="#è®¾ç½®Hadoopç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®Hadoopç¯å¢ƒå˜é‡"></a>è®¾ç½®Hadoopç¯å¢ƒå˜é‡</h3><p>ç¯å¢ƒå˜é‡é…ç½®æ˜¯ä½¿ç”¨Hadoopçš„ç¬¬ä¸€æ­¥ï¼Œå®ƒä½¿ç³»ç»Ÿèƒ½å¤Ÿæ‰¾åˆ°Hadoopçš„å¯æ‰§è¡Œæ–‡ä»¶å’Œåº“ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¾‘~/.bashrcæˆ–/etc/profileæ–‡ä»¶</span></span><br><span class="line">vim ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ä»¥ä¸‹å†…å®¹</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/soft/hadoop</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿é…ç½®ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li><code>HADOOP_HOME</code>æŒ‡å‘Hadoopçš„å®‰è£…ç›®å½•</li><li>å°†Hadoopçš„binå’Œsbinç›®å½•æ·»åŠ åˆ°PATHä¸­ï¼Œä½¿å‘½ä»¤å¯ä»¥ç›´æ¥æ‰§è¡Œ</li><li>æ ¹æ®å®é™…å®‰è£…è·¯å¾„è°ƒæ•´<code>/soft/hadoop</code></li></ul><h2 id="Hadoopå¯åŠ¨æµç¨‹"><a href="#Hadoopå¯åŠ¨æµç¨‹" class="headerlink" title="Hadoopå¯åŠ¨æµç¨‹"></a>Hadoopå¯åŠ¨æµç¨‹</h2><h3 id="1-å¯åŠ¨HDFS"><a href="#1-å¯åŠ¨HDFS" class="headerlink" title="1. å¯åŠ¨HDFS"></a>1. å¯åŠ¨HDFS</h3><p>HDFSï¼ˆHadoopåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰æ˜¯Hadoopçš„å­˜å‚¨å±‚ï¼Œéœ€è¦é¦–å…ˆå¯åŠ¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨Hadoopçš„å®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</span></span><br><span class="line">sbin/start-dfs.sh</span><br></pre></td></tr></table></figure><p><strong>å¯åŠ¨è¿‡ç¨‹</strong>ï¼š</p><ol><li>å¯åŠ¨NameNodeï¼ˆä¸»èŠ‚ç‚¹ï¼‰</li><li>å¯åŠ¨DataNodeï¼ˆæ•°æ®èŠ‚ç‚¹ï¼‰</li><li>å¯åŠ¨Secondary NameNodeï¼ˆè¾…åŠ©åç§°èŠ‚ç‚¹ï¼‰</li></ol><p><strong>éªŒè¯HDFSå¯åŠ¨æˆåŠŸ</strong>ï¼š</p><p>æ‰§è¡Œ<code>jps</code>å‘½ä»¤ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ä»¥ä¸‹è¿›ç¨‹ï¼š</p><ul><li>NameNode</li><li>DataNode</li><li>SecondaryNameNode</li></ul><p><img src="/img/posts/933d077ea71ce76f6eeb8261ff01e19d.png" alt="HDFSè¿›ç¨‹éªŒè¯"></p><p>ä¹Ÿå¯ä»¥é€šè¿‡Webç•Œé¢è®¿é—®HDFSï¼š<code>http://localhost:9870</code></p><h3 id="2-å¯åŠ¨YARN"><a href="#2-å¯åŠ¨YARN" class="headerlink" title="2. å¯åŠ¨YARN"></a>2. å¯åŠ¨YARN</h3><p>YARNï¼ˆYet Another Resource Negotiatorï¼‰æ˜¯Hadoopçš„èµ„æºç®¡ç†å’Œä½œä¸šè°ƒåº¦ç³»ç»Ÿã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨Hadoopçš„å®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</span></span><br><span class="line">sbin/start-yarn.sh</span><br></pre></td></tr></table></figure><p><strong>å¯åŠ¨è¿‡ç¨‹</strong>ï¼š</p><ol><li>å¯åŠ¨ResourceManagerï¼ˆèµ„æºç®¡ç†å™¨ï¼‰</li><li>å¯åŠ¨NodeManagerï¼ˆèŠ‚ç‚¹ç®¡ç†å™¨ï¼‰</li></ol><p><strong>éªŒè¯YARNå¯åŠ¨æˆåŠŸ</strong>ï¼š</p><p>æ‰§è¡Œ<code>jps</code>å‘½ä»¤ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ä»¥ä¸‹é¢å¤–è¿›ç¨‹ï¼š</p><ul><li>ResourceManager</li><li>NodeManager</li></ul><p><img src="/img/posts/ae50a01f9413b302a81f567c83bb0a3f.png" alt="YARNè¿›ç¨‹éªŒè¯"></p><p>å¯ä»¥é€šè¿‡Webç•Œé¢è®¿é—®YARNï¼š<code>http://localhost:8088</code></p><h2 id="Sparkä¸Hadoopé›†æˆ"><a href="#Sparkä¸Hadoopé›†æˆ" class="headerlink" title="Sparkä¸Hadoopé›†æˆ"></a>Sparkä¸Hadoopé›†æˆ</h2><p>Apache Sparkæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼Œå¯ä»¥ä¸Hadoopé›†æˆä½¿ç”¨ï¼Œåˆ©ç”¨HDFSå­˜å‚¨æ•°æ®ï¼Œå¹¶é€šè¿‡YARNç®¡ç†èµ„æºã€‚</p><h3 id="å¯åŠ¨Spark"><a href="#å¯åŠ¨Spark" class="headerlink" title="å¯åŠ¨Spark"></a>å¯åŠ¨Spark</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨Sparkçš„å®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ</span></span><br><span class="line">./sbin/start-all.sh</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li>è¿™å°†å¯åŠ¨Sparkçš„Masterå’ŒWorkerèŠ‚ç‚¹</li><li>å¦‚æœé…ç½®äº†ä¸YARNé›†æˆï¼ŒSparkåº”ç”¨å°†é€šè¿‡YARNè°ƒåº¦</li></ul><p><strong>éªŒè¯Sparkå¯åŠ¨æˆåŠŸ</strong>ï¼š</p><ul><li>æ‰§è¡Œ<code>jps</code>å‘½ä»¤ï¼Œåº”è¯¥èƒ½çœ‹åˆ°Masterå’ŒWorkerè¿›ç¨‹</li><li>è®¿é—®Spark Web UIï¼š<code>http://localhost:8080</code></li></ul><h2 id="å¸¸ç”¨æ“ä½œå‘½ä»¤"><a href="#å¸¸ç”¨æ“ä½œå‘½ä»¤" class="headerlink" title="å¸¸ç”¨æ“ä½œå‘½ä»¤"></a>å¸¸ç”¨æ“ä½œå‘½ä»¤</h2><h3 id="HDFSæ–‡ä»¶æ“ä½œ"><a href="#HDFSæ–‡ä»¶æ“ä½œ" class="headerlink" title="HDFSæ–‡ä»¶æ“ä½œ"></a>HDFSæ–‡ä»¶æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹HDFSæ ¹ç›®å½•</span></span><br><span class="line">hdfs dfs -<span class="built_in">ls</span> /</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line">hdfs dfs -<span class="built_in">mkdir</span> /user</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">hdfs dfs -put localfile.txt /user/</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½æ–‡ä»¶</span></span><br><span class="line">hdfs dfs -get /user/file.txt ./</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ–‡ä»¶å†…å®¹</span></span><br><span class="line">hdfs dfs -<span class="built_in">cat</span> /user/file.txt</span><br></pre></td></tr></table></figure><h3 id="YARNä½œä¸šç®¡ç†"><a href="#YARNä½œä¸šç®¡ç†" class="headerlink" title="YARNä½œä¸šç®¡ç†"></a>YARNä½œä¸šç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹åº”ç”¨åˆ—è¡¨</span></span><br><span class="line">yarn application -list</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹åº”ç”¨çŠ¶æ€</span></span><br><span class="line">yarn application -status application_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ€æ­»åº”ç”¨</span></span><br><span class="line">yarn application -<span class="built_in">kill</span> application_id</span><br></pre></td></tr></table></figure><h2 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h2><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><ol><li><p><strong>å¯åŠ¨å¤±è´¥</strong>ï¼š</p><ul><li>æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ï¼ˆlogsç›®å½•ä¸‹ï¼‰</li><li>ç¡®ä¿ç«¯å£æœªè¢«å ç”¨</li><li>éªŒè¯æƒé™è®¾ç½®</li></ul></li><li><p><strong>èŠ‚ç‚¹æœªå¯åŠ¨</strong>ï¼š</p><ul><li>æ£€æŸ¥SSHé…ç½®</li><li>éªŒè¯hostsæ–‡ä»¶é…ç½®</li><li>æ£€æŸ¥é˜²ç«å¢™è®¾ç½®</li></ul></li><li><p><strong>Webç•Œé¢æ— æ³•è®¿é—®</strong>ï¼š</p><ul><li>ç¡®è®¤æœåŠ¡å·²å¯åŠ¨</li><li>æ£€æŸ¥ç½‘ç»œè¿æ¥</li><li>éªŒè¯é˜²ç«å¢™è§„åˆ™</li></ul></li></ol><h2 id="å®Œæ•´å¯åŠ¨æµç¨‹"><a href="#å®Œæ•´å¯åŠ¨æµç¨‹" class="headerlink" title="å®Œæ•´å¯åŠ¨æµç¨‹"></a>å®Œæ•´å¯åŠ¨æµç¨‹</h2><p>å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºå¯åŠ¨Hadoopç”Ÿæ€ç³»ç»Ÿï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. å¯åŠ¨HDFS</span></span><br><span class="line">sbin/start-dfs.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å¯åŠ¨YARN</span></span><br><span class="line">sbin/start-yarn.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å¯åŠ¨å†å²æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line">mapred --daemon start historyserver</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. å¯åŠ¨Sparkï¼ˆå¦‚æœéœ€è¦ï¼‰</span></span><br><span class="line"><span class="built_in">cd</span> /path/to/spark</span><br><span class="line">./sbin/start-all.sh</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ­£ç¡®é…ç½®å’Œå¯åŠ¨Hadoopæ˜¯å¤§æ•°æ®å¤„ç†çš„åŸºç¡€ã€‚é€šè¿‡æœ¬æ–‡çš„æ­¥éª¤ï¼Œæ‚¨åº”è¯¥èƒ½å¤ŸæˆåŠŸè®¾ç½®Hadoopç¯å¢ƒå˜é‡å¹¶å¯åŠ¨Hadoopçš„æ ¸å¿ƒæœåŠ¡ï¼ˆHDFSå’ŒYARNï¼‰ä»¥åŠSparkã€‚è®°å¾—å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶ä»¥ç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼Œå¹¶æ ¹æ®éœ€è¦è°ƒæ•´é…ç½®å‚æ•°ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dorisåˆ†åŒºã€åˆ†ç‰‡ã€å‰¯æœ¬çš„åŸºæœ¬å‘½ä»¤ã€ä¿®å¤å‰¯æœ¬æ€è·¯</title>
      <link href="/2024/04/23/Doris%E5%88%86%E5%8C%BA%E3%80%81%E5%88%86%E7%89%87%E3%80%81%E5%89%AF%E6%9C%AC%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%E3%80%81%E4%BF%AE%E5%A4%8D%E5%89%AF%E6%9C%AC%E6%80%9D%E8%B7%AF/"/>
      <url>/2024/04/23/Doris%E5%88%86%E5%8C%BA%E3%80%81%E5%88%86%E7%89%87%E3%80%81%E5%89%AF%E6%9C%AC%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%E3%80%81%E4%BF%AE%E5%A4%8D%E5%89%AF%E6%9C%AC%E6%80%9D%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="å…³äºå‰¯æœ¬çš„ä¸€äº›æ“ä½œ"><a href="#å…³äºå‰¯æœ¬çš„ä¸€äº›æ“ä½œ" class="headerlink" title="å…³äºå‰¯æœ¬çš„ä¸€äº›æ“ä½œ"></a>å…³äºå‰¯æœ¬çš„ä¸€äº›æ“ä½œ</h2><h3 id="æŸ¥çœ‹å»ºè¡¨è¯­å¥"><a href="#æŸ¥çœ‹å»ºè¡¨è¯­å¥" class="headerlink" title="æŸ¥çœ‹å»ºè¡¨è¯­å¥"></a>æŸ¥çœ‹å»ºè¡¨è¯­å¥</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> my_table</span><br></pre></td></tr></table></figure><h3 id="å…³é—­åŠ¨æ€åˆ†åŒº"><a href="#å…³é—­åŠ¨æ€åˆ†åŒº" class="headerlink" title="å…³é—­åŠ¨æ€åˆ†åŒº"></a>å…³é—­åŠ¨æ€åˆ†åŒº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_table <span class="keyword">SET</span> (  </span><br><span class="line">  &quot;dynamic_partition.enable&quot; <span class="operator">=</span> &quot;false&quot;  </span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_table <span class="keyword">SET</span> (  </span><br><span class="line">  &quot;dynamic_partition.enable&quot; <span class="operator">=</span> &quot;true&quot;  </span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤åˆ†åŒº"><a href="#åˆ é™¤åˆ†åŒº" class="headerlink" title="åˆ é™¤åˆ†åŒº"></a>åˆ é™¤åˆ†åŒº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_table <span class="keyword">DROP</span> <span class="keyword">PARTITION</span> p202309;</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ åˆ†åŒº-é¡ºä¾¿è®¾ç½®å‰¯æœ¬æ•°"><a href="#æ·»åŠ åˆ†åŒº-é¡ºä¾¿è®¾ç½®å‰¯æœ¬æ•°" class="headerlink" title="æ·»åŠ åˆ†åŒº(é¡ºä¾¿è®¾ç½®å‰¯æœ¬æ•°)"></a>æ·»åŠ åˆ†åŒº(é¡ºä¾¿è®¾ç½®å‰¯æœ¬æ•°)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_table <span class="keyword">ADD</span> <span class="keyword">PARTITION</span> p1 <span class="keyword">VALUES</span> LESS THAN (&quot;2015-01-01&quot;) (&quot;replication_num&quot;<span class="operator">=</span>&quot;1&quot;);</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹åˆ†åŒº"><a href="#æŸ¥çœ‹åˆ†åŒº" class="headerlink" title="æŸ¥çœ‹åˆ†åŒº"></a>æŸ¥çœ‹åˆ†åŒº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> [TEMPORARY] PARTITIONS <span class="keyword">FROM</span> [db_name.]table_name [<span class="keyword">WHERE</span>] [<span class="keyword">ORDER</span> <span class="keyword">BY</span>] [LIMIT];</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤åˆ†åŒºå†…çš„æ•°æ®"><a href="#åˆ é™¤åˆ†åŒºå†…çš„æ•°æ®" class="headerlink" title="åˆ é™¤åˆ†åŒºå†…çš„æ•°æ®"></a>åˆ é™¤åˆ†åŒºå†…çš„æ•°æ®</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> my_table <span class="keyword">PARTITION</span>(part01);</span><br></pre></td></tr></table></figure><h3 id="è°ƒæ•´åˆ†åŒºçš„å‰¯æœ¬æ•°"><a href="#è°ƒæ•´åˆ†åŒºçš„å‰¯æœ¬æ•°" class="headerlink" title="è°ƒæ•´åˆ†åŒºçš„å‰¯æœ¬æ•°"></a>è°ƒæ•´åˆ†åŒºçš„å‰¯æœ¬æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> example_db.my_table MODIFY <span class="keyword">PARTITION</span> p1 <span class="keyword">SET</span>(&quot;replication_num&quot;<span class="operator">=</span>&quot;1&quot;);</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹åˆ†ç‰‡çš„å‰¯æœ¬ä¿¡æ¯"><a href="#æŸ¥çœ‹åˆ†ç‰‡çš„å‰¯æœ¬ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹åˆ†ç‰‡çš„å‰¯æœ¬ä¿¡æ¯"></a>æŸ¥çœ‹åˆ†ç‰‡çš„å‰¯æœ¬ä¿¡æ¯</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLETS <span class="keyword">from</span> my_table;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹åˆ†ç‰‡çš„å‰¯æœ¬çŠ¶æ€"><a href="#æŸ¥çœ‹åˆ†ç‰‡çš„å‰¯æœ¬çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹åˆ†ç‰‡çš„å‰¯æœ¬çŠ¶æ€"></a>æŸ¥çœ‹åˆ†ç‰‡çš„å‰¯æœ¬çŠ¶æ€</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADMIN DIAGNOSE TABLET your_tablet_id;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹åˆ†ç‰‡é‡Œçš„å‰¯æœ¬å…·ä½“ä¿¡æ¯"><a href="#æŸ¥çœ‹åˆ†ç‰‡é‡Œçš„å‰¯æœ¬å…·ä½“ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹åˆ†ç‰‡é‡Œçš„å‰¯æœ¬å…·ä½“ä¿¡æ¯"></a>æŸ¥çœ‹åˆ†ç‰‡é‡Œçš„å‰¯æœ¬å…·ä½“ä¿¡æ¯</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLET tabletid</span><br><span class="line"></span><br><span class="line">## è¯¥è¯­å¥è¿”å›ç»“æœä¸­ï¼Œæ‰¾åˆ°`detailCmd`å­—æ®µ å¦‚ä¸‹ â†“</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> PROC <span class="string">&#x27;/dbs/10003/1790279/partitions/1790278/4404968/4405353&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## è¯¥è¯­å¥è¿”å›å­—æ®µä¸­ï¼Œæœ‰urlé“¾æ¥ï¼Œå¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„åˆ†ç‰‡ä¿¡æ¯</span><br><span class="line">## è¯¥åˆ†ç‰‡è¿”å›å¤šå°‘æ¡ï¼Œå°±ä»£è¡¨æœ‰å¤šå°‘å‰¯æœ¬</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å‰¯æœ¬ä¿®å¤çš„è¿›åº¦"><a href="#æŸ¥çœ‹å‰¯æœ¬ä¿®å¤çš„è¿›åº¦" class="headerlink" title="æŸ¥çœ‹å‰¯æœ¬ä¿®å¤çš„è¿›åº¦"></a>æŸ¥çœ‹å‰¯æœ¬ä¿®å¤çš„è¿›åº¦</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> PROC <span class="string">&#x27;/cluster_balance&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹é›†ç¾¤çš„å‰¯æœ¬çŠ¶æ€"><a href="#æŸ¥çœ‹é›†ç¾¤çš„å‰¯æœ¬çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹é›†ç¾¤çš„å‰¯æœ¬çŠ¶æ€"></a>æŸ¥çœ‹é›†ç¾¤çš„å‰¯æœ¬çŠ¶æ€</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> PROC <span class="string">&#x27;/cluster_health/tablet_health&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> PROC <span class="string">&#x27;/cluster_health/tablet_health/13402&#x27;</span>;</span><br><span class="line">## å…¶ä¸­ <span class="number">13402</span> æ˜¯å‰¯æœ¬çš„id</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹è¡¨é‡Œé¢æŒ‡å®šåˆ†åŒºçš„å‰¯æœ¬çŠ¶æ€"><a href="#æŸ¥çœ‹è¡¨é‡Œé¢æŒ‡å®šåˆ†åŒºçš„å‰¯æœ¬çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹è¡¨é‡Œé¢æŒ‡å®šåˆ†åŒºçš„å‰¯æœ¬çŠ¶æ€"></a>æŸ¥çœ‹è¡¨é‡Œé¢æŒ‡å®šåˆ†åŒºçš„å‰¯æœ¬çŠ¶æ€</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ADMIN <span class="keyword">SHOW</span> REPLICA STATUS <span class="keyword">FROM</span> tbl1 <span class="keyword">PARTITION</span> (p1, p2) <span class="keyword">WHERE</span> STATUS <span class="operator">=</span> &quot;OK&quot;;</span><br><span class="line"></span><br><span class="line">## å…¶ä¸­å¯ä»¥å…³æ³¨isBadé‚£ä¸€å­—æ®µï¼Œå¯ä»¥çœ‹åˆ°å‰¯æœ¬çš„çŠ¶æ€</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹å‰¯æœ¬çš„é›†ç¾¤åˆ†å¸ƒ"><a href="#æŸ¥çœ‹å‰¯æœ¬çš„é›†ç¾¤åˆ†å¸ƒ" class="headerlink" title="æŸ¥çœ‹å‰¯æœ¬çš„é›†ç¾¤åˆ†å¸ƒ"></a>æŸ¥çœ‹å‰¯æœ¬çš„é›†ç¾¤åˆ†å¸ƒ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADMIN <span class="keyword">SHOW</span> REPLICA DISTRIBUTION <span class="keyword">FROM</span> tbl1;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹ç­‰å¾…è¢«è°ƒåº¦çš„ä»»åŠ¡"><a href="#æŸ¥çœ‹ç­‰å¾…è¢«è°ƒåº¦çš„ä»»åŠ¡" class="headerlink" title="æŸ¥çœ‹ç­‰å¾…è¢«è°ƒåº¦çš„ä»»åŠ¡"></a>æŸ¥çœ‹ç­‰å¾…è¢«è°ƒåº¦çš„ä»»åŠ¡</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> PROC <span class="string">&#x27;/cluster_balance/pending_tablets&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="ä¿®å¤å‰¯æœ¬çš„æ€è·¯"><a href="#ä¿®å¤å‰¯æœ¬çš„æ€è·¯" class="headerlink" title="ä¿®å¤å‰¯æœ¬çš„æ€è·¯"></a>ä¿®å¤å‰¯æœ¬çš„æ€è·¯</h2><blockquote><h2 id="æ€»ä½“æ¥è®²-å½“æˆ‘ä»¬éœ€è¦å°†é›†ç¾¤å¿«é€Ÿæ¢å¤åˆ°æ­£å¸¸çŠ¶æ€æ—¶-å¯ä»¥è€ƒè™‘æŒ‰ç…§ä»¥ä¸‹æ€è·¯å¤„ç†"><a href="#æ€»ä½“æ¥è®²-å½“æˆ‘ä»¬éœ€è¦å°†é›†ç¾¤å¿«é€Ÿæ¢å¤åˆ°æ­£å¸¸çŠ¶æ€æ—¶-å¯ä»¥è€ƒè™‘æŒ‰ç…§ä»¥ä¸‹æ€è·¯å¤„ç†" class="headerlink" title="æ€»ä½“æ¥è®²,å½“æˆ‘ä»¬éœ€è¦å°†é›†ç¾¤å¿«é€Ÿæ¢å¤åˆ°æ­£å¸¸çŠ¶æ€æ—¶,å¯ä»¥è€ƒè™‘æŒ‰ç…§ä»¥ä¸‹æ€è·¯å¤„ç†:"></a>æ€»ä½“æ¥è®²,å½“æˆ‘ä»¬éœ€è¦å°†é›†ç¾¤å¿«é€Ÿæ¢å¤åˆ°æ­£å¸¸çŠ¶æ€æ—¶,å¯ä»¥è€ƒè™‘æŒ‰ç…§ä»¥ä¸‹æ€è·¯å¤„ç†:</h2><p>1.æ‰¾åˆ°å¯¼è‡´é«˜ä¼˜ä»»åŠ¡æŠ¥é”™çš„tablet,å°†æœ‰é—®é¢˜çš„å‰¯æœ¬ç½®ä¸ºbadã€‚</p><p>2.é€šè¿‡admin repairè¯­å¥é«˜ä¼˜ä¿®å¤æŸäº›è¡¨ã€‚</p><p>3.åœæ­¢å‰¯æœ¬å‡è¡¡é€»è¾‘ä»¥é¿å…å ç”¨é›†ç¾¤èµ„æº,ç­‰é›†ç¾¤æ¢å¤å,å†å¼€å¯å³å¯ã€‚</p><p>4.ä½¿ç”¨æ›´ä¿å®ˆçš„ç­–ç•¥è§¦å‘ä¿®å¤ä»»åŠ¡,ä»¥åº”å¯¹BEé¢‘ç¹å®•æœºå¯¼è‡´çš„é›ªå´©æ•ˆåº”ã€‚</p><p>5.æŒ‰éœ€å…³é—­colocationè¡¨çš„è°ƒåº¦ä»»åŠ¡,é›†ä¸­é›†ç¾¤èµ„æºä¿®å¤å…¶ä»–ä»–é«˜ä¼˜æ•°æ®ã€‚</p></blockquote><h3 id="è®¾ç½®å‰¯æœ¬çš„çŠ¶æ€ä¸º-bad"><a href="#è®¾ç½®å‰¯æœ¬çš„çŠ¶æ€ä¸º-bad" class="headerlink" title="è®¾ç½®å‰¯æœ¬çš„çŠ¶æ€ä¸º bad"></a>è®¾ç½®å‰¯æœ¬çš„çŠ¶æ€ä¸º <code>bad</code></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ADMIN <span class="keyword">SET</span> REPLICA STATUS PROPERTIES(&quot;tablet_id&quot; <span class="operator">=</span> &quot;4405353&quot;, &quot;backend_id&quot; <span class="operator">=</span> &quot;10010&quot;, &quot;status&quot; <span class="operator">=</span> &quot;bad&quot;);</span><br><span class="line">## åˆ†ç‰‡çš„idï¼Œbeçš„id éœ€è¦åœ¨ä¸Šé¢çš„è¯­å¥æ‰§è¡Œç»“æœä¸­è¿›è¡ŒæŸ¥æ‰¾</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®ä¸ºbadä¹‹åï¼ŒDorisä¼šè‡ªåŠ¨è¿›è¡Œä¿®å¤</li><li>ä½¿ç”¨ä¸‹é¢çš„è¯­å¥å¯ä»¥æŸ¥çœ‹Dorisçš„ä¿®å¤è¿›åº¦</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> PROC <span class="string">&#x27;/cluster_balance&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>ä¿®å¤å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­å¥æŸ¥çœ‹é›†ç¾¤æ•´ä½“çš„å‰¯æœ¬çš„å¥åº·æƒ…å†µ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> PROC <span class="string">&#x27;/cluster_health/tablet_health&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>æ‰‹åŠ¨ä¿®å¤ï¼ˆè®¾ç½®ä¿®å¤çš„ä¼˜å…ˆçº§ï¼Œè®©å…¶å…ˆä¿®å¤ï¼‰</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADMIN REPAIR <span class="keyword">TABLE</span> tbl [<span class="keyword">PARTITION</span> (p1, p2, ...)];</span><br></pre></td></tr></table></figure><ul><li>å–æ¶ˆæ‰‹åŠ¨ä¿®å¤</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADMIN CANCEL REPAIR <span class="keyword">TABLE</span> tbl [<span class="keyword">PARTITION</span> (p1, p2, ...)];</span><br></pre></td></tr></table></figure><h3 id="å°è¯•ä»å›æ”¶ç«™ä¸­ä¿®å¤tablet"><a href="#å°è¯•ä»å›æ”¶ç«™ä¸­ä¿®å¤tablet" class="headerlink" title="å°è¯•ä»å›æ”¶ç«™ä¸­ä¿®å¤tablet"></a>å°è¯•ä»å›æ”¶ç«™ä¸­ä¿®å¤tablet</h3><h4 id="http-è¯·æ±‚æ–¹å¼"><a href="#http-è¯·æ±‚æ–¹å¼" class="headerlink" title="http è¯·æ±‚æ–¹å¼"></a><font style="color:rgb(42, 47, 52);">http è¯·æ±‚æ–¹å¼</font></h4><p><font style="color:rgb(42, 47, 52);">BE ä¸­æä¾›å•ä¸ª tablet æ•°æ®æ¢å¤çš„ http æ¥å£ï¼Œæ¥å£å¦‚ä¸‹ï¼š</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST <span class="string">&quot;http://be_host:be_webserver_port/api/restore_tablet?tablet_id=11111\&amp;schema_hash=12345&quot;</span></span><br></pre></td></tr></table></figure><p><font style="color:rgb(42, 47, 52);">æˆåŠŸçš„ç»“æœå¦‚ä¸‹ï¼š</font></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Success&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><font style="color:rgb(42, 47, 52);">å¤±è´¥çš„è¯ï¼Œä¼šè¿”å›ç›¸åº”çš„å¤±è´¥åŸå› ï¼Œä¸€ç§å¯èƒ½çš„ç»“æœå¦‚ä¸‹ï¼š</font></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Failed&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;create link path failed&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="è„šæœ¬æ–¹å¼"><a href="#è„šæœ¬æ–¹å¼" class="headerlink" title="è„šæœ¬æ–¹å¼"></a><font style="color:rgb(42, 47, 52);">è„šæœ¬æ–¹å¼</font></h4><p><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;restore_tablet_tool.sh&lt;/font&gt;</code><font style="color:rgb(42, 47, 52);"> </font><font style="color:rgb(42, 47, 52);">å¯ç”¨æ¥å®ç°å• tablet æ•°æ®æ¢å¤çš„åŠŸèƒ½ã€‚</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh tools/restore_tablet_tool.sh -b <span class="string">&quot;http://127.0.0.1:8040&quot;</span> -t 12345 -s 11111</span><br><span class="line">sh tools/restore_tablet_tool.sh --backend <span class="string">&quot;http://127.0.0.1:8040&quot;</span> --tablet_id 12345 --schema_hash 11111</span><br></pre></td></tr></table></figure><h3 id="ä¿®å¤ç¼ºå¤±æˆ–æŸåçš„-Tablet"><a href="#ä¿®å¤ç¼ºå¤±æˆ–æŸåçš„-Tablet" class="headerlink" title="ä¿®å¤ç¼ºå¤±æˆ–æŸåçš„ Tablet"></a><font style="color:rgb(29, 29, 29);">ä¿®å¤ç¼ºå¤±æˆ–æŸåçš„ Tablet</font></h3><h4 id="æŸ¥çœ‹-Master-FE-æ—¥å¿—-lt-font-style-quot-color-rgb-76-87-108-background-color-rgb-237-242-250-quot-gt-fe-log-lt-font-gt"><a href="#æŸ¥çœ‹-Master-FE-æ—¥å¿—-lt-font-style-quot-color-rgb-76-87-108-background-color-rgb-237-242-250-quot-gt-fe-log-lt-font-gt" class="headerlink" title="æŸ¥çœ‹ Master FE æ—¥å¿— &lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;fe.log&lt;/font&gt;"></a><font style="color:rgb(42, 47, 52);">æŸ¥çœ‹ Master FE æ—¥å¿— </font><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;fe.log&lt;/font&gt;</code></h4><p><font style="color:rgb(42, 47, 52);">å¦‚æœå‡ºç°æ•°æ®ä¸¢å¤±çš„æƒ…å†µï¼Œåˆ™æ—¥å¿—ä¸­ä¼šæœ‰ç±»ä¼¼å¦‚ä¸‹æ—¥å¿—ï¼š</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">backend [10001] invalid situation. tablet[20000] has few replica[1], replica num setting is [3]</span><br></pre></td></tr></table></figure><p><font style="color:rgb(42, 47, 52);">è¿™ä¸ªæ—¥å¿—è¡¨ç¤ºï¼ŒTablet 20000 çš„æ‰€æœ‰å‰¯æœ¬å·²æŸåæˆ–ä¸¢å¤±ã€‚</font></p><h4 id="ä½¿ç”¨ç©ºç™½å‰¯æœ¬å¡«è¡¥ç¼ºå¤±å‰¯æœ¬"><a href="#ä½¿ç”¨ç©ºç™½å‰¯æœ¬å¡«è¡¥ç¼ºå¤±å‰¯æœ¬" class="headerlink" title="ä½¿ç”¨ç©ºç™½å‰¯æœ¬å¡«è¡¥ç¼ºå¤±å‰¯æœ¬"></a><font style="color:rgb(42, 47, 52);">ä½¿ç”¨ç©ºç™½å‰¯æœ¬å¡«è¡¥ç¼ºå¤±å‰¯æœ¬</font></h4><p><font style="color:rgb(42, 47, 52);">å½“ç¡®è®¤æ•°æ®å·²ç»æ— æ³•æ¢å¤åï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆç©ºç™½å‰¯æœ¬ã€‚</font></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADMIN SET FRONTEND CONFIG (<span class="string">&quot;recover_with_empty_tablet&quot;</span> = <span class="string">&quot;true&quot;</span>);</span><br></pre></td></tr></table></figure><pre><code>- &lt;font style=&quot;color:rgb(42, 47, 52);&quot;&gt;æ³¨ï¼šå¯ä»¥å…ˆé€šè¿‡&lt;/font&gt;&lt;font style=&quot;color:rgb(42, 47, 52);&quot;&gt; &lt;/font&gt;`&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;SHOW FRONTEND CONFIG;&lt;/font&gt;`&lt;font style=&quot;color:rgb(42, 47, 52);&quot;&gt; &lt;/font&gt;&lt;font style=&quot;color:rgb(42, 47, 52);&quot;&gt;å‘½ä»¤æŸ¥çœ‹å½“å‰ç‰ˆæœ¬æ˜¯å¦æ”¯æŒè¯¥å‚æ•°ã€‚&lt;/font&gt;</code></pre><h4 id="è®¾ç½®å®Œæˆå‡ åˆ†é’Ÿåï¼Œåº”è¯¥ä¼šåœ¨-Master-FE-æ—¥å¿—-lt-font-style-quot-color-rgb-76-87-108-background-color-rgb-237-242-250-quot-gt-fe-log-lt-font-gt-ä¸­çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ï¼š"><a href="#è®¾ç½®å®Œæˆå‡ åˆ†é’Ÿåï¼Œåº”è¯¥ä¼šåœ¨-Master-FE-æ—¥å¿—-lt-font-style-quot-color-rgb-76-87-108-background-color-rgb-237-242-250-quot-gt-fe-log-lt-font-gt-ä¸­çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ï¼š" class="headerlink" title="è®¾ç½®å®Œæˆå‡ åˆ†é’Ÿåï¼Œåº”è¯¥ä¼šåœ¨ Master FE æ—¥å¿— &lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;fe.log&lt;/font&gt; ä¸­çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ï¼š"></a><font style="color:rgb(42, 47, 52);">è®¾ç½®å®Œæˆå‡ åˆ†é’Ÿåï¼Œåº”è¯¥ä¼šåœ¨ Master FE æ—¥å¿— </font><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;fe.log&lt;/font&gt;</code><font style="color:rgb(42, 47, 52);"> ä¸­çœ‹åˆ°å¦‚ä¸‹æ—¥å¿—ï¼š</font></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tablet 20000 has only one replica 20001 on backend 10001 and it is lost. create an empty replica to recover it.</span><br></pre></td></tr></table></figure><p><font style="color:rgb(42, 47, 52);">è¯¥æ—¥å¿—è¡¨ç¤ºç³»ç»Ÿå·²ç»åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½ Tablet ç”¨äºå¡«è¡¥ç¼ºå¤±å‰¯æœ¬ã€‚</font></p><h4 id="é€šè¿‡æŸ¥è¯¢æ¥åˆ¤æ–­æ˜¯å¦å·²ç»ä¿®å¤æˆåŠŸã€‚"><a href="#é€šè¿‡æŸ¥è¯¢æ¥åˆ¤æ–­æ˜¯å¦å·²ç»ä¿®å¤æˆåŠŸã€‚" class="headerlink" title="é€šè¿‡æŸ¥è¯¢æ¥åˆ¤æ–­æ˜¯å¦å·²ç»ä¿®å¤æˆåŠŸã€‚"></a><font style="color:rgb(42, 47, 52);">é€šè¿‡æŸ¥è¯¢æ¥åˆ¤æ–­æ˜¯å¦å·²ç»ä¿®å¤æˆåŠŸã€‚</font></h4><h4 id="å…¨éƒ¨ä¿®å¤æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å…³é—­-lt-font-style-quot-color-rgb-76-87-108-background-color-rgb-237-242-250-quot-gt-recover-with-empty-tablet-lt-font-gt-å‚æ•°ï¼š"><a href="#å…¨éƒ¨ä¿®å¤æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å…³é—­-lt-font-style-quot-color-rgb-76-87-108-background-color-rgb-237-242-250-quot-gt-recover-with-empty-tablet-lt-font-gt-å‚æ•°ï¼š" class="headerlink" title="å…¨éƒ¨ä¿®å¤æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å…³é—­ &lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;recover_with_empty_tablet&lt;/font&gt; å‚æ•°ï¼š"></a><font style="color:rgb(42, 47, 52);">å…¨éƒ¨ä¿®å¤æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å…³é—­ </font><code>&lt;font style=&quot;color:rgb(76, 87, 108);background-color:rgb(237, 242, 250);&quot;&gt;recover_with_empty_tablet&lt;/font&gt;</code><font style="color:rgb(42, 47, 52);"> å‚æ•°ï¼š</font></h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADMIN SET FRONTEND CONFIG (<span class="string">&quot;recover_with_empty_tablet&quot;</span> = <span class="string">&quot;false&quot;</span>);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨ä»¥ä¸Šæ–¹æ³•è¿›è¡Œå‰¯æœ¬ä¿®å¤ï¼Œè¿˜æœªæˆåŠŸï¼Œæˆ–è€…æ˜¯Mater FE æ˜¾ç¤ºæŠ¥é”™æ—¥å¿—åˆ™éœ€è¦è¿›è¡Œåˆ é™¤æ•°æ®ï¼Œé‡æ–°å†™å…¥æ•°æ®</p><p>åŸå› ä¸ºè¯¥åˆ†åŒºé‡Œé¢åªæœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œæ— æ³•å°†è¯¥å‰¯æœ¬é‡æ–°å¡«å……è¦†ç›–</p><blockquote><p><strong><font style="color:rgb(5, 7, 59);">publish version failed for transaction TransactionState. transaction id: 67607743, label: yfzaFUlqpNhvdrY76Dq-4000, db id: 10003, table id list: 1790279, callback id: -1, coordinator: BE: xxx.xxx.xxx.xxx, transaction status: COMMITTED, error replicas num: 0, replica ids: , prepare time: 1729052940470, commit time: 1729052947271, finish time: -1, reason: on tablet tabletId&#x3D;4405353, with only 0 replicas less than quorum 1</font></strong></p></blockquote><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Doris </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLåˆ†åŒºå»ºè¡¨ä¾‹å­</title>
      <link href="/2024/04/23/MySQL%E5%88%86%E5%8C%BA%E5%BB%BA%E8%A1%A8%E4%BE%8B%E5%AD%90/"/>
      <url>/2024/04/23/MySQL%E5%88%86%E5%8C%BA%E5%BB%BA%E8%A1%A8%E4%BE%8B%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<p>ä»¥ä¸‹ä¸ºMySQLåˆ†åŒºå»ºè¡¨çš„ä¾‹å­</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `mz_mjzcfxxmx` (</span><br><span class="line">  `SERIALNUM_ID` <span class="type">varchar</span>(<span class="number">96</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸šåŠ¡è§’åº¦å”¯ä¸€æ€§ID&#x27;</span>,</span><br><span class="line">  `DATAGENERATE_DATE` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸šåŠ¡æ•°æ®äº§ç”Ÿæ—¶é—´&#x27;</span>,</span><br><span class="line">  `ROW_ID` <span class="type">varchar</span>(<span class="number">300</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ•°æ®è§’åº¦å”¯ä¸€æ€§ID&#x27;</span>,</span><br><span class="line">  `TASK_ID` <span class="type">varchar</span>(<span class="number">96</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä»»åŠ¡å·&#x27;</span>,</span><br><span class="line">  `BATCH_NUM` <span class="type">varchar</span>(<span class="number">96</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰¹æ¬¡å·&#x27;</span>,</span><br><span class="line">  `LOCAL_ID` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;äººå‘˜å”¯ä¸€æ ‡è¯†&#x27;</span>,</span><br><span class="line">  `BUSINESS_ID` <span class="type">varchar</span>(<span class="number">600</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸šåŠ¡æµæ°´å·&#x27;</span>,</span><br><span class="line">  `BASIC_ACTIVE_ID` <span class="type">varchar</span>(<span class="number">600</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸šåŠ¡ç³»ç»Ÿçš„é€»è¾‘ä¸»é”®æˆ–è”åˆä¸»é”®&#x27;</span>,</span><br><span class="line">  `DOMAIN_CODE` <span class="type">varchar</span>(<span class="number">36</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ¥å…¥ç³»ç»Ÿç¼–ç &#x27;</span>,</span><br><span class="line">  `ORGANIZATION_CODE` <span class="type">varchar</span>(<span class="number">66</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç»„ç»‡æœºæ„ä»£ç &#x27;</span>,</span><br><span class="line">  `ORGANIZATION_NAME` <span class="type">varchar</span>(<span class="number">600</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç»„ç»‡æœºæ„åç§°&#x27;</span>,</span><br><span class="line">  `CREATE_DATE` <span class="type">varchar</span>(<span class="number">42</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ•°æ®è½åº“æ—¶é—´&#x27;</span>,</span><br><span class="line">  `IS_ERROR` <span class="type">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ•°æ®è´¨æ§æ—¶æ˜¯å¦æœ‰é”™&#x27;</span>,</span><br><span class="line">  `OUT_IN_ID` <span class="type">varchar</span>(<span class="number">600</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é—¨ï¼ˆæ€¥ï¼‰è¯Šï¼ˆä½é™¢ï¼‰å·&#x27;</span>,</span><br><span class="line">  `DENOMINATOR_RULE` longtext COMMENT <span class="string">&#x27;ç¬¦åˆè§„åˆ™èµ·æ•ˆæ¡ä»¶&#x27;</span>,</span><br><span class="line">  `ERROR_RULE` longtext COMMENT <span class="string">&#x27;é”™è¯¯è§„åˆ™ä¿¡æ¯&#x27;</span>,</span><br><span class="line">  `RECEIVE_DATE` <span class="type">varchar</span>(<span class="number">42</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ•°æ®æ¥æ”¶æ—¶é—´&#x27;</span>,</span><br><span class="line">  `ARCHIVE_DATE` <span class="type">varchar</span>(<span class="number">42</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å½’æ¡£æ—¥æœŸæ—¶é—´&#x27;</span>,</span><br><span class="line">  `RESOURCE_ID` longtext COMMENT <span class="string">&#x27;èµ„æºä¿¡æ¯ID&#x27;</span>,</span><br><span class="line">  `YLJGDM` <span class="type">varchar</span>(<span class="number">66</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åŒ»ç–—æœºæ„ä»£ç &#x27;</span>,</span><br><span class="line">  `CFMXID` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¤„æ–¹æ˜ç»†ID&#x27;</span>,</span><br><span class="line">  `YLJGMC` <span class="type">varchar</span>(<span class="number">210</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åŒ»ç–—æœºæ„åç§°&#x27;</span>,</span><br><span class="line">  `GRBSH` <span class="type">varchar</span>(<span class="number">108</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸ªäººæ ‡è¯†å·&#x27;</span>,</span><br><span class="line">  `CFZID` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¤„æ–¹ä¸»ID&#x27;</span>,</span><br><span class="line">  `JZLSH` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å°±è¯Šæµæ°´å·&#x27;</span>,</span><br><span class="line">  `CFZH` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¤„æ–¹ç»„å·&#x27;</span>,</span><br><span class="line">  `ZTDM` <span class="type">varchar</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç»„å¥—ä»£ç &#x27;</span>,</span><br><span class="line">  `ZTMC` <span class="type">varchar</span>(<span class="number">300</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç»„å¥—åç§°&#x27;</span>,</span><br><span class="line">  `XMDM` <span class="type">varchar</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é¡¹ç›®ä»£ç &#x27;</span>,</span><br><span class="line">  `XMMC` longtext COMMENT <span class="string">&#x27;é¡¹ç›®åç§°&#x27;</span>,</span><br><span class="line">  `FYFLDM` <span class="type">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è´¹ç”¨åˆ†ç±»ä»£ç &#x27;</span>,</span><br><span class="line">  `FYFLMC` <span class="type">varchar</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è´¹ç”¨åˆ†ç±»åç§°&#x27;</span>,</span><br><span class="line">  `YPBZ` <span class="type">varchar</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“æ ‡å¿—&#x27;</span>,</span><br><span class="line">  `YPGG` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“è§„æ ¼ï¼ˆæ–°ï¼‰&#x27;</span>,</span><br><span class="line">  `YPJXDM` <span class="type">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“å‰‚å‹ä»£ç -æ–°&#x27;</span>,</span><br><span class="line">  `YPJXMC` <span class="type">varchar</span>(<span class="number">240</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“å‰‚å‹åç§°-æ–°&#x27;</span>,</span><br><span class="line">  `YPSYCJL` <span class="type">varchar</span>(<span class="number">31</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“ä½¿ç”¨æ¬¡å‰‚é‡-æ–°&#x27;</span>,</span><br><span class="line">  `YPSYCJLDW` <span class="type">varchar</span>(<span class="number">18</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“ä½¿ç”¨æ¬¡å‰‚é‡å•ä½&#x27;</span>,</span><br><span class="line">  `YPSYZJL` <span class="type">varchar</span>(<span class="number">37</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“ä½¿ç”¨æ€»å‰‚é‡-æ–°&#x27;</span>,</span><br><span class="line">  `YPSYPCDM` <span class="type">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“ä½¿ç”¨é¢‘æ¬¡ä»£ç -æ–°&#x27;</span>,</span><br><span class="line">  `YPSYPCMC` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯å“ä½¿ç”¨é¢‘æ¬¡åç§°-æ–°&#x27;</span>,</span><br><span class="line">  `YYTS` <span class="type">varchar</span>(<span class="number">31</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨è¯å¤©æ•°&#x27;</span>,</span><br><span class="line">  `YWLXDM` <span class="type">varchar</span>(<span class="number">12</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯ç‰©ç±»å‹ä»£ç &#x27;</span>,</span><br><span class="line">  `YWLXMC` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯ç‰©ç±»å‹åç§°&#x27;</span>,</span><br><span class="line">  `YYTJDM` <span class="type">varchar</span>(<span class="number">9</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é¢„çº¦é€”å¾„ä»£ç ï¼ˆç”¨è¯é€”å¾„ä»£ç ï¼‰&#x27;</span>,</span><br><span class="line">  `YYTJMC` <span class="type">varchar</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é¢„çº¦é€”å¾„åç§°(ç”¨è¯é€”å¾„åç§°)&#x27;</span>,</span><br><span class="line">  `FYSL` <span class="type">varchar</span>(<span class="number">31</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å‘è¯æ•°é‡&#x27;</span>,</span><br><span class="line">  `FYSLDW` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å‘è¯æ•°é‡å•ä½&#x27;</span>,</span><br><span class="line">  `CFKSSJ` <span class="type">varchar</span>(<span class="number">42</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¤„æ–¹å¼€å§‹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `CFTZSJ` <span class="type">varchar</span>(<span class="number">42</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¤„æ–¹åœæ­¢æ—¶é—´&#x27;</span>,</span><br><span class="line">  `ZXKSDM` <span class="type">varchar</span>(<span class="number">60</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œç§‘å®¤ä»£ç &#x27;</span>,</span><br><span class="line">  `ZXKSMC` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰§è¡Œç§‘å®¤åç§°&#x27;</span>,</span><br><span class="line">  `YZZXDM` <span class="type">varchar</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åŒ»å˜±æ‰§è¡ŒçŠ¶æ€ä»£ç &#x27;</span>,</span><br><span class="line">  `YZZXMC` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åŒ»å˜±æ‰§è¡ŒçŠ¶æ€åç§°&#x27;</span>,</span><br><span class="line">  `ZYYPCF` longtext COMMENT <span class="string">&#x27;ä¸­è¯é¥®ç‰‡å¤„æ–¹&#x27;</span>,</span><br><span class="line">  `ZYYPJS` <span class="type">varchar</span>(<span class="number">13</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸­è¯é¥®ç‰‡å‰‚æ•°&#x27;</span>,</span><br><span class="line">  `ZYYPJZFF` <span class="type">varchar</span>(<span class="number">300</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸­è¯é¥®ç‰‡ç…ç…®æ–¹æ³•&#x27;</span>,</span><br><span class="line">  `ZYYYTJDM` <span class="type">varchar</span>(<span class="number">9</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸­è¯ç”¨è¯é€”å¾„ä»£ç &#x27;</span>,</span><br><span class="line">  `ZYYYTJMC` <span class="type">varchar</span>(<span class="number">300</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸­è¯ç”¨è¯é€”å¾„åç§°&#x27;</span>,</span><br><span class="line">  `ZZZF` <span class="type">varchar</span>(<span class="number">300</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ²»åˆ™æ²»æ³•&#x27;</span>,</span><br><span class="line">  `DPBZ` <span class="type">varchar</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç‚¹è¯„æ ‡å¿—&#x27;</span>,</span><br><span class="line">  `YYSM` longtext COMMENT <span class="string">&#x27;ç”¨è¯è¯´æ˜&#x27;</span>,</span><br><span class="line">  `BZ` longtext COMMENT <span class="string">&#x27;å…¶ä»–å¤‡æ³¨è¯´æ˜&#x27;</span>,</span><br><span class="line">  `CYJZ` longtext COMMENT <span class="string">&#x27;è‰è¯è„šæ³¨&#x27;</span>,</span><br><span class="line">  `ZYBS` <span class="type">varchar</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸»è¯æ ‡è¯†&#x27;</span>,</span><br><span class="line">  `JJBS` <span class="type">varchar</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åŠ æ€¥æ ‡è¯†&#x27;</span>,</span><br><span class="line">  `PSCZY` <span class="type">varchar</span>(<span class="number">150</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;çš®è¯•æ“ä½œå‘˜&#x27;</span>,</span><br><span class="line">  `PSJLRQSJ` <span class="type">varchar</span>(<span class="number">42</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;çš®è¯•ç»“è®ºæ—¥æœŸæ—¶é—´&#x27;</span>,</span><br><span class="line">  `PSPB` <span class="type">varchar</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;çš®è¯•åˆ¤åˆ«&#x27;</span>,</span><br><span class="line">  `PSJG` <span class="type">varchar</span>(<span class="number">48</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;çš®è¯•ç»“æœï¼ˆæ–°ï¼‰&#x27;</span>,</span><br><span class="line">  `MJ` <span class="type">varchar</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†çº§&#x27;</span>,</span><br><span class="line">  `TBRQ` <span class="type">varchar</span>(<span class="number">42</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¡«æŠ¥æ—¥æœŸï¼ˆæ–°ï¼‰&#x27;</span>,</span><br><span class="line">  `XGRQ` <span class="type">varchar</span>(<span class="number">42</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æœ€åæ›´æ–°æ—¶é—´ï¼ˆæ–°ï¼‰&#x27;</span>,</span><br><span class="line">  `XGBZ` <span class="type">varchar</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ ‡å¿—&#x27;</span>,</span><br><span class="line">  `rowkey` <span class="type">varchar</span>(<span class="number">570</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;å…¼å®¹IHBEçš„è®°å½•å”¯ä¸€æ€§ä¸»é”®&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`SERIALNUM_ID`,`DATAGENERATE_DATE`),</span><br><span class="line">  KEY `mz_mjzcfxxmx_DATAGENERATE_DATE_IDX` (`DATAGENERATE_DATE`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 ROW_FORMAT<span class="operator">=</span><span class="keyword">DYNAMIC</span> COMMENT<span class="operator">=</span><span class="string">&#x27;è‡ªæ²»åŒº1-é—¨æ€¥è¯Šå¤„æ–¹ä¿¡æ¯æ˜ç»†&#x27;</span></span><br><span class="line"> <span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">RANGE</span> (((<span class="keyword">year</span>(`DATAGENERATE_DATE`) <span class="operator">*</span> <span class="number">100</span>) <span class="operator">+</span> <span class="keyword">month</span>(`DATAGENERATE_DATE`)))</span><br><span class="line">(<span class="keyword">PARTITION</span> p202001 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202002</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202002 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202003</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202003 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202004</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202004 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202005</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202005 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202006</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202006 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202007</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202007 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202008</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202008 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202009</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202009 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202010</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202010 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202011</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202011 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202012</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202012 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202101</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202101 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202102</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202102 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202103</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202103 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202104</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202104 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202105</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202105 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202106</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202106 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202107</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202107 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202108</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202108 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202109</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202109 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202110</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202110 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202111</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202111 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202112</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202112 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202201</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202201 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202202</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202202 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202203</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202203 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202204</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202204 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202205</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202205 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202206</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202206 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202207</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202207 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202208</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202208 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202209</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202209 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202210</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202210 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202211</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202211 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202212</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202212 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202301</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202301 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202302</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202302 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202303</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202303 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202304</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202304 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202305</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202305 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202306</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202306 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202307</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202307 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202308</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202308 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202309</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202309 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202310</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202310 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202311</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202311 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202312</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202312 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202401</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202401 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202402</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202402 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202403</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202403 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202404</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202404 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202405</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202405 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202406</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202406 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202407</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202407 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202408</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202408 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202409</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202409 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202410</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202410 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202411</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202411 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202412</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202412 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202501</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202501 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202502</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202502 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202503</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202503 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202504</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202504 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202505</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202505 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202506</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202506 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202507</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202507 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202508</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202508 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202509</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202509 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202510</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202510 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202511</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202511 <span class="keyword">VALUES</span> LESS THAN (<span class="number">202512</span>) ENGINE <span class="operator">=</span> InnoDB,</span><br><span class="line"> <span class="keyword">PARTITION</span> p202512 <span class="keyword">VALUES</span> LESS THAN MAXVALUE ENGINE <span class="operator">=</span> InnoDB) ;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MAVENæ‰“åŒ…</title>
      <link href="/2024/04/23/MAVEN%E6%89%93%E5%8C%85/"/>
      <url>/2024/04/23/MAVEN%E6%89%93%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h2 id="Mavenæ‰“åŒ…ç®€ä»‹"><a href="#Mavenæ‰“åŒ…ç®€ä»‹" class="headerlink" title="Mavenæ‰“åŒ…ç®€ä»‹"></a>Mavenæ‰“åŒ…ç®€ä»‹</h2><p>Mavenæ˜¯Javaé¡¹ç›®ä¸­æœ€æµè¡Œçš„æ„å»ºå·¥å…·ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„ã€ä¾èµ–ç®¡ç†å’Œæ„å»ºæµç¨‹ã€‚Mavençš„æ‰“åŒ…åŠŸèƒ½å…è®¸å¼€å‘è€…å°†é¡¹ç›®ä»£ç ã€èµ„æºæ–‡ä»¶å’Œä¾èµ–é¡¹æ‰“åŒ…æˆå¯åˆ†å‘çš„æ ¼å¼ï¼ˆå¦‚JARã€WARæˆ–EARæ–‡ä»¶ï¼‰ã€‚æœ¬æ–‡å°†ä»‹ç»Mavenæ‰“åŒ…çš„åŸºæœ¬æ¦‚å¿µã€å¸¸ç”¨é…ç½®å’Œæœ€ä½³å®è·µã€‚</p><h2 id="Mavenæ‰“åŒ…åŸºç¡€"><a href="#Mavenæ‰“åŒ…åŸºç¡€" class="headerlink" title="Mavenæ‰“åŒ…åŸºç¡€"></a>Mavenæ‰“åŒ…åŸºç¡€</h2><h3 id="æ‰“åŒ…ç±»å‹"><a href="#æ‰“åŒ…ç±»å‹" class="headerlink" title="æ‰“åŒ…ç±»å‹"></a>æ‰“åŒ…ç±»å‹</h3><p>Mavenæ”¯æŒå¤šç§æ‰“åŒ…ç±»å‹ï¼Œåœ¨<code>pom.xml</code>ä¸­é€šè¿‡<code>&lt;packaging&gt;</code>æ ‡ç­¾æŒ‡å®šï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span>  <span class="comment">&lt;!-- é»˜è®¤å€¼ï¼Œç”ŸæˆJARåŒ… --&gt;</span></span><br></pre></td></tr></table></figure><p>å¸¸è§çš„æ‰“åŒ…ç±»å‹åŒ…æ‹¬ï¼š</p><ul><li><code>jar</code>: Javaåº”ç”¨ç¨‹åºæˆ–åº“</li><li><code>war</code>: Webåº”ç”¨ç¨‹åº</li><li><code>pom</code>: çˆ¶æ¨¡å—é¡¹ç›®</li><li><code>ear</code>: ä¼ä¸šçº§åº”ç”¨</li></ul><h3 id="åŸºæœ¬æ‰“åŒ…å‘½ä»¤"><a href="#åŸºæœ¬æ‰“åŒ…å‘½ä»¤" class="headerlink" title="åŸºæœ¬æ‰“åŒ…å‘½ä»¤"></a>åŸºæœ¬æ‰“åŒ…å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“åŒ…é¡¹ç›®</span></span><br><span class="line">mvn package</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“åŒ…å¹¶è·³è¿‡æµ‹è¯•</span></span><br><span class="line">mvn package -DskipTests</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…ç†å¹¶æ‰“åŒ…</span></span><br><span class="line">mvn clean package</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…åˆ°æœ¬åœ°ä»“åº“</span></span><br><span class="line">mvn install</span><br></pre></td></tr></table></figure><h2 id="Spring-Bootåº”ç”¨æ‰“åŒ…é…ç½®"><a href="#Spring-Bootåº”ç”¨æ‰“åŒ…é…ç½®" class="headerlink" title="Spring Bootåº”ç”¨æ‰“åŒ…é…ç½®"></a>Spring Bootåº”ç”¨æ‰“åŒ…é…ç½®</h2><p>Spring Bootåº”ç”¨é€šå¸¸éœ€è¦æ‰“åŒ…æˆå¯æ‰§è¡Œçš„JARæ–‡ä»¶ï¼Œè¿™éœ€è¦ä½¿ç”¨<code>spring-boot-maven-plugin</code>æ’ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šå¯åŠ¨ç±» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.wzz.ExamAdminApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- é‡æ–°æ‰“åŒ…ï¼Œå°†ä¾èµ–æ‰“å…¥jaråŒ…ä¸­ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ’ä»¶é…ç½®è¯´æ˜"><a href="#æ’ä»¶é…ç½®è¯´æ˜" class="headerlink" title="æ’ä»¶é…ç½®è¯´æ˜"></a>æ’ä»¶é…ç½®è¯´æ˜</h3><ul><li><code>mainClass</code>: æŒ‡å®šåº”ç”¨çš„ä¸»ç±»ï¼ŒåŒ…å«<code>main</code>æ–¹æ³•çš„å®Œæ•´ç±»å</li><li><code>repackage</code>: å°†åŸå§‹JARé‡æ–°æ‰“åŒ…ï¼Œæ·»åŠ ä¾èµ–å¹¶ä½¿JARå¯æ‰§è¡Œ</li><li><code>excludes</code>: å¯ç”¨äºæ’é™¤ç‰¹å®šä¾èµ–</li><li><code>includes</code>: å¯ç”¨äºåŒ…å«ç‰¹å®šä¾èµ–</li></ul><h2 id="å¸¸ç”¨æ‰“åŒ…é…ç½®"><a href="#å¸¸ç”¨æ‰“åŒ…é…ç½®" class="headerlink" title="å¸¸ç”¨æ‰“åŒ…é…ç½®"></a>å¸¸ç”¨æ‰“åŒ…é…ç½®</h2><h3 id="è·³è¿‡æµ‹è¯•"><a href="#è·³è¿‡æµ‹è¯•" class="headerlink" title="è·³è¿‡æµ‹è¯•"></a>è·³è¿‡æµ‹è¯•</h3><p>åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­è·³è¿‡æµ‹è¯•æˆ–å¿½ç•¥æµ‹è¯•å¤±è´¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¿½ç•¥æµ‹è¯•å¤±è´¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">testFailureIgnore</span>&gt;</span>true<span class="tag">&lt;/<span class="name">testFailureIgnore</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®Œå…¨è·³è¿‡æµ‹è¯• --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;skip&gt;true&lt;/skip&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn package -DskipTests        <span class="comment"># ç¼–è¯‘æµ‹è¯•ä½†ä¸è¿è¡Œ</span></span><br><span class="line">mvn package -Dmaven.test.skip=<span class="literal">true</span>  <span class="comment"># ä¸ç¼–è¯‘ä¹Ÿä¸è¿è¡Œæµ‹è¯•</span></span><br></pre></td></tr></table></figure><h3 id="æŒ‡å®šJavaç‰ˆæœ¬"><a href="#æŒ‡å®šJavaç‰ˆæœ¬" class="headerlink" title="æŒ‡å®šJavaç‰ˆæœ¬"></a>æŒ‡å®šJavaç‰ˆæœ¬</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>11<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>11<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="èµ„æºæ–‡ä»¶å¤„ç†"><a href="#èµ„æºæ–‡ä»¶å¤„ç†" class="headerlink" title="èµ„æºæ–‡ä»¶å¤„ç†"></a>èµ„æºæ–‡ä»¶å¤„ç†</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…æ—¶æ’é™¤æŸäº›æ–‡ä»¶"><a href="#æ‰“åŒ…æ—¶æ’é™¤æŸäº›æ–‡ä»¶" class="headerlink" title="æ‰“åŒ…æ—¶æ’é™¤æŸäº›æ–‡ä»¶"></a>æ‰“åŒ…æ—¶æ’é™¤æŸäº›æ–‡ä»¶</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>*.properties<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>config/**<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ‰“åŒ…å¯æ‰§è¡ŒJARçš„å¤šç§æ–¹å¼"><a href="#æ‰“åŒ…å¯æ‰§è¡ŒJARçš„å¤šç§æ–¹å¼" class="headerlink" title="æ‰“åŒ…å¯æ‰§è¡ŒJARçš„å¤šç§æ–¹å¼"></a>æ‰“åŒ…å¯æ‰§è¡ŒJARçš„å¤šç§æ–¹å¼</h2><h3 id="æ–¹å¼ä¸€ï¼šä½¿ç”¨maven-shade-plugin"><a href="#æ–¹å¼ä¸€ï¼šä½¿ç”¨maven-shade-plugin" class="headerlink" title="æ–¹å¼ä¸€ï¼šä½¿ç”¨maven-shade-plugin"></a>æ–¹å¼ä¸€ï¼šä½¿ç”¨maven-shade-plugin</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-shade-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>shade<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transformers</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">transformer</span> <span class="attr">implementation</span>=<span class="string">&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.example.MainClass<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">transformer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">transformers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ–¹å¼äºŒï¼šä½¿ç”¨maven-assembly-plugin"><a href="#æ–¹å¼äºŒï¼šä½¿ç”¨maven-assembly-plugin" class="headerlink" title="æ–¹å¼äºŒï¼šä½¿ç”¨maven-assembly-plugin"></a>æ–¹å¼äºŒï¼šä½¿ç”¨maven-assembly-plugin</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.example.MainClass<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">descriptorRefs</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">descriptorRef</span>&gt;</span>jar-with-dependencies<span class="tag">&lt;/<span class="name">descriptorRef</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">descriptorRefs</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>make-assembly<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>single<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¤šæ¨¡å—é¡¹ç›®æ‰“åŒ…"><a href="#å¤šæ¨¡å—é¡¹ç›®æ‰“åŒ…" class="headerlink" title="å¤šæ¨¡å—é¡¹ç›®æ‰“åŒ…"></a>å¤šæ¨¡å—é¡¹ç›®æ‰“åŒ…</h2><p>å¯¹äºå¤šæ¨¡å—é¡¹ç›®ï¼Œå¯ä»¥åœ¨çˆ¶POMä¸­é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span>&gt;</span>module1<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span>&gt;</span>module2<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span>&gt;</span>module3<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package -pl module1,module2 -am  <span class="comment"># åªæ‰“åŒ…æŒ‡å®šæ¨¡å—åŠå…¶ä¾èµ–</span></span><br></pre></td></tr></table></figure><h2 id="æ‰“åŒ…æœ€ä½³å®è·µ"><a href="#æ‰“åŒ…æœ€ä½³å®è·µ" class="headerlink" title="æ‰“åŒ…æœ€ä½³å®è·µ"></a>æ‰“åŒ…æœ€ä½³å®è·µ</h2><ol><li><p><strong>ä½¿ç”¨ä¾èµ–ç®¡ç†</strong>ï¼šä½¿ç”¨<code>&lt;dependencyManagement&gt;</code>åœ¨çˆ¶POMä¸­ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬</p></li><li><p><strong>é…ç½®èµ„æºè¿‡æ»¤</strong>ï¼šä½¿ç”¨<code>filtering</code>æ›¿æ¢é…ç½®æ–‡ä»¶ä¸­çš„å˜é‡</p></li><li><p><strong>åˆ†ç¦»é…ç½®</strong>ï¼šå°†ç¯å¢ƒç›¸å…³é…ç½®åˆ†ç¦»ï¼Œä½¿ç”¨profileså¤„ç†ä¸åŒç¯å¢ƒ</p></li><li><p><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šä½¿ç”¨<code>maven-release-plugin</code>ç®¡ç†ç‰ˆæœ¬å‘å¸ƒ</p></li><li><p><strong>æŒç»­é›†æˆ</strong>ï¼šå°†Mavenæ‰“åŒ…é›†æˆåˆ°CI&#x2F;CDæµç¨‹ä¸­</p></li></ol><h2 id="å¸¸è§é—®é¢˜è§£å†³"><a href="#å¸¸è§é—®é¢˜è§£å†³" class="headerlink" title="å¸¸è§é—®é¢˜è§£å†³"></a>å¸¸è§é—®é¢˜è§£å†³</h2><h3 id="ä¾èµ–å†²çª"><a href="#ä¾èµ–å†²çª" class="headerlink" title="ä¾èµ–å†²çª"></a>ä¾èµ–å†²çª</h3><p>ä½¿ç”¨<code>dependency:tree</code>å‘½ä»¤æŸ¥çœ‹ä¾èµ–æ ‘ï¼Œæ‰¾å‡ºå†²çªï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn dependency:tree -Dverbose</span><br></pre></td></tr></table></figure><h3 id="å†…å­˜ä¸è¶³"><a href="#å†…å­˜ä¸è¶³" class="headerlink" title="å†…å­˜ä¸è¶³"></a>å†…å­˜ä¸è¶³</h3><p>å¢åŠ Mavenå¯ç”¨å†…å­˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> MAVEN_OPTS=<span class="string">&quot;-Xmx512m -XX:MaxPermSize=128m&quot;</span></span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…é€Ÿåº¦æ…¢"><a href="#æ‰“åŒ…é€Ÿåº¦æ…¢" class="headerlink" title="æ‰“åŒ…é€Ÿåº¦æ…¢"></a>æ‰“åŒ…é€Ÿåº¦æ…¢</h3><p>ä½¿ç”¨å¹¶è¡Œæ„å»ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -T 4 clean package  <span class="comment"># ä½¿ç”¨4ä¸ªçº¿ç¨‹æ„å»º</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Mavenæ‰“åŒ…æ˜¯Javaé¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­çš„é‡è¦ç¯èŠ‚ã€‚é€šè¿‡åˆç†é…ç½®Mavenæ’ä»¶ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚æœ¬æ–‡ä»‹ç»çš„é…ç½®å’Œæœ€ä½³å®è·µå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ä½¿ç”¨Mavenè¿›è¡Œé¡¹ç›®æ‰“åŒ…ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.wzz.ExamAdminApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥æ·»åŠ é…ç½®è·³è¿‡testæŠ¥é”™</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">testFailureIgnore</span>&gt;</span>true<span class="tag">&lt;/<span class="name">testFailureIgnore</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sharding-jdbc åˆ†ç‰‡</title>
      <link href="/2024/04/23/Sharding-jdbc%20%E5%88%86%E7%89%87/"/>
      <url>/2024/04/23/Sharding-jdbc%20%E5%88%86%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p>æ‰€éœ€ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shardingsphere<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shardingsphere-jdbc-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.yaml<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>snakeyaml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.33<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>application.yml æ–‡ä»¶æ·»åŠ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">main:</span></span><br><span class="line">  <span class="attr">allow-bean-definition-overriding:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">datasource:</span></span><br><span class="line">  <span class="attr">driver-class-name:</span> <span class="string">org.apache.shardingsphere.driver.ShardingSphereDriver</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">jdbc:shardingsphere:classpath:sharding.yaml</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ åˆ†ç‰‡çš„yamlæ–‡ä»¶ï¼Œå‘½åä¸º<code>sharding.yaml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dataSources:</span></span><br><span class="line">  <span class="attr">ds:</span></span><br><span class="line">    <span class="attr">dataSourceClassName:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">driverClassName:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">jdbcUrl:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/mysql-monitor?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="type">!SHARDING</span></span><br><span class="line">    <span class="attr">tables:</span></span><br><span class="line">      <span class="attr">server_status_history:</span></span><br><span class="line">        <span class="attr">actualDataNodes:</span> <span class="string">ds.server_status_history</span></span><br><span class="line">        <span class="attr">tableStrategy:</span></span><br><span class="line">          <span class="attr">standard:</span></span><br><span class="line">            <span class="attr">shardingColumn:</span> <span class="string">create_time</span></span><br><span class="line">            <span class="attr">shardingAlgorithmName:</span> <span class="string">auto-custom</span></span><br><span class="line">    <span class="attr">shardingAlgorithms:</span></span><br><span class="line">      <span class="attr">auto-custom:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">CLASS_BASED</span></span><br><span class="line">        <span class="attr">props:</span></span><br><span class="line">          <span class="attr">strategy:</span> <span class="string">standard</span></span><br><span class="line">          <span class="attr">algorithmClassName:</span> <span class="string">com.fc.v2.common.sharding.CustomTimeShardingAlgorithm</span></span><br><span class="line"><span class="comment">#    auto-interval:</span></span><br><span class="line"><span class="comment">#      type: AUTO_INTERVAL</span></span><br><span class="line"><span class="comment">#      props:</span></span><br><span class="line"><span class="comment">#        datetime-lower: &#x27;2023-01-01 00:00:00&#x27;</span></span><br><span class="line"><span class="comment">#        datetime-upper: &#x27;2023-12-01 00:00:00&#x27;</span></span><br><span class="line"><span class="comment">#        # 60 * 60 * 24 * 30=30å¤©</span></span><br><span class="line"><span class="comment">#        sharding-seconds: &#x27;2592000&#x27;</span></span><br><span class="line"><span class="comment">#    interval:</span></span><br><span class="line"><span class="comment">#      type: INTERVAL</span></span><br><span class="line"><span class="comment">#      props:</span></span><br><span class="line"><span class="comment">#        datetime-pattern: &#x27;yyyy-MM&#x27;</span></span><br><span class="line"><span class="comment">#        datetime-lower: &#x27;2023-01&#x27;</span></span><br><span class="line"><span class="comment">#        datetime-upper: &#x27;2023-12&#x27;</span></span><br><span class="line"><span class="comment">#        sharding-suffix-pattern: &#x27;yyyyMM&#x27;</span></span><br><span class="line"><span class="comment">#        # é—´éš”å¤§å°</span></span><br><span class="line"><span class="comment">#        datetime-interval-amount: 1</span></span><br><span class="line"><span class="comment">#        datetime-interval-unit: &#x27;Months&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">props:</span></span><br><span class="line">  <span class="attr">sql-show:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springbootæ˜ å°„å›¾ç‰‡</title>
      <link href="/2024/04/23/Springboot%E6%98%A0%E5%B0%84%E5%9B%BE%E7%89%87/"/>
      <url>/2024/04/23/Springboot%E6%98%A0%E5%B0%84%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p>åœ¨<code>application.yml</code>é‡Œé¢æ·»åŠ å›¾ç‰‡å­˜æ”¾çš„ä½ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">user:</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">D:/home/data/schoolNews/</span></span><br></pre></td></tr></table></figure><p>è‡ªå·±å†™ä¸Šä¼ å’Œä¸‹è½½çš„æ–¹æ³•</p><hr><hr><p>ä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸Šä¼ æ–‡ä»¶æ˜ å°„è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;file&quot;)</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&#123;&quot;unchecked&quot;,&quot;rawtypes&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileController</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;user.file.path&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String filePath;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConfigService configService;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file,String type)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">if</span> (file.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">EIException</span>(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileExt</span> <span class="operator">=</span> file.getOriginalFilename().substring(file.getOriginalFilename().lastIndexOf(<span class="string">&quot;.&quot;</span>)+<span class="number">1</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">upload</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(filePath,<span class="string">&quot;/upload/&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(!upload.exists()) &#123;</span><br><span class="line">            upload.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>().getTime()+<span class="string">&quot;.&quot;</span>+fileExt;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(upload.getAbsolutePath()+<span class="string">&quot;/&quot;</span>+fileName);</span><br><span class="line">        file.transferTo(dest);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isNotBlank(type) &amp;&amp; type.equals(<span class="string">&quot;1&quot;</span>)) &#123;</span><br><span class="line">            <span class="type">ConfigEntity</span> <span class="variable">configEntity</span> <span class="operator">=</span> configService.selectOne(<span class="keyword">new</span> <span class="title class_">EntityWrapper</span>&lt;ConfigEntity&gt;().eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;faceFile&quot;</span>));</span><br><span class="line">            <span class="keyword">if</span>(configEntity==<span class="literal">null</span>) &#123;</span><br><span class="line">                configEntity = <span class="keyword">new</span> <span class="title class_">ConfigEntity</span>();</span><br><span class="line">                configEntity.setName(<span class="string">&quot;faceFile&quot;</span>);</span><br><span class="line">                configEntity.setValue(fileName);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                configEntity.setValue(fileName);</span><br><span class="line">            &#125;</span><br><span class="line">            configService.insertOrUpdate(configEntity);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> R.ok().put(<span class="string">&quot;file&quot;</span>, fileName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸‹è½½æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="meta">@IgnoreAuth</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; download(<span class="meta">@RequestParam</span> String fileName) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">File</span> <span class="variable">upload</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(filePath,<span class="string">&quot;/upload/&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(!upload.exists()) &#123;</span><br><span class="line">                upload.mkdirs();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(upload.getAbsolutePath()+<span class="string">&quot;/&quot;</span>+fileName);</span><br><span class="line">            <span class="keyword">if</span>(file.exists())&#123;</span><br><span class="line">                <span class="comment">/*if(!fileService.canRead(file, SessionManager.getSessionUser()))&#123;</span></span><br><span class="line"><span class="comment">getResponse().sendError(403);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line">                <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">                headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);    </span><br><span class="line">                headers.setContentDispositionFormData(<span class="string">&quot;attachment&quot;</span>, fileName);    </span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;<span class="type">byte</span>[]&gt;(FileUtils.readFileToByteArray(file),headers, HttpStatus.CREATED);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;<span class="type">byte</span>[]&gt;(HttpStatus.INTERNAL_SERVER_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ·»åŠ æ˜ å°„è®©å‰ç«¯æ˜¾ç¤ºå›¾ç‰‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterceptorConfig</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Value(&quot;$&#123;user.file.path&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String filePath;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">registry.addResourceHandler(<span class="string">&quot;/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:/&quot;</span> + filePath)</span><br><span class="line">;</span><br><span class="line"><span class="built_in">super</span>.addResourceHandlers(registry);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>condaåˆ›å»ºã€è¿è¡Œè™šæ‹Ÿç¯å¢ƒä»¥åŠä½¿ç”¨é•œåƒæº</title>
      <link href="/2024/04/23/conda%E5%88%9B%E5%BB%BA%E3%80%81%E8%BF%90%E8%A1%8C%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8%E9%95%9C%E5%83%8F%E6%BA%90/"/>
      <url>/2024/04/23/conda%E5%88%9B%E5%BB%BA%E3%80%81%E8%BF%90%E8%A1%8C%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8%E9%95%9C%E5%83%8F%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<p><font style="color:rgb(77, 77, 77);">è¾“å…¥æ­¤æ¡æŒ‡ä»¤åˆ›å»ºcondaè™šæ‹Ÿç¯å¢ƒ,å¯ä»¥è‡ªå·±æ›´æ”¹åç§°å’Œpythonç‰ˆæœ¬<br></font><strong><font style="color:rgb(77, 77, 77);">conda create -n è‡ªå·±è¾“å…¥åç§° python&#x3D;ç‰ˆæœ¬å·</font></strong><font style="color:rgb(77, 77, 77);"><br>å¦‚ä¸‹æ‰€ç¤º,æˆ‘ç¤ºä¾‹åˆ›å»ºåä¸ºtextçš„ç¯å¢ƒ</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n text python=3.8</span><br></pre></td></tr></table></figure><p><font style="color:rgb(79, 79, 79);">æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</font></p><p><font style="color:rgb(77, 77, 77);">è¾“å…¥ä¸‹è¡Œä»£ç æ¿€æ´»åˆšæ‰åˆ›å»ºçš„ç¯å¢ƒ,ä¸»è¦åç§°è¦ä¸ä¹‹å‰åˆ›å»ºæ—¶è®¾ç½®çš„åç§°ç›¸åº”<br></font><strong><font style="color:rgb(77, 77, 77);">conda activate åç§°</font></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate text</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="built_in">env</span> list</span><br></pre></td></tr></table></figure><p>condaå‡çº§</p><ul><li><code>conda update conda</code><font style="color:rgba(0, 0, 0, 0.75);">å‡çº§conda</font></li><li><code>conda update anaconda</code><font style="color:rgba(0, 0, 0, 0.75);">å‡çº§anacondaå‰è¦å…ˆå‡çº§conda</font></li><li><code>conda update --all</code><font style="color:rgba(0, 0, 0, 0.75);">å‡çº§æ‰€æœ‰åŒ…</font></li></ul><p>åˆ é™¤ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove -n xxxxx(åå­—) --all</span><br></pre></td></tr></table></figure><p>condaå®‰è£…ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c conda-forge pybullet</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>layuiåŠ¨æ€æ·»åŠ option</title>
      <link href="/2024/04/23/layui%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0option/"/>
      <url>/2024/04/23/layui%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0option/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ˆè·å–select</span></span><br><span class="line"><span class="keyword">var</span> select = $(<span class="string">&quot;#serverId&quot;</span>)</span><br><span class="line"><span class="comment">// è¿™ä¸ªæ˜¯ä¸€ä¸ªé»˜è®¤çš„option</span></span><br><span class="line">select.<span class="title function_">append</span>(<span class="keyword">new</span> <span class="title class_">Option</span>(<span class="string">&quot;è¯·é€‰æ‹©&quot;</span>,<span class="string">&quot;&quot;</span>))</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  select.<span class="title function_">append</span>(<span class="keyword">new</span> <span class="title class_">Option</span>(data[i].<span class="property">tags</span>,data[i].<span class="property">id</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> curServer = <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;curServer&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (curServer != <span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">  select.<span class="title function_">val</span>(curServer);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æœ€åä¸€å®šé‡æ–°æ¸²æŸ“</span></span><br><span class="line">form.<span class="title function_">render</span>();</span><br></pre></td></tr></table></figure><hr><p>é‡æ–°æ¸²æŸ“çš„è¡¨æ ¼ï¼Œå¯èƒ½ä¼šå‡ºç°ç™½åº•ç™½å­—å¯¼è‡´çœ‹ä¸æ¸…</p><p><img src="/img/posts/515ddeb73705758bcaf5a995379c5034.png"></p><p>è¿™å—åªèƒ½åœ¨å¤–å±‚çš„divå—ä¸­æ·»åŠ <code>style=&quot;color: #0C0C0C&quot;</code>æ‰‹åŠ¨æ¸²æŸ“</p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Layui </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>my.cnf é…ç½®ä¼˜åŒ–</title>
      <link href="/2024/04/23/my.cnf%20%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96/"/>
      <url>/2024/04/23/my.cnf%20%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">collation-server=utf8mb4_unicode_ci</span><br><span class="line">character-set-server=utf8mb4 <span class="comment"># å­—ç¬¦é›†</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">datadir=/var/lib/mysql  <span class="comment"># MySQLå®‰è£…ä½ç½®</span></span><br><span class="line">socket=/var/lib/mysql/mysql.sock  <span class="comment"># MySQLé€šè®¯åè®®æ–‡ä»¶ä½ç½®ï¼Œæœ¬åœ°è¿æ¥ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦æ”¯æŒç¬¦å·é“¾æ¥ï¼Œå³æ•°æ®åº“æˆ–è¡¨å¯ä»¥å­˜å‚¨åœ¨my.cnfä¸­æŒ‡å®šdatadirä¹‹å¤–çš„åˆ†åŒºæˆ–ç›®å½•ï¼Œä¸º0ä¸å¼€å¯ã€‚</span></span><br><span class="line"><span class="comment"># ç¦ç”¨symbolic-linksé€‰é¡¹ã€æœåŠ¡é…ç½®ï¼Œç¦ç”¨ç¬¦å·é“¾æ¥ä»¥é˜²æ­¢å„ç§å®‰å…¨é£é™©</span></span><br><span class="line">symbolic-links=0 </span><br><span class="line">pid-file=/var/run/mysqld/mysqld.pid <span class="comment"># MySQLè¿›ç¨‹ä½ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç½‘ç»œè®¾ç½®  </span></span><br><span class="line">max_connections=200  <span class="comment"># æœ€å¤§è¿æ¥æ•°ï¼Œæ ¹æ®åº”ç”¨éœ€æ±‚è°ƒæ•´  </span></span><br><span class="line">max_connect_errors=100000</span><br><span class="line">table_open_cache=2000  <span class="comment"># æ‰“å¼€çš„è¡¨ç¼“å­˜æ•°é‡  </span></span><br><span class="line">table_definition_cache=1500  <span class="comment"># è¡¨å®šä¹‰ç¼“å­˜æ•°é‡  9How</span></span><br><span class="line">thread_cache_size=16  <span class="comment"># çº¿ç¨‹ç¼“å­˜å¤§å°</span></span><br><span class="line"><span class="comment"># äº‹åŠ¡éš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="comment"># ç”±ä½åˆ°é«˜åˆ†åˆ«ä¸º</span></span><br><span class="line"><span class="comment"># read-uncommittedï¼ˆè¯»æœªæäº¤ï¼‰</span></span><br><span class="line"><span class="comment"># read-committedï¼ˆè¯»æäº¤ï¼‰ </span></span><br><span class="line"><span class="comment"># repeatable readï¼ˆé‡å¤è¯»ï¼‰ </span></span><br><span class="line"><span class="comment"># Serializableï¼ˆåºåˆ—åŒ–ï¼‰ </span></span><br><span class="line">transaction_isolation=READ-COMMITTED </span><br><span class="line">lower_case_table_names=1 <span class="comment"># å¤§å°å†™æ•æ„Ÿå…³é—­</span></span><br><span class="line">default_time_zone=+8:00 <span class="comment"># æ—¶åŒº</span></span><br><span class="line">open_files_limit=65535 <span class="comment"># æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°é‡</span></span><br><span class="line">log_timestamps=system <span class="comment"># è§£å†³æ—¥å¿—æ—¶åŒºä¸åŒ¹é…é—®é¢˜ (5.7 ç‰ˆæœ¬ç‹¬æœ‰)</span></span><br><span class="line">wait_timeout=900  <span class="comment"># è¿æ¥æ—¶é•¿æ§åˆ¶</span></span><br><span class="line">interactive_timeout=900 <span class="comment"># è¿æ¥æ—¶é•¿æ§åˆ¶</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼“å­˜å’Œç¼“å†²è®¾ç½®  </span></span><br><span class="line">innodb_buffer_pool_size=4G  <span class="comment"># InnoDBç¼“å†²æ± å¤§å°ï¼Œå»ºè®®è®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„50%-75%  </span></span><br><span class="line">innodb_buffer_pool_instances=4  <span class="comment"># ç¼“å†²æ± å®ä¾‹æ•°é‡ï¼Œå»ºè®®è®¾ç½®ä¸ºç¼“å†²æ± å¤§å°çš„1/1Gï¼Œæœ€å¤š8ä¸ª  </span></span><br><span class="line">innodb_stats_on_metadata=OFF  <span class="comment"># å…³é—­åœ¨å…ƒæ•°æ®è¯·æ±‚æ—¶æ›´æ–°ç»Ÿè®¡ä¿¡æ¯ï¼Œå‡å°‘I/O  </span></span><br><span class="line">innodb_flush_method=O_DIRECT  <span class="comment"># ä½¿ç”¨ç›´æ¥I/Oï¼Œå‡å°‘æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ </span></span><br><span class="line">innodb_io_capacity=2000 <span class="comment"># InnoDBåå°ä»»åŠ¡(å¦‚åˆ·æ–°è„é¡µå’Œåˆå¹¶æ’å…¥ç¼“å†²åŒº)æ¯ç§’å¯ä»¥è¿›è¡Œçš„I/Oæ“ä½œæ•°é‡</span></span><br><span class="line">innodb_log_files_in_group=4 <span class="comment"># InnoDBé‡åšæ—¥å¿—ç»„ä¸­æ—¥å¿—æ–‡ä»¶çš„æ•°é‡</span></span><br><span class="line"><span class="comment"># â†“â†“â†“â†“ è¯¥é…ç½®åªèƒ½åœ¨åˆå§‹åŒ–å®ä¾‹å‰é…ç½®ï¼Œå¦‚æœå¯åŠ¨åæŠ¥é”™éœ€è¦æ”¹æˆ0</span></span><br><span class="line">innodb_undo_tablespaces=4 <span class="comment"># InnoDBä½¿ç”¨çš„æ’¤é”€è¡¨ç©ºé—´æ–‡ä»¶çš„æ•°é‡ï¼Œå­˜å‚¨æ’¤é”€æ—¥å¿—ï¼Œæ”¯æŒäº‹åŠ¡å›æ»š</span></span><br><span class="line">innodb_undo_log_truncate=1 <span class="comment"># å¯ç”¨æ’¤é”€æ—¥å¿—çš„æˆªæ–­</span></span><br><span class="line">innodb_max_undo_log_size=1G <span class="comment"># å•ä¸ªæ’¤é”€è¡¨ç©ºé—´æ–‡ä»¶çš„æœ€å¤§å¤§å°</span></span><br><span class="line">innodb_flush_neighbors=0 <span class="comment"># æ§åˆ¶InnoDBæ˜¯å¦åº”è¯¥å°è¯•å°†ç›¸é‚»çš„è„é¡µä¸€èµ·åˆ·æ–°åˆ°ç£ç›˜ï¼Œå…³é—­</span></span><br><span class="line">innodb_print_all_deadlocks=1 <span class="comment"># æ‰“å°æ­»é”ä¿¡æ¯åˆ°é”™è¯¯æ—¥å¿—</span></span><br><span class="line">innodb_online_alter_log_max_size=128M <span class="comment"># è®¾ç½®åœ¨çº¿DDLæ“ä½œç”Ÿæˆçš„é‡åšæ—¥å¿—çš„æœ€å¤§å¤§å°</span></span><br><span class="line">innodb_lock_wait_timeout=10 <span class="comment"># è®¾ç½®äº‹åŠ¡ç­‰å¾…è¡Œé”çš„æœ€é•¿æ—¶é—´</span></span><br><span class="line">innodb_doublewrite=ON <span class="comment"># å¯ç”¨InnoDBçš„åŒé‡å†™å…¥ç¼“å†²åŒºåŠŸèƒ½</span></span><br><span class="line">innodb_file_format=Barracuda <span class="comment"># è®¾ç½®InnoDBè¡¨çš„æ–‡ä»¶æ ¼å¼ã€‚Barracudaæ ¼å¼æ”¯æŒå‹ç¼©å’ŒåŠ¨æ€è¡Œæ ¼å¼ã€‚</span></span><br><span class="line">innodb_log_file_size=512M  <span class="comment"># InnoDBæ—¥å¿—æ–‡ä»¶å¤§å°  </span></span><br><span class="line">innodb_log_buffer_size=16M  <span class="comment"># InnoDBæ—¥å¿—ç¼“å†²åŒºå¤§å°  </span></span><br><span class="line">innodb_flush_log_at_trx_commit=1  <span class="comment"># æ¯äº‹åŠ¡æäº¤æ—¶åˆ·æ–°æ—¥å¿—ï¼Œè®¾ä¸º1ä¿è¯æ•°æ®å®Œæ•´æ€§  </span></span><br><span class="line">innodb_file_per_table=1  <span class="comment"># æ¯ä¸ªè¡¨ä¸€ä¸ªç‹¬ç«‹è¡¨ç©ºé—´æ–‡ä»¶  </span></span><br><span class="line">innodb_open_files=300  <span class="comment"># InnoDBæ‰“å¼€çš„æ–‡ä»¶æ•°é‡  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#bin log</span></span><br><span class="line">expire_logs_days=30 <span class="comment"># äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰çš„è‡ªåŠ¨åˆ é™¤å¤©æ•°</span></span><br><span class="line">max_binlog_cache_size=1024M <span class="comment"># è®¾ç½®ä¼šè¯çº§åˆ«çš„äºŒè¿›åˆ¶æ—¥å¿—ç¼“å­˜çš„æœ€å¤§å¤§å°</span></span><br><span class="line">sync_binlog=1 <span class="comment"># æ¯æ¬¡æäº¤äº‹åŠ¡åéƒ½åŒæ­¥åˆ°æ—¥å¿—</span></span><br><span class="line">server_id=1001 <span class="comment"># æœåŠ¡å™¨çš„å”¯ä¸€æ ‡è¯†ç¬¦ç”¨äºåŒºåˆ†ä¸»ä»æœåŠ¡å™¨</span></span><br><span class="line">gtid-mode=on <span class="comment"># å¯ç”¨å…¨å±€äº‹åŠ¡æ ‡è¯†ç¬¦ï¼ˆGTIDï¼‰æ¨¡å¼</span></span><br><span class="line">enforce-gtid-consistency=<span class="literal">true</span> <span class="comment"># åœ¨GTIDæ¨¡å¼ä¸‹ï¼Œå¼ºåˆ¶è¦æ±‚äº‹åŠ¡çš„ä¸€è‡´æ€§</span></span><br><span class="line">master-info-repository=TABLE <span class="comment"># ä¸»æœåŠ¡å™¨ä¿¡æ¯çš„å­˜å‚¨ä½ç½®</span></span><br><span class="line">relay-log-info-repository=TABLE <span class="comment"># ä¸­ç»§æ—¥å¿—ä¿¡æ¯çš„å­˜å‚¨ä½ç½®</span></span><br><span class="line">sync-master-info=1000 <span class="comment"># å°†ä¸»æœåŠ¡å™¨ä¿¡æ¯åŒæ­¥åˆ°ç£ç›˜çš„é¢‘ç‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸´æ—¶è¡¨å’Œç›¸å…³è®¾ç½®  </span></span><br><span class="line">tmp_table_size=64M  </span><br><span class="line">max_heap_table_size=64M  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—å’Œé”™è¯¯æŠ¥å‘Š  </span></span><br><span class="line">log_error=/var/log/mysql/mysqld.log </span><br><span class="line">slow_query_log=1  <span class="comment"># å¼€å¯æ…¢æŸ¥è¯¢</span></span><br><span class="line">slow_query_log_file=/var/log/mysql/mysql-slow.log  </span><br><span class="line">long_query_time=2  <span class="comment"># è®°å½•æ‰§è¡Œæ—¶é—´è¶…è¿‡2ç§’çš„æŸ¥è¯¢  </span></span><br><span class="line">log_queries_not_using_indexes=1  <span class="comment"># è®°å½•æœªä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>printè¾“å‡ºè¿›åº¦æ¡</title>
      <link href="/2024/04/23/print%E8%BE%93%E5%87%BA%E8%BF%9B%E5%BA%A6%E6%9D%A1/"/>
      <url>/2024/04/23/print%E8%BE%93%E5%87%BA%E8%BF%9B%E5%BA%A6%E6%9D%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯ä»‹ç»"><a href="#èƒŒæ™¯ä»‹ç»" class="headerlink" title="èƒŒæ™¯ä»‹ç»"></a>èƒŒæ™¯ä»‹ç»</h2><p>åœ¨å¤„ç†å¤§é‡æ•°æ®æˆ–æ‰§è¡Œè€—æ—¶è¾ƒé•¿çš„æ“ä½œæ—¶ï¼Œç”¨æˆ·å¾€å¾€éœ€è¦äº†è§£ç¨‹åºçš„æ‰§è¡Œè¿›åº¦ã€‚é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸­æ˜¾ç¤ºè¿›åº¦æ¡ï¼Œå¯ä»¥ç›´è§‚åœ°å±•ç¤ºä»»åŠ¡çš„å®Œæˆæƒ…å†µï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨Pythonçš„<code>print</code>å‡½æ•°å®ç°ä¸€ä¸ªç®€å•è€Œå®ç”¨çš„å‘½ä»¤è¡Œè¿›åº¦æ¡ã€‚</p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p>å‘½ä»¤è¡Œè¿›åº¦æ¡çš„æ ¸å¿ƒåŸç†æ˜¯åˆ©ç”¨å›è½¦ç¬¦<code>\r</code>å®ç°åŒä¸€è¡Œçš„åˆ·æ–°ã€‚å½“<code>print</code>å‡½æ•°ä¸­ä½¿ç”¨<code>end=&quot;&quot;</code>å‚æ•°æ—¶ï¼Œå¯ä»¥é˜²æ­¢è‡ªåŠ¨æ¢è¡Œï¼Œé…åˆ<code>\r</code>å¯ä»¥å®ç°åœ¨åŒä¸€è¡Œä¸æ–­æ›´æ–°å†…å®¹ï¼Œä»è€Œå‘ˆç°å‡ºè¿›åº¦æ¡åŠ¨æ€å˜åŒ–çš„æ•ˆæœã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display_progress_bar</span>(<span class="params">current, total, bar_length=<span class="number">20</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ˜¾ç¤ºè¿›åº¦æ¡</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    å‚æ•°:</span></span><br><span class="line"><span class="string">    - current: å½“å‰è¿›åº¦</span></span><br><span class="line"><span class="string">    - total: æ€»ä»»åŠ¡æ•°</span></span><br><span class="line"><span class="string">    - bar_length: è¿›åº¦æ¡é•¿åº¦</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    progress_percent = <span class="built_in">int</span>(current / total * <span class="number">100</span>)</span><br><span class="line">    filled_length = <span class="built_in">int</span>(bar_length * (progress_percent / <span class="number">100</span>))</span><br><span class="line">    bar = <span class="string">&quot;|&quot;</span> + <span class="string">&quot;-&quot;</span> * filled_length + <span class="string">&quot; &quot;</span> * (bar_length - filled_length) + <span class="string">&quot;|&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;\ræ­£åœ¨å¤„ç†: <span class="subst">&#123;bar&#125;</span> <span class="subst">&#123;progress_percent&#125;</span>% (<span class="subst">&#123;current&#125;</span>/<span class="subst">&#123;total&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹æ•°ç»„ï¼Œå®é™…åº”ç”¨ä¸­å¯æ›¿æ¢ä¸ºä»»ä½•å¯è¿­ä»£å¯¹è±¡</span></span><br><span class="line">data_array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">num = <span class="built_in">len</span>(data_array)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤„ç†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="keyword">for</span> index, element <span class="keyword">in</span> <span class="built_in">enumerate</span>(data_array):</span><br><span class="line">    i = index + <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span></span><br><span class="line">    time.sleep(<span class="number">0.3</span>)  <span class="comment"># å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œæ˜¯æ‚¨çš„å¤„ç†é€»è¾‘</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ¯å¤„ç†2ä¸ªå…ƒç´ æˆ–å¤„ç†åˆ°æœ€åä¸€ä¸ªå…ƒç´ æ—¶æ›´æ–°è¿›åº¦æ¡</span></span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">or</span> i == num:</span><br><span class="line">        <span class="built_in">print</span>(display_progress_bar(i, num), end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤„ç†å®Œæˆåæ¢è¡Œ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nå¤„ç†å®Œæˆ!&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="è¿›é˜¶ç”¨æ³•"><a href="#è¿›é˜¶ç”¨æ³•" class="headerlink" title="è¿›é˜¶ç”¨æ³•"></a>è¿›é˜¶ç”¨æ³•</h2><h3 id="1-æ·»åŠ å¤„ç†é€Ÿåº¦å’Œé¢„ä¼°å‰©ä½™æ—¶é—´"><a href="#1-æ·»åŠ å¤„ç†é€Ÿåº¦å’Œé¢„ä¼°å‰©ä½™æ—¶é—´" class="headerlink" title="1. æ·»åŠ å¤„ç†é€Ÿåº¦å’Œé¢„ä¼°å‰©ä½™æ—¶é—´"></a>1. æ·»åŠ å¤„ç†é€Ÿåº¦å’Œé¢„ä¼°å‰©ä½™æ—¶é—´</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display_advanced_progress_bar</span>(<span class="params">current, total, start_time, bar_length=<span class="number">20</span></span>):</span><br><span class="line">    progress_percent = <span class="built_in">int</span>(current / total * <span class="number">100</span>)</span><br><span class="line">    filled_length = <span class="built_in">int</span>(bar_length * (progress_percent / <span class="number">100</span>))</span><br><span class="line">    bar = <span class="string">&quot;|&quot;</span> + <span class="string">&quot;-&quot;</span> * filled_length + <span class="string">&quot; &quot;</span> * (bar_length - filled_length) + <span class="string">&quot;|&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¡ç®—é€Ÿåº¦å’Œå‰©ä½™æ—¶é—´</span></span><br><span class="line">    elapsed_time = time.time() - start_time</span><br><span class="line">    <span class="keyword">if</span> current == <span class="number">0</span>:</span><br><span class="line">        items_per_second = <span class="number">0</span></span><br><span class="line">        eta = <span class="string">&quot;æœªçŸ¥&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        items_per_second = current / elapsed_time</span><br><span class="line">        eta_seconds = (total - current) / items_per_second <span class="keyword">if</span> items_per_second &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ ¼å¼åŒ–å‰©ä½™æ—¶é—´</span></span><br><span class="line">        <span class="keyword">if</span> eta_seconds &lt; <span class="number">60</span>:</span><br><span class="line">            eta = <span class="string">f&quot;<span class="subst">&#123;eta_seconds:<span class="number">.1</span>f&#125;</span>ç§’&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> eta_seconds &lt; <span class="number">3600</span>:</span><br><span class="line">            eta = <span class="string">f&quot;<span class="subst">&#123;eta_seconds/<span class="number">60</span>:<span class="number">.1</span>f&#125;</span>åˆ†é’Ÿ&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            eta = <span class="string">f&quot;<span class="subst">&#123;eta_seconds/<span class="number">3600</span>:<span class="number">.1</span>f&#125;</span>å°æ—¶&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;\rè¿›åº¦: <span class="subst">&#123;bar&#125;</span> <span class="subst">&#123;progress_percent&#125;</span>% (<span class="subst">&#123;current&#125;</span>/<span class="subst">&#123;total&#125;</span>) é€Ÿåº¦: <span class="subst">&#123;items_per_second:<span class="number">.2</span>f&#125;</span>é¡¹/ç§’ å‰©ä½™æ—¶é—´: <span class="subst">&#123;eta&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line">start_time = time.time()</span><br><span class="line">data = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, _ <span class="keyword">in</span> <span class="built_in">enumerate</span>(data):</span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿå¤„ç†</span></span><br><span class="line">    time.sleep(<span class="number">0.05</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ›´æ–°è¿›åº¦æ¡</span></span><br><span class="line">    <span class="keyword">if</span> (i + <span class="number">1</span>) % <span class="number">5</span> == <span class="number">0</span> <span class="keyword">or</span> i + <span class="number">1</span> == <span class="built_in">len</span>(data):</span><br><span class="line">        <span class="built_in">print</span>(display_advanced_progress_bar(i + <span class="number">1</span>, <span class="built_in">len</span>(data), start_time), end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nå¤„ç†å®Œæˆ!&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="2-ä½¿ç”¨tqdmåº“"><a href="#2-ä½¿ç”¨tqdmåº“" class="headerlink" title="2. ä½¿ç”¨tqdmåº“"></a>2. ä½¿ç”¨tqdmåº“</h3><p>å¯¹äºæ›´ä¸“ä¸šçš„è¿›åº¦æ¡éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨<code>tqdm</code>åº“ï¼Œå®ƒæä¾›äº†æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè¿›åº¦æ¡</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> tqdm(<span class="built_in">range</span>(<span class="number">100</span>), desc=<span class="string">&quot;å¤„ç†è¿›åº¦&quot;</span>):</span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿå¤„ç†</span></span><br><span class="line">    time.sleep(<span class="number">0.05</span>)</span><br></pre></td></tr></table></figure><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><ol><li><strong>æ•°æ®å¤„ç†</strong>ï¼šå¤„ç†å¤§é‡æ•°æ®æ—¶æ˜¾ç¤ºè¿›åº¦</li><li><strong>æ–‡ä»¶æ“ä½œ</strong>ï¼šä¸Šä¼ ã€ä¸‹è½½æˆ–å¤åˆ¶å¤§æ–‡ä»¶æ—¶æ˜¾ç¤ºè¿›åº¦</li><li><strong>æ‰¹é‡ä»»åŠ¡</strong>ï¼šæ‰§è¡Œæ‰¹é‡æ“ä½œæ—¶æ˜¾ç¤ºå®Œæˆæƒ…å†µ</li><li><strong>é•¿æ—¶é—´è®¡ç®—</strong>ï¼šæ‰§è¡Œéœ€è¦è¾ƒé•¿æ—¶é—´çš„è®¡ç®—ä»»åŠ¡æ—¶æä¾›åé¦ˆ</li></ol><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li>è¿›åº¦æ¡æ›´æ–°é¢‘ç‡ä¸å®œè¿‡é«˜ï¼Œå¦åˆ™ä¼šå½±å“æ€§èƒ½</li><li>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨</li><li>åœ¨æŸäº›ç¯å¢ƒï¼ˆå¦‚Jupyter Notebookï¼‰ä¸­ï¼Œ<code>\r</code>å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–æ–¹æ³•</li><li>å¯¹äºéå¸¸å¤§çš„æ•°æ®é›†ï¼Œå¯ä»¥è€ƒè™‘æŒ‰ç™¾åˆ†æ¯”è€ŒéæŒ‰é¡¹ç›®æ•°æ›´æ–°è¿›åº¦æ¡</li></ol><p>é€šè¿‡åˆç†ä½¿ç”¨è¿›åº¦æ¡ï¼Œå¯ä»¥æ˜¾è‘—æå‡å‘½ä»¤è¡Œåº”ç”¨çš„ç”¨æˆ·ä½“éªŒï¼Œè®©ç”¨æˆ·æ¸…æ¥šåœ°äº†è§£ç¨‹åºæ‰§è¡Œæƒ…å†µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸç”ŸJSå®ç°èŠå¤©çª—å£</title>
      <link href="/2024/04/23/%E5%8E%9F%E7%94%9FJS%E5%AE%9E%E7%8E%B0%E8%81%8A%E5%A4%A9%E7%AA%97%E5%8F%A3/"/>
      <url>/2024/04/23/%E5%8E%9F%E7%94%9FJS%E5%AE%9E%E7%8E%B0%E8%81%8A%E5%A4%A9%E7%AA%97%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<p>å¼¹çª—é¡µé¢çš„æ ·å¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.talk_con</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">50px</span> auto <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#f9f9f9</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.talk_show</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">580px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">420px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">10px</span> auto <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.talk_input</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">580px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">10px</span> auto <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.whotalk</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.talk_word</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">420px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">26px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">outline</span>: none;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">text-indent</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.talk_sub</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">56px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.atalk</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.atalk</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#0181cc</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.btalk</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">text-align</span>: right;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.btalk</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>: <span class="number">#ef8201</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/static/assets/js/jquery-3.5.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;input&quot;</span>).<span class="title function_">keypress</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(e.<span class="property">which</span> == <span class="number">13</span>)&#123;<span class="comment">//æ£€æµ‹å›è½¦é”®</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//æ‰§è¡Œå›è½¦äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">send</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> <span class="title class_">Words</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;words&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> <span class="title class_">Who</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;who&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> <span class="title class_">TalkWords</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;talkwords&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> <span class="title class_">TalkSub</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;talksub&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//å®šä¹‰ç©ºå­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> str = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="title class_">TalkWords</span>.<span class="property">value</span> == <span class="string">&quot;&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ¶ˆæ¯ä¸ºç©ºæ—¶å¼¹çª—</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;æ¶ˆæ¯ä¸èƒ½ä¸ºç©º&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> word = <span class="title class_">TalkWords</span>.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;talkwords&quot;</span>).<span class="property">value</span>=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      str = <span class="string">&#x27;&lt;div class=&quot;btalk&quot;&gt;&lt;span&gt;&#x27;</span> + word + <span class="string">&#x27;&lt;/span&gt;&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">Words</span>.<span class="property">innerHTML</span> = <span class="title class_">Words</span>.<span class="property">innerHTML</span> + str;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">add</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">url</span>: <span class="string">&#x27;/AiController/query&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&#x27;post&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">content</span>: word,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">beforeSend</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;body&quot;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;div id=&quot;load&quot; style=&quot;position:fixed;top:30%;z-index:1200;background:url(/static/admin/images/loading.gif) top center no-repeat;width:100%;height:140px;margin:auto auto;&quot;&gt;&lt;/div&gt;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">complete</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;#load&quot;</span>).<span class="title function_">remove</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> response = res.<span class="property">msg</span>;</span></span><br><span class="line"><span class="language-javascript">          str = <span class="string">&#x27;&lt;div class=&quot;atalk&quot;&gt;&lt;span&gt;&#x27;</span> + response + <span class="string">&#x27;&lt;/span&gt;&lt;/div&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="title class_">Words</span>.<span class="property">innerHTML</span> = <span class="title class_">Words</span>.<span class="property">innerHTML</span> + str;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">add</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;words&#x27;</span>).<span class="property">scrollTop</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;words&#x27;</span>).<span class="property">scrollHeight</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;talk_con&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;talk_show&quot;</span> <span class="attr">id</span>=<span class="string">&quot;words&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;atalk&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;asay&quot;</span>&gt;</span>æ‚¨å¥½ï¼šæˆ‘æ˜¯æ‚¨çš„æ™ºèƒ½å°åŠ©æ‰‹Hibiki<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btalk&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;bsay&quot;</span>&gt;</span>ä½ å¥½<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;talk_input&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;whotalk&quot;</span> <span class="attr">id</span>=<span class="string">&quot;who&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è¾“å…¥&quot;</span> <span class="attr">disabled</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;talk_word&quot;</span> <span class="attr">id</span>=<span class="string">&quot;talkwords&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å‘é€&quot;</span> <span class="attr">class</span>=<span class="string">&quot;talk_sub&quot;</span> <span class="attr">id</span>=<span class="string">&quot;talksub&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;send()&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨çš„é¡µé¢å¼•å…¥æŒ‰é’®</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;pear-btn pear-btn-warming pear-btn-md&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;message()&quot;</span> <span class="attr">title</span>=<span class="string">&quot;æ™ºèƒ½å°åŠ©æ‰‹&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;layui-icon layui-icon-template&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç”¨layuiæ‰“å¼€å¼¹çª—</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">message</span>(<span class="params"></span>)&#123;</span><br><span class="line">  layer.<span class="title function_">open</span>(&#123;</span><br><span class="line">    <span class="comment">//layeræä¾›äº†5ç§å±‚ç±»å‹ã€‚å¯ä¼ å…¥çš„å€¼æœ‰ï¼š0ï¼ˆä¿¡æ¯æ¡†ï¼Œé»˜è®¤ï¼‰1ï¼ˆé¡µé¢å±‚ï¼‰2ï¼ˆiframeå±‚ï¼‰3ï¼ˆåŠ è½½å±‚ï¼‰4ï¼ˆtipså±‚ï¼‰</span></span><br><span class="line">    <span class="attr">type</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&quot;æ™ºèƒ½åŠ©æ‰‹&quot;</span>,</span><br><span class="line">    <span class="attr">area</span>: [<span class="string">&#x27;50%&#x27;</span>,<span class="string">&#x27;85%&#x27;</span>],</span><br><span class="line">    <span class="attr">content</span>:  rootPath + <span class="string">&quot;/AiController/view&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç”¨jsæ‰“å¼€å¼¹çª—</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> screenWidth = <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>;</span><br><span class="line"><span class="keyword">var</span> screenHeight = <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">height</span>;</span><br><span class="line"><span class="keyword">var</span> popupWidth = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">var</span> popupHeight = <span class="number">600</span>;</span><br><span class="line"><span class="keyword">var</span> left = (screenWidth - popupWidth)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> top = (screenHeight - popupHeight)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> popupWindow = <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&#x27;AI.html&#x27;</span>, <span class="string">&#x27;popup&#x27;</span>, <span class="string">&#x27;width=&#x27;</span> + popupWidth + <span class="string">&#x27;,height=&#x27;</span> + popupHeight + <span class="string">&#x27;,left=&#x27;</span> + left + <span class="string">&#x27;,top=&#x27;</span> + top);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®šæ—¶åˆ·æ–°å›¾è¡¨</title>
      <link href="/2024/04/23/%E5%AE%9A%E6%97%B6%E5%88%B7%E6%96%B0%E5%9B%BE%E8%A1%A8/"/>
      <url>/2024/04/23/%E5%AE%9A%E6%97%B6%E5%88%B7%E6%96%B0%E5%9B%BE%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªåŠ¨åˆ·æ–°</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> intervalId = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> intervalValue = <span class="built_in">parseInt</span>($(<span class="string">&quot;#time&quot;</span>).<span class="title function_">val</span>() * <span class="number">1000</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setNewInterval</span>(intervalValue);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">setNewInterval</span>(<span class="params">intervalValue</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (intervalId) &#123;</span><br><span class="line">      <span class="built_in">clearInterval</span>(intervalId)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(intervalValue) &amp;&amp; intervalValue &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      intervalId = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">flashDashboardChart</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å®šæ—¶è·å–æ•°æ®&quot;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(intervalValue)</span><br><span class="line">      &#125;, intervalValue);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&quot;#time&quot;</span>).<span class="title function_">on</span>(<span class="string">&#x27;input propertychange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> intervalValue = <span class="built_in">parseInt</span>($(<span class="variable language_">this</span>).<span class="title function_">val</span>() * <span class="number">1000</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(intervalValue)</span><br><span class="line">    <span class="title function_">setNewInterval</span>(intervalValue);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>$(document).ready</code>è¿›å…¥é¡µé¢å°±ç›´æ¥åˆ·æ–°ï¼Œ<code>time</code>æ˜¯å¯ä»¥é€‰æ—¶é—´çš„å—ï¼Œä»ä¸­å¯ä»¥è·å–å€¼ä»è€Œæ”¹å˜å®šæ—¶å™¨çš„é¢‘ç‡ï¼Œè€Œ<code>flashDashboardChart()</code>æ˜¯åˆ·æ–°å›¾è¡¨çš„æ–¹æ³•</p>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Echarts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨çš„é•œåƒåœ°å€</title>
      <link href="/2024/04/23/%E5%B8%B8%E7%94%A8%E7%9A%84%E9%95%9C%E5%83%8F%E5%9C%B0%E5%9D%80/"/>
      <url>/2024/04/23/%E5%B8%B8%E7%94%A8%E7%9A%84%E9%95%9C%E5%83%8F%E5%9C%B0%E5%9D%80/</url>
      
        <content type="html"><![CDATA[<p>npm  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br></pre></td></tr></table></figure><p>nvm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node_mirror: https://npmmirror.com/mirrors/node/</span><br><span class="line">npm_mirror: https://npmmirror.com/mirrors/npm/</span><br></pre></td></tr></table></figure><p>python</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install  -i https://pypi.tuna.tsinghua.edu.cn/simple some-package</span><br></pre></td></tr></table></figure><p>kali</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ä¸­ç§‘å¤§ </span><br><span class="line">deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib </span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line"> </span><br><span class="line">é˜¿é‡Œäº‘ </span><br><span class="line">deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib </span><br><span class="line">deb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line"> </span><br><span class="line">æ¸…åå¤§å­¦ </span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free </span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free</span><br><span class="line"> </span><br><span class="line">è¯´æ˜ï¼šdebä»£è¡¨è½¯ä»¶çš„ä½ç½®ï¼Œdeb-srcä»£è¡¨è½¯ä»¶çš„æºä»£ç ä½ç½®</span><br><span class="line"> </span><br><span class="line">é…ç½®kali aptä¸ºé˜¿é‡Œæºå®ä¾‹ï¼š</span><br><span class="line">é…ç½®æ€è·¯æ–¹æ³• ä¿®æ”¹ /etc/apt/sources.listï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹å°†ç›¸å…³urlæ”¹æˆé˜¿é‡Œäº‘çš„æºã€‚ </span><br><span class="line"> </span><br><span class="line">deb https://mirrors.aliyun.com/kali kali-rolling main non-free contrib </span><br><span class="line">deb-src https://mirrors.aliyun.com/kali kali-rolling main non-free contrib</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€è¯¦ç»†çš„MySQLéƒ¨ç½²</title>
      <link href="/2024/04/23/%E6%9C%80%E8%AF%A6%E7%BB%86%E7%9A%84MySQL%E9%83%A8%E7%BD%B2/"/>
      <url>/2024/04/23/%E6%9C%80%E8%AF%A6%E7%BB%86%E7%9A%84MySQL%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h2 id="rpmå®‰è£…MySQL"><a href="#rpmå®‰è£…MySQL" class="headerlink" title="rpmå®‰è£…MySQL"></a>rpmå®‰è£…MySQL</h2><h3 id="å…ˆä¸‹è½½æ‰€éœ€çš„åŒ…"><a href="#å…ˆä¸‹è½½æ‰€éœ€çš„åŒ…" class="headerlink" title="å…ˆä¸‹è½½æ‰€éœ€çš„åŒ…"></a>å…ˆä¸‹è½½æ‰€éœ€çš„åŒ…</h3><p>åˆ†åˆ«ä¸‹è½½ MySQL5.7çš„<code>common</code> ã€<code>libs</code>ã€<code>client</code>ã€<code>server</code>4ä¸ªRPMåŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-common-5.7.33-1.el6.x86_64.rpm</span><br><span class="line"></span><br><span class="line">wget https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-libs-5.7.33-1.el6.x86_64.rpm</span><br><span class="line"></span><br><span class="line">wget https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-client-5.7.33-1.el6.x86_64.rpm</span><br><span class="line"></span><br><span class="line">wget https://repo.huaweicloud.com/mysql/Downloads/MySQL-5.7/mysql-community-server-5.7.33-1.el6.x86_64.rpm</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…4ä¸ªrmpåŒ…"><a href="#å®‰è£…4ä¸ªrmpåŒ…" class="headerlink" title="å®‰è£…4ä¸ªrmpåŒ…"></a>å®‰è£…4ä¸ªrmpåŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh *.rpm --nodeps â€“-force</span><br></pre></td></tr></table></figure><h3 id="é…ç½®MySQLçš„é…ç½®æ–‡ä»¶"><a href="#é…ç½®MySQLçš„é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®MySQLçš„é…ç½®æ–‡ä»¶"></a>é…ç½®MySQLçš„é…ç½®æ–‡ä»¶</h3><p>åœ¨&#x2F;etc&#x2F;my.cnf é‡Œé¢é…ç½®<code>MySQL</code>çš„é…ç½®</p><h3 id="å¯åŠ¨MySQLæœåŠ¡"><a href="#å¯åŠ¨MySQLæœåŠ¡" class="headerlink" title="å¯åŠ¨MySQLæœåŠ¡"></a>å¯åŠ¨MySQLæœåŠ¡</h3><p>å¯åŠ¨MySQLæœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br><span class="line">or</span><br><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹MySQLæœåŠ¡çŠ¶æ€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service mysqld status</span><br><span class="line">or</span><br><span class="line">systemctl status mysqld</span><br></pre></td></tr></table></figure><hr><h2 id="yumå®‰è£…MySQL"><a href="#yumå®‰è£…MySQL" class="headerlink" title="yumå®‰è£…MySQL"></a>yumå®‰è£…MySQL</h2><h3 id="å…ˆå¸è½½MySQL"><a href="#å…ˆå¸è½½MySQL" class="headerlink" title="å…ˆå¸è½½MySQL"></a>å…ˆå¸è½½MySQL</h3><p>æŸ¥çœ‹æ—§çš„MySQL</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep MySQL</span><br></pre></td></tr></table></figure><p>å¸è½½æ‰€æœ‰ MySQL æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e  xxxxxxxxxxxxx</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨yumå¸è½½MySQL</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum list installed | grep mysql</span><br><span class="line">yum remove mysql</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…MySQLçš„yumæº"><a href="#å®‰è£…MySQLçš„yumæº" class="headerlink" title="å®‰è£…MySQLçš„yumæº"></a>å®‰è£…MySQLçš„yumæº</h3><p>å¯ä»¥ä»ä¸‹é¢è¿™ä¸ªç½‘ç«™é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬</p><blockquote><p><a href="http://repo.mysql.com/">http://repo.mysql.com/</a></p></blockquote><p>ä¸‹è½½å¹¶å®‰è£…yumæº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">sudo rpm -ivh mysql-community-release-el7-5.noarch.rpm</span><br></pre></td></tr></table></figure><ul><li>æ‰§è¡Œå®Œæ¯•åå…‹å¯ä»¥æŸ¥çœ‹æºæ–‡ä»¶ï¼š&#x2F;etc&#x2F;yum.repos.d&#x2F;</li><li>ä¼šå¤šå‡ºä¸€ä¸ª MySQL çš„ rpm åŒ…å’Œä¸¤ä¸ª MySQL å¼€å¤´çš„æº</li><li>è¯¥å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œä¼šåœ¨&#x2F;etc&#x2F;yum.repos.d&#x2F;ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmysql-community.repoæ–‡ä»¶ï¼Œè¿™å°±æ˜¯mysqlçš„yumæº</li><li>å½“ç„¶ä½ ä¹Ÿå¯é€šè¿‡å‘½ä»¤çš„æ–¹å¼æŸ¥çœ‹mysqlçš„yumæºæ˜¯å¦å®‰è£…æˆåŠŸã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum repolist enabled | grep <span class="string">&quot;mysql.*-community.*&quot;</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨yumå‘½ä»¤å®‰è£…MySQL"><a href="#ä½¿ç”¨yumå‘½ä»¤å®‰è£…MySQL" class="headerlink" title="ä½¿ç”¨yumå‘½ä»¤å®‰è£…MySQL"></a>ä½¿ç”¨yumå‘½ä»¤å®‰è£…MySQL</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-server</span><br></pre></td></tr></table></figure><p>å‡ºç° Completeï¼å³è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚<br>ç„¶åæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep MySQL</span><br></pre></td></tr></table></figure><p>åˆ—å‡ºMySQLçš„æœåŠ¡ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸ</p><h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure><hr><h2 id="Windowsä¸‹ä½¿ç”¨æ–‡ä»¶å¤¹å®‰è£…"><a href="#Windowsä¸‹ä½¿ç”¨æ–‡ä»¶å¤¹å®‰è£…" class="headerlink" title="Windowsä¸‹ä½¿ç”¨æ–‡ä»¶å¤¹å®‰è£…"></a>Windowsä¸‹ä½¿ç”¨æ–‡ä»¶å¤¹å®‰è£…</h2><h3 id="å…ˆåˆ°å®˜ç½‘ä¸‹è½½MySQLå®‰è£…åŒ…"><a href="#å…ˆåˆ°å®˜ç½‘ä¸‹è½½MySQLå®‰è£…åŒ…" class="headerlink" title="å…ˆåˆ°å®˜ç½‘ä¸‹è½½MySQLå®‰è£…åŒ…"></a>å…ˆåˆ°å®˜ç½‘ä¸‹è½½MySQLå®‰è£…åŒ…</h3><p>ä¸‹è½½å®Œæˆè§£å‹ä¹‹åæ–‡ä»¶åº”è¯¥å¦‚ä¸‹</p><p><img src="/img/posts/20240617013240.png">!</p><h3 id="åˆ›å»ºä¸€ä¸ªmy-iniæ–‡ä»¶"><a href="#åˆ›å»ºä¸€ä¸ªmy-iniæ–‡ä»¶" class="headerlink" title="åˆ›å»ºä¸€ä¸ªmy.iniæ–‡ä»¶"></a>åˆ›å»ºä¸€ä¸ªmy.iniæ–‡ä»¶</h3><p>æ·»åŠ æ•°æ®çš„é…ç½®</p><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"><span class="params">#</span>è®¾ç½®3306ç«¯å£å·</span><br><span class="line">port=3306</span><br><span class="line"><span class="params">#</span>è®¾ç½®MySQLçš„å®‰è£…ç›®å½•</span><br><span class="line">basedir=</span><br><span class="line"><span class="params">#</span>è®¾ç½®MySQLæ•°æ®åº“çš„æ•°æ®å­˜æ”¾ç›®å½•</span><br><span class="line">datadir=</span><br><span class="line"><span class="params">#</span>è¿è¡Œæœ€å¤§è¿æ¥æ•°</span><br><span class="line">max<span class="built_in">_</span>connections=200</span><br><span class="line"><span class="params">#</span>è¿è¡Œè¿æ¥å¤±è´¥çš„æ¬¡æ•°ã€‚</span><br><span class="line">max<span class="built_in">_</span>connect<span class="built_in">_</span>errors=10</span><br><span class="line"><span class="params">#</span>æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºutf-8</span><br><span class="line">character-set-server=utf8</span><br><span class="line">[mysql]</span><br><span class="line"><span class="params">#</span>å®¢æˆ·ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºutf8</span><br><span class="line">default-character-set=utf8</span><br><span class="line">[client]</span><br><span class="line"><span class="params">#</span>å®¢æˆ·ç«¯é»˜è®¤ç«¯å£å·ä¸º3306</span><br><span class="line">port=3306</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…ï¼ˆéœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€CMDï¼‰"><a href="#å®‰è£…ï¼ˆéœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€CMDï¼‰" class="headerlink" title="å®‰è£…ï¼ˆéœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€CMDï¼‰"></a>å®‰è£…ï¼ˆéœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€CMDï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqld --install</span><br><span class="line">mysqld --initialize --console</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å¯†ç </p><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><p>æ‰“å¼€Windowsçš„æœåŠ¡ï¼Œæ‰¾åˆ°MySQLç„¶åå¯åŠ¨</p><hr><h2 id="5-7ç‰ˆæœ¬ä¿®æ”¹rootçš„å¯†ç "><a href="#5-7ç‰ˆæœ¬ä¿®æ”¹rootçš„å¯†ç " class="headerlink" title="5.7ç‰ˆæœ¬ä¿®æ”¹rootçš„å¯†ç "></a>5.7ç‰ˆæœ¬ä¿®æ”¹rootçš„å¯†ç </h2><h3 id="æŸ¥çœ‹MySQLçš„å¯†ç "><a href="#æŸ¥çœ‹MySQLçš„å¯†ç " class="headerlink" title="æŸ¥çœ‹MySQLçš„å¯†ç "></a>æŸ¥çœ‹MySQLçš„å¯†ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /var/log/mysqld.log | grep password</span><br></pre></td></tr></table></figure><p>å¦‚æœæ›´æ”¹äº†MySQLçš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦åœ¨é‡Œé¢æŸ¥çœ‹mysqlçš„æ—¥å¿—è·¯å¾„</p><h3 id="ç™»å½•MySQLæœåŠ¡å™¨"><a href="#ç™»å½•MySQLæœåŠ¡å™¨" class="headerlink" title="ç™»å½•MySQLæœåŠ¡å™¨"></a>ç™»å½•MySQLæœåŠ¡å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p </span><br></pre></td></tr></table></figure><p>è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œå¯†ç å°±æ˜¯åˆšæ‰çœ‹çš„</p><h3 id="ä¿®æ”¹rootç™»å½•å¯†ç "><a href="#ä¿®æ”¹rootç™»å½•å¯†ç " class="headerlink" title="ä¿®æ”¹rootç™»å½•å¯†ç "></a>ä¿®æ”¹rootç™»å½•å¯†ç </h3><p>ç™»å½•çŠ¶æ€ä¸‹<br>è®¾ç½®å¯†ç æ ¡éªŒå¼ºåº¦ä¸ºæœ€ä½çº§åˆ«</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> global validate_password_policy=0;</span><br></pre></td></tr></table></figure><p>è®¾ç½®å¯†ç é•¿åº¦æœ€å°‘ä¸º4ä¸ªå­—ç¬¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> global validate_password_length=4;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å¯†ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;ä½ çš„å¯†ç &#x27;</span>;</span><br></pre></td></tr></table></figure><p>åˆ·æ–°æƒé™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges; </span><br></pre></td></tr></table></figure><hr><h2 id="8-0ç‰ˆæœ¬ä¿®æ”¹å¯†ç "><a href="#8-0ç‰ˆæœ¬ä¿®æ”¹å¯†ç " class="headerlink" title="8.0ç‰ˆæœ¬ä¿®æ”¹å¯†ç "></a>8.0ç‰ˆæœ¬ä¿®æ”¹å¯†ç </h2><h3 id="å…ˆæŸ¥çœ‹MySQLçš„å¯†ç "><a href="#å…ˆæŸ¥çœ‹MySQLçš„å¯†ç " class="headerlink" title="å…ˆæŸ¥çœ‹MySQLçš„å¯†ç "></a>å…ˆæŸ¥çœ‹MySQLçš„å¯†ç </h3><h3 id="ç™»å½•ååˆ°MySQL"><a href="#ç™»å½•ååˆ°MySQL" class="headerlink" title="ç™»å½•ååˆ°MySQL"></a>ç™»å½•ååˆ°MySQL</h3><h3 id="ä¿®æ”¹å¯†ç ç­–ç•¥"><a href="#ä¿®æ”¹å¯†ç ç­–ç•¥" class="headerlink" title="ä¿®æ”¹å¯†ç ç­–ç•¥"></a>ä¿®æ”¹å¯†ç ç­–ç•¥</h3><p>æŸ¥çœ‹å¯†ç ç­–ç•¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;validate%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ç­–ç•¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œä¿®æ”¹</span></span><br><span class="line"><span class="comment">--å¯†ç éªŒè¯ç­–ç•¥ä½è¦æ±‚(0æˆ–LOWä»£è¡¨ä½çº§)</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_policy<span class="operator">=</span>MEDIUM;</span><br><span class="line"></span><br><span class="line"><span class="comment">--å¯†ç è‡³å°‘è¦åŒ…å«çš„å°å†™å­—æ¯ä¸ªæ•°å’Œå¤§å†™å­—æ¯ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_mixed_case_count<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--å¯†ç è‡³å°‘è¦åŒ…å«çš„æ•°å­—ä¸ªæ•°ã€‚</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_number_count<span class="operator">=</span><span class="number">1</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">--å¯†ç è‡³å°‘è¦åŒ…å«çš„ç‰¹æ®Šå­—ç¬¦æ•°</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_special_char_count<span class="operator">=</span><span class="number">1</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¯†ç é•¿åº¦</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_length<span class="operator">=</span><span class="number">6</span>;  </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹å¯†ç "><a href="#ä¿®æ”¹å¯†ç " class="headerlink" title="ä¿®æ”¹å¯†ç "></a>ä¿®æ”¹å¯†ç </h3><p>å¦‚æœå¯†ç ä¸ºç©ºç›´æ¥ä¿®æ”¹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;ä½ çš„å¯†ç &#x27;</span>; </span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ä¸ºç©º</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">with</span> mysql_native_password <span class="keyword">by</span> <span class="string">&#x27;ä½ çš„å¯†ç &#x27;</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦è¿œç¨‹è¿æ¥æ”¹æˆ<code>%</code></p><p>åˆ·æ–°æƒé™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç›‘æµ‹æœ¬åœ°storageçš„æ•°å€¼å˜åŒ–</title>
      <link href="/2024/04/23/%E7%9B%91%E6%B5%8B%E6%9C%AC%E5%9C%B0storage%E7%9A%84%E6%95%B0%E5%80%BC%E5%8F%98%E5%8C%96/"/>
      <url>/2024/04/23/%E7%9B%91%E6%B5%8B%E6%9C%AC%E5%9C%B0storage%E7%9A%84%E6%95%B0%E5%80%BC%E5%8F%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯ä»‹ç»"><a href="#èƒŒæ™¯ä»‹ç»" class="headerlink" title="èƒŒæ™¯ä»‹ç»"></a>èƒŒæ™¯ä»‹ç»</h2><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ä¸åŒé¡µé¢æˆ–ä¸åŒæ ‡ç­¾é¡µä¹‹é—´å…±äº«æ•°æ®ã€‚<code>localStorage</code>æ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ç§æŒä¹…åŒ–å­˜å‚¨æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸åŒé¡µé¢ä¹‹é—´å…±äº«æ•°æ®ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å®æ—¶ç›‘å¬è¿™äº›æ•°æ®çš„å˜åŒ–ï¼Œä»¥ä¾¿åŠæ—¶æ›´æ–°é¡µé¢å†…å®¹ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ç›‘æµ‹æœ¬åœ°<code>localStorage</code>çš„æ•°å€¼å˜åŒ–ã€‚</p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p>æµè§ˆå™¨æä¾›äº†<code>storage</code>äº‹ä»¶ï¼Œå½“<code>localStorage</code>ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>è¯¥äº‹ä»¶åªä¼šåœ¨æ•°æ®å‘ç”Ÿå˜åŒ–çš„é¡µé¢ä»¥å¤–çš„å…¶ä»–é¡µé¢è§¦å‘</strong>ï¼Œå³å¦‚æœåœ¨å½“å‰é¡µé¢ä¿®æ”¹äº†<code>localStorage</code>çš„å€¼ï¼Œå½“å‰é¡µé¢ä¸ä¼šè§¦å‘<code>storage</code>äº‹ä»¶ï¼Œä½†å…¶ä»–æ‰“å¼€çš„åŒåŸŸåé¡µé¢ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬localStorageå˜åŒ–</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;storage&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// æ£€æŸ¥æ˜¯å¦æ˜¯æˆ‘ä»¬å…³å¿ƒçš„é”®å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line">  <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&#x27;curServer&#x27;</span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;localStorage key &quot;curServer&quot; changed from:&#x27;</span>, event.<span class="property">oldValue</span>, <span class="string">&#x27;to:&#x27;</span>, event.<span class="property">newValue</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ ¹æ®æ–°å€¼é‡æ–°åŠ è½½è¡¨æ ¼æ•°æ®</span></span><br><span class="line">    table.<span class="title function_">reload</span>(<span class="string">&#x27;var-table&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="variable constant_">MODULE_PATH</span> + <span class="string">&#x27;/&#x27;</span> + <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;curServer&quot;</span>) + <span class="string">&#x27;/globalVariables&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>è¿™ç§æŠ€æœ¯åœ¨ä»¥ä¸‹åœºæ™¯ç‰¹åˆ«æœ‰ç”¨ï¼š</p><ol><li><strong>å¤šæ ‡ç­¾é¡µåº”ç”¨</strong>ï¼šç”¨æˆ·åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µä¸­ä¿®æ”¹äº†è®¾ç½®ï¼Œå…¶ä»–æ ‡ç­¾é¡µéœ€è¦åŒæ­¥æ›´æ–°</li><li><strong>å®æ—¶æ•°æ®åŒæ­¥</strong>ï¼šä¸åŒé¡µé¢éœ€è¦å…±äº«åŒä¸€ä»½æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶åŒæ­¥æ›´æ–°</li><li><strong>ç”¨æˆ·åå¥½è®¾ç½®</strong>ï¼šç”¨æˆ·æ›´æ”¹äº†ä¸»é¢˜ã€è¯­è¨€ç­‰åå¥½è®¾ç½®ï¼Œæ‰€æœ‰æ‰“å¼€çš„é¡µé¢éƒ½éœ€è¦ç«‹å³åº”ç”¨æ–°è®¾ç½®</li></ol><h2 id="å…³äºè¡¨æ ¼é‡è½½"><a href="#å…³äºè¡¨æ ¼é‡è½½" class="headerlink" title="å…³äºè¡¨æ ¼é‡è½½"></a>å…³äºè¡¨æ ¼é‡è½½</h2><p>åœ¨ä½¿ç”¨è¡¨æ ¼ç»„ä»¶ï¼ˆå¦‚Layui Tableï¼‰æ—¶ï¼Œè¡¨æ ¼åˆå§‹åŒ–åçš„URLæ˜¯å›ºå®šçš„ã€‚å¦‚æœæ•°æ®æºå‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦é€šè¿‡<code>table.reload()</code>æ–¹æ³•é‡æ–°æŒ‡å®šURLå¹¶åˆ·æ–°è¡¨æ ¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡è½½è¡¨æ ¼ï¼Œæ›´æ–°æ•°æ®æºURL</span></span><br><span class="line">table.<span class="title function_">reload</span>(<span class="string">&#x27;table-id&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;æ–°çš„æ•°æ®æºURL&#x27;</span>  <span class="comment">// åŠ¨æ€æ„å»ºæ–°çš„URL</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li><code>storage</code>äº‹ä»¶åªåœ¨å€¼çœŸæ­£æ”¹å˜æ—¶è§¦å‘ï¼Œå¦‚æœè®¾ç½®çš„å€¼ä¸åŸå€¼ç›¸åŒï¼Œåˆ™ä¸ä¼šè§¦å‘äº‹ä»¶</li><li>è¯¥äº‹ä»¶ä¸ä¼šåœ¨è§¦å‘å˜åŒ–çš„å½“å‰é¡µé¢ä¸­è§¦å‘ï¼Œåªä¼šåœ¨åŒåŸŸåçš„å…¶ä»–é¡µé¢ä¸­è§¦å‘</li><li>äº‹ä»¶å¯¹è±¡åŒ…å«ä»¥ä¸‹æœ‰ç”¨çš„å±æ€§ï¼š<ul><li><code>key</code>: å‘ç”Ÿå˜åŒ–çš„é”®å</li><li><code>oldValue</code>: å˜åŒ–å‰çš„å€¼</li><li><code>newValue</code>: å˜åŒ–åçš„å€¼</li><li><code>storageArea</code>: æŒ‡å‘å‘ç”Ÿå˜åŒ–çš„ Storage å¯¹è±¡</li><li><code>url</code>: è§¦å‘è¯¥å˜åŒ–çš„é¡µé¢çš„URL</li></ul></li></ol><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸åŒé¡µé¢é—´çš„æ•°æ®å®æ—¶åŒæ­¥ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»™å·²ç»æ‰“å¥½çš„jaråŒ…æ·»åŠ ä¾èµ–jaråŒ…é‡æ–°æ‰“åŒ…</title>
      <link href="/2024/04/23/%E7%BB%99%E5%B7%B2%E7%BB%8F%E6%89%93%E5%A5%BD%E7%9A%84jar%E5%8C%85%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96jar%E5%8C%85%E9%87%8D%E6%96%B0%E6%89%93%E5%8C%85/"/>
      <url>/2024/04/23/%E7%BB%99%E5%B7%B2%E7%BB%8F%E6%89%93%E5%A5%BD%E7%9A%84jar%E5%8C%85%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96jar%E5%8C%85%E9%87%8D%E6%96%B0%E6%89%93%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜èƒŒæ™¯"><a href="#é—®é¢˜èƒŒæ™¯" class="headerlink" title="é—®é¢˜èƒŒæ™¯"></a>é—®é¢˜èƒŒæ™¯</h2><p>åœ¨Javaå¼€å‘ä¸­ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦ç»™å·²ç»æ‰“åŒ…å¥½çš„JARæ–‡ä»¶æ·»åŠ é¢å¤–çš„ä¾èµ–åº“ã€‚è¿™ç§æƒ…å†µé€šå¸¸å‘ç”Ÿåœ¨ï¼š</p><ol><li>æ²¡æœ‰æºä»£ç ä½†éœ€è¦æ‰©å±•ç¬¬ä¸‰æ–¹JARåŒ…åŠŸèƒ½</li><li>ç´§æ€¥ä¿®å¤ç”Ÿäº§ç¯å¢ƒä¸­ç¼ºå°‘çš„ä¾èµ–</li><li>ä¸ºç‰¹å®šç¯å¢ƒæ·»åŠ é©±åŠ¨ç¨‹åºï¼ˆå¦‚æ•°æ®åº“é©±åŠ¨ï¼‰</li><li>é¿å…é‡æ–°æ„å»ºæ•´ä¸ªé¡¹ç›®çš„è€—æ—¶è¿‡ç¨‹</li></ol><p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ç»™å·²ç»æ‰“å¥½çš„JARåŒ…æ·»åŠ ä¾èµ–ï¼Œå¹¶é‡æ–°æ‰“åŒ…ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨è§£å‹æ·»åŠ ä¾èµ–"><a href="#æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨è§£å‹æ·»åŠ ä¾èµ–" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨è§£å‹æ·»åŠ ä¾èµ–"></a>æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨è§£å‹æ·»åŠ ä¾èµ–</h3><p>è¿™ç§æ–¹æ³•é€‚ç”¨äºSpring Bootå¯æ‰§è¡ŒJARæˆ–æ™®é€šJARåŒ…ã€‚</p><h4 id="æ­¥éª¤è¯¦è§£"><a href="#æ­¥éª¤è¯¦è§£" class="headerlink" title="æ­¥éª¤è¯¦è§£"></a>æ­¥éª¤è¯¦è§£</h4><ol><li><p><strong>è§£å‹åŸå§‹JARåŒ…</strong></p><p>ä½¿ç”¨å‹ç¼©è½¯ä»¶ï¼ˆå¦‚WinRARã€7-Zipï¼‰æˆ–å‘½ä»¤è¡Œè§£å‹JARæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å‘½ä»¤è¡Œè§£å‹</span></span><br><span class="line"><span class="built_in">mkdir</span> jar-extract</span><br><span class="line"><span class="built_in">cd</span> jar-extract</span><br><span class="line">jar -xf ../original-app.jar</span><br></pre></td></tr></table></figure><p>è§£å‹åçš„ç›®å½•ç»“æ„é€šå¸¸å¦‚ä¸‹ï¼ˆä»¥Spring Boot JARä¸ºä¾‹ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">jar-extract/</span><br><span class="line">â”œâ”€â”€ BOOT-INF/</span><br><span class="line">â”‚   â”œâ”€â”€ classes/      # åº”ç”¨ç¨‹åºç±»æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ lib/          # ä¾èµ–åº“</span><br><span class="line">â”œâ”€â”€ META-INF/</span><br><span class="line">â”‚   â”œâ”€â”€ MANIFEST.MF   # æ¸…å•æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â””â”€â”€ org/              # Spring Boot Loaderç±»</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ ä¾èµ–JARåŒ…</strong></p><p>å°†éœ€è¦æ·»åŠ çš„ä¾èµ–JARåŒ…å¤åˆ¶åˆ°<code>BOOT-INF/lib/</code>ç›®å½•ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚æ·»åŠ MySQLé©±åŠ¨</span></span><br><span class="line"><span class="built_in">cp</span> /path/to/mysql-connector-java-8.0.28.jar jar-extract/BOOT-INF/lib/</span><br></pre></td></tr></table></figure><p>å¯¹äºæ™®é€šJARåŒ…ï¼ˆéSpring Bootï¼‰ï¼Œå¯èƒ½æ²¡æœ‰<code>BOOT-INF/lib/</code>ç›®å½•ï¼Œè¿™æ—¶å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•æ¥å­˜æ”¾ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p jar-extract/lib</span><br><span class="line"><span class="built_in">cp</span> /path/to/dependency.jar jar-extract/lib/</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹<code>META-INF/MANIFEST.MF</code>æ–‡ä»¶ï¼Œæ·»åŠ Class-Pathæ¡ç›®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class-Path: lib/dependency.jar</span><br></pre></td></tr></table></figure></li><li><p><strong>é‡æ–°æ‰“åŒ…JARæ–‡ä»¶</strong></p><p>è¿›å…¥è§£å‹ç›®å½•ï¼Œæ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥è§£å‹ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> jar-extract</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ‰“åŒ…ï¼Œä¿ç•™åŸå§‹MANIFEST.MF</span></span><br><span class="line">jar cvfm0 ../new-app.jar ./META-INF/MANIFEST.MF *</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>c</code>: åˆ›å»ºæ–°çš„JARæ–‡ä»¶</li><li><code>v</code>: ç”Ÿæˆè¯¦ç»†è¾“å‡º</li><li><code>f</code>: æŒ‡å®šJARæ–‡ä»¶å</li><li><code>m</code>: åŒ…å«æŒ‡å®šçš„æ¸…å•æ–‡ä»¶</li><li><code>0</code>: ä¸å‹ç¼©ï¼ˆä»…å­˜å‚¨ï¼ŒåŠ å¿«æ‰“åŒ…é€Ÿåº¦ï¼‰</li></ul></li></ol><h3 id="æ–¹æ³•äºŒï¼šä½¿ç”¨Maven-Shade-Pluginï¼ˆæœ‰æºç æƒ…å†µä¸‹ï¼‰"><a href="#æ–¹æ³•äºŒï¼šä½¿ç”¨Maven-Shade-Pluginï¼ˆæœ‰æºç æƒ…å†µä¸‹ï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šä½¿ç”¨Maven Shade Pluginï¼ˆæœ‰æºç æƒ…å†µä¸‹ï¼‰"></a>æ–¹æ³•äºŒï¼šä½¿ç”¨Maven Shade Pluginï¼ˆæœ‰æºç æƒ…å†µä¸‹ï¼‰</h3><p>å¦‚æœä½ æœ‰é¡¹ç›®æºç ï¼Œå¯ä»¥ä½¿ç”¨Maven Shade Pluginå°†ä¾èµ–æ‰“åŒ…è¿›JARï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-shade-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goal</span>&gt;</span>shade<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactSet</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">include</span>&gt;</span>mysql:mysql-connector-java<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">artifactSet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰ï¼šä½¿ç”¨JarUpdateå·¥å…·"><a href="#æ–¹æ³•ä¸‰ï¼šä½¿ç”¨JarUpdateå·¥å…·" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šä½¿ç”¨JarUpdateå·¥å…·"></a>æ–¹æ³•ä¸‰ï¼šä½¿ç”¨JarUpdateå·¥å…·</h3><p>å¯¹äºç®€å•çš„JARæ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨Javaè‡ªå¸¦çš„jarå·¥å…·çš„æ›´æ–°åŠŸèƒ½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†æ–°çš„æ–‡ä»¶æ·»åŠ åˆ°ç°æœ‰JARä¸­</span></span><br><span class="line">jar -uf original-app.jar -C /path/to/files/ .</span><br></pre></td></tr></table></figure><h2 id="å®é™…æ¡ˆä¾‹ï¼šæ·»åŠ MySQLé©±åŠ¨åˆ°Spring-Bootåº”ç”¨"><a href="#å®é™…æ¡ˆä¾‹ï¼šæ·»åŠ MySQLé©±åŠ¨åˆ°Spring-Bootåº”ç”¨" class="headerlink" title="å®é™…æ¡ˆä¾‹ï¼šæ·»åŠ MySQLé©±åŠ¨åˆ°Spring Bootåº”ç”¨"></a>å®é™…æ¡ˆä¾‹ï¼šæ·»åŠ MySQLé©±åŠ¨åˆ°Spring Bootåº”ç”¨</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„å®ä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ç»™Spring Bootåº”ç”¨æ·»åŠ MySQLé©±åŠ¨ï¼š</p><ol><li><p><strong>è§£å‹åŸå§‹JARåŒ…</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> app-extract</span><br><span class="line"><span class="built_in">cd</span> app-extract</span><br><span class="line">jar -xf ../yaay-app-user.jar</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ MySQLé©±åŠ¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½MySQLé©±åŠ¨ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰</span></span><br><span class="line">wget https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.28/mysql-connector-java-8.0.28.jar</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶åˆ°libç›®å½•</span></span><br><span class="line"><span class="built_in">cp</span> mysql-connector-java-8.0.28.jar BOOT-INF/lib/</span><br></pre></td></tr></table></figure></li><li><p><strong>é‡æ–°æ‰“åŒ…</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jar cvfm0 ../yaay-app-user-with-mysql.jar ./META-INF/MANIFEST.MF *</span><br></pre></td></tr></table></figure></li><li><p><strong>éªŒè¯æ–°JARåŒ…</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºJARåŒ…å†…å®¹ï¼Œç¡®è®¤é©±åŠ¨å·²æ·»åŠ </span></span><br><span class="line">jar -tf ../yaay-app-user-with-mysql.jar | grep mysql</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li><strong>ç‰ˆæœ¬å…¼å®¹æ€§</strong>ï¼šç¡®ä¿æ·»åŠ çš„ä¾èµ–ä¸åº”ç”¨ç¨‹åºå…¼å®¹ï¼Œç‰¹åˆ«æ˜¯ç‰ˆæœ¬å·</li><li><strong>æ¸…å•æ–‡ä»¶</strong>ï¼šä¿ç•™åŸå§‹çš„MANIFEST.MFæ–‡ä»¶ï¼Œå°¤å…¶æ˜¯Main-Classå’ŒStart-Classæ¡ç›®</li><li><strong>JARç­¾å</strong>ï¼šå¦‚æœåŸå§‹JARå·²ç­¾åï¼Œæ·»åŠ æ–°ä¾èµ–åéœ€è¦é‡æ–°ç­¾å</li><li><strong>ç±»è·¯å¾„å†²çª</strong>ï¼šæ³¨æ„å¯èƒ½çš„ç±»è·¯å¾„å†²çªå’Œä¾èµ–é‡å¤</li><li><strong>æ–‡ä»¶å¤§å°</strong>ï¼šæ·»åŠ ä¾èµ–ä¼šå¢åŠ JARæ–‡ä»¶å¤§å°ï¼Œå¯èƒ½å½±å“éƒ¨ç½²å’Œå¯åŠ¨æ—¶é—´</li></ol><h2 id="æ›¿ä»£æ–¹æ¡ˆ"><a href="#æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="æ›¿ä»£æ–¹æ¡ˆ"></a>æ›¿ä»£æ–¹æ¡ˆ</h2><ol><li><strong>å¤–éƒ¨ä¾èµ–</strong>ï¼šå°†ä¾èµ–æ”¾åœ¨å¤–éƒ¨ç›®å½•ï¼Œé€šè¿‡<code>-Dloader.path</code>å‚æ•°æŒ‡å®šï¼ˆSpring Bootåº”ç”¨ï¼‰</li><li><strong>å®¹å™¨ç®¡ç†</strong>ï¼šåœ¨åº”ç”¨æœåŠ¡å™¨ä¸­é…ç½®å…±äº«åº“</li><li><strong>é‡æ–°æ„å»º</strong>ï¼šå¦‚æœå¯èƒ½ï¼Œæœ€å¥½ä»æºç é‡æ–°æ„å»ºï¼Œç¡®ä¿ä¾èµ–æ­£ç¡®ç®¡ç†</li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»™å·²æ‰“åŒ…çš„JARæ·»åŠ ä¾èµ–æ˜¯ä¸€ç§åº”æ€¥è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºæ— æ³•ç«‹å³é‡æ–°æ„å»ºé¡¹ç›®çš„æƒ…å†µã€‚é€šè¿‡è§£å‹JARåŒ…ã€æ·»åŠ ä¾èµ–æ–‡ä»¶å¹¶é‡æ–°æ‰“åŒ…ï¼Œå¯ä»¥å¿«é€Ÿè§£å†³ä¾èµ–ç¼ºå¤±é—®é¢˜ã€‚ä½†ä»é•¿æœŸæ¥çœ‹ï¼Œå»ºè®®åœ¨æºç çº§åˆ«æ­£ç¡®ç®¡ç†ä¾èµ–ï¼Œä½¿ç”¨Mavenæˆ–Gradleç­‰æ„å»ºå·¥å…·è¿›è¡Œæ ‡å‡†åŒ–æ„å»ºã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/executable-jar.html">Spring Boot å¯æ‰§è¡ŒJARæ ¼å¼</a></li><li><a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/jar.html">Java JARå‘½ä»¤æ–‡æ¡£</a></li><li>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/itwxming/article/details/104478226">https://blog.csdn.net/itwxming/article/details/104478226</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·å–æ±‰å­—æ‹¼éŸ³é¦–å­—æ¯</title>
      <link href="/2024/04/23/%E8%8E%B7%E5%8F%96%E6%B1%89%E5%AD%97%E6%8B%BC%E9%9F%B3%E9%A6%96%E5%AD%97%E6%AF%8D/"/>
      <url>/2024/04/23/%E8%8E%B7%E5%8F%96%E6%B1%89%E5%AD%97%E6%8B%BC%E9%9F%B3%E9%A6%96%E5%AD%97%E6%AF%8D/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ·»åŠ æ‰€éœ€çš„ä¾èµ–</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.belerweb<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pinyin4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªæ–¹æ³•æ¥ï¼Œè½¬æ¢æ‹¼éŸ³</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getPinYinHeadChar</span><span class="params">(String str)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isNull(str)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">convert</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; str.length(); j++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">word</span> <span class="operator">=</span> str.charAt(j);</span><br><span class="line">        <span class="comment">// æå–æ±‰å­—çš„é¦–å­—æ¯</span></span><br><span class="line">        String[] pinyinArray = PinyinHelper.toHanyuPinyinStringArray(word);</span><br><span class="line">        <span class="keyword">if</span> (pinyinArray != <span class="literal">null</span>) &#123;</span><br><span class="line">            convert += pinyinArray[<span class="number">0</span>].charAt(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            convert += word;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    convert = string2AllTrim(convert);</span><br><span class="line">    <span class="keyword">return</span> convert.toLowerCase();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>å…¶ä¸­PinyinHelperçš„æ–¹æ³•èƒ½å°†æ±‰å­—å­—ç¬¦ä¸²è½¬æ¢æˆé¦–å­—æ¯æ‹¼éŸ³çš„å­—ç¬¦ä¸²æ•°ç»„</em></p><p>mainæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> PingYinUtil.getPinYinHeadChar(<span class="string">&quot;æ”¯ä»˜å®&quot;</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; str = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    List&lt;String&gt; pin = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    List&lt;String&gt; level = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;D:\\bin\\æ¡Œé¢\\h_fever_outpatient_org_info.xlsx&quot;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºå·¥ä½œç°¿å¯¹è±¡</span></span><br><span class="line">        <span class="type">XSSFWorkbook</span> <span class="variable">xssfWorkbook</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(fileName));</span><br><span class="line">        <span class="comment">//è·å–å·¥ä½œç°¿ä¸‹sheetçš„ä¸ªæ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sheetNum</span> <span class="operator">=</span> xssfWorkbook.getNumberOfSheets();</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯¥excelæ–‡ä»¶ä¸­æ€»å…±æœ‰ï¼š&quot;</span>+sheetNum+<span class="string">&quot;ä¸ªsheet&quot;</span>);</span><br><span class="line">        <span class="comment">//éå†å·¥ä½œç°¿ä¸­çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line">        List&lt;Grade&gt; grades = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;sheetNum;i++) &#123;</span><br><span class="line">            <span class="comment">//è¯»å–ç¬¬iä¸ªå·¥ä½œè¡¨</span></span><br><span class="line">            System.out.println(<span class="string">&quot;è¯»å–ç¬¬&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;ä¸ªsheet&quot;</span>);</span><br><span class="line">            <span class="type">XSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> xssfWorkbook.getSheetAt(i);</span><br><span class="line">            <span class="comment">//è·å–æœ€åä¸€è¡Œçš„numï¼Œå³æ€»è¡Œæ•°ã€‚æ­¤å¤„ä»0å¼€å§‹</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">maxRow</span> <span class="operator">=</span> sheet.getLastRowNum();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> <span class="number">0</span>; row &lt;= maxRow; row++) &#123;</span><br><span class="line">                <span class="comment">//è·å–æœ€åå•å…ƒæ ¼numï¼Œå³æ€»å•å…ƒæ ¼æ•° ***æ³¨æ„ï¼šæ­¤å¤„ä»1å¼€å§‹è®¡æ•°***</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">maxRol</span> <span class="operator">=</span> sheet.getRow(row).getLastCellNum();</span><br><span class="line">                <span class="comment">// System.out.println(&quot;--------ç¬¬&quot; + row + &quot;è¡Œçš„æ•°æ®å¦‚ä¸‹--------&quot;);</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span> sheet.getRow(row).getCell(<span class="number">0</span>).toString();</span><br><span class="line">                str.add(a);</span><br><span class="line">                pin.add(PingYinUtil.getPinYinHeadChar(a));</span><br><span class="line">                level.add(sheet.getRow(row).getCell(<span class="number">2</span>).toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> (<span class="comment">//åˆ›å»ºå·¥ä½œè–„å¯¹è±¡</span></span><br><span class="line">             <span class="type">SXSSFWorkbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SXSSFWorkbook</span>()) &#123;</span><br><span class="line">            <span class="comment">//åˆ›å»ºå·¥ä½œè¡¨å¯¹è±¡</span></span><br><span class="line">            <span class="type">SXSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet();</span><br><span class="line">            <span class="comment">//åˆ›å»ºå·¥ä½œè¡¨çš„è¡Œ</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;str.size();i++)&#123;</span><br><span class="line">                <span class="type">SXSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(i);<span class="comment">//è®¾ç½®ç¬¬ä¸€è¡Œï¼Œä»é›¶å¼€å§‹</span></span><br><span class="line">                row.createCell(<span class="number">0</span>).setCellValue(str.get(i));<span class="comment">//ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—ä¸º</span></span><br><span class="line">                row.createCell(<span class="number">1</span>).setCellValue(pin.get(i));<span class="comment">//ç¬¬ä¸€è¡Œç¬¬äºŒåˆ—ä¸ºæ—¥æœŸ</span></span><br><span class="line">                row.createCell(<span class="number">2</span>).setCellValue(level.get(i));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            workbook.setSheetName(<span class="number">0</span>,<span class="string">&quot;sheet&quot;</span>);<span class="comment">//è®¾ç½®sheetçš„Name</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ–‡æ¡£è¾“å‡º</span></span><br><span class="line">            <span class="type">FileOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;D:\\bin\\æ¡Œé¢\\&quot;</span> + <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMddHHmmss&quot;</span>).format(<span class="keyword">new</span> <span class="title class_">Date</span>()).toString() +<span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line">            workbook.write(out);</span><br><span class="line">            out.close();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå­—èŠ‚è¶…é•¿</title>
      <link href="/2024/04/21/MYSQL%20%20ERROR%201118%20(42000)%20Row%20size%20too%20large/"/>
      <url>/2024/04/21/MYSQL%20%20ERROR%201118%20(42000)%20Row%20size%20too%20large/</url>
      
        <content type="html"><![CDATA[<p>æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ERROR</span> <span class="string">1118 (42000): Row size too large. </span></span><br><span class="line"> <span class="attr">The</span> <span class="string">maximum row size for the used table type, not counting BLOBs, is 65535. </span></span><br><span class="line"> <span class="attr">This</span> <span class="string">includes storage overhead, check the manual. </span></span><br><span class="line"> <span class="attr">You</span> <span class="string">have to change some columns to TEXT or BLOBs</span></span><br></pre></td></tr></table></figure><p>æŠ¥é”™çš„ä¿¡æ¯å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œæ‰€æœ‰å­—æ®µçš„å­—èŠ‚é•¿åº¦åŠ èµ·æ¥è¶…è¿‡äº†65535</p><p>è§£å†³çš„åŠæ³•å°±æ˜¯:<br><strong>å°†é•¿çš„å­—æ®µæ ¼å¼æ”¹æˆlongtext æˆ–è€…æ˜¯ longblob</strong></p><p><em>è¿™ä¸¤ä¸ªç±»å‹çš„åŒºåˆ«æ˜¯ï¼šå¦‚æœå­˜æ”¾äºŒè¿›åˆ¶æ–‡ä»¶å°±ç”¨longblobï¼Œå¦‚æœå­˜æ”¾é•¿æ–‡æœ¬ï¼Œå°±ç”¨longtext</em></p><p>åˆ°è¿™é‡ŒåŸºæœ¬èƒ½è§£å†³äº†</p><h3 id="ï¼ï¼ï¼"><a href="#ï¼ï¼ï¼" class="headerlink" title="ï¼ï¼ï¼"></a><code>ï¼ï¼ï¼</code></h3><p>å¦‚æœè¿˜æ˜¯çˆ†è¶…é•¿ï¼Œåˆ™éœ€è¦æŸ¥çœ‹æ•°æ®åº“çš„å­—ç¬¦é›†ç±»å‹<br>éœ€è¦æ³¨æ„ä¸€ä¸‹å­—ç¬¦é›†ï¼š</p><p><strong>utf8ä¸utf8mb4åŒºåˆ«</strong></p><blockquote><p>utf8 ä½¿ç”¨1~4ä¸ªå­—èŠ‚ï¼Œä¸€ç§å˜é•¿çš„ç¼–ç æ ¼å¼ï¼Œå­—ç¬¦ç¼–ç ã€‚utf8mb4 å³most bytes 4ï¼Œä½¿ç”¨4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå®Œæ•´çš„UTF-8</p></blockquote><p>ç»“è®ºï¼šå¦‚æœæ•°æ®åº“çš„å­—ç¬¦é›†æ˜¯utf8mb4ï¼Œé‚£å°±æ”¹æˆutf8ï¼Œ<del><em>å—¯ï¼Œæ’åºè§„åˆ™ä¹Ÿæ”¹</em></del> ï¼Œ65535å…¶å®æ˜¯å­—èŠ‚é•¿åº¦ï¼Œå¦‚æœæ˜¯utf8mb4ï¼Œä¼šç®—æˆ4ä¸ªå­—èŠ‚ï¼Œå¾ˆå®¹æ˜“å°±ä¼šè¶…é•¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginx</title>
      <link href="/2024/04/21/nginx/"/>
      <url>/2024/04/21/nginx/</url>
      
        <content type="html"><![CDATA[<h2 id="Ngixn-éƒ¨åˆ†åŠŸèƒ½ä»‹ç»"><a href="#Ngixn-éƒ¨åˆ†åŠŸèƒ½ä»‹ç»" class="headerlink" title="Ngixn éƒ¨åˆ†åŠŸèƒ½ä»‹ç»"></a>Ngixn éƒ¨åˆ†åŠŸèƒ½ä»‹ç»</h2><h3 id="1-httpæœåŠ¡å™¨"><a href="#1-httpæœåŠ¡å™¨" class="headerlink" title="1.httpæœåŠ¡å™¨"></a>1.httpæœåŠ¡å™¨</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">å½“åªæœ‰é™æ€èµ„æºçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨NginxåšHTTPæœåŠ¡å™¨ï¼Œå¯ä»¥å°†æœåŠ¡å™¨ä¸Šçš„é™æ€æ–‡ä»¶ï¼ˆå¦‚HTMLã€å›¾ç‰‡ï¼‰é€šè¿‡HTTPåè®®å±•ç°ç»™å®¢æˆ·ç«¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">åŠ¨é™åˆ†ç¦»å¸¸ç”¨äºå‰åç«¯åˆ†ç¦»ï¼ŒNginxæä¾›çš„åŠ¨é™åˆ†ç¦»æ˜¯æŒ‡æŠŠåŠ¨æ€è¯·æ±‚å’Œé™æ€è¯·æ±‚åˆ†ç¦»å¼€ï¼Œåˆé€‚çš„æœåŠ¡å™¨å¤„ç†ç›¸åº”çš„è¯·æ±‚ï¼Œä½¿æ•´ä¸ªæœåŠ¡å™¨ç³»ç»Ÿçš„æ€§èƒ½ã€æ•ˆç‡æ›´é«˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Nginxå¯ä»¥æ ¹æ®é…ç½®å¯¹ä¸åŒçš„è¯·æ±‚åšä¸åŒè½¬å‘ï¼Œè¿™æ˜¯åŠ¨é™åˆ†ç¦»çš„åŸºç¡€ã€‚é™æ€è¯·æ±‚å¯¹åº”çš„é™æ€èµ„æºå¯ä»¥ç›´æ¥æ”¾åœ¨Nginxä¸Šåšç¼“å†²ï¼Œæ›´å¥½çš„åšæ³•æ˜¯æ”¾åœ¨ç›¸åº”çš„ç¼“å†²æœåŠ¡å™¨ä¸Šã€‚åŠ¨æ€è¯·æ±‚ç”±ç›¸åº”çš„åç«¯æœåŠ¡å™¨å¤„ç†ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="2-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><a href="#2-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="headerlink" title="2.æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"></a>2.æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">æ­£å‘ä»£ç†ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="attr">æ­£å‘ä»£ç†ï¼Œæ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯ä¸åŸå§‹æœåŠ¡å™¨ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨å–å¾—å†…å®¹ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶æŒ‡å®šåŸå§‹ç›®æ ‡ï¼ˆåŸå§‹æœåŠ¡å™¨ï¼‰ï¼Œç„¶åä»£ç†å‘åŸå§‹æœåŠ¡å™¨è½¬äº¤è¯·æ±‚å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">åå‘ä»£ç†ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="attr">å®¢æˆ·ç«¯æœ¬æ¥å¯ä»¥ç›´æ¥é€šè¿‡HTTPåè®®è®¿é—®æŸç½‘ç«™åº”ç”¨æœåŠ¡å™¨ï¼Œç½‘ç«™ç®¡ç†å‘˜å¯ä»¥åœ¨ä¸­é—´åŠ ä¸Šä¸€ä¸ªNginxï¼Œå®¢æˆ·ç«¯è¯·æ±‚Nginxï¼ŒNginxè¯·æ±‚åº”ç”¨æœåŠ¡å™¨ï¼Œç„¶åå°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶Nginxå°±æ˜¯åå‘ä»£ç†æœåŠ¡å™¨ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="3-è´Ÿè½½å‡è¡¡"><a href="#3-è´Ÿè½½å‡è¡¡" class="headerlink" title="3.è´Ÿè½½å‡è¡¡"></a>3.è´Ÿè½½å‡è¡¡</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">è´Ÿè½½å‡è¡¡å¤šåœ¨é«˜å¹¶å‘æƒ…å†µä¸‹éœ€è¦ä½¿ç”¨ã€‚åŸç†æ˜¯å°†æ•°æ®æµé‡åˆ†æ‘Šåˆ°å¤šä¸ªæœåŠ¡å™¨æ‰§è¡Œï¼Œå‡è½»æ¯å°æœåŠ¡å™¨çš„å‹åŠ›ï¼Œå¤šå°æœåŠ¡å™¨(é›†ç¾¤)å…±åŒå®Œæˆå·¥ä½œä»»åŠ¡ï¼Œä»è€Œæé«˜äº†æ•°æ®çš„ååé‡ã€‚åŒæ—¶å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼Œå…¶ä¸­ä¸€å°æœåŠ¡å™¨ä¸‡ä¸€å®•æœºï¼Œåªè¦è¿˜æœ‰å…¶ä»–æœåŠ¡å™¨æ­£å¸¸è¿è¡Œï¼Œå°±ä¸ä¼šå½±å“ç”¨æˆ·ä½¿ç”¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Nginxå¯ä»¥é€šè¿‡åå‘ä»£ç†æ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚Nginxå¯ä½¿ç”¨çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æœ‰ï¼šè½®è¯¢ï¼ˆé»˜è®¤ï¼‰ã€æƒé‡ã€ip_hashã€url_hash(ç¬¬ä¸‰æ–¹æ¨¡å—)ã€fair(ç¬¬ä¸‰æ–¹æ¨¡å—)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">weightè½®è¯¢ï¼ˆé»˜è®¤ï¼‰ï¼šæ¥æ”¶åˆ°çš„è¯·æ±‚æŒ‰ç…§é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå³ä½¿åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼ŒæŸä¸€å°åç«¯æœåŠ¡å™¨å®•æœºï¼Œnginxä¼šè‡ªåŠ¨å°†è¯¥æœåŠ¡å™¨å‰”é™¤å‡ºé˜Ÿåˆ—ï¼Œè¯·æ±‚å—ç†æƒ…å†µä¸ä¼šå—åˆ°ä»»ä½•å½±å“ã€‚</span> <span class="string">è¿™ç§æ–¹å¼ä¸‹ï¼Œå¯ä»¥ç»™ä¸åŒçš„åç«¯æœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªæƒé‡å€¼ï¼ˆweightï¼‰ï¼Œç”¨äºè°ƒæ•´ä¸åŒçš„æœåŠ¡å™¨ä¸Šè¯·æ±‚çš„åˆ†é…ç‡ï¼›æƒé‡æ•°æ®è¶Šå¤§ï¼Œè¢«åˆ†é…åˆ°è¯·æ±‚çš„å‡ ç‡è¶Šå¤§ï¼›è¯¥æƒé‡å€¼ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å®é™…å·¥ä½œç¯å¢ƒä¸­ä¸åŒçš„åç«¯æœåŠ¡å™¨ç¡¬ä»¶é…ç½®è¿›è¡Œè°ƒæ•´çš„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ip_hashï¼šæ¯ä¸ªè¯·æ±‚æŒ‰ç…§å‘èµ·å®¢æˆ·ç«¯çš„ipçš„hashç»“æœè¿›è¡ŒåŒ¹é…ï¼Œè¿™æ ·çš„ç®—æ³•ä¸‹ä¸€ä¸ªå›ºå®šipåœ°å€çš„å®¢æˆ·ç«¯æ€»ä¼šè®¿é—®åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œè¿™ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†é›†ç¾¤éƒ¨ç½²ç¯å¢ƒä¸‹sessionå…±äº«çš„é—®é¢˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">fairï¼šæ™ºèƒ½è°ƒæ•´è°ƒåº¦ç®—æ³•ï¼ŒåŠ¨æ€çš„æ ¹æ®åç«¯æœåŠ¡å™¨çš„è¯·æ±‚å¤„ç†åˆ°å“åº”çš„æ—¶é—´è¿›è¡Œå‡è¡¡åˆ†é…ï¼Œå“åº”æ—¶é—´çŸ­å¤„ç†æ•ˆç‡é«˜çš„æœåŠ¡å™¨åˆ†é…åˆ°è¯·æ±‚çš„æ¦‚ç‡é«˜ï¼Œå“åº”æ—¶é—´é•¿å¤„ç†æ•ˆç‡ä½çš„æœåŠ¡å™¨åˆ†é…åˆ°çš„è¯·æ±‚å°‘ï¼›ç»“åˆäº†å‰ä¸¤è€…çš„ä¼˜ç‚¹çš„ä¸€ç§è°ƒåº¦ç®—æ³•ã€‚nginxé»˜è®¤ä¸æ”¯æŒfairç®—æ³•ï¼Œå¦‚æœè¦ä½¿ç”¨è¿™ç§è°ƒåº¦ç®—æ³•ï¼Œéœ€å®‰è£…upstream_fairæ¨¡å—ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">url_hashï¼šæŒ‰ç…§è®¿é—®çš„urlçš„hashç»“æœåˆ†é…è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚çš„urlä¼šæŒ‡å‘åç«¯å›ºå®šçš„æŸä¸ªæœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨nginxä½œä¸ºé™æ€æœåŠ¡å™¨çš„æƒ…å†µä¸‹æé«˜ç¼“å­˜æ•ˆç‡ã€‚nginxé»˜è®¤ä¸æ”¯æŒè¿™ç§è°ƒåº¦ç®—æ³•ï¼Œè¦ä½¿ç”¨çš„è¯éœ€è¦å®‰è£…nginxçš„hashè½¯ä»¶åŒ…ã€‚</span> <span class="string"></span></span><br></pre></td></tr></table></figure><h3 id="4-Nginxæ¨¡å—"><a href="#4-Nginxæ¨¡å—" class="headerlink" title="4.Nginxæ¨¡å—"></a>4.Nginxæ¨¡å—</h3><h4 id="4-1-nginxçŠ¶æ€ä¿¡æ¯"><a href="#4-1-nginxçŠ¶æ€ä¿¡æ¯" class="headerlink" title="4.1 nginxçŠ¶æ€ä¿¡æ¯"></a>4.1 nginxçŠ¶æ€ä¿¡æ¯</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">nginxä¸­çš„stub_statusæ¨¡å—ä¸»è¦ç”¨äºæŸ¥çœ‹Nginxçš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">æœ¬æ¨¡å—é»˜è®¤æ˜¯ä¸ä¼šç¼–è¯‘è¿›Nginxçš„,å¦‚æœè¦ä½¿ç”¨è¯¥æ¨¡å—,åˆ™è¦åœ¨ç¼–è¯‘å®‰è£…Nginxæ—¶æŒ‡å®šã€‚</span> <span class="string"></span></span><br></pre></td></tr></table></figure><h4 id="4-1-1-åŠ è½½http-stub-statusæ¨¡å—"><a href="#4-1-1-åŠ è½½http-stub-statusæ¨¡å—" class="headerlink" title="4.1.1 åŠ è½½http_stub_statusæ¨¡å—"></a>4.1.1 åŠ è½½http_stub_statusæ¨¡å—</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="attr">./configure</span> <span class="string">--prefix=/usr/local/nginx --with-http_stub_status_module</span></span><br><span class="line"><span class="attr">make</span> <span class="string">&amp;&amp; make install</span></span><br></pre></td></tr></table></figure><h4 id="4-1-2-ä¿®æ”¹nginxé…ç½®æ–‡ä»¶"><a href="#4-1-2-ä¿®æ”¹nginxé…ç½®æ–‡ä»¶" class="headerlink" title="4.1.2 ä¿®æ”¹nginxé…ç½®æ–‡ä»¶"></a>4.1.2 ä¿®æ”¹nginxé…ç½®æ–‡ä»¶</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">åœ¨serverä¸­ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="attr">location</span> <span class="string">/NginxStatus &#123;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">stub_status</span> <span class="string">on;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">access_log</span> <span class="string">on;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">auth_basic</span> <span class="string">&quot;NginxStatus&quot;;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">auth_basic_user_file</span> <span class="string">htpasswd;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">å‘½ä»¤è¡Œæ“ä½œï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="attr">htpasswd</span> <span class="string">-c /usr/local/nginx/conf/htpasswd nginx_focus #è¿ç»­è¾“å…¥ä¸¤æ¬¡å¯†ç </span></span><br><span class="line"></span><br><span class="line"><span class="attr">New</span> <span class="string">password:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Re-type</span> <span class="string">new password:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Adding</span> <span class="string">password for user nginx_focus</span></span><br></pre></td></tr></table></figure><h4 id="4-1-3-æ‰“å¼€nginx-çš„stub-status"><a href="#4-1-3-æ‰“å¼€nginx-çš„stub-status" class="headerlink" title="4.1.3 æ‰“å¼€nginx çš„stub_status"></a>4.1.3 æ‰“å¼€nginx çš„stub_status</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">å¯ä»¥é€šè¿‡é¡µé¢é“¾æ¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯</span>:<span class="string"></span></span><br><span class="line"></span><br><span class="line"><span class="attr">Active</span> <span class="string">connections: 145</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server</span> <span class="string">accepts handled requests</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">1749</span> <span class="string">1749 3198</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Reading</span>: <span class="string">0 Writing: 3 Waiting: 142</span></span><br><span class="line"></span><br><span class="line"><span class="attr">å‚æ•°è¯¦è§£ï¼š</span>  <span class="string"></span></span><br><span class="line"></span><br><span class="line"><span class="attr">Active</span> <span class="string">connectionsï¼š145           </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#nginx æ­£å¤„ç†çš„æ´»åŠ¨è¿æ¥æ•°145ä¸ªã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server</span> <span class="string">accepts handled requests</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">1749</span> <span class="string">1749 3198                   </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#nginxå¯åŠ¨åˆ°ç°åœ¨å…±å¤„ç†äº† 1749ä¸ªè¿æ¥ ,nginxå¯åŠ¨åˆ°ç°åœ¨å…±æˆåŠŸåˆ›å»º 1749æ¬¡æ¡æ‰‹ è¯·æ±‚ä¸¢å¤±æ•°=(æ¡æ‰‹-è¿æ¥),å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬æ²¡ä¸¢è¯·æ±‚;æ€»å…±å¤„ç†äº†3198 æ¬¡è¯·æ±‚ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Reading</span>: <span class="string">0 Writing: 3 Waiting: 142</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#Reading ï¼šnginxè¯»å–åˆ°å®¢æˆ·ç«¯çš„Headerä¿¡æ¯æ•°ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#Writing ï¼š nginxè¿”å›ç»™å®¢æˆ·ç«¯çš„Headerä¿¡æ¯æ•°ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#Waiting ï¼š Nginxå·²ç»å¤„ç†å®Œæ­£åœ¨ç­‰å€™ä¸‹ä¸€æ¬¡è¯·æ±‚æŒ‡ä»¤çš„é©»ç•™è¿æ¥.å¼€å¯keep-aliveçš„æƒ…å†µä¸‹,è¿™ä¸ªå€¼ç­‰äºactiveâ€“(reading+writing)ã€‚ </span></span><br></pre></td></tr></table></figure><h4 id="4-1-4-è®¿é—®é‡ç»Ÿè®¡"><a href="#4-1-4-è®¿é—®é‡ç»Ÿè®¡" class="headerlink" title="4.1.4 è®¿é—®é‡ç»Ÿè®¡"></a>4.1.4 è®¿é—®é‡ç»Ÿè®¡</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1ã€å™è¿°</span></span><br><span class="line"></span><br><span class="line"><span class="attr">PVï¼ˆPage</span> <span class="string">Viewï¼‰ï¼šå³é¡µé¢æµè§ˆé‡æˆ–è€…ç‚¹å‡»é‡ï¼Œç”¨æˆ·æ¯ä¸€æ¬¡å¯¹ç½‘ç«™ä¸­æ¯ä¸ªé¡µé¢è®¿é—®å‡è®°å½•1ä¸ªPVã€‚ç”¨æˆ·å¯¹åŒä¸€é¡µé¢çš„å¤šæ¬¡è®¿é—®ï¼Œè®¿é—®é‡ç´¯ç§¯ã€‚</span></span><br><span class="line"><span class="attr">UVï¼ˆUnique</span> <span class="string">Visitorï¼‰ï¼šæŒ‡é€šè¿‡äº’è”ç½‘æµè§ˆè¿™ä¸ªç½‘é¡µçš„äººï¼Œç”µè„‘ç§°ä¸ºä¸€ä¸ªè®¿å®¢ã€æ‰‹æœºä¹Ÿç§°ä¸ºä¸€ä¸ªè®¿å®¢ï¼Œä¸€å¤©ä¹‹å†…ç›¸åŒçš„å®¢æˆ·ç«¯åªèƒ½è¢«è®¡ç®—ä¸€æ¬¡ã€‚</span></span><br><span class="line"><span class="attr">IPï¼ˆInternet</span> <span class="string">Protocolï¼‰ï¼šæŒ‡ç‹¬ç«‹IPè®¿é—®ç«™ç‚¹çš„IPæ€»æ•°ï¼Œä¸€å¤©å†…ç›¸åŒIPåªèƒ½ç®—ä¸€æ¬¡ã€‚</span></span><br><span class="line"><span class="attr">VVï¼ˆVisit</span> <span class="string">Viewï¼‰ï¼šæŒ‡æ‰€æœ‰è®¿å®¢ä¸€å¤©å†…è®¿é—®ç½‘ç«™çš„æ¬¡æ•°ï¼Œå½“è®¿å®¢å®Œæˆæ‰€æœ‰æµè§ˆå¹¶æœ€ç»ˆå…³é—­ç½‘ç«™çš„æ‰€æœ‰é¡µé¢æ—¶å˜å®Œæˆäº†ä¸€æ¬¡è®¿é—®ï¼ŒåŒä¸€è®¿å®¢ä¸€å¤©å†…å¯èƒ½æœ‰å¤šæ¬¡è®¿é—®è¡Œä¸ºï¼Œè®¿é—®æ¬¡æ•°ç´¯ç§¯ã€‚ </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">1.æ ¹æ®è®¿é—®IPç»Ÿè®¡UV</span></span><br><span class="line"></span><br><span class="line"><span class="attr">awk</span> <span class="string">&#x27;&#123;print $1&#125;&#x27;  access.log|sort | uniq -c |wc -l</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.ç»Ÿè®¡è®¿é—®URLç»Ÿè®¡PV</span></span><br><span class="line"></span><br><span class="line"><span class="attr">awk</span> <span class="string">&#x27;&#123;print $7&#125;&#x27; access.log|wc -l</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3.æŸ¥è¯¢è®¿é—®æœ€é¢‘ç¹çš„URL</span></span><br><span class="line"></span><br><span class="line"><span class="attr">awk</span> <span class="string">&#x27;&#123;print $7&#125;&#x27; access.log|sort | uniq -c |sort -n -k 1 -r|more</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4.æŸ¥è¯¢è®¿é—®æœ€é¢‘ç¹çš„IP</span></span><br><span class="line"></span><br><span class="line"><span class="attr">awk</span> <span class="string">&#x27;&#123;print $1&#125;&#x27; access.log|sort | uniq -c |sort -n -k 1 -r|more</span></span><br><span class="line"></span><br><span class="line"><span class="attr">5.æ ¹æ®æ—¶é—´æ®µç»Ÿè®¡æŸ¥çœ‹æ—¥å¿—</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">cat</span>  <span class="string">access.log| sed -n  &#x27;/14\/Mar\/2015:21/,/14\/Mar\/2015:22/p&#x27;|more </span></span><br></pre></td></tr></table></figure><h4 id="4-2-nginxå¥åº·æ£€æŸ¥æœºåˆ¶"><a href="#4-2-nginxå¥åº·æ£€æŸ¥æœºåˆ¶" class="headerlink" title="4.2 nginxå¥åº·æ£€æŸ¥æœºåˆ¶"></a>4.2 nginxå¥åº·æ£€æŸ¥æœºåˆ¶</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">nginxåŸç”Ÿçš„å¥åº·æ£€æµ‹ä¸»è¦æ¶‰åŠä¸¤ä¸ªæ¨¡å—</span>:<span class="string">ngx_http_proxy_moduleå’Œngx_http_upstream_module </span></span><br></pre></td></tr></table></figure><h4 id="4-2-1-ngx-http-proxy-module"><a href="#4-2-1-ngx-http-proxy-module" class="headerlink" title="4.2.1 ngx_http_proxy_module"></a>4.2.1 ngx_http_proxy_module</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">upstream</span> <span class="string">backend &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">server</span> <span class="string">127.0.0.1:8080 max_fails=3 fail_timeout=30s;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">1.max_fails</span></span><br><span class="line"></span><br><span class="line"><span class="attr">è®¾å®šNginxä¸æœåŠ¡å™¨é€šä¿¡çš„å°è¯•å¤±è´¥çš„æ¬¡æ•°ã€‚åœ¨fail_timeoutå‚æ•°å®šä¹‰çš„æ—¶é—´æ®µå†…ï¼Œå¦‚æœå¤±è´¥çš„æ¬¡æ•°è¾¾åˆ°æ­¤å€¼ï¼ŒNginxå°±è®¤ä¸ºæœåŠ¡å™¨ä¸å¯ç”¨ã€‚åœ¨ä¸‹ä¸€ä¸ªfail_timeoutæ—¶é—´æ®µï¼ŒæœåŠ¡å™¨ä¸ä¼šå†è¢«å°è¯•ã€‚</span> <span class="string">å¤±è´¥çš„å°è¯•æ¬¡æ•°é»˜è®¤æ˜¯1ã€‚è®¾ä¸º0å°±ä¼šåœæ­¢ç»Ÿè®¡å°è¯•æ¬¡æ•°ï¼Œè®¤ä¸ºæœåŠ¡å™¨æ˜¯ä¸€ç›´å¯ç”¨çš„ã€‚ ä½ å¯ä»¥é€šè¿‡æŒ‡ä»¤proxy_next_upstreamã€fastcgi_next_upstreamå’Œ memcached_next_upstreamæ¥é…ç½®ä»€ä¹ˆæ˜¯å¤±è´¥çš„å°è¯•ã€‚ é»˜è®¤é…ç½®æ—¶ï¼Œhttp_404çŠ¶æ€ä¸è¢«è®¤ä¸ºæ˜¯å¤±è´¥çš„å°è¯•ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.fail_timeout</span></span><br><span class="line"></span><br><span class="line"><span class="attr">è®¾å®šæœåŠ¡å™¨è¢«è®¤ä¸ºä¸å¯ç”¨çš„æ—¶é—´æ®µä»¥åŠç»Ÿè®¡å¤±è´¥å°è¯•æ¬¡æ•°çš„æ—¶é—´æ®µã€‚åœ¨è¿™æ®µæ—¶é—´ä¸­ï¼ŒæœåŠ¡å™¨å¤±è´¥æ¬¡æ•°è¾¾åˆ°æŒ‡å®šçš„å°è¯•æ¬¡æ•°ï¼ŒæœåŠ¡å™¨å°±è¢«è®¤ä¸ºä¸å¯ç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥è¶…æ—¶æ—¶é—´æ˜¯10ç§’ã€‚</span> <span class="string"></span></span><br></pre></td></tr></table></figure><h4 id="4-2-2-ngx-http-proxy-module"><a href="#4-2-2-ngx-http-proxy-module" class="headerlink" title="4.2.2 ngx_http_proxy_module"></a>4.2.2 ngx_http_proxy_module</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.proxy_connect_timeout</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ä¸åç«¯æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.proxy_read_timeout</span></span><br><span class="line"></span><br><span class="line"><span class="attr">å®šä¹‰ä»åç«¯æœåŠ¡å™¨è¯»å–å“åº”çš„è¶…æ—¶ã€‚æ­¤è¶…æ—¶æ˜¯æŒ‡ç›¸é‚»ä¸¤æ¬¡è¯»æ“ä½œä¹‹é—´çš„æœ€é•¿æ—¶é—´é—´éš”ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå“åº”ä¼ è¾“å®Œæˆçš„æœ€é•¿æ—¶é—´ã€‚å¦‚æœåç«¯æœåŠ¡å™¨åœ¨è¶…æ—¶æ—¶é—´æ®µå†…æ²¡æœ‰ä¼ è¾“ä»»ä½•æ•°æ®ï¼Œè¿æ¥å°†è¢«å…³é—­</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3.proxy_next_upstream</span></span><br><span class="line"></span><br><span class="line"><span class="attr">æŒ‡å®šåœ¨ä½•ç§æƒ…å†µä¸‹ä¸€ä¸ªå¤±è´¥çš„è¯·æ±‚åº”è¯¥è¢«å‘é€åˆ°ä¸‹ä¸€å°åç«¯æœåŠ¡å™¨</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="attr">éœ€è¦ç†è§£ä¸€ç‚¹çš„æ˜¯ï¼Œåªæœ‰åœ¨æ²¡æœ‰å‘å®¢æˆ·ç«¯å‘é€ä»»ä½•æ•°æ®ä»¥å‰ï¼Œå°†è¯·æ±‚è½¬ç»™ä¸‹ä¸€å°åç«¯æœåŠ¡å™¨æ‰æ˜¯å¯è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨ä¼ è¾“å“åº”åˆ°å®¢æˆ·ç«¯æ—¶å‡ºç°é”™è¯¯æˆ–è€…è¶…æ—¶ï¼Œè¿™ç±»é”™è¯¯æ˜¯ä¸å¯èƒ½æ¢å¤çš„ã€‚</span> <span class="string"></span></span><br></pre></td></tr></table></figure><h2 id="zookeeper"><a href="#zookeeper" class="headerlink" title="zookeeper"></a>zookeeper</h2><h3 id="1-zookeeper-æ¦‚è¿°"><a href="#1-zookeeper-æ¦‚è¿°" class="headerlink" title="1. zookeeper æ¦‚è¿°"></a>1. zookeeper æ¦‚è¿°</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">zookeeperæ˜¯ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼çš„è®¾è®¡æ¨¡å¼ã€‚è´Ÿè´£ç®¡ç†å­˜å‚¨æ•°æ®ï¼Œç„¶åæ¥å—è§‚å¯Ÿè€…çš„æ³¨å†Œï¼Œä¸€æ—¦æ•°æ®çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œzookeeperå°±å°†è´Ÿè´£é€šçŸ¥å·²ç»åœ¨zookeeperä¸Šæ³¨å†Œçš„é‚£äº›è§‚å¯Ÿè€…åšå‡ºç›¸åº”çš„ååº”</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿè€…æ¨¡å¼</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºæ¨¡å¼ã€‚å®ƒå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œä¸»ä½“æ˜¯é€šçŸ¥çš„å‘å¸ƒè€…ï¼Œå®ƒå‘å‡ºé€šçŸ¥æ—¶å¹¶ä¸éœ€è¦çŸ¥é“è°æ˜¯å®ƒçš„è§‚å¯Ÿè€…ï¼Œå¯ä»¥æœ‰ä»»æ„æ•°ç›®çš„è§‚å¯Ÿè€…è®¢é˜…å¹¶æ¥æ”¶é€šçŸ¥ã€‚è§‚å¯Ÿè€…æ¨¡å¼ä¸ä»…è¢«å¹¿æ³›åº”ç”¨äºè½¯ä»¶ç•Œé¢å…ƒç´ ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ä¸šåŠ¡å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€æƒé™ç®¡ç†ç­‰æ–¹é¢ä¹Ÿæœ‰å¹¿æ³›çš„åº”ç”¨ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="2-zookeeperçš„ç‰¹ç‚¹"><a href="#2-zookeeperçš„ç‰¹ç‚¹" class="headerlink" title="2. zookeeperçš„ç‰¹ç‚¹"></a>2. zookeeperçš„ç‰¹ç‚¹</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.</span> <span class="string">zookeeperæ˜¯ä¸€ä¸ªé¢†å¯¼è€…å’Œå¤šä¸ªè·Ÿéšç€ç»„æˆçš„é›†ç¾¤ã€‚</span></span><br><span class="line"><span class="attr">2.</span> <span class="string">é›†ç¾¤ä¸­åªwè¦æœ‰åŠæ•°ä»¥ä¸Šçš„èŠ‚ç‚¹å­˜æ´»ï¼Œzookeeperé›†ç¾¤å°±èƒ½æ­£å¸¸æœåŠ¡</span></span><br><span class="line"><span class="attr">3.</span> <span class="string">å…¨å±€æ•°æ®ä¸€ç›´ï¼šæ¯ä¸ªserviceä¿å­˜ä¸€ä»½ç›¸åŒçš„æ•°æ®å‰¯æœ¬ï¼Œclientæ— è®ºè¿æ¥åˆ°å“ªä¸ªserviceï¼Œæ•°æ®éƒ½æ˜¯ä¸€è‡´çš„</span></span><br><span class="line"><span class="attr">4.</span> <span class="string">æ›´æ–°é¡ºåºæ‰§è¡Œ</span></span><br><span class="line"><span class="attr">5.</span> <span class="string">æ•°æ®æ›´æ–°åŸå­æ€§ï¼Œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥</span></span><br><span class="line"><span class="attr">6.</span> <span class="string">å®æ—¶æ€§ï¼Œèƒ½è¯»åˆ°æœ€æ–°æ•°æ®</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-zookeeper-çš„åº”ç”¨åœºæ™¯"><a href="#3-zookeeper-çš„åº”ç”¨åœºæ™¯" class="headerlink" title="3. zookeeper çš„åº”ç”¨åœºæ™¯"></a>3. zookeeper çš„åº”ç”¨åœºæ™¯</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wallpaperè§†é¢‘ä¸€é”®è½¬ç§»</title>
      <link href="/2024/04/21/wallpaper%E8%A7%86%E9%A2%91%E4%B8%80%E9%94%AE%E8%BD%AC%E7%A7%BB/"/>
      <url>/2024/04/21/wallpaper%E8%A7%86%E9%A2%91%E4%B8%80%E9%94%AE%E8%BD%AC%E7%A7%BB/</url>
      
        <content type="html"><![CDATA[<h3 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><p>å°†wallpaperç›®å½•ä¸‹é¢çš„è§†é¢‘è½¬ç§»åˆ°è‡ªå·±æ‰€éœ€çš„ç›®å½•ä¸‹é¢</p><hr><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ä¸‰ä¸ªè¾“å…¥ï¼š</p><h5 id="ç¬¬ä¸€ä¸ªè¾“å…¥çš„æ˜¯wallpaperå­˜æ”¾å£çº¸çš„åœ°å€"><a href="#ç¬¬ä¸€ä¸ªè¾“å…¥çš„æ˜¯wallpaperå­˜æ”¾å£çº¸çš„åœ°å€" class="headerlink" title="ç¬¬ä¸€ä¸ªè¾“å…¥çš„æ˜¯wallpaperå­˜æ”¾å£çº¸çš„åœ°å€"></a>ç¬¬ä¸€ä¸ªè¾“å…¥çš„æ˜¯wallpaperå­˜æ”¾å£çº¸çš„åœ°å€</h5><p><img src="https://s3.bmp.ovh/imgs/2024/04/21/31a2eade7b26ed2f.png"></p><p>å…¶ä¸­åœ°å€å°±ä¸º</p><p>E:\steam\Steam\steamapps\workshop\content\431960</p><p>å¦‚æœä¸çŸ¥é“ä¹Ÿå¯ä»¥å³é”®å£çº¸æŸ¥çœ‹ </p><h5 id="ç¬¬äºŒä¸ªè¾“å…¥çš„æ˜¯ä¸‹è½½çš„æ—¶é—´ï¼Œ"><a href="#ç¬¬äºŒä¸ªè¾“å…¥çš„æ˜¯ä¸‹è½½çš„æ—¶é—´ï¼Œ" class="headerlink" title="ç¬¬äºŒä¸ªè¾“å…¥çš„æ˜¯ä¸‹è½½çš„æ—¶é—´ï¼Œ"></a>ç¬¬äºŒä¸ªè¾“å…¥çš„æ˜¯ä¸‹è½½çš„æ—¶é—´ï¼Œ</h5><p>æ„æ€å°±æ˜¯ä»å“ªä¸ªæ—¶é—´å¼€å§‹çš„å£çº¸ï¼Œå°±æ¯”å¦‚2022-12-4-19-0ï¼Œå°±ä¼šæ‰¾12æœˆ4å·ä¸‹åˆä¸ƒç‚¹ä»¥åä¸‹è½½çš„å£çº¸</p><h5 id="ç¬¬ä¸‰ä¸ªè¾“å…¥çš„æ˜¯å­˜æ”¾åœ°å€"><a href="#ç¬¬ä¸‰ä¸ªè¾“å…¥çš„æ˜¯å­˜æ”¾åœ°å€" class="headerlink" title="ç¬¬ä¸‰ä¸ªè¾“å…¥çš„æ˜¯å­˜æ”¾åœ°å€"></a>ç¬¬ä¸‰ä¸ªè¾“å…¥çš„æ˜¯å­˜æ”¾åœ°å€</h5><p>è¿™ä¸ªå°±å¡«è¦å­˜æ”¾åœ¨å“ªé‡Œçš„åœ°å€ã€‚å¯ä»¥æ˜¯ç”µè„‘çš„ï¼Œä¹Ÿå¯ä»¥æŠŠæ‰‹æœºè¿ä¸Šç›´æ¥ä¸‹è½½</p><hr><h3 id="æ‰€éœ€ä¾èµ–ï¼š"><a href="#æ‰€éœ€ä¾èµ–ï¼š" class="headerlink" title="æ‰€éœ€ä¾èµ–ï¼š"></a>æ‰€éœ€ä¾èµ–ï¼š</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°äº†æ–¹æ³•"><a href="#æ›´æ–°äº†æ–¹æ³•" class="headerlink" title="æ›´æ–°äº†æ–¹æ³•"></a>æ›´æ–°äº†æ–¹æ³•</h3><ul><li><p>ä½¿ç”¨äº†çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± çš„æ•°é‡ç­‰äºcpuæ ¸å¤„ç†é€Ÿåº¦æœ€å¿«</p></li><li><p>ä½¿ç”¨äº†Files.copyæ–¹æ³•ï¼Œä½¿ç”¨è¯¥æ–¹æ³•åœ¨å¤åˆ¶å°æ–‡ä»¶çš„è¿‡ç¨‹ä¸­é€Ÿåº¦æ¯”BufferedInputStreamæ›´å¿«</p></li><li><p>ä½¿ç”¨äº†synchronizedListæ¥ç»Ÿè®¡æ–‡ä»¶çš„ä¸ªæ•°ï¼Œå› ä¸ºæ­¤é›†åˆæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.StandardCopyOption;</span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WallPaper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException, InterruptedException &#123;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd-HH-mm&quot;</span>);</span><br><span class="line">        List&lt;String&gt; list = Collections.synchronizedList(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;());</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥wallpaperä¸‹è½½çš„åœ°å€&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> scanner.next();</span><br><span class="line">        <span class="type">File</span> <span class="variable">sfile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(str);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥æ—¶é—´(æ ¼å¼ä¸º:å¹´-æœˆ-æ—¥-å°æ—¶-åˆ†é’Ÿ)&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">time</span> <span class="operator">=</span> scanner.next();</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> sdf.parse(time);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥éœ€è¦å­˜æ”¾çš„åœ°å€&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> scanner.next();</span><br><span class="line">        <span class="type">File</span> <span class="variable">tfile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(str2);</span><br><span class="line">        <span class="keyword">if</span> (!tfile.exists() &amp;&amp; !tfile.isDirectory()) &#123;</span><br><span class="line">            tfile = <span class="keyword">new</span> <span class="title class_">File</span>(tfile.getParentFile(), <span class="string">&quot;wallpaperä¸‹è½½çš„è§†é¢‘&quot;</span>);</span><br><span class="line">            System.out.println(tfile.getAbsolutePath());</span><br><span class="line">            tfile.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!sfile.exists() &amp;&amp; !sfile.isDirectory()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ°å€ä¸å¯¹å“¦&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sfile.isDirectory()) &#123;</span><br><span class="line">            File[] fs = sfile.listFiles();</span><br><span class="line">            <span class="type">File</span> <span class="variable">finalTfile</span> <span class="operator">=</span> tfile;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">assert</span> fs != <span class="literal">null</span>;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * *å…ˆç»Ÿè®¡æ–‡ä»¶çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (File x : fs) &#123;</span><br><span class="line">                <span class="type">Date</span> <span class="variable">date1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(x.lastModified());</span><br><span class="line">                <span class="keyword">if</span> (date1.compareTo(date) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">needFilename</span> <span class="operator">=</span> x.getAbsolutePath() + <span class="string">&quot;\\project.json&quot;</span>;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">File</span>(needFilename).exists()) &#123;</span><br><span class="line">                        flag = isNeedFile(needFilename);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                        tmp++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">CountDownLatch</span> <span class="variable">cdl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountDownLatch</span>(tmp);</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             *å¤šçº¿ç¨‹è¿›è¡Œå¤åˆ¶</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="type">Date</span> <span class="variable">startDate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            <span class="keyword">for</span> (File x : fs) &#123;</span><br><span class="line">                executor.submit(</span><br><span class="line">                        () -&gt; &#123;</span><br><span class="line">                            <span class="type">Date</span> <span class="variable">date1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(x.lastModified());</span><br><span class="line">                            <span class="keyword">if</span> (date1.compareTo(date) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">                                <span class="type">String</span> <span class="variable">needFilename</span> <span class="operator">=</span> x.getAbsolutePath() + <span class="string">&quot;\\project.json&quot;</span>;</span><br><span class="line">                                <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">File</span>(needFilename).exists()) &#123;</span><br><span class="line">                                    flag = isNeedFile(needFilename);</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                                    <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> x.getAbsolutePath() + <span class="string">&quot;\\&quot;</span> + Filename(needFilename);</span><br><span class="line">                                    <span class="type">File</span> <span class="variable">tf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(finalTfile.getAbsoluteFile() + <span class="string">&quot;\\&quot;</span> + Filename(needFilename));</span><br><span class="line">                                    <span class="keyword">try</span> &#123;</span><br><span class="line">                                        copyfile(<span class="keyword">new</span> <span class="title class_">File</span>(filename), tf);</span><br><span class="line">                                        <span class="keyword">synchronized</span> (list)&#123;</span><br><span class="line">                                            list.add(<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line">                                        &#125;</span><br><span class="line">                                        System.out.println(<span class="string">&quot;å°† &quot;</span> + Filename(needFilename) + <span class="string">&quot;  å¤åˆ¶åˆ° &quot;</span> + finalTfile.getAbsolutePath() + <span class="string">&quot; ä¸­&quot;</span>);</span><br><span class="line">                                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                                        e.printStackTrace();</span><br><span class="line">                                        System.out.println(Filename(needFilename) + <span class="string">&quot;å¤åˆ¶å¤±è´¥&quot;</span>);</span><br><span class="line">                                    &#125;</span><br><span class="line"></span><br><span class="line">                                    cdl.countDown();</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            cdl.await();</span><br><span class="line">            executor.shutdown();</span><br><span class="line">            System.out.println(<span class="string">&quot;å¤åˆ¶å®Œæˆï¼Œå…±&quot;</span> + list.size() + <span class="string">&quot;ä¸ªæ–‡ä»¶&quot;</span>);</span><br><span class="line">            <span class="type">Date</span> <span class="variable">endDate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            System.out.println(endDate.getTime()-startDate.getTime());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åœ°å€ä¸å¯¹å“¦&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤åˆ¶æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span>  <span class="title function_">copyfile</span><span class="params">(File fs, File ft)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ft.exists()) &#123;</span><br><span class="line">            System.out.println(ft.getName() + <span class="string">&quot;é‡å¤....&quot;</span> + <span class="string">&quot;æ­£åœ¨åˆ é™¤&quot;</span>);</span><br><span class="line">            ft.delete();</span><br><span class="line">        &#125;</span><br><span class="line">        Files.copy(fs.toPath(),ft.toPath(),StandardCopyOption.REPLACE_EXISTING);</span><br><span class="line"><span class="comment">//        FileInputStream fi = new FileInputStream(fs);</span></span><br><span class="line"><span class="comment">//        FileOutputStream fo = new FileOutputStream(ft);</span></span><br><span class="line"><span class="comment">//        BufferedInputStream bfi = null;</span></span><br><span class="line"><span class="comment">//        BufferedOutputStream bfo = null;</span></span><br><span class="line"><span class="comment">//        bfi = new BufferedInputStream(fi);</span></span><br><span class="line"><span class="comment">//        bfo = new BufferedOutputStream(fo);</span></span><br><span class="line"><span class="comment">//        int count = -1;</span></span><br><span class="line"><span class="comment">//        while ((count = bfi.read()) != -1) &#123;</span></span><br><span class="line"><span class="comment">//            bfo.write(count);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        bfo.flush();</span></span><br><span class="line"><span class="comment">//        bfo.close();</span></span><br><span class="line"><span class="comment">//        bfi.close();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾æ˜¯å¦æ˜¯æ‰€éœ€çš„è§†é¢‘æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isNeedFile</span><span class="params">(String filename)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> readJsonFile(filename);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jobj</span> <span class="operator">=</span> JSON.parseObject(s);</span><br><span class="line">        <span class="keyword">if</span> (jobj.get(<span class="string">&quot;contentrating&quot;</span>) != <span class="literal">null</span> &amp;&amp; !jobj.get(<span class="string">&quot;contentrating&quot;</span>).equals(<span class="string">&quot;&quot;</span>))</span><br><span class="line">            <span class="keyword">return</span> jobj.get(<span class="string">&quot;contentrating&quot;</span>).toString().equals(<span class="string">&quot;Mature&quot;</span>) &amp;&amp; (jobj.get(<span class="string">&quot;type&quot;</span>).toString().equals(<span class="string">&quot;Video&quot;</span>) || jobj.get(<span class="string">&quot;type&quot;</span>).toString().equals(<span class="string">&quot;video&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">Filename</span><span class="params">(String filename)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> readJsonFile(filename);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jobj</span> <span class="operator">=</span> JSON.parseObject(s);</span><br><span class="line">        <span class="keyword">return</span> jobj.get(<span class="string">&quot;file&quot;</span>).toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¯»å–jsonæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">readJsonFile</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonStr</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">File</span> <span class="variable">jsonFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileName);</span><br><span class="line">            <span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(jsonFile);</span><br><span class="line">            <span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(jsonFile), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">ch</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">            <span class="keyword">while</span> ((ch = reader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                sb.append((<span class="type">char</span>) ch);</span><br><span class="line">            &#125;</span><br><span class="line">            fileReader.close();</span><br><span class="line">            reader.close();</span><br><span class="line">            jsonStr = sb.toString();</span><br><span class="line">            <span class="keyword">return</span> jsonStr;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨åå°„å®ç°orm</title>
      <link href="/2024/04/21/%E5%88%A9%E7%94%A8%E5%8F%8D%E5%B0%84%E5%AE%9E%E7%8E%B0orm/"/>
      <url>/2024/04/21/%E5%88%A9%E7%94%A8%E5%8F%8D%E5%B0%84%E5%AE%9E%E7%8E%B0orm/</url>
      
        <content type="html"><![CDATA[<p>éœ€æ±‚ï¼šä»æ•°æ®åº“è¡¨ä¸­æŸ¥è¯¢æ•°æ®ï¼Œå¹¶ä¸”ä»¥jsonçš„æ ¼å¼è¾“å‡º</p><p>ç”±äºç±»ä¸­çš„å±æ€§å¤ªå¤šäº†ï¼Œä¸æƒ³ä¸€ä¸ªä¸€ä¸ªå†™äº†ï¼Œæ‰€ä»¥ä½¿ç”¨åå°„ç›´æ¥setè¿›å»ï¼Œè¿™æ ·æ¯”è¾ƒæ–¹ä¾¿ï¼Œä¹Ÿæ¯”è¾ƒå®ç”¨ï¼Œå¹¶ä¸”åŠ æ·±äº†å¯¹åå°„çš„ç†è§£ã€‚</p><p>å¹¶ä¸”ä½¿ç”¨äº†jackson å°†Listè½¬æ¢æˆäº† jsonæ ¼å¼çš„å­—ç¬¦ä¸²</p><p>ä»£ç å¦‚ä¸‹ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/book_shop?useSSL=false&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;111111&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;è¿æ¥æ•°æ®åº“æˆåŠŸ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å…ˆæŸ¥è¯¢å›¾ä¹¦çš„ç§ç±»</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        statement= connection.createStatement();</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        resultSet = statement.executeQuery(<span class="string">&quot;SELECT * FROM TB_CATEGORY&quot;</span>);</span><br><span class="line">        List&lt;category&gt; c = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (resultSet.next())&#123;</span><br><span class="line">            <span class="type">category</span> <span class="variable">category</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">category</span>();</span><br><span class="line">            category.setCategoryId(resultSet.getInt(<span class="number">1</span>));</span><br><span class="line">            category.setCategoryName(resultSet.getString(<span class="number">2</span>));</span><br><span class="line">            c.add(category);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * åˆ©ç”¨åå°„ï¼Œè¯»å–booké‡Œé¢çš„å±æ€§</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(Book.class.getName());</span><br><span class="line">        Field[] fields = clazz.getDeclaredFields();</span><br><span class="line">        List&lt;String&gt; fs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Field f: fields) &#123;</span><br><span class="line">            fs.add(String.valueOf(f));</span><br><span class="line"><span class="comment">//            System.out.println(f);</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ä½¿ç”¨æµ,å°† å±æ€§åå‰é¢çš„å»æ‰,ç•™ä¸‹ç®€åŒ–çš„å±æ€§å</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        fs = fs.stream().map(x-&gt;x.replaceAll(x,x.split(<span class="string">&quot;\\.&quot;</span>)[x.split(<span class="string">&quot;\\.&quot;</span>).length-<span class="number">1</span>])).collect(Collectors.toList());</span><br><span class="line"><span class="comment">//        System.out.println(fs);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æŸ¥è¯¢å›¾ä¹¦</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM TB_BOOK&quot;</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        st = connection.createStatement();</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        rs = st.executeQuery(sql);</span><br><span class="line">        <span class="type">ResultSetMetaData</span> <span class="variable">rd</span> <span class="operator">=</span> rs.getMetaData();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> rd.getColumnCount();</span><br><span class="line">        List&lt;Book&gt; books = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">            <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">            <span class="keyword">while</span> (i&lt;count)&#123;</span><br><span class="line">                <span class="comment">//å¾ªç¯å°†æ•°æ®åº“ä¸­çš„å€¼set åˆ°bookç±»ä¸­</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">stringValue</span> <span class="operator">=</span> rs.getString(i);</span><br><span class="line">                <span class="type">String</span> <span class="variable">ColumnName</span> <span class="operator">=</span> rd.getColumnName(i);</span><br><span class="line">                setValues(ColumnName,stringValue,book,fs);</span><br><span class="line">                <span class="comment">//bookä¸­categoryä»£è¡¨æ•°çš„ç§ç±»,ä½†æ˜¯æ˜¯ç”¨æ•°å­—è¡¨ç¤ºçš„,å› æ­¤è¦è½¬æ¢æˆä¸ºnameå¹¶ä¸”èµ‹å€¼</span></span><br><span class="line">                <span class="keyword">if</span>(ColumnName.equals(<span class="string">&quot;category_id&quot;</span>))&#123;</span><br><span class="line">                    <span class="keyword">for</span>(category category: c)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(category.getCategoryId()==Integer.valueOf(stringValue))&#123;</span><br><span class="line">                            book.setCategory_name(category.getCategoryName());</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            books.add(book);</span><br><span class="line"><span class="comment">//            System.out.println();</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        for(Book b:books)&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(b);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * åˆ©ç”¨jacksonå®ç°åºåˆ—åŒ–</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//åˆ›å»ºæ˜ å°„å¯¹è±¡</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> mapper.writeValueAsString(books);</span><br><span class="line">            System.out.println(json);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ©ç”¨åå°„,è°ƒç”¨ setæ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ColumnName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stringValue</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> book</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fs</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ClassNotFoundException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setValues</span><span class="params">(String ColumnName,String stringValue, Book book,List&lt;String&gt; fs)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> book.getClass();</span><br><span class="line">        Field[] fields = clazz.getDeclaredFields();</span><br><span class="line">        <span class="type">Field</span> <span class="variable">f</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//æˆ‘ä»¬è¿™é‡Œè¦è·å¾—ä¸ä¹‹å¯¹åº”çš„å±æ€§,å› ä¸ºè¦è°ƒç”¨set,å¿…é¡»å¾—ä¼ å‚æ•°è¿›å»,å› æ­¤æˆ‘ä»¬éœ€è¦å¾—åˆ°å±æ€§çš„ç±»å‹</span></span><br><span class="line">        <span class="keyword">for</span>(Field field:fields )&#123;</span><br><span class="line">            <span class="keyword">if</span>(ColumnName.equals(field.toString().split(<span class="string">&quot;\\.&quot;</span>)[field.toString().split(<span class="string">&quot;\\.&quot;</span>).length-<span class="number">1</span>]))&#123;</span><br><span class="line">                f = field;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å‡†å¤‡æ‹¼æ¥setæ–¹æ³•,å°†å±æ€§åç§°å‰é¢æ”¹ä¸ºå¤§å†™</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> initStr(ColumnName);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ‹¼æ¥æ–¹æ³•</span></span><br><span class="line">            <span class="type">Method</span> <span class="variable">setBookValue</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;set&quot;</span>+fileName,f.getType());</span><br><span class="line"><span class="comment">//            System.out.println(f.getType());</span></span><br><span class="line">            <span class="comment">//bookå±æ€§ä¸­æœ‰integerç±»å‹,å› æ­¤éœ€è¦åˆ¤æ–­å¹¶ä¸”è½¬æ¢ç±»å‹</span></span><br><span class="line">            <span class="keyword">if</span>(f.getType().toString().equals(<span class="string">&quot;class java.lang.Integer&quot;</span>))&#123;</span><br><span class="line">                setBookValue.invoke(book,Integer.valueOf(stringValue));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//åŒç†,æœ‰intç±»å‹</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(f.getType().toString().equals(<span class="string">&quot;int&quot;</span>))&#123;</span><br><span class="line">                setBookValue.invoke(book,Integer.valueOf(stringValue));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                setBookValue.invoke(book,stringValue);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException | IllegalAccessException | InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†é¦–ä¸ªå­—æ¯å¤§å°å†™</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> old</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">initStr</span><span class="params">(String old)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> old.substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase() + old.substring(<span class="number">1</span>) ;</span><br><span class="line">        <span class="keyword">return</span> str ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>Bookç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line"></span><br><span class="line">    Integer book_id;</span><br><span class="line">    Integer category_id;<span class="comment">//ç±»åˆ«</span></span><br><span class="line">    String category_name;<span class="comment">//ç±»åˆ«åç§°</span></span><br><span class="line">    String book_name;</span><br><span class="line">    String author;</span><br><span class="line">    String publisher;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> price;</span><br><span class="line">    <span class="type">int</span> sale_price;</span><br><span class="line">    <span class="type">int</span> amount;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getBook_id</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> book_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBook_id</span><span class="params">(Integer book_id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.book_id = book_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCategory_id</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> category_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCategory_id</span><span class="params">(Integer category_id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.category_id = category_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCategory_name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> category_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCategory_name</span><span class="params">(String category_name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.category_name = category_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBook_name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> book_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBook_name</span><span class="params">(String book_name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.book_name = book_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSale_price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sale_price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSale_price</span><span class="params">(<span class="type">int</span> sale_price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sale_price = sale_price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAuthor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> author;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAuthor</span><span class="params">(String author)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.author = author;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPublisher</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> publisher;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPublisher</span><span class="params">(String publisher)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.publisher = publisher;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(<span class="type">int</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAmount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAmount</span><span class="params">(<span class="type">int</span> amount)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.amount = amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Book&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;book_id=&quot;</span> + book_id +</span><br><span class="line">                <span class="string">&quot;, category_id=&quot;</span> + category_id +</span><br><span class="line">                <span class="string">&quot;, category_name=&#x27;&quot;</span> + category_name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, book_name=&#x27;&quot;</span> + book_name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, author=&#x27;&quot;</span> + author + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, publisher=&#x27;&quot;</span> + publisher + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&quot;, sale_price=&quot;</span> + sale_price +</span><br><span class="line">                <span class="string">&quot;, amount=&quot;</span> + amount +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>categorie ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">category</span> &#123;</span><br><span class="line">    Integer categoryId;<span class="comment">//ç±»åˆ«</span></span><br><span class="line">    String categoryName;<span class="comment">//ç±»åˆ«åç§°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCategoryId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> categoryId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCategoryId</span><span class="params">(Integer categoryId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.categoryId = categoryId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCategoryName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> categoryName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCategoryName</span><span class="params">(String categoryName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.categoryName = categoryName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;category&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;categoryId=&quot;</span> + categoryId +</span><br><span class="line">                <span class="string">&quot;, categoryName=&#x27;&quot;</span> + categoryName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸è§Linuxå‘½ä»¤</title>
      <link href="/2024/04/21/%E5%B8%B8%E8%A7%81Linux%E5%91%BD%E4%BB%A4/"/>
      <url>/2024/04/21/%E5%B8%B8%E8%A7%81Linux%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Linuxç³»ç»Ÿæ˜¯å¼€å‘å’Œè¿ç»´å·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„æ“ä½œç³»ç»Ÿï¼ŒæŒæ¡å¸¸ç”¨çš„Linuxå‘½ä»¤å¯ä»¥å¤§å¤§æé«˜å·¥ä½œæ•ˆç‡ã€‚æœ¬æ–‡æ•´ç†äº†æ—¥å¸¸å·¥ä½œä¸­ç»å¸¸ä½¿ç”¨çš„Linuxå‘½ä»¤ï¼ŒæŒ‰åŠŸèƒ½åˆ†ç±»å¹¶æä¾›è¯¦ç»†è§£é‡Šå’Œå®ç”¨ç¤ºä¾‹ï¼Œæ–¹ä¾¿æŸ¥é˜…å’Œä½¿ç”¨ã€‚</p><h2 id="ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹"><a href="#ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹"></a>ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹</h2><h3 id="æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"></a>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹Linuxå‘è¡Œç‰ˆä¿¡æ¯</span></span><br><span class="line"><span class="built_in">cat</span> /etc/redhat-release    <span class="comment"># CentOS/RHELç³»ç»Ÿ</span></span><br><span class="line">lsb_release -a             <span class="comment"># å¤§å¤šæ•°Linuxå‘è¡Œç‰ˆ</span></span><br><span class="line"><span class="built_in">cat</span> /etc/issue             <span class="comment"># æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯</span></span><br><span class="line"><span class="built_in">uname</span> -a                   <span class="comment"># æŸ¥çœ‹å†…æ ¸ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ"><a href="#æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ"></a>æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç£ç›˜ç©ºé—´</span></span><br><span class="line"><span class="built_in">df</span> -h                      <span class="comment"># ä»¥äººç±»å¯è¯»æ–¹å¼æ˜¾ç¤ºç£ç›˜ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="built_in">du</span> -sh /path/to/directory  <span class="comment"># æŸ¥çœ‹æŒ‡å®šç›®å½•å¤§å°</span></span><br><span class="line">free -m                    <span class="comment"># æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ(MB)</span></span><br><span class="line">top                        <span class="comment"># å®æ—¶æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ</span></span><br><span class="line">htop                       <span class="comment"># æ›´å‹å¥½çš„topæ›¿ä»£å“(éœ€å®‰è£…)</span></span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h2><h3 id="åŸºæœ¬æ–‡ä»¶æ“ä½œ"><a href="#åŸºæœ¬æ–‡ä»¶æ“ä½œ" class="headerlink" title="åŸºæœ¬æ–‡ä»¶æ“ä½œ"></a>åŸºæœ¬æ–‡ä»¶æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -la                     <span class="comment"># åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶(åŒ…æ‹¬éšè—æ–‡ä»¶)åŠè¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">cp</span> -r <span class="built_in">source</span> destination   <span class="comment"># é€’å½’å¤åˆ¶ç›®å½•</span></span><br><span class="line"><span class="built_in">mv</span> <span class="built_in">source</span> destination      <span class="comment"># ç§»åŠ¨æ–‡ä»¶æˆ–é‡å‘½å</span></span><br><span class="line"><span class="built_in">rm</span> -rf directory           <span class="comment"># é€’å½’å¼ºåˆ¶åˆ é™¤ç›®å½•(è°¨æ…ä½¿ç”¨!)</span></span><br><span class="line"><span class="built_in">touch</span> filename             <span class="comment"># åˆ›å»ºç©ºæ–‡ä»¶æˆ–æ›´æ–°æ–‡ä»¶æ—¶é—´æˆ³</span></span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶æŸ¥æ‰¾å’Œå†…å®¹æœç´¢"><a href="#æ–‡ä»¶æŸ¥æ‰¾å’Œå†…å®¹æœç´¢" class="headerlink" title="æ–‡ä»¶æŸ¥æ‰¾å’Œå†…å®¹æœç´¢"></a>æ–‡ä»¶æŸ¥æ‰¾å’Œå†…å®¹æœç´¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find /path -name <span class="string">&quot;*.txt&quot;</span>   <span class="comment"># æŸ¥æ‰¾æŒ‡å®šè·¯å¾„ä¸‹çš„txtæ–‡ä»¶</span></span><br><span class="line">grep <span class="string">&quot;pattern&quot;</span> filename    <span class="comment"># åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾åŒ¹é…å†…å®¹</span></span><br><span class="line">grep -r <span class="string">&quot;pattern&quot;</span> /path    <span class="comment"># é€’å½’æŸ¥æ‰¾ç›®å½•ä¸­çš„åŒ¹é…å†…å®¹</span></span><br></pre></td></tr></table></figure><h2 id="ç½‘ç»œç›¸å…³"><a href="#ç½‘ç»œç›¸å…³" class="headerlink" title="ç½‘ç»œç›¸å…³"></a>ç½‘ç»œç›¸å…³</h2><h3 id="ç«¯å£å’Œè¿æ¥ç®¡ç†"><a href="#ç«¯å£å’Œè¿æ¥ç®¡ç†" class="headerlink" title="ç«¯å£å’Œè¿æ¥ç®¡ç†"></a>ç«¯å£å’Œè¿æ¥ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç½‘ç»œè¿æ¥å’Œç«¯å£</span></span><br><span class="line">netstat -tlpn              <span class="comment"># æŸ¥çœ‹æ‰€æœ‰TCPç›‘å¬ç«¯å£</span></span><br><span class="line">netstat -aon|findstr <span class="string">&quot;8080&quot;</span> <span class="comment"># åœ¨Windowsä¸­æŸ¥æ‰¾ä½¿ç”¨8080ç«¯å£çš„è¿›ç¨‹</span></span><br><span class="line">ss -tnl                    <span class="comment"># æ˜¾ç¤ºTCPç›‘å¬ç«¯å£(ssæ˜¯netstatçš„æ›¿ä»£)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç²¾ç¡®æŸ¥æ‰¾ç‰¹å®šç«¯å£</span></span><br><span class="line">PORT=88</span><br><span class="line">netstat -lntup | awk -v port=<span class="string">&quot;<span class="variable">$PORT</span>&quot;</span> <span class="string">&#x27;NR&gt;2 &amp;&amp; $4 ~ &quot;:&quot;port&quot;$&quot; &#123;gsub(/.*:/,&quot;&quot;,$4); print $4&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç‰¹å®šç«¯å£çš„è¿›ç¨‹</span></span><br><span class="line">lsof -i:8080               <span class="comment"># æŸ¥çœ‹ä½¿ç”¨8080ç«¯å£çš„è¿›ç¨‹</span></span><br></pre></td></tr></table></figure><h3 id="é˜²ç«å¢™ç®¡ç†"><a href="#é˜²ç«å¢™ç®¡ç†" class="headerlink" title="é˜²ç«å¢™ç®¡ç†"></a>é˜²ç«å¢™ç®¡ç†</h3><h4 id="CentOS-x2F-RHEL-firewalld"><a href="#CentOS-x2F-RHEL-firewalld" class="headerlink" title="CentOS&#x2F;RHEL (firewalld)"></a>CentOS&#x2F;RHEL (firewalld)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€å’Œç«¯å£</span></span><br><span class="line">firewall-cmd --state                      <span class="comment"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></span><br><span class="line">firewall-cmd --zone=public --list-ports   <span class="comment"># æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£</span></span><br><span class="line">firewall-cmd --query-port=80/tcp          <span class="comment"># æŸ¥è¯¢ç‰¹å®šç«¯å£æ˜¯å¦å¼€æ”¾</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®¡ç†é˜²ç«å¢™è§„åˆ™</span></span><br><span class="line">firewall-cmd --zone=public --add-port=9913/tcp --permanent  <span class="comment"># æ°¸ä¹…å¼€æ”¾ç«¯å£</span></span><br><span class="line">firewall-cmd --zone=public --remove-port=9913/tcp --permanent  <span class="comment"># æ°¸ä¹…å…³é—­ç«¯å£</span></span><br><span class="line">firewall-cmd --reload                     <span class="comment"># é‡æ–°åŠ è½½é˜²ç«å¢™é…ç½®</span></span><br></pre></td></tr></table></figure><h4 id="Ubuntu-ufw"><a href="#Ubuntu-ufw" class="headerlink" title="Ubuntu (ufw)"></a>Ubuntu (ufw)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw status                <span class="comment"># æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span></span><br><span class="line">sudo ufw <span class="built_in">enable</span>                <span class="comment"># å¼€å¯é˜²ç«å¢™</span></span><br><span class="line">sudo ufw allow 22              <span class="comment"># å¼€æ”¾22ç«¯å£</span></span><br><span class="line">sudo ufw delete allow 21       <span class="comment"># å…³é—­21ç«¯å£</span></span><br></pre></td></tr></table></figure><h2 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ps aux                         <span class="comment"># æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹</span></span><br><span class="line">ps aux | grep process_name     <span class="comment"># æŸ¥æ‰¾ç‰¹å®šè¿›ç¨‹</span></span><br><span class="line"><span class="built_in">kill</span> -9 PID                    <span class="comment"># å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹</span></span><br><span class="line">killall process_name           <span class="comment"># ç»ˆæ­¢æ‰€æœ‰æŒ‡å®šåç§°çš„è¿›ç¨‹</span></span><br><span class="line">tasklist|findstr <span class="string">&quot;2668&quot;</span>        <span class="comment"># Windowsä¸­æŸ¥æ‰¾PIDä¸º2668çš„è¿›ç¨‹</span></span><br></pre></td></tr></table></figure><h2 id="Redisæ“ä½œ"><a href="#Redisæ“ä½œ" class="headerlink" title="Redisæ“ä½œ"></a>Redisæ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Redisé›†ç¾¤æ“ä½œ</span></span><br><span class="line">/usr/local/redis/bin/redis-cli -a 123456 --cluster create \</span><br><span class="line">  10.101.37.179:6381 10.101.37.179:6380 10.101.37.200:6381 \</span><br><span class="line">  10.101.37.200:6380 10.101.37.111:6381 10.101.37.111:6380 \</span><br><span class="line">  --cluster-replicas 1         <span class="comment"># åˆ›å»ºRedisé›†ç¾¤</span></span><br><span class="line"></span><br><span class="line">/usr/local/redis/bin/redis-cli -a 123456 --cluster check 10.101.37.179:6381  <span class="comment"># æ£€æŸ¥é›†ç¾¤çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RedisæœåŠ¡ç®¡ç†</span></span><br><span class="line">/usr/local/redis/bin/redis-server /data/redis/6379/redis.conf  <span class="comment"># å¯åŠ¨RedisæœåŠ¡</span></span><br><span class="line">/usr/local/redis/bin/redis-cli -a 123456 -p 6380 shutdown     <span class="comment"># å…³é—­RedisæœåŠ¡</span></span><br><span class="line">/usr/local/redis/bin/redis-cli -a 123456                      <span class="comment"># è¿æ¥Rediså®¢æˆ·ç«¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Redisæ–‡ä»¶æ¸…ç†</span></span><br><span class="line"><span class="built_in">rm</span> -rf appendonly.aof   <span class="comment"># åˆ é™¤AOFæ–‡ä»¶</span></span><br><span class="line"><span class="built_in">rm</span> -rf dump.rdb         <span class="comment"># åˆ é™¤RDBæ–‡ä»¶</span></span><br><span class="line"><span class="built_in">rm</span> -rf nodes.conf       <span class="comment"># åˆ é™¤èŠ‚ç‚¹é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="MySQLæ“ä½œ"><a href="#MySQLæ“ä½œ" class="headerlink" title="MySQLæ“ä½œ"></a>MySQLæ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MySQLç®¡ç†å‘½ä»¤</span></span><br><span class="line">mysqladmin -u root password 123456   <span class="comment"># è®¾ç½®rootç”¨æˆ·å¯†ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹MySQLå¯†ç (MySQL 8.0+)</span></span><br><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®åº“å¤‡ä»½</span></span><br><span class="line">mysqldump -u username -p database_name &gt; backup.sql  <span class="comment"># å¤‡ä»½æ•°æ®åº“</span></span><br><span class="line">mysqldump -u username -p --all-databases &gt; all_db_backup.sql  <span class="comment"># å¤‡ä»½æ‰€æœ‰æ•°æ®åº“</span></span><br></pre></td></tr></table></figure><h2 id="ç³»ç»Ÿç¯å¢ƒè®¾ç½®"><a href="#ç³»ç»Ÿç¯å¢ƒè®¾ç½®" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒè®¾ç½®"></a>ç³»ç»Ÿç¯å¢ƒè®¾ç½®</h2><h3 id="å­—ç¬¦ç¼–ç è®¾ç½®"><a href="#å­—ç¬¦ç¼–ç è®¾ç½®" class="headerlink" title="å­—ç¬¦ç¼–ç è®¾ç½®"></a>å­—ç¬¦ç¼–ç è®¾ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç¼–ç </span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$LANG</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç¼–ç ä¸ºzh_CN.UTF-8</span></span><br><span class="line"><span class="built_in">export</span> LANG=zh_CN.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†æ¬¡æŸ¥çœ‹å½“å‰ç¼–ç </span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$LANG</span></span><br></pre></td></tr></table></figure><h2 id="NPMç›¸å…³"><a href="#NPMç›¸å…³" class="headerlink" title="NPMç›¸å…³"></a>NPMç›¸å…³</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å†³ä¾èµ–å†²çªé—®é¢˜</span></span><br><span class="line">npm install --legacy-peer-deps</span><br></pre></td></tr></table></figure><h2 id="å‘½ä»¤è¡Œå‚æ•°å¤„ç†"><a href="#å‘½ä»¤è¡Œå‚æ•°å¤„ç†" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°å¤„ç†"></a>å‘½ä»¤è¡Œå‚æ•°å¤„ç†</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># getoptå‘½ä»¤ç”¨äºè§£æå‘½ä»¤è¡Œå‚æ•°</span></span><br><span class="line"><span class="comment"># -oæˆ–--optionsé€‰é¡¹åé¢æ¥å¯æ¥å—çš„çŸ­é€‰é¡¹ï¼Œå¦‚ab:c::</span></span><br><span class="line"><span class="comment"># -læˆ–--longé€‰é¡¹åé¢æ¥å¯æ¥å—çš„é•¿é€‰é¡¹ï¼Œç”¨é€—å·åˆ†å¼€</span></span><br><span class="line"><span class="comment"># -né€‰é¡¹åæ¥é€‰é¡¹è§£æé”™è¯¯æ—¶æç¤ºçš„è„šæœ¬åå­—</span></span><br><span class="line">ARGS=`getopt -o s: --long p: -n <span class="string">&quot;<span class="variable">$BASH_NAME</span>&quot;</span> -- <span class="string">&quot;<span class="variable">$@</span>&quot;</span>`</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…é—®é¢˜è§£å†³"><a href="#å®‰è£…é—®é¢˜è§£å†³" class="headerlink" title="å®‰è£…é—®é¢˜è§£å†³"></a>å®‰è£…é—®é¢˜è§£å†³</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœå®‰è£…å‘ç”ŸSSL/TLSé”™è¯¯(443)</span></span><br><span class="line">yum install ca-certificates -y  <span class="comment"># å®‰è£…è¯ä¹¦</span></span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">yum install ssl-cert -y</span><br></pre></td></tr></table></figure><h2 id="å®ç”¨æŠ€å·§"><a href="#å®ç”¨æŠ€å·§" class="headerlink" title="å®ç”¨æŠ€å·§"></a>å®ç”¨æŠ€å·§</h2><h3 id="ç½‘ç»œè°ƒè¯•"><a href="#ç½‘ç»œè°ƒè¯•" class="headerlink" title="ç½‘ç»œè°ƒè¯•"></a>ç½‘ç»œè°ƒè¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸´æ—¶ç›‘å¬ç«¯å£(ç”¨äºæµ‹è¯•)</span></span><br><span class="line">nc -l 8080</span><br></pre></td></tr></table></figure><h3 id="å‘½ä»¤ç»„åˆ"><a href="#å‘½ä»¤ç»„åˆ" class="headerlink" title="å‘½ä»¤ç»„åˆ"></a>å‘½ä»¤ç»„åˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»„åˆå‘½ä»¤æŸ¥æ‰¾ç‰¹å®šä¿¡æ¯</span></span><br><span class="line">netstat -lntup | awk <span class="string">&#x27;NR&gt;2&#123;gsub(/.*:/,&quot; &quot;,$4);print $4&#125;&#x27;</span> | grep <span class="string">&quot; 31059$&quot;</span>  <span class="comment"># ç²¾ç¡®æ‰¾å‡ºç«¯å£31059</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡æ•´ç†äº†Linuxç³»ç»Ÿä¸­å¸¸ç”¨çš„å‘½ä»¤ï¼Œæ¶µç›–äº†ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹ã€æ–‡ä»¶æ“ä½œã€ç½‘ç»œç®¡ç†ã€è¿›ç¨‹ç®¡ç†ã€æ•°æ®åº“æ“ä½œç­‰å¤šä¸ªæ–¹é¢ã€‚è¿™äº›å‘½ä»¤åœ¨æ—¥å¸¸çš„å¼€å‘å’Œè¿ç»´å·¥ä½œä¸­éå¸¸å®ç”¨ï¼ŒæŒæ¡è¿™äº›å‘½ä»¤å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´é«˜æ•ˆåœ°å®Œæˆå·¥ä½œä»»åŠ¡ã€‚</p><p>å¯¹äºæ›´å¤æ‚çš„æ“ä½œï¼Œå»ºè®®æŸ¥é˜…ç›¸å…³å‘½ä»¤çš„æ‰‹å†Œé¡µ(ä½¿ç”¨<code>man command</code>å‘½ä»¤)æˆ–å®˜æ–¹æ–‡æ¡£ï¼Œä»¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯å’Œé€‰é¡¹è¯´æ˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å°ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dorisåˆ é™¤å·¥å…·</title>
      <link href="/2024/04/21/doris%E5%88%A0%E9%99%A4%E5%B7%A5%E5%85%B7/"/>
      <url>/2024/04/21/doris%E5%88%A0%E9%99%A4%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h2><blockquote><p>å¯¹äºDorisçš„ Unique æ¨¡å‹ï¼Œåœ¨åˆ é™¤æ•°æ®çš„æ—¶å€™åªèƒ½æ ¹æ®keyåˆ é™¤ï¼Œå¦‚æœä½¿ç”¨å…¶ä»–æ¡ä»¶å°±ä¼šæŠ¥é”™</p></blockquote><h2 id="æ•´ä½“æ¶æ„æµç¨‹"><a href="#æ•´ä½“æ¶æ„æµç¨‹" class="headerlink" title="æ•´ä½“æ¶æ„æµç¨‹"></a>æ•´ä½“æ¶æ„æµç¨‹</h2><p>å…ˆè·å¾—è¡¨çš„keyï¼Œç„¶ååœ¨é€šè¿‡è¾“å…¥çš„æ¡ä»¶è·å¾—keyçš„æ‰€æœ‰å€¼ï¼Œæœ€åé€šè¿‡keyçš„å€¼æ‹¼æ¥åˆ é™¤è¯­å¥ï¼Œè°ƒç”¨çº¿ç¨‹åˆ é™¤ã€‚</p><h2 id="æŠ€æœ¯åè¯è§£é‡Š"><a href="#æŠ€æœ¯åè¯è§£é‡Š" class="headerlink" title="æŠ€æœ¯åè¯è§£é‡Š"></a>æŠ€æœ¯åè¯è§£é‡Š</h2><ul><li>jsqlparser ï¼šSQLè§£æå·¥å…·ï¼Œèƒ½å°†å­—ç¬¦ä¸²è§£æå‡ºSQLçš„è¡¨ï¼Œå€¼ï¼Œæ¡ä»¶ç­‰</li><li>HikariCP ï¼šæ•°æ®åº“è¿æ¥æ± </li><li>å•ä¾‹æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼è°ƒç”¨æ•°æ®åº“è¿æ¥</li></ul><h2 id="æŠ€æœ¯ç»†èŠ‚"><a href="#æŠ€æœ¯ç»†èŠ‚" class="headerlink" title="æŠ€æœ¯ç»†èŠ‚"></a>æŠ€æœ¯ç»†èŠ‚</h2><ul><li>å¤šçº¿ç¨‹ï¼šä½¿ç”¨çº¿ç¨‹æ± å¼€å¯çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ†é¡µçº¿ç¨‹</li><li>æ—¶é—´æ˜¾ç¤ºï¼šæ—¶é—´æ˜¾ç¤ºä½¿ç”¨æ— ç¬¦å·çš„æ—¶é—´æ ¼å¼</li></ul><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.example.SqlParserExample.getTableName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        initLogRecord.initLog();</span><br><span class="line">        System.out.println(<span class="string">&quot;================================================================&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> HikariConfigs.HikariConn();</span><br><span class="line">        <span class="comment">// Statement stmt = conn.createStatement();</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;===========================è¯·è¾“å…¥åˆ é™¤çš„è¯­å¥=========================&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">        <span class="type">String</span> <span class="variable">where</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (sql.indexOf(<span class="string">&quot;where&quot;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            where = sql.substring(sql.indexOf(<span class="string">&quot;where&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sql.indexOf(<span class="string">&quot;WHERE&quot;</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            where = sql.substring(sql.indexOf(<span class="string">&quot;WHERE&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;=======================è·å–WHEREæ¡ä»¶=============================&quot;</span>);</span><br><span class="line">        System.out.println(where);</span><br><span class="line">        <span class="type">String</span> <span class="variable">table</span> <span class="operator">=</span> getTableName(sql);</span><br><span class="line">        <span class="type">String</span> <span class="variable">getKey</span> <span class="operator">=</span> <span class="string">&quot;select * from information_schema.columns where TABLE_NAME = ? &quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ptmt_getKey</span> <span class="operator">=</span> conn.prepareStatement(getKey);</span><br><span class="line">        ptmt_getKey.setString(<span class="number">1</span>, table);</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> ptmt_getKey.executeQuery();</span><br><span class="line">        List&lt;String&gt; key = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Map&lt;String, String&gt; key_type = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        System.out.println(<span class="string">&quot;=======================è·å–KEY==================================&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs.getString(<span class="string">&quot;column_key&quot;</span>).equals(<span class="string">&quot;UNI&quot;</span>)) &#123;</span><br><span class="line">                key.add(rs.getString(<span class="string">&quot;column_name&quot;</span>));</span><br><span class="line">                key_type.put(rs.getString(<span class="string">&quot;column_name&quot;</span>), rs.getString(<span class="string">&quot;DATA_TYPE&quot;</span>));</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;column_name&quot;</span>) + <span class="string">&quot;  &quot;</span> + rs.getString(<span class="string">&quot;column_key&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=======================æ‹¼æ¥key==================================&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">column</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (String s : key) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!Objects.equals(column, <span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">                column = column + <span class="string">&quot;,&quot;</span> + s;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                column = s;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(column);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹¼æ¥SELECT è¯­å¥</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">newSQL</span> <span class="operator">=</span> <span class="string">&quot;SELECT &quot;</span> + column + <span class="string">&quot; FROM &quot;</span> + table + <span class="string">&quot; &quot;</span> + where;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">pstm_getkeyvalue</span> <span class="operator">=</span> conn.prepareStatement(newSQL);</span><br><span class="line">        rs = pstm_getkeyvalue.executeQuery();</span><br><span class="line">        List&lt;Map&lt;String, String&gt;&gt; values = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">            Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (String x : key) &#123;</span><br><span class="line">                map.put(x, rs.getString(x));</span><br><span class="line">            &#125;</span><br><span class="line">            values.add(map);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// for (int i =0 ;i&lt; values.size();i++)&#123;</span></span><br><span class="line">        <span class="comment">// System.out.println(values.get(i));;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾ªç¯æ‹¼æ¥åˆ é™¤çš„where æ¡ä»¶</span></span><br><span class="line">        StringBuilder delete_where;</span><br><span class="line">        String delete_sql;</span><br><span class="line">        List&lt;String&gt; delete_sqls = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Map&lt;String, String&gt; x : values) &#123;</span><br><span class="line">            delete_where = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="keyword">for</span> (String y : x.keySet()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (delete_where.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="comment">// æ—¶é—´æ ¼å¼çš„æ‹¼æ¥</span></span><br><span class="line">                    <span class="keyword">if</span> (key_type.get(y).equals(<span class="string">&quot;datetime&quot;</span>)) &#123;</span><br><span class="line">                        <span class="type">LocalDateTime</span> <span class="variable">date</span> <span class="operator">=</span> LocalDateUtils.parseLocalDateTime(x.get(y),</span><br><span class="line">                                LocalDateUtils.DATETIME_PATTERN);</span><br><span class="line">                        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> LocalDateUtils.format(date, LocalDateUtils.UNSIGNED_DATETIME_PATTERN);</span><br><span class="line">                        delete_where.append(<span class="string">&quot; AND &quot;</span>).append(y).append(<span class="string">&quot;=&quot;</span>).append(<span class="string">&quot;&#x27;&quot;</span>).append(str).append(<span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        delete_where.append(<span class="string">&quot; AND &quot;</span>).append(y).append(<span class="string">&quot;=&quot;</span>).append(<span class="string">&quot;&#x27;&quot;</span>).append(x.get(y)).append(<span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (key_type.get(y).equals(<span class="string">&quot;datetime&quot;</span>)) &#123;</span><br><span class="line">                        <span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> LocalDateUtils.parseLocalDate(x.get(y), LocalDateUtils.DATETIME_PATTERN);</span><br><span class="line">                        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> LocalDateUtils.format(date, LocalDateUtils.UNSIGNED_DATETIME_PATTERN);</span><br><span class="line">                        delete_where = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(y + <span class="string">&quot;=&quot;</span> + <span class="string">&quot;&#x27;&quot;</span> + str + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        delete_where = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(y + <span class="string">&quot;=&quot;</span> + <span class="string">&quot;&#x27;&quot;</span> + x.get(y) + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            delete_sql = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            delete_sql = <span class="string">&quot;DELETE FROM &quot;</span> + table + <span class="string">&quot; WHERE &quot;</span> + delete_where;</span><br><span class="line">            delete_sqls.add(delete_sql);</span><br><span class="line">            <span class="comment">// System.out.println(&quot;åˆ é™¤è¯­å¥ï¼š&quot;+ delete_sql);</span></span><br><span class="line">            <span class="comment">// if (dels.executeUpdate(delete_sql)&gt;0)&#123;</span></span><br><span class="line">            <span class="comment">// i++;</span></span><br><span class="line">            <span class="comment">// System.out.println(&quot;=======================åˆ é™¤æˆåŠŸ=======================&quot;);</span></span><br><span class="line">            <span class="comment">// &#125;else&#123;</span></span><br><span class="line">            <span class="comment">// System.out.println(&quot;!!!!!!!!!!!!!!!!!åˆ é™¤å¤±è´¥!!!!!!!!!!!!!!!!!&quot;);</span></span><br><span class="line">            <span class="comment">// j++;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">        conn.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨çº¿ç¨‹æ‰§è¡Œsql</span></span><br><span class="line">        System.out.println(<span class="string">&quot;=====================  éœ€è¦åˆ é™¤æ•°æ®çš„æ€»æ•°ä¸º: &quot;</span> + delete_sqls.size() + <span class="string">&quot;  =================&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;======================  è¯·ç¡®è®¤æ˜¯å¦åˆ é™¤ï¼Ÿ yes or no=====================&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">is_delete</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">        <span class="keyword">if</span> (!is_delete.equals(<span class="string">&quot;yes&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ExecutorService executor = Executors.newFixedThreadPool(10); // åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± </span></span><br><span class="line">        <span class="comment">// AtomicInteger successCount = new AtomicInteger(0); // åŸå­è®¡æ•°å™¨ï¼Œç”¨äºè®°å½•æˆåŠŸæ‰§è¡Œçš„SQLæ•°é‡</span></span><br><span class="line">        <span class="comment">// AtomicInteger failureCount = new AtomicInteger(0); // ç»Ÿè®¡å¤±è´¥æ¬¡æ•°</span></span><br><span class="line">        <span class="comment">// long start = System.currentTimeMillis();</span></span><br><span class="line">        <span class="comment">// executor.submit(() -&gt; &#123;</span></span><br><span class="line">        <span class="comment">//     try (Connection connection = HikariConfigs.HikariConn();) &#123;</span></span><br><span class="line">        <span class="comment">//         for (int i = 0; i &lt; delete_sqls.size(); i++) &#123;</span></span><br><span class="line">        <span class="comment">//             Statement statement = connection.createStatement();</span></span><br><span class="line">        <span class="comment">//             String deletesql = delete_sqls.get(i);</span></span><br><span class="line">        <span class="comment">//             System.out.println(&quot;!!!æ­£åœ¨åˆ é™¤æ•°æ®ï¼š&quot; + deletesql);</span></span><br><span class="line">        <span class="comment">//             // int updateCount = statement.executeUpdate(deletesql);</span></span><br><span class="line">        <span class="comment">//             // if (updateCount &gt; -1) &#123;</span></span><br><span class="line">        <span class="comment">//             //     successCount.incrementAndGet(); // å¦‚æœåˆ é™¤æˆåŠŸï¼Œå¢åŠ æœ¬åœ°è®¡æ•°å™¨</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//             // &#125; else &#123;</span></span><br><span class="line">        <span class="comment">//             //     failureCount.incrementAndGet();// å¦‚æœåˆ é™¤å¤±è´¥</span></span><br><span class="line">        <span class="comment">//             // &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//             statement.addBatch(deletesql);</span></span><br><span class="line">        <span class="comment">//             successCount.incrementAndGet(); // å¦‚æœåˆ é™¤æˆåŠŸï¼Œå¢åŠ æœ¬åœ°è®¡æ•°å™¨</span></span><br><span class="line">        <span class="comment">//             if (i % 500 == 0) &#123;</span></span><br><span class="line">        <span class="comment">//                 statement.executeBatch();</span></span><br><span class="line">        <span class="comment">//             &#125;</span></span><br><span class="line">        <span class="comment">//         &#125;</span></span><br><span class="line">        <span class="comment">//     &#125; catch (SQLException e) &#123;</span></span><br><span class="line">        <span class="comment">//         e.printStackTrace();</span></span><br><span class="line">        <span class="comment">//     &#125; catch (InterruptedException ex) &#123;</span></span><br><span class="line">        <span class="comment">//         ex.printStackTrace();</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// executor.shutdown(); // å…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">        <span class="comment">// executor.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS); // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span></span><br><span class="line">        <span class="comment">// long end = System.currentTimeMillis();</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">successCount</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>); <span class="comment">// åŸå­è®¡æ•°å™¨ï¼Œç”¨äºè®°å½•æˆåŠŸæ‰§è¡Œçš„SQLæ•°é‡</span></span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">failureCount</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>); <span class="comment">// ç»Ÿè®¡å¤±è´¥æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> delete_sqls.size();</span><br><span class="line">        <span class="type">int</span> <span class="variable">theadCount</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">splitCount</span> <span class="operator">=</span> size / theadCount + (size % theadCount != <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>); <span class="comment">//è®¡ç®—åˆ†æ‹†æ•°é‡ï¼Œå‘ä¸Šå–æ•´</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">CountDownLatch</span> <span class="variable">cdl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountDownLatch</span>(theadCount);<span class="comment">// å®šä¹‰çº¿ç¨‹æ•°é‡</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">starttime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">1</span>; k &lt;= theadCount; k++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">beign</span> <span class="operator">=</span> (k - <span class="number">1</span>)  * splitCount;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> (k * splitCount) &gt; size ? size : k * splitCount;</span><br><span class="line">            <span class="keyword">if</span>(beign &gt;= end) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                    <span class="type">Connection</span> <span class="variable">con</span> <span class="operator">=</span> JDBCTools.getConnection();</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> con.createStatement();</span><br><span class="line">                        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; delete_sqls.size(); i++) &#123;</span><br><span class="line">                            <span class="type">String</span> <span class="variable">deletesql</span> <span class="operator">=</span> delete_sqls.get(i);</span><br><span class="line">                            System.out.println(<span class="string">&quot;!!!æ­£åœ¨åˆ é™¤æ•°æ®ï¼š&quot;</span> + deletesql);</span><br><span class="line">                            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> st.executeUpdate(deletesql);</span><br><span class="line">                            <span class="keyword">if</span> (count &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">                                successCount.incrementAndGet();</span><br><span class="line">                            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                failureCount.incrementAndGet();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        cdl.countDown(); <span class="comment">// æ‰§è¡Œå®Œä¸€ä¸ªçº¿ç¨‹ï¼Œé€’å‡1</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            con.close();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            cdl.await();    <span class="comment">//å‰é¢çº¿ç¨‹æ²¡æ‰§è¡Œå®Œï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ï¼Œä¸å¾€ä¸‹æ‰§è¡Œ</span></span><br><span class="line">            <span class="type">long</span> spendtime=System.currentTimeMillis()-starttime;</span><br><span class="line">            System.out.println( theadCount+<span class="string">&quot;ä¸ªçº¿ç¨‹èŠ±è´¹æ—¶é—´:&quot;</span>+spendtime);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">endtime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;å·²å®Œæˆåˆ é™¤&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆåŠŸåˆ é™¤æ•°æ® &quot;</span> + successCount + <span class="string">&quot; æ¡&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤å¤±è´¥ &quot;</span> + failureCount + <span class="string">&quot; æ¡&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶ˆè€—çš„æ—¶é—´ä¸ºï¼ˆæ¯«ç§’ï¼‰ï¼š&quot;</span> + (endtime - starttime));</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶ˆè€—çš„æ—¶é—´ä¸ºï¼ˆç§’ï¼‰ï¼š&quot;</span> + TimeUnit.MILLISECONDS.toSeconds(endtime - starttime));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„é¡¹ç›®gitåœ°å€ï¼š<a href="https://gitee.com/reisen7/doristool">Doriså·¥å…·</a></p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Doris </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›½å†…é•œåƒä¸‹è½½node-sass</title>
      <link href="/2024/04/21/%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BDnode-sass/"/>
      <url>/2024/04/21/%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BDnode-sass/</url>
      
        <content type="html"><![CDATA[<p>npm ä¸‹è½½ gpyï¼ˆç»™çˆ·çˆ¬ï¼‰å¤±è´¥ï¼Œå¤§æ¦‚ç‡æ˜¯ä¸‹è½½node-sasså¤±è´¥<br>ğŸ‘‡ğŸ‘‡ğŸ‘‡</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">npm</span> <span class="string">ERR! path xxx\src\main\webapp\admin\node_modules\node-sass</span></span><br></pre></td></tr></table></figure><p><strong>è§£å†³åŠæ³•</strong></p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ  <em><code>.npmrc</code></em><br>ä¾‹å¦‚ï¼š</p><p><img src="/img/posts/b329c4d44eeb5c45c7d1d53e8c3d3d85.png"><br>åœ¨é‡Œé¢å†™å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">registry=https://registry.npmmirror.com</span><br><span class="line">sass_binary_site=https://npmmirror.com/mirrors/node-sass/</span><br><span class="line">phantomjs_cdnurl=https://npmmirror.com/mirrors/phantomjs/</span><br><span class="line">electron_mirror=https://npmmirror.com/mirrors/electron/</span><br><span class="line">sqlite3_binary_host_mirror=http://npmmirror.com/mirrors/</span><br><span class="line">profiler_binary_host_mirror=http://npmmirror.com/mirrors/node-inspector/</span><br><span class="line">chromedriver_cdnurl=https://npmmirror.com/mirrors/chromedriver</span><br><span class="line">sentrycli_cdnurl=https://npmmirror.com/mirrors/sentry-cli/</span><br></pre></td></tr></table></figure><h2 id="å¦å¤–éœ€è¦æ³¨æ„nodeçš„ç‰ˆæœ¬"><a href="#å¦å¤–éœ€è¦æ³¨æ„nodeçš„ç‰ˆæœ¬" class="headerlink" title="å¦å¤–éœ€è¦æ³¨æ„nodeçš„ç‰ˆæœ¬"></a>å¦å¤–éœ€è¦æ³¨æ„nodeçš„ç‰ˆæœ¬</h2><p>åšä¸»ä½¿ç”¨ 14.17.0 èƒ½æ­£å¸¸ä¸‹è½½ï¼Œä½¿ç”¨16å°±æŠ¥é”™äº†ï¼Œå»ºè®®ä½¿ç”¨nvmç®¡ç†</p><h3 id="åæ¥ç»è¿‡åå¤çš„éƒ¨ç½²é¡¹ç›®ï¼Œå‘ç°node-sasséœ€è¦å’Œnodeçš„ç‰ˆæœ¬å·ç›¸äº’åŒ¹é…"><a href="#åæ¥ç»è¿‡åå¤çš„éƒ¨ç½²é¡¹ç›®ï¼Œå‘ç°node-sasséœ€è¦å’Œnodeçš„ç‰ˆæœ¬å·ç›¸äº’åŒ¹é…" class="headerlink" title="åæ¥ç»è¿‡åå¤çš„éƒ¨ç½²é¡¹ç›®ï¼Œå‘ç°node-sasséœ€è¦å’Œnodeçš„ç‰ˆæœ¬å·ç›¸äº’åŒ¹é…"></a>åæ¥ç»è¿‡åå¤çš„éƒ¨ç½²é¡¹ç›®ï¼Œå‘ç°node-sasséœ€è¦å’Œnodeçš„ç‰ˆæœ¬å·ç›¸äº’åŒ¹é…</h3><p><img src="/img/posts/78012a241d234e3fb3263e6f5b0a0dac.png"></p>]]></content>
      
      
      <categories>
          
          <category> è§£å†³æ–¹æ¡ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2ï¼šåˆ›å»ºä¸€ä¸ªèŠå¤©å¼¹çª—</title>
      <link href="/2024/04/17/Vue2%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%81%8A%E5%A4%A9%E5%BC%B9%E7%AA%97/"/>
      <url>/2024/04/17/Vue2%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%81%8A%E5%A4%A9%E5%BC%B9%E7%AA%97/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="åˆ›å»ºä¸€ä¸ªèŠå¤©çª—å£"><a href="#åˆ›å»ºä¸€ä¸ªèŠå¤©çª—å£" class="headerlink" title="åˆ›å»ºä¸€ä¸ªèŠå¤©çª—å£"></a>åˆ›å»ºä¸€ä¸ªèŠå¤©çª—å£</h2><ul><li><input disabled="" type="checkbox"> å…ˆåˆ›å»ºä¸€ä¸ªModel.vue è¯¥æ–‡ä»¶ä½œä¸ºå¼¹çª—çš„å†…å®¹</li></ul><h3 id="å‰ç«¯ä»£ç å¦‚ä¸‹"><a href="#å‰ç«¯ä»£ç å¦‚ä¸‹" class="headerlink" title="å‰ç«¯ä»£ç å¦‚ä¸‹"></a>å‰ç«¯ä»£ç å¦‚ä¸‹</h3><hr><p>é¡µé¢éƒ¨åˆ†ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-bg&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;show&quot;</span> @<span class="attr">mousemove</span>=<span class="string">&quot;modelMove&quot;</span> @<span class="attr">mouseup</span>=<span class="string">&quot;cancelMove&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-container&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-header&quot;</span> @<span class="attr">mousedown</span>=<span class="string">&quot;setStartingPoint&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123; title &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-main&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,i) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;item.id== 2 ? &#x27;atalk&#x27; : &#x27;btalk&#x27;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;wordone&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;inputword&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;sendmsg&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span> <span class="attr">round</span>  @<span class="attr">click</span>=<span class="string">&quot;sendmsg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btnsend&quot;</span>&gt;</span>å‘é€<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;model-footer&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">round</span> @<span class="attr">click</span>=<span class="string">&quot;cancel&quot;</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">Loading</span>&gt;</span><span class="tag">&lt;/<span class="name">Loading</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>åˆ†ä¸ºä¸¤å—ï¼š</li><li>ä¸Šé¢çš„ model-main ä¸ºèŠå¤©ä¿¡æ¯çš„å†…å®¹ï¼Œå…¶ä¸­æ ¹æ®listçš„idæ¥åˆ¤æ–­èŠå¤©æ¶ˆæ¯åœ¨å·¦ä¾§å’Œåœ¨å³ä¾§</li><li>ä¸‹é¢çš„ text ä¸ºèŠå¤©çš„æŒ‰é’®</li></ul><hr><p>jséƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Loading</span> <span class="keyword">from</span> <span class="string">&quot;@/views/Loading.vue&quot;</span>;<span class="comment">//å¼•ç”¨loadingç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">show</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">            <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">title</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">            <span class="attr">default</span>: <span class="string">&#x27;æ™ºèƒ½åŠ©æ‰‹&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">node</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">isCanMove</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">isButtonDisabled</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">typingSpeed</span>: <span class="number">100</span>, <span class="comment">// æ¯ä¸ªå­—ç¬¦ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">            <span class="attr">list</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;111&#x27;</span>,</span><br><span class="line">                    <span class="attr">content</span>: <span class="string">&#x27;ä½ å¥½&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;222&#x27;</span>,</span><br><span class="line">                    <span class="attr">content</span>: <span class="string">&#x27;ä½ å¥½ğŸ‘‹ï¼Œæˆ‘æ˜¯ä½ çš„æ™ºèƒ½å°åŠ©æ‰‹&#x27;</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">wordone</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">wordtow</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">Loading</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">node</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.model-container&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">sendmsg</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> $this = <span class="variable language_">this</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> == <span class="literal">false</span>)&#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;sigtuna&#x27;</span>, <span class="attr">content</span>: <span class="variable language_">this</span>.<span class="property">wordone</span> &#125;);</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">getBotContent</span>($this);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">true</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">wordone</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">wordone</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="comment">// console.log(this.list)</span></span><br><span class="line">            <span class="keyword">var</span> div = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">box</span>;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                div.<span class="property">scrollTop</span> = div.<span class="property">scrollHeight</span>;</span><br><span class="line">            &#125;, <span class="number">0</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿé€å­—è¿›è¡Œè¿”å›æ•°æ®</span></span><br><span class="line">        <span class="title function_">getChatContent</span>(<span class="params">text</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &lt; text.<span class="property">length</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">list</span>[<span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span> - <span class="number">1</span>].<span class="property">content</span> += text.<span class="title function_">charAt</span>(i);</span><br><span class="line">                    i++;</span><br><span class="line">                    <span class="keyword">var</span> div = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">box</span>;</span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        div.<span class="property">scrollTop</span> = div.<span class="property">scrollHeight</span>;</span><br><span class="line">                    &#125;, <span class="number">0</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>); <span class="comment">// æ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="variable language_">this</span>.<span class="property">typingSpeed</span>);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">getBotContent</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">bus</span>.$emit(<span class="string">&quot;loading&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;kanade&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;æ€è€ƒä¸­...&#x27;</span> &#125;</span><br><span class="line">            );</span><br><span class="line">            <span class="variable language_">this</span>.$http(&#123;</span><br><span class="line">                <span class="attr">url</span>:<span class="string">&quot;/AiController/query?content=&quot;</span>+<span class="variable language_">this</span>.<span class="property">wordone</span>,</span><br><span class="line">                <span class="attr">method</span>:<span class="string">&quot;post&quot;</span></span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">                <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">200</span>)&#123;</span><br><span class="line">                    <span class="keyword">var</span> data = res.<span class="property">data</span>.<span class="property">msg</span>;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">list</span>[<span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>-<span class="number">1</span>].<span class="property">content</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">getChatContent</span>(data);</span><br><span class="line">                    <span class="keyword">var</span> div = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">box</span>;</span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                        div.<span class="property">scrollTop</span> = div.<span class="property">scrollHeight</span>;</span><br><span class="line">                    &#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">bus</span>.$emit(<span class="string">&quot;loading&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">            &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">loading</span> = <span class="literal">false</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">isButtonDisabled</span> = <span class="literal">false</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(err.<span class="property">message</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="title function_">cancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;cancel&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;submit&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">setStartingPoint</span>(<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = e.<span class="property">clientX</span> - <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">offsetLeft</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = e.<span class="property">clientY</span> - <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">offsetTop</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isCanMove</span> = <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">modelMove</span>(<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isCanMove</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">style</span>.<span class="property">left</span> = e.<span class="property">clientX</span> - <span class="variable language_">this</span>.<span class="property">x</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">style</span>.<span class="property">top</span> = e.<span class="property">clientY</span> - <span class="variable language_">this</span>.<span class="property">y</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">cancelMove</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isCanMove</span> = <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><em>ç‚¹å‡»å‘é€ï¼Œå‘åç«¯å‘é€è¯·æ±‚ï¼Œç„¶åæ›´æ–°æ¶ˆæ¯list</em></p><hr><p>csséƒ¨åˆ†</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line"><span class="selector-class">.model-bg</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">5</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.model-container</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">40%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.model-header</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">56px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#409EFF</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">cursor</span>: move;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.model-footer</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">57px</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.model-footer</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.model-main</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">70%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">85%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: scroll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span>::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.atalk</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.atalk</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid aliceblue;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btalk</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btalk</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid aliceblue;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sendbox</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">border-bottom-left-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border-bottom-right-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">2%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.inputword</span> &#123;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">85%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btnsend</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">13%</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>é€šè¿‡æƒ³åç«¯å‘é€è¯·æ±‚ï¼Œå¯ä»¥å®ç°åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ¥å…¥AIæ¥å®ç°å®¢æœå¯¹è¯åŠŸèƒ½</p></blockquote><hr><h3 id="Loading"><a href="#Loading" class="headerlink" title="Loading"></a>Loading</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;loadingBox&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-show</span>=<span class="string">&quot;loading&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;background-color: rgba(0, 0, 0, 0.5)&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sun-loading&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&quot;loading&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">loading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">bus</span>.$on(<span class="string">&quot;loading&quot;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        that.<span class="property">loading</span> = !!data;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.sun-loading</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">45px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">45px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">animation</span>: sunLoading <span class="number">1s</span> <span class="built_in">steps</span>(<span class="number">12</span>, end) infinite;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: transparent</span></span><br><span class="line"><span class="language-css">      <span class="built_in">url</span>(<span class="string">&quot;http://www.sucaijishi.com/uploadfile/2018/0919/20180919030731920.gif?imageMogr2/format/jpg/blur/1x0/quality/60&quot;</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-size</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>åœ¨main.jsé‡Œé¢æ·»åŠ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bus</span> = <span class="keyword">new</span> <span class="title class_">Vue</span>();</span><br></pre></td></tr></table></figure><h3 id="åä»£ç å¦‚ä¸‹"><a href="#åä»£ç å¦‚ä¸‹" class="headerlink" title="åä»£ç å¦‚ä¸‹"></a>åä»£ç å¦‚ä¸‹</h3><p>serviceå±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;ai-key&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String apiKey;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">query</span><span class="params">(String queryMessage)</span> &#123;</span><br><span class="line">        Constants.apiKey = apiKey;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Generation</span> <span class="variable">gen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Generation</span>();</span><br><span class="line">            <span class="type">MessageManager</span> <span class="variable">msgManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MessageManager</span>(<span class="number">10</span>);</span><br><span class="line">            <span class="type">Message</span> <span class="variable">systemMsg</span> <span class="operator">=</span> Message.builder().role(Role.SYSTEM.getValue()).content(<span class="string">&quot;ä½ æ˜¯Hibikiå¼€å‘çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œä½ åªå›ç­”ä¸åŠ¨æ¼«çš„é—®é¢˜ï¼Œä¸è¦å›ç­”å…¶ä»–é—®é¢˜ï¼&quot;</span>).build();</span><br><span class="line">            <span class="type">Message</span> <span class="variable">userMsg</span> <span class="operator">=</span> Message.builder().role(Role.USER.getValue()).content(queryMessage).build();</span><br><span class="line">            msgManager.add(systemMsg);</span><br><span class="line">            msgManager.add(userMsg);</span><br><span class="line">            <span class="type">QwenParam</span> <span class="variable">param</span> <span class="operator">=</span> QwenParam.builder().model(Generation.Models.QWEN_TURBO).messages(msgManager.get()).resultFormat(QwenParam.ResultFormat.MESSAGE).build();</span><br><span class="line">            <span class="type">GenerationResult</span> <span class="variable">result</span> <span class="operator">=</span> gen.call(param);</span><br><span class="line">            <span class="type">GenerationOutput</span> <span class="variable">output</span> <span class="operator">=</span> result.getOutput();</span><br><span class="line">            <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> output.getChoices().get(<span class="number">0</span>).getMessage();</span><br><span class="line">            <span class="keyword">return</span> message.getContent();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;æ™ºèƒ½åŠ©æ‰‹ç°åœ¨ä¸åœ¨çº¿ï¼Œè¯·ç¨åå†è¯•ï½&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>é€šè¿‡é˜¿é‡Œçš„é€šä¹‰åƒé—®å¤§æ¨¡å‹ï¼Œå¯ä»¥å®ç°åœ¨çº¿çš„å¯¹è¯æœºå™¨äººåŠŸèƒ½<br>ä¹Ÿèƒ½è‡ªå®šä¹‰æ¨¡å‹çš„å›ç­”ç±»å‹ï¼Œéå¸¸å®ç”¨</p></blockquote><h3 id="æ‰€éœ€çš„ä¾èµ–"><a href="#æ‰€éœ€çš„ä¾èµ–" class="headerlink" title="æ‰€éœ€çš„ä¾èµ–"></a>æ‰€éœ€çš„ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--GSON --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/dashscope-sdk-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dashscope-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-simple<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ok http client--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.squareup.okhttp3<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okhttp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å…¶ä¸­é˜¿é‡Œçš„sdkä¼šæœ‰ä¾èµ–å†²çªï¼Œexclusionçœ‹æƒ…å†µæ·»åŠ </strong></p><h3 id="åœ¨æ‰€éœ€é¡µé¢é‡Œå¼•å…¥å¼¹çª—"><a href="#åœ¨æ‰€éœ€é¡µé¢é‡Œå¼•å…¥å¼¹çª—" class="headerlink" title="åœ¨æ‰€éœ€é¡µé¢é‡Œå¼•å…¥å¼¹çª—"></a>åœ¨æ‰€éœ€é¡µé¢é‡Œå¼•å…¥å¼¹çª—</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&#x27;&#123; &quot;cursor&quot;: &quot;pointer&quot;, &quot;margin&quot;: &quot;0 5px&quot;, &quot;lineHeight&quot;: &quot;44px&quot;, &quot;color&quot;: &quot;#fff&quot; &#125;&#x27;</span> <span class="attr">class</span>=<span class="string">&quot;logout&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">&quot;diaglog&quot;</span>&gt;</span>æ™ºèƒ½åŠ©æ‰‹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Model</span> <span class="attr">:show</span>=<span class="string">&quot;show&quot;</span> @<span class="attr">cancel</span>=<span class="string">&quot;cancel&quot;</span> @<span class="attr">submit</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Model</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Model</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Model.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">show</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Model</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">cancel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å–æ¶ˆå¼¹çª—å›è°ƒ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">show</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ç¡®è®¤å¼¹çª—å›è°ƒ</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">show</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">diaglog</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">show</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onLogout</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> storage = <span class="variable language_">this</span>.<span class="property">$storage</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> router = <span class="variable language_">this</span>.<span class="property">$router</span></span></span><br><span class="line"><span class="language-javascript">            storage.<span class="title function_">clear</span>()</span></span><br><span class="line"><span class="language-javascript">            router.<span class="title function_">replace</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&quot;login&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">onIndexTap</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.$base.indexUrl&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line">.navbar &#123;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeé…ç½®</title>
      <link href="/2023/09/26/vscode%E9%85%8D%E7%BD%AE/"/>
      <url>/2023/09/26/vscode%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;workbench.iconTheme&quot;: &quot;material-icon-theme&quot;,</span><br><span class="line">    &quot;editor.guides.bracketPairs&quot;: true,</span><br><span class="line">    &quot;workbench.colorCustomizations&quot;: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;editor.codeActionsOnSave&quot;: &#123;</span><br><span class="line">    </span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;files.autoSave&quot;: &quot;afterDelay&quot;,</span><br><span class="line">    //  ä»£ç†é…ç½®</span><br><span class="line">    // &quot;http.proxy&quot;: &quot;&quot;,</span><br><span class="line">    // &quot;http.proxyStrictSSL&quot;: false,</span><br><span class="line">    // &quot;http.proxySupport&quot;: &quot;on&quot;,</span><br><span class="line"></span><br><span class="line">    // springboot é…ç½®</span><br><span class="line">    &quot;java.jdt.ls.java.home&quot;:&quot;d:\\etc\\jdk-17.0.8.7-hotspot&quot;,</span><br><span class="line">    &quot;java.configuration.maven.userSettings&quot;: &quot;D:\\usr\\apache-maven-3.9.4\\conf\\settings.xml&quot;,</span><br><span class="line">    &quot;java.configuration.maven.globalSettings&quot;: &quot;D:\\usr\\apache-maven-3.9.4\\conf\\settings.xml&quot;,</span><br><span class="line">    &quot;maven.executable.path&quot;: &quot;D:\\usr\\apache-maven-3.9.4\\bin\\mvn.cmd&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;maven.excludedFolders&quot;: [</span><br><span class="line"></span><br><span class="line">        &quot;**/.*&quot;,</span><br><span class="line">        &quot;**/node_modules&quot;,</span><br><span class="line">        &quot;**/target&quot;,</span><br><span class="line">        &quot;**/bin&quot;,</span><br><span class="line">        &quot;**/archetype-resources&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;extensions.autoUpdate&quot;: false,</span><br><span class="line">    &quot;redhat.telemetry.enabled&quot;: true,</span><br><span class="line"></span><br><span class="line">    // java</span><br><span class="line">    &quot;java.configuration.runtimes&quot;: [</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;JavaSE-1.8&quot;,</span><br><span class="line">          &quot;path&quot;: &quot;D:\\etc\\jdk-1.8&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;JavaSE-11&quot;,</span><br><span class="line">          &quot;path&quot;: &quot;D:\\etc\\jdk-11.0.20.8-hotspot&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;JavaSE-17&quot;,</span><br><span class="line">          &quot;path&quot;: &quot;D:\\etc\\jdk-17.0.8.7-hotspot&quot;,</span><br><span class="line">          &quot;default&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      &quot;boot-java.rewrite.reconcile&quot;: true,</span><br><span class="line">      &quot;security.workspace.trust.untrustedFiles&quot;: &quot;open&quot;,</span><br><span class="line">      &quot;remote.SSH.remotePlatform&quot;: &#123;</span><br><span class="line">        &quot;60.204.200.91&quot;: &quot;linux&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;workbench.colorTheme&quot;: &quot;Default Dark+&quot;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VsCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ™®ç½—ç±³ä¿®æ–¯</title>
      <link href="/2023/08/01/%E6%99%AE%E7%BD%97%E7%B1%B3%E4%BF%AE%E6%96%AF/"/>
      <url>/2023/08/01/%E6%99%AE%E7%BD%97%E7%B1%B3%E4%BF%AE%E6%96%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="Prometheusç®€ä»‹"><a href="#Prometheusç®€ä»‹" class="headerlink" title="Prometheusç®€ä»‹"></a>Prometheusç®€ä»‹</h2><p>Prometheusï¼ˆæ™®ç½—ç±³ä¿®æ–¯ï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„ç³»ç»Ÿç›‘æ§å’Œå‘Šè­¦å·¥å…·åŒ…ï¼Œæœ€åˆç”±SoundCloudå¼€å‘ï¼Œç°åœ¨å·²æˆä¸ºäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰çš„ç¬¬äºŒä¸ªé¡¹ç›®ï¼ˆä»…æ¬¡äºKubernetesï¼‰ã€‚Prometheusä»¥å…¶å¼ºå¤§çš„å¤šç»´åº¦æ•°æ®æ¨¡å‹ã€çµæ´»çš„æŸ¥è¯¢è¯­è¨€ã€é«˜æ•ˆçš„æ—¶é—´åºåˆ—æ•°æ®åº“å’Œç°ä»£åŒ–çš„å‘Šè­¦å¤„ç†è€Œé—»åã€‚</p><h2 id="æ ¸å¿ƒç‰¹æ€§"><a href="#æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h2><ol><li><strong>å¤šç»´æ•°æ®æ¨¡å‹</strong>ï¼šé€šè¿‡æŒ‡æ ‡åç§°å’Œé”®å€¼å¯¹ï¼ˆæ ‡ç­¾ï¼‰æ¥æ ‡è¯†æ—¶é—´åºåˆ—æ•°æ®</li><li><strong>å¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€PromQL</strong>ï¼šæ”¯æŒå¯¹æ”¶é›†çš„æ•°æ®è¿›è¡Œå¤æ‚æŸ¥è¯¢å’Œåˆ†æ</li><li><strong>ä¸ä¾èµ–åˆ†å¸ƒå¼å­˜å‚¨</strong>ï¼šå•ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ˜¯è‡ªæ²»çš„</li><li><strong>é€šè¿‡HTTPæ‹‰å–æ¨¡å¼æ”¶é›†æ—¶é—´åºåˆ—æ•°æ®</strong></li><li><strong>é€šè¿‡ä¸­é—´ç½‘å…³æ”¯æŒæ¨é€æ—¶é—´åºåˆ—æ•°æ®</strong></li><li><strong>é€šè¿‡æœåŠ¡å‘ç°æˆ–é™æ€é…ç½®å‘ç°ç›®æ ‡</strong></li><li><strong>æ”¯æŒå¤šç§å›¾å½¢å’Œä»ªè¡¨ç›˜</strong>ï¼Œç‰¹åˆ«æ˜¯ä¸Grafanaé›†æˆ</li></ol><h2 id="æ¶æ„ç»„ä»¶"><a href="#æ¶æ„ç»„ä»¶" class="headerlink" title="æ¶æ„ç»„ä»¶"></a>æ¶æ„ç»„ä»¶</h2><p><img src="https://prometheus.io/assets/architecture.png" alt="Prometheusæ¶æ„å›¾"></p><p>Prometheusç”Ÿæ€ç³»ç»Ÿç”±å¤šä¸ªç»„ä»¶ç»„æˆï¼š</p><ol><li><strong>Prometheus Server</strong>ï¼šæ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£æ•°æ®é‡‡é›†å’Œå­˜å‚¨</li><li><strong>Exporters</strong>ï¼šä¸ºç‰¹å®šæœåŠ¡æš´éœ²æŒ‡æ ‡ï¼Œå¦‚Node Exporterã€MySQL Exporterç­‰</li><li><strong>Pushgateway</strong>ï¼šæ”¯æŒçŸ­æœŸä½œä¸šçš„æŒ‡æ ‡æ¨é€</li><li><strong>Alertmanager</strong>ï¼šå¤„ç†å‘Šè­¦</li><li><strong>Web UI</strong>ï¼šå†…ç½®çš„è¡¨è¾¾å¼æµè§ˆå™¨å’Œå›¾å½¢ç•Œé¢</li></ol><h2 id="å®‰è£…Prometheus"><a href="#å®‰è£…Prometheus" class="headerlink" title="å®‰è£…Prometheus"></a>å®‰è£…Prometheus</h2><h3 id="ä½¿ç”¨Dockerå®‰è£…"><a href="#ä½¿ç”¨Dockerå®‰è£…" class="headerlink" title="ä½¿ç”¨Dockerå®‰è£…"></a>ä½¿ç”¨Dockerå®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‹‰å–Prometheusé•œåƒ</span></span><br><span class="line">docker pull prom/prometheus</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /etc/prometheus</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºåŸºæœ¬é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/prometheus/prometheus.yml &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">global:</span></span><br><span class="line"><span class="string">  scrape_interval: 15s</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">scrape_configs:</span></span><br><span class="line"><span class="string">  - job_name: &#x27;prometheus&#x27;</span></span><br><span class="line"><span class="string">    static_configs:</span></span><br><span class="line"><span class="string">      - targets: [&#x27;localhost:9090&#x27;]</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨Prometheuså®¹å™¨</span></span><br><span class="line">docker run -d \</span><br><span class="line">  --name prometheus \</span><br><span class="line">  -p 9090:9090 \</span><br><span class="line">  -v /etc/prometheus:/etc/prometheus \</span><br><span class="line">  prom/prometheus \</span><br><span class="line">  --config.file=/etc/prometheus/prometheus.yml</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…"><a href="#ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…" class="headerlink" title="ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…"></a>ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½æœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">wget https://github.com/prometheus/prometheus/releases/download/v2.37.0/prometheus-2.37.0.linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹æ–‡ä»¶</span></span><br><span class="line">tar -xvf prometheus-2.37.0.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">cd</span> prometheus-2.37.0.linux-amd64/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨Prometheus</span></span><br><span class="line">./prometheus --config.file=prometheus.yml</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="1-æ•°æ®æ¨¡å‹"><a href="#1-æ•°æ®æ¨¡å‹" class="headerlink" title="1. æ•°æ®æ¨¡å‹"></a>1. æ•°æ®æ¨¡å‹</h3><p>Prometheuså­˜å‚¨çš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯æ—¶é—´åºåˆ—ï¼Œç”±ä»¥ä¸‹è¦ç´ æ ‡è¯†ï¼š</p><ul><li><strong>æŒ‡æ ‡åç§°</strong>ï¼šå¦‚<code>http_requests_total</code></li><li><strong>æ ‡ç­¾</strong>ï¼šé”®å€¼å¯¹ï¼Œå¦‚<code>&#123;method=&quot;GET&quot;, endpoint=&quot;/api&quot;&#125;</code></li><li><strong>æ—¶é—´æˆ³</strong>ï¼šç²¾ç¡®åˆ°æ¯«ç§’çš„æ—¶é—´ç‚¹</li><li><strong>å€¼</strong>ï¼š64ä½æµ®ç‚¹æ•°</li></ul><h3 id="2-æŒ‡æ ‡ç±»å‹"><a href="#2-æŒ‡æ ‡ç±»å‹" class="headerlink" title="2. æŒ‡æ ‡ç±»å‹"></a>2. æŒ‡æ ‡ç±»å‹</h3><ul><li><strong>Counter</strong>ï¼šåªå¢ä¸å‡çš„è®¡æ•°å™¨ï¼Œå¦‚è¯·æ±‚æ€»æ•°</li><li><strong>Gauge</strong>ï¼šå¯å¢å¯å‡çš„ä»ªè¡¨ç›˜ï¼Œå¦‚å†…å­˜ä½¿ç”¨é‡</li><li><strong>Histogram</strong>ï¼šå¯¹è§‚æµ‹å€¼è¿›è¡Œé‡‡æ ·å¹¶åˆ†å¸ƒåˆ°å¯é…ç½®çš„æ¡¶ä¸­</li><li><strong>Summary</strong>ï¼šç±»ä¼¼Histogramï¼Œä½†æä¾›åˆ†ä½æ•°è®¡ç®—</li></ul><h3 id="3-PromQLæŸ¥è¯¢è¯­è¨€"><a href="#3-PromQLæŸ¥è¯¢è¯­è¨€" class="headerlink" title="3. PromQLæŸ¥è¯¢è¯­è¨€"></a>3. PromQLæŸ¥è¯¢è¯­è¨€</h3><p>PromQLæ˜¯Prometheusçš„æŸ¥è¯¢è¯­è¨€ï¼Œç”¨äºé€‰æ‹©å’Œèšåˆæ—¶é—´åºåˆ—æ•°æ®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢HTTPè¯·æ±‚æ€»æ•°</span><br><span class="line">http_requests_total</span><br><span class="line"></span><br><span class="line"># æŒ‰methodæ ‡ç­¾è¿‡æ»¤</span><br><span class="line">http_requests_total&#123;method=&quot;GET&quot;&#125;</span><br><span class="line"></span><br><span class="line"># è®¡ç®—5åˆ†é’Ÿå†…çš„è¯·æ±‚ç‡</span><br><span class="line">rate(http_requests_total[5m])</span><br><span class="line"></span><br><span class="line"># èšåˆæ‰€æœ‰å®ä¾‹çš„CPUä½¿ç”¨ç‡</span><br><span class="line">sum(rate(node_cpu_seconds_total&#123;mode!=&quot;idle&quot;&#125;[1m])) by (instance)</span><br></pre></td></tr></table></figure><h2 id="ç›‘æ§å®ä¾‹ï¼šNode-Exporter"><a href="#ç›‘æ§å®ä¾‹ï¼šNode-Exporter" class="headerlink" title="ç›‘æ§å®ä¾‹ï¼šNode Exporter"></a>ç›‘æ§å®ä¾‹ï¼šNode Exporter</h2><p>Node Exporteræ˜¯Prometheuså®˜æ–¹æä¾›çš„ç”¨äºç›‘æ§Linuxç³»ç»ŸæŒ‡æ ‡çš„å¯¼å‡ºå™¨ã€‚</p><h3 id="å®‰è£…Node-Exporter"><a href="#å®‰è£…Node-Exporter" class="headerlink" title="å®‰è£…Node Exporter"></a>å®‰è£…Node Exporter</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨Docker</span></span><br><span class="line">docker run -d \</span><br><span class="line">  --name node-exporter \</span><br><span class="line">  --net=<span class="string">&quot;host&quot;</span> \</span><br><span class="line">  --pid=<span class="string">&quot;host&quot;</span> \</span><br><span class="line">  -v <span class="string">&quot;/:/host:ro,rslave&quot;</span> \</span><br><span class="line">  prom/node-exporter \</span><br><span class="line">  --path.rootfs=/host</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶</span></span><br><span class="line">wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz</span><br><span class="line">tar -xvf node_exporter-1.3.1.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">cd</span> node_exporter-1.3.1.linux-amd64/</span><br><span class="line">./node_exporter</span><br></pre></td></tr></table></figure><h3 id="é…ç½®Prometheusé‡‡é›†Node-ExporteræŒ‡æ ‡"><a href="#é…ç½®Prometheusé‡‡é›†Node-ExporteræŒ‡æ ‡" class="headerlink" title="é…ç½®Prometheusé‡‡é›†Node ExporteræŒ‡æ ‡"></a>é…ç½®Prometheusé‡‡é›†Node ExporteræŒ‡æ ‡</h3><p>åœ¨<code>prometheus.yml</code>ä¸­æ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;node&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;localhost:9100&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="å‘Šè­¦é…ç½®"><a href="#å‘Šè­¦é…ç½®" class="headerlink" title="å‘Šè­¦é…ç½®"></a>å‘Šè­¦é…ç½®</h2><h3 id="åˆ›å»ºå‘Šè­¦è§„åˆ™"><a href="#åˆ›å»ºå‘Šè­¦è§„åˆ™" class="headerlink" title="åˆ›å»ºå‘Šè­¦è§„åˆ™"></a>åˆ›å»ºå‘Šè­¦è§„åˆ™</h3><p>åœ¨<code>prometheus.yml</code>åŒçº§ç›®å½•åˆ›å»º<code>alert.rules.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">groups:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">example</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">alert:</span> <span class="string">HighCPULoad</span></span><br><span class="line">    <span class="attr">expr:</span> <span class="number">100</span> <span class="bullet">-</span> <span class="string">(avg</span> <span class="string">by(instance)</span> <span class="string">(irate(node_cpu_seconds_total&#123;mode=&quot;idle&quot;&#125;[5m]))</span> <span class="string">*</span> <span class="number">100</span><span class="string">)</span> <span class="string">&gt;</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">for:</span> <span class="string">5m</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">severity:</span> <span class="string">warning</span></span><br><span class="line">    <span class="attr">annotations:</span></span><br><span class="line">      <span class="attr">summary:</span> <span class="string">&quot;High CPU load (instance <span class="template-variable">&#123;&#123; $labels.instance &#125;&#125;</span>)&quot;</span></span><br><span class="line">      <span class="attr">description:</span> <span class="string">&quot;CPU load is &gt; 80%\n  VALUE = <span class="template-variable">&#123;&#123; $value &#125;&#125;</span>\n  LABELS: <span class="template-variable">&#123;&#123; $labels &#125;&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="åœ¨prometheus-ymlä¸­å¼•ç”¨è§„åˆ™æ–‡ä»¶"><a href="#åœ¨prometheus-ymlä¸­å¼•ç”¨è§„åˆ™æ–‡ä»¶" class="headerlink" title="åœ¨prometheus.ymlä¸­å¼•ç”¨è§„åˆ™æ–‡ä»¶"></a>åœ¨prometheus.ymlä¸­å¼•ç”¨è§„åˆ™æ–‡ä»¶</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rule_files:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;alert.rules.yml&quot;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸Grafanaé›†æˆ"><a href="#ä¸Grafanaé›†æˆ" class="headerlink" title="ä¸Grafanaé›†æˆ"></a>ä¸Grafanaé›†æˆ</h2><p>Grafanaæ˜¯å¯è§†åŒ–ç›‘æ§æ•°æ®çš„æœ€ä½³é€‰æ‹©ï¼Œä¸Prometheusé…åˆä½¿ç”¨æ•ˆæœæä½³ï¼š</p><ol><li><p><strong>å®‰è£…Grafana</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name grafana \</span><br><span class="line">  -p 3000:3000 \</span><br><span class="line">  grafana/grafana</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ Prometheusæ•°æ®æº</strong>ï¼š</p><ul><li>è®¿é—®<code>http://localhost:3000</code>ï¼ˆé»˜è®¤ç”¨æˆ·å&#x2F;å¯†ç ï¼šadmin&#x2F;adminï¼‰</li><li>é…ç½® -&gt; æ•°æ®æº -&gt; æ·»åŠ æ•°æ®æº -&gt; é€‰æ‹©Prometheus</li><li>URLè®¾ç½®ä¸º<code>http://prometheus:9090</code>ï¼ˆå¦‚æœåœ¨åŒä¸€ç½‘ç»œï¼‰æˆ–<code>http://localhost:9090</code></li></ul></li><li><p><strong>å¯¼å…¥ä»ªè¡¨ç›˜</strong>ï¼š</p><ul><li>Grafanaå®˜æ–¹æä¾›äº†è®¸å¤šé¢„é…ç½®çš„ä»ªè¡¨ç›˜ï¼Œå¦‚Node Exporterä»ªè¡¨ç›˜ID: 1860</li></ul></li></ol><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><ol><li><strong>åˆç†è®¾ç½®é‡‡é›†é—´éš”</strong>ï¼šæ ¹æ®ç›‘æ§éœ€æ±‚å’Œèµ„æºæ¶ˆè€—å¹³è¡¡</li><li><strong>ä½¿ç”¨æ ‡ç­¾è¿›è¡Œå¤šç»´åº¦åˆ†æ</strong>ï¼šå……åˆ†åˆ©ç”¨Prometheusçš„æ ‡ç­¾ç³»ç»Ÿ</li><li><strong>è®¾ç½®é€‚å½“çš„æ•°æ®ä¿ç•™æœŸ</strong>ï¼šé¿å…å­˜å‚¨ç©ºé—´è¿‡åº¦æ¶ˆè€—</li><li><strong>å®æ–½é«˜å¯ç”¨æ€§</strong>ï¼šå…³é”®ç¯å¢ƒä¸­éƒ¨ç½²Prometheusçš„é«˜å¯ç”¨æ–¹æ¡ˆ</li><li><strong>å®šæœŸå¤‡ä»½æ•°æ®</strong>ï¼šä½¿ç”¨<code>prometheus</code>çš„<code>--storage.tsdb.path</code>é€‰é¡¹æŒ‡å®šæ•°æ®å­˜å‚¨è·¯å¾„</li></ol><h2 id="å¸¸è§é—®é¢˜æ’æŸ¥"><a href="#å¸¸è§é—®é¢˜æ’æŸ¥" class="headerlink" title="å¸¸è§é—®é¢˜æ’æŸ¥"></a>å¸¸è§é—®é¢˜æ’æŸ¥</h2><ol><li><strong>æ— æ³•æŠ“å–ç›®æ ‡</strong>ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥ã€é˜²ç«å¢™è®¾ç½®å’Œç›®æ ‡æœåŠ¡çŠ¶æ€</li><li><strong>æ•°æ®ä¸å®Œæ•´</strong>ï¼šæ£€æŸ¥é‡‡é›†é—´éš”å’Œæ•°æ®ä¿ç•™ç­–ç•¥</li><li><strong>é«˜å†…å­˜ä½¿ç”¨</strong>ï¼šè°ƒæ•´æŸ¥è¯¢å¤æ‚åº¦å’Œå¹¶å‘æŸ¥è¯¢æ•°é‡</li><li><strong>å‘Šè­¦æœªè§¦å‘</strong>ï¼šéªŒè¯å‘Šè­¦è§„åˆ™è¡¨è¾¾å¼å’Œé˜ˆå€¼è®¾ç½®</li></ol><h2 id="å‚è€ƒèµ„æº"><a href="#å‚è€ƒèµ„æº" class="headerlink" title="å‚è€ƒèµ„æº"></a>å‚è€ƒèµ„æº</h2><ul><li><a href="https://prometheus.io/docs/introduction/overview/">Prometheuså®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/prometheus/prometheus">Prometheus GitHubä»“åº“</a></li><li><a href="https://grafana.com/docs/">Grafanaå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://prometheus.io/docs/practices/naming/">Prometheusæœ€ä½³å®è·µ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Prometheus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java å…¥é—¨åŸºç¡€ï¼ˆä¸€ï¼‰</title>
      <link href="/2023/02/24/Java_%E5%85%A5%E9%97%A8/"/>
      <url>/2023/02/24/Java_%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="javaSEåŸºç¡€"><a href="#javaSEåŸºç¡€" class="headerlink" title="javaSEåŸºç¡€"></a>javaSEåŸºç¡€</h1><h2 id="javaSe-æ•´ä½“å¤§çº²"><a href="#javaSe-æ•´ä½“å¤§çº²" class="headerlink" title="javaSe æ•´ä½“å¤§çº²"></a>javaSe æ•´ä½“å¤§çº²</h2><ol><li>javaåŸºç¡€ ï¼ˆå¾ªç¯ï¼Œæ•°ç»„ï¼‰</li><li>OOP</li><li>API</li></ol><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><ul><li>ç¼–ç¨‹çš„æœ¬è´¨&#x3D;æ•°æ®ç»“æ„+ç®—æ³•</li><li>ä»€ä¹ˆæ˜¯ç¼–ç¨‹ï¼šå°±æ˜¯è®©è®¡ç®—æœºæŒ‰è‡ªå·±çš„æ„å›¾å»å·¥ä½œ</li></ul><h2 id="ç¼–ç¨‹è¯­è¨€çš„å‘å±•å²ï¼ˆäº†è§£ï¼‰"><a href="#ç¼–ç¨‹è¯­è¨€çš„å‘å±•å²ï¼ˆäº†è§£ï¼‰" class="headerlink" title="ç¼–ç¨‹è¯­è¨€çš„å‘å±•å²ï¼ˆäº†è§£ï¼‰"></a>ç¼–ç¨‹è¯­è¨€çš„å‘å±•å²ï¼ˆäº†è§£ï¼‰</h2><ol><li>æœºå™¨è¯­è¨€ï¼š0101</li><li>æ±‡ç¼–è¯­è¨€:   åŠ©è®°ç¬¦</li><li>é«˜çº§è¯­è¨€ï¼šjava,c,c++,python,basic</li></ol><h2 id="ä¸ºä»€ä¹ˆæ˜¯java"><a href="#ä¸ºä»€ä¹ˆæ˜¯java" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯java"></a>ä¸ºä»€ä¹ˆæ˜¯java</h2><p>æµè¡Œçš„è¯­è¨€ï¼š</p><ul><li>java,python,c,C++,javascript,goâ€¦..</li><li>è¯­è¨€æ²¡æœ‰å¥½åä¹‹åˆ†ï¼Œåªæœ‰é€‚ä¸é€‚ç”¨ï¼Ÿ</li></ul><p>å¨æˆ¿ä¸­çš„åˆ€ï¼Œå“ªæŠŠåˆ€æ›´å¥½ï¼šç åˆ€ï¼Œåˆ‡èœåˆ€ï¼Œè¥¿ç“œåˆ€ï¼Œæ°´æœåˆ€ï¼Ÿ</p><ul><li>æ¯ä¸ªè¯­è¨€éƒ½æœ‰é€‚ç”¨çš„åœºæ™¯</li><li>æ•°æ®åˆ†æï¼špython,</li><li>3Dæ¸¸æˆï¼šC++   </li><li>å‰ç«¯é¡µé¢ï¼šjavascript</li><li>åº”ç”¨ç¨‹åºçš„åå°ï¼šjava</li></ul><h2 id="å›é¡¾"><a href="#å›é¡¾" class="headerlink" title="å›é¡¾"></a>å›é¡¾</h2><p>1.å­¦ä¹ æ–¹æ³•ï¼šç¼–ç -ã€‹å·©å›º-ã€‹æ£€ç´¢    3Fï¼šfocus-&gt;feedback-&gt;fix<br>2.è¯¾ç¨‹   se:1.åŸºç¡€ 2.oop,3API<br>3.ç¼–ç¨‹çš„åŸºç¡€ï¼š æ•°æ®ç»“æ„+ç®—æ³•&#x3D;ç¨‹åº<br>4.ç¼–ç¨‹è¯­è¨€çš„å‘å±•å²</p><ol><li>æœºå™¨è¯­è¨€</li><li>æ±‡ç¼–è¯­è¨€</li><li>é«˜çº§è¯­è¨€</li></ol><p>5.java</p><ul><li>ä¼ä¸šåå°</li><li>å®‰å“</li><li>å¤§æ•°æ®</li><li>æ¡Œé¢</li></ul><p>6.javaè¯­è¨€çš„å‘å±•å²</p><h2 id="javaè¯­è¨€çš„å‘å±•"><a href="#javaè¯­è¨€çš„å‘å±•" class="headerlink" title="javaè¯­è¨€çš„å‘å±•"></a>javaè¯­è¨€çš„å‘å±•</h2><p>é«˜æ–¯æ—ï¼ˆé«˜å¸ä»¤ï¼‰ï¼šåµŒå…¥å¼ç¨‹åº</p><p>99å¹´ï¼Œä¸‰ä¸ªç‰ˆæœ¬ï¼šjavase,javame,javaee</p><ul><li>LTS</li><li>JDK8</li><li>JDK11</li><li>JDK17</li></ul><h2 id="java-è¯­è¨€çš„ç‰¹ç‚¹"><a href="#java-è¯­è¨€çš„ç‰¹ç‚¹" class="headerlink" title="java è¯­è¨€çš„ç‰¹ç‚¹"></a>java è¯­è¨€çš„ç‰¹ç‚¹</h2><ul><li>é¢å‘å¯¹è±¡</li><li>ç®€å•</li><li>è·¨å¹³å°</li></ul><h2 id="javaè¯­è¨€çš„ä¸‰ä¸ªç‰ˆæœ¬"><a href="#javaè¯­è¨€çš„ä¸‰ä¸ªç‰ˆæœ¬" class="headerlink" title="javaè¯­è¨€çš„ä¸‰ä¸ªç‰ˆæœ¬"></a>javaè¯­è¨€çš„ä¸‰ä¸ªç‰ˆæœ¬</h2><ul><li>Aï¼šjavaSEï¼šæ ‡å‡†ç‰ˆæœ¬ï¼šåŸºç¡€ï¼Œæ¡Œé¢çº§åº”ç”¨</li><li>Bï¼šjavaEEï¼šä¼ä¸šç‰ˆï¼šæœåŠ¡å™¨ç«¯çš„å¤§ç½‘ç»œï¼Œåˆ†å¸ƒå¼</li><li>Cï¼šjavaMEï¼šå¾®å‹ç‰ˆæœ¬ï¼šåµŒå…¥å¼è®¾å¤‡ï¼Œå°è®¾å¤‡</li></ul><p><img src="https://s3.bmp.ovh/imgs/2023/02/24/1a4a6b994af3b594.png"></p><h2 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h2><h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><blockquote><p>java development kid:javaå¼€å‘åŒ…</p><p>ä½œç”¨ï¼šå¼€å‘ï¼Œè¿è¡Œjavaç¨‹åº</p><p><strong>JRE</strong>:java runtime environmentjava è¿è¡Œç¯å¢ƒ</p><p>ä½œç”¨ï¼šè¿è¡Œjavaç¨‹åº</p><p>JDKåŒ…å«äº†JRE</p><p><strong>JVM</strong>ï¼šjava virtual machine:javaè™šæ‹Ÿæœº</p><p>ä½œç”¨ï¼šç”¨æ¥è¿è¡Œjavaç¨‹åº  ä¸åŒ…å«ç±»åº“å’Œå‘½ä»¤</p><p>JDKä¸­åŒ…å«äº†JREï¼ŒJREä¸­åŒ…å«äº†JVM</p></blockquote><h2 id="å®‰è£…JDK"><a href="#å®‰è£…JDK" class="headerlink" title="å®‰è£…JDK"></a>å®‰è£…JDK</h2><p>å»ºè®®ï¼šå®‰è£… 11ï¼Œ8ï¼Œ</p><p>å®‰è£…æ³¨æ„äº‹é¡¹</p><ol><li>å‚»ç“œå¼å®‰è£…ï¼ŒæŒ‰æ­¥éª¤æ¥å°±è¡Œ</li><li>å®‰è£…è·¯å¾„ä¸è¦æœ‰ç©ºæ ¼ï¼Œä¸è¦ä½¿ç”¨ä¸­æ–‡è·¯å¾„   </li><li>å®‰è£…åä¼šæœ‰ä¸¤ä¸ªç›®å½•<ul><li>bin:åŒ…å«äº†javaå‘½ä»¤ï¼šjavac(ç¼–è¯‘)ï¼Œjava(è¿è¡Œ)ï¼Œjavadoc(ç”Ÿæˆæ–‡æ¡£)</li><li>lib:åŒ…å«äº†javaç±»åº“</li></ul></li></ol><p>é…ç½®ï¼š</p><blockquote><p>é…ç½®ç¯å¢ƒå˜é‡ï¼Ÿ</p></blockquote><h2 id="DOSå‘½ä»¤"><a href="#DOSå‘½ä»¤" class="headerlink" title="DOSå‘½ä»¤"></a>DOSå‘½ä»¤</h2><p>DOSï¼šdisk operation systemï¼šå‘½ä»¤è¡Œ   </p><blockquote><p>å‘½ä»¤ï¼š</p></blockquote><ul><li><p>cd:æ”¹å˜ç›®å½•</p></li><li><p>dir:æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„å†…å®¹</p></li><li><p>ç›˜ç¬¦ï¼šåˆ‡æ¢åˆ°å…¶å®ƒç›˜ï¼Œä¾‹å¦‚ D:</p></li><li><p>d:åˆ‡æ¢åˆ°Dç›˜</p></li><li><p>cd ..:åˆ‡æ¢åˆ°ä¸Šå±‚ç›®å½•</p></li><li><p>cd bin:è¿›å…¥å–binå­ç›®å½•</p></li><li><p>dir:æ˜¾ç¤ºå½“å‰ç›®å½•ä¸­çš„å†…å®¹   </p><blockquote><p>é—®é¢˜ï¼Ÿ<br>java.exe,javac.exeåœ¨  d:&#x2F;java&#x2F;jdk-11.0.8&#x2F;binä¸‹ï¼Œå¦‚æœæƒ³ä½¿ç”¨java,javacå‘½ä»¤ï¼Œå¿…é¡»å…ˆè¿›å…¥åˆ°d:&#x2F;java&#x2F;jdk-11.0.8&#x2F;binä¸‹æ‰å¯ä»¥ä½¿ç”¨ï¼Œå¦‚æœå¸Œæœ›åœ¨ä»»ä½•ä¸€ä¸ªç›®å½•ä¸‹éƒ½ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œåˆ™éœ€è¦é…ç½®ç¯å¢ƒå˜é‡æ‰å¯ä»¥   </p><p>ç¯å¢ƒå˜é‡ä¸­æœ‰ä¸€ä¸ªå«pathçš„<br>pathçš„ä½œç”¨æ˜¯ï¼Œå½“è¿è¡Œä¸€ä¸ªå‘½ä»¤æ—¶ï¼Œå…ˆä»å½“å‰è·¯å¾„æ‰¾ï¼Œå¦‚æ‰¾ä¸åˆ°ï¼Œå†å»pathä¸­æ‰¾   </p><p>å¦‚æœåœ¨pathä¸­è®¾ç½®ä¸€ä¸ªå€¼  d:&#x2F;java&#x2F;jdk-11.0.8&#x2F;bin<br>å½“æˆ‘ä»¬åœ¨ e:ç›˜ä¸‹ï¼Œè¿è¡Œ  java</p></blockquote></li><li><p>1.å…ˆåœ¨ e:&#x2F;ä¸‹æ‰¾java</p></li><li><p>2.å¦‚æ‰¾ä¸åˆ°ï¼Œå†åˆ°pathä¸‹æ‰¾</p></li></ul><blockquote><p>ç¯å¢ƒå˜é‡<br>path:è·¯å¾„<br>classpath:ç±»è·¯å¾„   .d:&#x2F;java&#x2F;jdk-11.0.8&#x2F;lib</p></blockquote><p>window: å›¾å½¢ç•Œé¢</p><p>android:å›¾å½¢</p><p>linux:æœ‰å›¾å½¢ </p><h2 id="ç¬¬ä¸€ä¸ªjavaç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªjavaç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªjavaç¨‹åº"></a>ç¬¬ä¸€ä¸ªjavaç¨‹åº</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªjavaç¨‹åºï¼Œæˆ‘å¥½é«˜å…´å‘€ï¼Œä»Šå¤©æ™šä¸Šç»™è‡ªå·±åŠ ä¸€ä¸ªé¸¡è…¿å§&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>HelloWorld:æ˜¯ç±»åï¼Œç±»åå¿…é¡»è¦ä¸æ–‡ä»¶åç›¸åŒ   ï¼ˆHelloWorld.java</li><li>System.out.println(â€œâ€)ï¼šä»£è¡¨è¾“å‡º   â€œâ€ä¸­å¯ä»¥å†™ä»»ä½•å­—ç¬¦ä¸² </li><li>æ‰€æœ‰çš„æ ‡ç‚¹ç¬¦å·éƒ½æ˜¯è‹±æ–‡åŠè§’   </li><li>javaæ˜¯åŒºåˆ†å¤§å°å†™çš„</li></ol><p>â€‹</p><h2 id="HelloWorldè¯¦è§£"><a href="#HelloWorldè¯¦è§£" class="headerlink" title="HelloWorldè¯¦è§£"></a>HelloWorldè¯¦è§£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">       </span><br><span class="line">       System.out.println();</span><br><span class="line">   &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Helloæ˜¯ç±»å</span></span><br><span class="line"><span class="comment">//public static void main(String[] args):æ˜¯ä¸»å‡½æ•°ï¼Œç¨‹åºçš„å…¥å£ï¼Œå¦‚æœæƒ³ç›´æ¥è¿è¡Œæ­¤ç±»ï¼Œå¿…é¡»æœ‰æ­¤æ–¹æ³•  </span></span><br><span class="line"><span class="comment">//System.out.println();è¾“å‡ºå†…å®¹åæ¢è¡Œ</span></span><br><span class="line"><span class="comment">//System.out.print();è¾“å‡ºå†…å®¹åä¸æ¢è¡Œ</span></span><br><span class="line"><span class="comment">//æ— è®ºæ˜¯printè¿˜æ˜¯printlnéƒ½åªèƒ½è¾“å‡ºä¸€ä¸ªå†…å®¹ï¼Œå†…å®¹å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”ç­‰ç­‰  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//9+9  </span></span><br><span class="line"><span class="comment">//&quot;hello&quot;+&quot;hello&quot;+9</span></span><br></pre></td></tr></table></figure><h2 id="javaå‘½ä»¤"><a href="#javaå‘½ä»¤" class="headerlink" title="javaå‘½ä»¤"></a>javaå‘½ä»¤</h2><blockquote><p>javac:ç¼–è¯‘<br>java:è¿è¡Œ<br>javadoc:ç”Ÿæˆæ–‡æ¡£</p></blockquote><blockquote><p>javacè¯­æ³•</p><p>javac æ–‡ä»¶å.java<br>javac HelloWorld.java<br>ä½œç”¨ï¼šå°†.javaçš„æºä»£ç ç¼–è¯‘æˆ.classæ–‡ä»¶ï¼Œå¦‚æœä»£ç æœ‰é”™è¯¯ï¼Œå°†æ— æ³•å®Œæˆç¼–è¯‘   </p></blockquote><blockquote><p>java è¯­æ³•</p><p>java ç±»å<br>java HelloWorld<br>æ³¨æ„ï¼šåƒä¸‡ä¸è¦å†™.class<br>ä½œç”¨ï¼šè¿è¡Œjavaç±»ï¼Œè¦æ±‚æ­¤ç±»å¿…é¡»æœ‰ä¸»å‡½æ•°   </p></blockquote><blockquote><p>javadoc:ç”Ÿæˆæ–‡æ¡£<br>javadoc ç±»å.java</p></blockquote><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><blockquote><p>ä½œç”¨ï¼šä¸ºäº†è®©ç¨‹åºå‘˜æ›´å®¹æ˜“ç†è§£ä»£ç çš„å«ä¹‰ï¼Œå¯ä»¥ä½¿ç”¨æ³¨é‡ŠåŠ ä»¥è¯´æ˜   æ³¨é‡Šä¸ä¼šå½±å“ä»£ç çš„è¿è¡Œ</p><p>æ³¨é‡Šæœ‰ä¸‰ç§   </p><p>&#x2F;&#x2F;:å•è¡Œ<br>&#x2F;*  <em>&#x2F;ï¼šå—æ³¨é‡Š<br>&#x2F;</em>* *&#x2F;ï¼šæ–‡æ¡£æ³¨é‡Š</p></blockquote><h1 id="javaç¼–ç¨‹åŸºç¡€"><a href="#javaç¼–ç¨‹åŸºç¡€" class="headerlink" title="javaç¼–ç¨‹åŸºç¡€"></a>javaç¼–ç¨‹åŸºç¡€</h1><h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><ul><li><p>ä»€ä¹ˆæ˜¯å…³é”®å­—ï¼šåœ¨javaè¯­è¨€æœ‰ï¼Œæœ‰ç‰¹æ®Šå«ä¹‰çš„ä¸€äº›å•è¯å°±æ˜¯å…³é”®å­—   </p></li><li><p>å…³é”®å­—çš„ç‰¹ç‚¹ï¼šå…¨éƒ¨éƒ½æœ‰å°å†™</p></li></ul><h2 id="æ ‡è¯†ç¬¦"><a href="#æ ‡è¯†ç¬¦" class="headerlink" title="æ ‡è¯†ç¬¦"></a>æ ‡è¯†ç¬¦</h2><ul><li>ä»€ä¹ˆæ ‡è¯†ç¬¦ï¼šç”¨æ¥æ ‡è¯†æŸç§ä¸œè¥¿çš„ç¬¦å·å°±æ˜¯æ ‡è¯†ç¬¦</li></ul><blockquote><p>æ¯”å¦‚ï¼šç±»ï¼Œæ–¹æ³•åï¼Œå˜é‡åï¼Œå‚æ•°åï¼Œ</p></blockquote><p>å®šä¹‰æ ‡è¯†ç¬¦çš„è§„åˆ™</p><ul><li><p>æ ‡è¯†ç¬¦ä¸­å¯åŒ…å«å­—æ¯ï¼Œæ•°å­—ï¼Œ_,$,ä¸­æ–‡ä¹Ÿå¯ä»¥ï¼ˆä¸å»ºè®®ï¼‰</p></li><li><p>ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</p></li><li><p>ä¸èƒ½æ˜¯å…³é”®å­—</p></li><li><p>é•¿åº¦æ— é™åˆ¶ï¼Œæœ€å¥½åšåˆ°â€œè§åçŸ¥ä¹‰â€</p><p>  â€‹</p></li></ul><p></p><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><p>å˜é‡ï¼šå°±æ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªåŒºåŸŸï¼Œä¸ºäº†ä¾¿äºä½¿ç”¨ï¼Œéœ€è¦ç»™å˜é‡èµ·ä¸ªåå­—</p><p>å˜é‡ç”¨æ³•ï¼š</p><ol><li><p>å˜é‡ä¸€å®šè¦å…ˆå®šä¹‰ï¼Œå†ä½¿ç”¨</p></li><li><p>å®šä¹‰å˜é‡çš„æ ¼å¼æ˜¯ </p><blockquote><p>æ•°æ®ç±»å‹ å˜é‡å&#x3D;åˆå§‹å€¼</p></blockquote></li><li><p>å˜é‡çš„å€¼æ˜¯å¯ä»¥æ”¹å˜çš„</p></li><li><p>åœ¨ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œå˜é‡åæ˜¯ä¸èƒ½é‡å¤çš„</p></li></ol><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>javaçš„æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯</p><ul><li>åŸºæœ¬æ•°æ®ç±»å‹</li><li>å¼•ç”¨æ•°æ®ç±»å‹<ul><li>ç±»ï¼Œæ¥å£ï¼Œæ•°ç»„</li></ul></li></ul><h3 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h3><ul><li><p>æ•´æ•°</p><ul><li>byte  :1</li><li>short:1</li><li>int :2</li><li>long:2</li></ul></li><li><p>æµ®ç‚¹æ•°</p><ul><li>float:45.6f</li><li>double:444.4</li></ul></li><li><p>å­—ç¬¦</p><ul><li>char     â€˜aâ€™</li></ul></li><li><p>å¸ƒå°”</p><ul><li>boolean  :true,false</li></ul></li></ul><h4 id="æ•´æ•°ï¼š"><a href="#æ•´æ•°ï¼š" class="headerlink" title="æ•´æ•°ï¼š"></a>æ•´æ•°ï¼š</h4><ul><li><p>byte:1ä¸ªå­—èŠ‚</p><ul><li><p>ä½ï¼ˆbitï¼‰</p><p>01ï¼šbitï¼Œæ¯ä¸ªä¸€ä¸ªbitåªèƒ½å­˜å‚¨ä¸¤ä¸ªå€¼   </p><p>ä¸€ä¸ªå­—èŠ‚ç­‰äº8ä½äºŒè¿›åˆ¶</p><blockquote><p>10101011</p></blockquote><p>byte &#x3D; -128~127;</p></li></ul><p></p></li><li><p>short:2ä¸ªå­—èŠ‚</p></li><li><p>int:4ä¸ªå­—èŠ‚</p></li><li><p>long:8ä¸ªå­—èŠ‚</p></li></ul><h4 id="å…³äºå®¹é‡çš„æ¢ç®—å…³ç³»"><a href="#å…³äºå®¹é‡çš„æ¢ç®—å…³ç³»" class="headerlink" title="å…³äºå®¹é‡çš„æ¢ç®—å…³ç³»"></a>å…³äºå®¹é‡çš„æ¢ç®—å…³ç³»</h4><p>å­—èŠ‚ B   byte</p><p>1KB-&gt;1024B</p><p>1MB-&gt;1024KB</p><p>1GB-&gt;1024MB</p><p>1TB-&gt;1024GB</p><p>1PB-&gt;1024TB</p><h4 id="è¿›åˆ¶çš„è½¬æ¢"><a href="#è¿›åˆ¶çš„è½¬æ¢" class="headerlink" title="è¿›åˆ¶çš„è½¬æ¢"></a>è¿›åˆ¶çš„è½¬æ¢</h4><blockquote><p>1.10è¿›åˆ¶-ã€‹äºŒè¿›åˆ¶<br>        é™¤2å–ä½™æ³•   </p><p>2.äºŒè¿›åˆ¶-ã€‹åè¿›åˆ¶<br>        ä¹˜æƒç›¸åŠ æ³•<br>    110101<br>    1+4+16+32&#x3D;53<br>3.äºŒè¿›åˆ¶-ã€‹åå…­è¿›åˆ¶<br>    1011 1010<br>      B   A<br>     100011111<br>4.åå…­è¿›åˆ¶-ã€‹äºŒè¿›åˆ¶<br>     6E-ã€‹</p></blockquote><h3 id="å­—é¢å€¼ï¼ˆliteralï¼‰"><a href="#å­—é¢å€¼ï¼ˆliteralï¼‰" class="headerlink" title="å­—é¢å€¼ï¼ˆliteralï¼‰"></a>å­—é¢å€¼ï¼ˆliteralï¼‰</h3><p>å­—é¢å€¼ä¹Ÿå«ç›´æ¥é‡   </p><blockquote><p>1.æ•´æ•°çš„å­—é¢å€¼çš„ç±»å‹é»˜è®¤ä¸ºæ˜¯int<br>2.åå…­è¿›åˆ¶ 0xå¼€å¤´<br>3.å…«è¿›åˆ¶ä»¥0å¼€å¤´ï¼Œä¾‹å¦‚  int a&#x3D;011<br>4.å¦‚æœæƒ³è¡¨ç¤ºä¸€ä¸ªlongå€¼ï¼Œå¯ä»¥ä½¿ç”¨ Lç»“å°¾ï¼Œä¾‹å¦‚ long a&#x3D;12312312399L</p></blockquote><h3 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h3><table><thead><tr><th></th><th>å­—èŠ‚</th><th>èŒƒå›´</th></tr></thead><tbody><tr><td>float</td><td>4</td><td>-3.403E38 ~ 3.403E38</td></tr><tr><td>double</td><td>8</td><td>-1.798E308 ~ 1.798E308</td></tr></tbody></table><blockquote><p>æ€»ç»“<br>1.æµ®ç‚¹æ•°åªèƒ½è¡¨ç¤ºå‡ºä¸€ä¸ªè¿‘ä¼¼æ•°ï¼Œè€Œä¸èƒ½è¡¨ç¤ºå‡ºä¸€ä¸ªå‡†ç¡®çš„æ•°<br>2.æµ®ç‚¹æ•°çš„å­—å€¼çš„ç±»å‹æ˜¯double,å¦‚æœæƒ³è¡¨ç¤ºä¸€ä¸ªfloatï¼Œåº”è¯¥ä½¿ç”¨ Fç»“å°¾   </p></blockquote><h3 id="å­—ç¬¦å‹"><a href="#å­—ç¬¦å‹" class="headerlink" title="å­—ç¬¦å‹"></a>å­—ç¬¦å‹</h3><p>ç”¨ ä¸€å¯¹â€˜â€™å¼•èµ·çš„å•ä¸ªå­—ç¬¦å°±æ˜¯å­—ç¬¦ï¼Œå­—ç¬¦å¯ä»¥ä»¥æ•°å­—ï¼Œè‹±æ–‡å­—æ¯ï¼Œæ ‡ç‚¹ç¬¦å·ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºä»»ä½•è¯­è¨€çš„å•å­—ç¬¦   ä¾‹å¦‚ï¼Œä¸­æ–‡ï¼Œæ³•æ–‡ï¼Œä¿„æ–‡ï¼Œæ—¥æ–‡   </p><blockquote><p>æ¯ä¸ªå­—ç¬¦å­˜å‚¨æ—¶ï¼Œéƒ½ä¼šè½¬æ¢æˆä¸ä¹‹å¯¹åº”çš„æ•°å­—<br>å­—ç¬¦ä¸æ•°å­—ä¹‹é—´çš„å¯¹åº”å…³ç³»å°±æ˜¯ä¸€ç§å­—ç¬¦é›†   UTF-8   GBK,GB2312<br>charæœ‰ä¸‰ç§è¡¨ç¤ºæ–¹å¼<br>1.â€˜â€™<br>2.â€˜\è½¬ä¹‰å­—ç¬¦â€™ ï¼Œä¾‹å¦‚ â€˜\nâ€™:æ¢è¡Œ<br>3.unicodeç     â€˜\uXXXXâ€™</p></blockquote><h3 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h3><blockquote><p>booleanå«å¸ƒå°”<br>åªæœ‰ä¸¤ä¸ªå€¼ï¼Œåˆ†åˆ«æ˜¯true,false<br>é€šå¸¸æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨booleanæ¥å­˜å‚¨ä¸€ä¸ªçŠ¶æ€   </p><p>æ˜¯å¦æ‰“å¼€éŸ³ä¹<br>boolean isMusic&#x3D;false</p></blockquote><h3 id="Stringç±»å‹"><a href="#Stringç±»å‹" class="headerlink" title="Stringç±»å‹"></a>Stringç±»å‹</h3><blockquote><p>Stringä»£è¡¨å­—ç¬¦ä¸²ï¼Œå³ç”¨åŒå¼•å·å¼•èµ·çš„å¤šä¸ªå­—ç¬¦åºåˆ—<br>Stringä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ä¸€ç§å¼•ç”¨ç±»å‹   </p><p>String name&#x3D;â€åˆ˜å¤‡â€</p></blockquote><h2 id="javaä»£ç ä¸‰çº§è·³"><a href="#javaä»£ç ä¸‰çº§è·³" class="headerlink" title="javaä»£ç ä¸‰çº§è·³"></a>javaä»£ç ä¸‰çº§è·³</h2><blockquote><p>1.è¡¨è¾¾å¼<br>    ç±»ä¼¼äºè¯­æ–‡ä¸­çš„æ±‰å­—ï¼Œè¯ç»„ï¼Œä¾‹å¦‚ a+b,c*d<br>2.è¯­å¥<br>    ç±»ä¼¼äºè¯­æ–‡ä¸­çš„å¥å­ã€‚ä»¥   å·ç»“æŸ   ä¸€ä¸ªè¯­å¥ä¸­ä¼šåŒ…å«å¤šä¸ªè¡¨è¾¾å¼ï¼Œ</p><p>â€‹    int a&#x3D;5;<br>â€‹int b&#x3D;a+b;<br>â€‹c&#x3D;sum+a;<br>3.ä»£ç æ®µ<br>â€‹ç›¸å½“äºè¯­æ–‡çš„ä½œæ–‡ï¼Œä¸€ä¸ªä»£ç æ®µä¸­åŒ…å«å¤šä¸ªè¯­å¥   </p></blockquote><h2 id="æ•°æ®ç±»å‹çš„è½¬æ¢"><a href="#æ•°æ®ç±»å‹çš„è½¬æ¢" class="headerlink" title="æ•°æ®ç±»å‹çš„è½¬æ¢"></a>æ•°æ®ç±»å‹çš„è½¬æ¢</h2><blockquote><p>ä¸¤ç§è½¬æ¢<br>1.è‡ªåŠ¨è½¬æ¢ï¼šä½ç²¾åº¦å‘é«˜ç²¾åº¦å¯ä»¥è‡ªåŠ¨è½¬æ¢ï¼Œå®‰å…¨<br>2.å¼ºåˆ¶è½¬æ¢ï¼šé«˜ç²¾åº¦å‘ä½ç²¾åº¦è½¬æ¢æ—¶å¯ä»¥é‡‡ç”¨å¼ºåˆ¶è½¬æ¢ï¼Œå¼ºè½¬å¯èƒ½ä¼šé€ æˆç²¾åº¦ä¸¢å¤±   </p></blockquote><blockquote><p>æ•°å€¼ç±»çš„çš„ç²¾åº¦<br>byte-&gt;short-&gt;int-&gt;long-&gt;float-&gt;double<br>         char</p></blockquote><h4 id="è‡ªåŠ¨ç±»å‹è½¬æ¢å‘ç”Ÿåœ¨ä¸¤ç§æƒ…å†µ"><a href="#è‡ªåŠ¨ç±»å‹è½¬æ¢å‘ç”Ÿåœ¨ä¸¤ç§æƒ…å†µ" class="headerlink" title="è‡ªåŠ¨ç±»å‹è½¬æ¢å‘ç”Ÿåœ¨ä¸¤ç§æƒ…å†µ"></a>è‡ªåŠ¨ç±»å‹è½¬æ¢å‘ç”Ÿåœ¨ä¸¤ç§æƒ…å†µ</h4><ul><li>èµ‹å€¼</li><li>è¿ç®—</li></ul><h4 id="å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>å¼ºåˆ¶ç±»å‹è½¬æ¢</h4><ul><li>é«˜ç²¾åº¦å‘ä½ç²¾åº¦è½¬æ¢æ—¶ï¼Œå¯ä½¿ç”¨å¼ºè½¬</li><li>å¼ºè½¬çš„è¯­æ³•æ˜¯  ï¼ˆæ•°æ®ç±»å‹ï¼‰   ä¾‹å¦‚  long b&#x3D;6677;  int a&#x3D;(int)b;</li></ul><h2 id="Scanner"><a href="#Scanner" class="headerlink" title="Scanner"></a>Scanner</h2><blockquote><p>&#x2F;&#x2F;æœ‰äº¤äº’çš„ç¨‹åº<br>äº¤äº’çš„æ–¹å¼ä¸»è¦ç”¨ä¸¤ç§<br>1.å‘½ä»¤è¡Œ<br>2.å›¾å½¢<br>Scannerå«æ‰«æå™¨ï¼Œä»–å¯ä»¥æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„æ•°æ®   ä¾‹å¦‚æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ç­‰   </p></blockquote><blockquote><p>ä½¿ç”¨Scannerçš„æ­¥éª¤<br>1.å¯¼åŒ… import java.util.*<br>2.åˆ›å»ºScannerå¯¹è±¡<br>    Scanner s&#x3D;new Scanner(System.in)<br>3.æ¥æ”¶æ•°æ®<br>    int a&#x3D;s.nextInt()</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;  <span class="comment">//1.å¯¼åŒ…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Circle</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//2.åˆ›å»ºä¸€ä¸ªæ‰«æå™¨  </span></span><br><span class="line">Scanner scanner=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥åŠå¾„&quot;</span>);</span><br><span class="line"><span class="comment">//3.æ¥æ”¶ä¸€ä¸ªåŠå¾„</span></span><br><span class="line"><span class="type">double</span> r=scanner.nextDouble();</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> area=r*r*<span class="number">3.14</span>;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;åœ†çš„é¢ç§¯æ˜¯ï¼š&quot;</span>+area);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><p> è¿ç®—ç¬¦å¯ä»¥æœ‰ä¸¤ç§åˆ†åœ¨æ–¹å¼</p><ol><li>åŠŸèƒ½<ul><li>ç®—æœ¯è¿ç®—ç¬¦</li><li>èµ‹å€¼è¿ç®—ç¬¦</li><li>æ¯”è¾ƒè¿ç®—ç¬¦</li><li>ä½è¿ç®—ç¬¦</li><li>é€»è¾‘è¿ç®—ç¬¦</li><li>æ¡ä»¶ï¼ˆä¸‰å…ƒï¼‰è¿ç®—ç¬¦</li></ul></li><li>æ“ä½œæ•°çš„ä¸ªæ•°<ul><li>ä¸€å…ƒæ“ä½œç¬¦ï¼š    ++b, </li><li>äºŒå…ƒæ“ä½œç¬¦ï¼š    a+b</li><li>ä¸‰å…ƒæ“ä½œç¬¦      a&gt;b?a:b</li></ul></li></ol><h3 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">++,--</span><br><span class="line">å¯ä»¥æ”¾åœ¨æ“ä½œæ•°ä¹‹å‰ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨æ“ä½œæ•°ä¹‹å  </span><br><span class="line"></span><br><span class="line">a++æ“ä½œç¬¦æœ‰ä½œç”¨  </span><br><span class="line"><span class="number">1.</span>å¯¹aåšä¸€ä¸ªåŠ æ“ä½œ  </span><br><span class="line"><span class="number">2.</span>a++ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå³å°†è¡¨è¾¾å¼çš„ç»“æœèµ‹ç»™ä¸€ä¸ªå˜é‡  </span><br><span class="line">b=a++;</span><br><span class="line">b=++a;</span><br><span class="line"></span><br><span class="line">a++;</span><br><span class="line">++a;</span><br></pre></td></tr></table></figure><h3 id="èµ‹å€¼è¿ç®—ç¬¦"><a href="#èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦"></a>èµ‹å€¼è¿ç®—ç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">=</span><br><span class="line">ä¾‹å¦‚ï¼š a=<span class="number">9</span>+<span class="number">8</span>;</span><br><span class="line">ç‰¹ç‚¹ï¼š</span><br><span class="line"><span class="number">1.</span>æ“ä½œç¬¦çš„ç»“åˆæ€§æ˜¯ä»å³åˆ°å·¦  </span><br><span class="line"><span class="number">2.</span>æ“ä½œç¬¦å·¦ä¾§ä¸€å®šæ˜¯ä¸€ä¸ªå˜é‡  </span><br></pre></td></tr></table></figure><h3 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">==  </span><br><span class="line">!=</span><br><span class="line">&lt;</span><br><span class="line">=</span><br><span class="line">&lt;=</span><br><span class="line"><span class="keyword">instanceof</span></span><br><span class="line"></span><br><span class="line">æ‰€æœ‰æ¯”è¾ƒè¿ç®—ç¬¦çš„è®¡ç®—ç»“æœçš„ç±»å‹éƒ½æ˜¯<span class="type">boolean</span>; <span class="literal">true</span>,<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼Œ</span><br><span class="line">=æ˜¯èµ‹å€¼</span><br><span class="line">==æ˜¯æ¯”è¾ƒ  </span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä¸ï¼š &amp; ,&amp;&amp;</span><br><span class="line">æˆ–:  |  ||</span><br><span class="line">éï¼š  !</span><br><span class="line">å¼‚æˆ–ï¼š ^</span><br><span class="line"></span><br><span class="line">ä¸çš„è¯­æ³•</span><br></pre></td></tr></table></figure> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¡¨è¾¾å¼<span class="number">1</span>  &amp; è¡¨è¾¾å¼<span class="number">2</span>  </span><br><span class="line">è¡¨è¾¾å¼<span class="number">1</span>  &amp;&amp; è¡¨è¾¾å¼<span class="number">2</span>  </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> è¦æ±‚ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼éƒ½æ˜¯å¸ƒå°”è¡¨è¾¾å¼  </span><br><span class="line"> å³ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼çš„ç»“æœåŒæ—¶ä¸º<span class="literal">true</span>æ—¶ï¼Œä¸åçš„ç»“æœæ‰<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">æˆ–ï¼š  ï½œ  ï½œï½œ</span><br><span class="line">ä½œç”¨ï¼šä¸¤ä¸ªæ“ä½œæ•°çš„ç»“æœï¼Œåªè¦æœ‰ä¸€ä¸ªä¸º<span class="literal">true</span>,é‚£ä¹ˆæˆ–çš„ç»“æœå°±ä¸º<span class="literal">true</span>;</span><br><span class="line">éï¼š</span><br><span class="line">å–å  </span><br><span class="line">!<span class="literal">true</span>;=<span class="literal">false</span>;</span><br><span class="line">!<span class="literal">false</span>:=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">å¼‚æˆ–ï¼š</span><br><span class="line">ä½œç”¨ï¼šä¸¤ä¸ªæ“ä½œæ•°ä¸åŒæ—¶ä¸º<span class="literal">true</span>,å¦åˆ™ä¸º<span class="literal">false</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&amp;,&amp;&amp;çš„åŒºåˆ«ï¼Ÿ</span><br><span class="line">&amp;ï¼Œ&amp;&amp;éƒ½æ˜¯é€»è¾‘ä¸ï¼Œè®¡ç®—çš„ç»“æœæ˜¯ç›¸åŒçš„  ä½†è¿ç®—çš„è¿‡ç¨‹æ˜¯æœ‰åŒºåˆ«çš„ï¼Ÿ</span><br><span class="line">ä¾‹å¦‚</span><br><span class="line">a&amp;&amp;b;</span><br><span class="line">å‡å¦‚ï¼Œaçš„ç»“æœæ˜¯<span class="literal">false</span>;é‚£ä¹ˆæ˜¯å¦éœ€è¦è®¡ç®—bï¼Œæ‰çŸ¥é“æ•´ä¸ªè¡¨è¾¾å¼çš„ç»“æœ  </span><br><span class="line"></span><br><span class="line">åŒºåˆ«ï¼š</span><br><span class="line">&amp;ï¼šæ— è®ºç¬¬ä¸€ä¸ªæ“ä½œæ•°ç»“æœæ˜¯ä»€ä¹ˆï¼Œéƒ½ä¼šè®¡ç®—æ‰€æœ‰è¡¨è¾¾å¼  </span><br><span class="line">&amp;&amp;ï¼šå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„ç»“æœæ˜¯<span class="literal">false</span>,é‚£ä¹ˆå°†ä¸ä¼šè®¡ç®—ç¬¬äºŒä¸ªè¡¨è¾¾å¼  </span><br></pre></td></tr></table></figure><h3 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a>ä½è¿ç®—ç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æ“ä½œå¯¹è±¡ï¼šæ•´æ•°ï¼ˆ<span class="type">byte</span>,<span class="type">short</span>,<span class="type">int</span>,<span class="type">long</span>ï¼‰  </span><br><span class="line">ä½œç”¨ï¼šå°†æ•´æ•°è½¬æ¢æˆäºŒè¿›åˆ¶åï¼ŒæŒ‰ä½è¿›è¡Œè¿ç®—  å¸¸ç”¨çš„æ“ä½œæœ‰ï¼Œä½ç§»ï¼ŒæŒ‰ä½ä¸ï¼Œæˆ–ï¼Œå¼‚æˆ–  </span><br><span class="line">ä½è¿ç®—çš„ä¼˜ç‚¹ï¼šæ•ˆç‡é«˜  </span><br><span class="line"></span><br><span class="line">:æŒ‰ä½å³ç§»</span><br><span class="line">&lt;&lt;:æŒ‰ä½å·¦ç§»</span><br><span class="line"></span><br><span class="line">:æ— ç¬¦å·å³ç§»</span><br><span class="line">&amp;:æŒ‰ä½ä¸</span><br><span class="line">|:æŒ‰ä½æˆ–</span><br><span class="line">^:æŒ‰ä½å¼‚æˆ–</span><br><span class="line"></span><br><span class="line"><span class="number">895</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¡ä»¶è¿ç®—ç¬¦"><a href="#æ¡ä»¶è¿ç®—ç¬¦" class="headerlink" title="æ¡ä»¶è¿ç®—ç¬¦"></a>æ¡ä»¶è¿ç®—ç¬¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•</span><br><span class="line">å¸ƒå°”è¡¨è¾¾å¼ï¼Ÿè¡¨è¾¾å¼<span class="number">1</span>ï¼šè¡¨è¾¾å¼<span class="number">2</span>  </span><br><span class="line"><span class="type">int</span> c=a&gt;bï¼Ÿaï¼šb;</span><br></pre></td></tr></table></figure><h1 id="Javaè¿›é˜¶"><a href="#Javaè¿›é˜¶" class="headerlink" title="Javaè¿›é˜¶"></a>Javaè¿›é˜¶</h1><h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><blockquote><p>ä¸‰ç§<br>é¡ºåºç»“æ„<br>åˆ†æ”¯ï¼ˆé€‰æ‹©ï¼‰ç»“æ„ï¼šbranch<br>å¾ªç¯ç»“æ„ï¼šloop</p></blockquote><blockquote><p>é¡ºåºï¼š<br>    ç¨‹åºä»ä¸Šåˆ°ä¸‹ï¼Œä¾æ¬¡æ‰§è¡Œ   </p></blockquote><h2 id="åˆ†æ”¯è¯­å¥"><a href="#åˆ†æ”¯è¯­å¥" class="headerlink" title="åˆ†æ”¯è¯­å¥"></a>åˆ†æ”¯è¯­å¥</h2><p>åˆ†æ”¯è¯­å¥åˆ†ä¸ºif,switch</p><h2 id="ifè¯­å¥"><a href="#ifè¯­å¥" class="headerlink" title="ifè¯­å¥"></a>ifè¯­å¥</h2><h3 id="å•åˆ†æ”¯"><a href="#å•åˆ†æ”¯" class="headerlink" title="å•åˆ†æ”¯"></a>å•åˆ†æ”¯</h3><p>è¯­æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(å¸ƒå°”è¡¨è¾¾å¼)&#123;</span><br><span class="line">   è¯­å¥å— </span><br><span class="line">&#125;</span><br><span class="line">ã€‚ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>é€‚ç”¨åœºæ™¯ï¼š<br>    ä¸ºç¨‹åºå¢åŠ ä¸€ä¸ªå¯èƒ½æ‰§è¡Œçš„ä»£ç ï¼Œæ­¤ä»£ç æœ‰å¯èƒ½æ‰§è¡Œï¼Œæœ‰å¯èƒ½ä¸æ‰§è¡Œ   </p></blockquote><h3 id="åŒåˆ†æ”¯"><a href="#åŒåˆ†æ”¯" class="headerlink" title="åŒåˆ†æ”¯"></a>åŒåˆ†æ”¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(å¸ƒå°”è¡¨è¾¾å¼)&#123;</span><br><span class="line">    è¯­å¥å—<span class="number">1</span>  </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    è¯­å¥å—<span class="number">2</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¤šåˆ†æ”¯"><a href="#å¤šåˆ†æ”¯" class="headerlink" title="å¤šåˆ†æ”¯"></a>å¤šåˆ†æ”¯</h3><p>è¯­æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(å¸ƒå°”è¡¨è¾¾å¼)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(å¸ƒå°”è¡¨è¾¾å¼<span class="number">2</span>)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(å¸ƒå°”è¡¨è¾¾å¼<span class="number">3.</span>ã€‚ã€‚ã€‚)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…³äºifçš„å°ç»“<br>1.å®Œæ•´çš„ifè¯­å¥ä¸­ï¼ŒåŒ…å« if-else if-else<br>2.ifè¯­æ³•ä¸­ï¼Œifæ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œ else ifå¯æœ‰0åˆ°nä¸ªï¼Œå¯ä»¥æœ‰0åˆ°1ä¸ªelse<br>3.å¦‚æœå­˜åœ¨else,elseä¸€å®šæ”¾åœ¨æœ€å<br>4.å¤šåˆ†æ”¯è¯­å¥ä¸­ï¼Œæœ€å¤šåªèƒ½æ‰§è¡Œä¸€ä¸ªåˆ†æ”¯ï¼Œæ‰§è¡Œæ­¤åˆ†æ”¯åï¼Œåˆ†æ”¯è¯­å¥ç»“æŸ   </p></blockquote><h3 id="ifçš„åµŒå¥—"><a href="#ifçš„åµŒå¥—" class="headerlink" title="ifçš„åµŒå¥—"></a>ifçš„åµŒå¥—</h3><blockquote><p>åœ¨ä¸€ä¸ªåˆ†æ”¯è¯­å¥å—ä¸­åŒ…å«å¦ä¸€ä¸ªåˆ†æ”¯è¯­å¥<br>é€‚ç”¨åœºæ™¯ï¼šé€‚åˆè§£å†³è¾ƒä¸ºå¤æ‚çš„é€»è¾‘é—®é¢˜   </p></blockquote><blockquote><p>ä¾‹å¦‚ï¼š<br>    ç™»å½•<br>    1.æˆåŠŸ ç”¨æˆ·åï¼Œå¯†ç ï¼ŒéªŒè¯ç <br>    2.å¤±è´¥<br>        1.éªŒè¯ç ï¼Ÿ<br>        2.ç”¨æˆ·åï¼Œæˆ–å¯†ç é”™è¯¯ï¼Œä½†å°‘äº3æ¬¡<br>        3.ç”¨æˆ·åï¼Œæˆ–å¯†ç é”™è¯¯ï¼Œä½†å¤§äºç­‰äº3æ¬¡   é”å®šï¼ˆ1ä¸ªå°æ—¶ï¼‰   </p></blockquote><p>è¯­æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(æ¡ä»¶)&#123;</span><br><span class="line">System.out.println();</span><br><span class="line">i++;</span><br><span class="line"><span class="keyword">if</span>()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(æ¡ä»¶)&#123;</span><br><span class="line"><span class="keyword">if</span>()&#123;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ifè¯­å¥çš„ç®€åŒ–"><a href="#ifè¯­å¥çš„ç®€åŒ–" class="headerlink" title="ifè¯­å¥çš„ç®€åŒ–"></a>ifè¯­å¥çš„ç®€åŒ–</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœifè¯­å¥å—ä¸­åªåŒ…å«ä¸€è¡Œä»£ç ï¼Œé‚£ä¹ˆï½›ï½å¯ä»¥çœç•¥ï¼Œï¼ˆä½†ä¸å»ºè®®çœç•¥ï¼‰</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)</span><br><span class="line">System.out.println(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">System.out.println(<span class="string">&quot;else&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="switch-è¯­å¥"><a href="#switch-è¯­å¥" class="headerlink" title="switch è¯­å¥"></a>switch è¯­å¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯­æ³•</span></span><br><span class="line"><span class="keyword">switch</span>(è¡¨è¾¾å¼)&#123;</span><br><span class="line"><span class="keyword">case</span> å€¼<span class="number">1</span>ï¼š</span><br><span class="line">è¯­å¥;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> å€¼<span class="number">2</span>ï¼š</span><br><span class="line">è¯­å¥;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">è¯­å¥<span class="number">3</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//è¾“å…¥ä¸€ä¸ªæˆç»©   5ï¼Œ4ï¼Œ3ï¼Œ2ï¼Œ1ï¼Œ0  </span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>å…³äºbreak;<br>åœ¨switchè¯­å¥ä¸­ï¼Œå¦‚æœcase æ²¡æœ‰break,é‚£ä¹ˆå°†ä¼šç©¿é€   </p></blockquote><blockquote><p>è§£å†³é—®é¢˜<br>è¾“å…¥æœˆä»½ï¼Œåˆ¤æ–­æ­¤æœˆæœ‰å¤šå°‘å¤©ï¼Ÿ<br>2:28ï¼Œ29<br>1ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œ8ï¼Œ10ï¼Œ12:31<br>4,6,9,11:30</p><p>case:<br>    2,<br>    4,<br>    6,<br>    9,11</p><p>default:</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Switch2</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">&#123;</span><br><span class="line">Scanner s=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;è¾“å…¥æœˆä»½&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> month=s.nextInt();</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span>(month)&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;28æˆ–29å¤©&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;30å¤©&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;31å¤©&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨switchçš„æ³¨æ„äº‹é¡¹<br>1.switchåªèƒ½ä½¿ç”¨ç­‰å€¼æ¯”è¾ƒï¼Œè€Œä¸”å¯¹æ•°æ®ç±»å‹æœ‰è¦æ±‚ï¼ˆbyte,short,int,char,Stringï¼‰<br>2.æ³¨æ„ caseç©¿é€   ï¼ˆbreakï¼‰<br>3.switchçš„ç»“æœæ¸…æ™°ï¼Œä½†æ²¡æœ‰ifåº”ç”¨çš„å¹¿æ³›   </p></blockquote><h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><blockquote><p>è¯­æ³•å¾ˆç®€å•ï¼Œç»ƒä¹ æ˜¯å…³é”®</p></blockquote><h3 id="å¾ªç¯è¯­å¥çš„ä¸‰ä¸ªéƒ¨åˆ†"><a href="#å¾ªç¯è¯­å¥çš„ä¸‰ä¸ªéƒ¨åˆ†" class="headerlink" title="å¾ªç¯è¯­å¥çš„ä¸‰ä¸ªéƒ¨åˆ†"></a>å¾ªç¯è¯­å¥çš„ä¸‰ä¸ªéƒ¨åˆ†</h3><blockquote><p>1.åˆå§‹åŒ–éƒ¨åˆ†ï¼ˆ1æ¬¡ï¼‰<br>2.æ¡ä»¶éƒ¨åˆ†ï¼ˆå¤šæ¬¡ï¼‰<br>3.å¾ªç¯ä½“éƒ¨åˆ†   (å¤šæ¬¡)</p></blockquote><h3 id="javaä¸­ï¼Œå¾ªç¯è¯­å¥çš„åˆ†ç±»"><a href="#javaä¸­ï¼Œå¾ªç¯è¯­å¥çš„åˆ†ç±»" class="headerlink" title="javaä¸­ï¼Œå¾ªç¯è¯­å¥çš„åˆ†ç±»"></a>javaä¸­ï¼Œå¾ªç¯è¯­å¥çš„åˆ†ç±»</h3><blockquote><p>1.while<br>2.do-while<br>3.for</p></blockquote><h3 id="whileè¯­å¥"><a href="#whileè¯­å¥" class="headerlink" title="whileè¯­å¥"></a>whileè¯­å¥</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯­æ³•</span></span><br><span class="line">[åˆå§‹åŒ–è¯­å¥]</span><br><span class="line"><span class="keyword">while</span>(è¡¨è¾¾å¼)&#123;</span><br><span class="line">å¾ªç¯ä½“è¯­å¥;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>1+2+3+4â€¦..+100;</p><p>int sum&#x3D;0;&#x2F;&#x2F;å®šä¹‰ä¸€ä¸ªå˜é‡   ç”¨æ¥å­˜å‚¨ç´¯åŠ çš„å’Œ</p><p>int i&#x3D;1;<br>sum+&#x3D;i;(1.2,3,4,5,5.6,7)</p></blockquote><blockquote><p>ç›ˆç›ˆä¸ºäº†è€ƒéªŒä»¤ç‹å†²å¤ºå† çš„å†³å¿ƒï¼Œè¦ä»–è¯´ä¸€ç™¾éâ€œæˆ‘èƒ½è¡Œï¼â€;<br>1+â€¦100;</p></blockquote><h3 id="æ­»å¾ªç¯"><a href="#æ­»å¾ªç¯" class="headerlink" title="æ­»å¾ªç¯"></a>æ­»å¾ªç¯</h3><blockquote><p>æ­»å¾ªç¯ï¼šæ— æ³•ç»“æŸçš„å¾ªç¯è¢«ç§°ä¸ºæ­»å¾ªç¯   </p></blockquote><h3 id="å˜é‡çš„ä½œç”¨åŸŸ"><a href="#å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡çš„ä½œç”¨åŸŸ"></a>å˜é‡çš„ä½œç”¨åŸŸ</h3><p>å†…å±‚å¯ä»¥ä½¿ç”¨å¤–å±‚çš„å˜é‡ï¼Œå¤–å±‚ä¸èƒ½ä½¿ç”¨å†…å±‚çš„å˜é‡</p><h3 id="do-while"><a href="#do-while" class="headerlink" title="do-while"></a>do-while</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//do-whileå¾ªç¯</span></span><br><span class="line">[åˆä½¿åŒ–å˜é‡]</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">å¾ªç¯ä½“  </span><br><span class="line">&#125;<span class="keyword">while</span>(å¸ƒå°”è¡¨è¾¾å¼);</span><br><span class="line"></span><br><span class="line">ç‰¹ç‚¹ï¼šè‡³å°‘è¿›å…¥ä¸€æ¬¡å¾ªç¯ä½“  </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çŒœæ•°æ¸¸æˆ</span></span><br><span class="line">Random r=<span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"><span class="type">int</span> n=r.nextInt(<span class="number">10</span>);<span class="comment">//äº§ç”Ÿä¸€ä¸ªéšæœºæ•°ï¼Œï¼ˆæ•´æ•°ï¼‰</span></span><br><span class="line"><span class="type">int</span> i=<span class="number">0</span>;<span class="comment">//ä»£è¡¨ç”¨æˆ·çŒœçš„é‚£ä¸ªæ•°å€¼</span></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line"><span class="comment">//çŒœæ•°  </span></span><br><span class="line">&#125;<span class="keyword">while</span>(n!=i)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¡ç®—ä¸€ä¸‹ï¼Œç”¨æˆ·ç”¨äº†å‡ æ¬¡æœºä¼š  </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GuessNumber</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">&#123;</span><br><span class="line">Random r=<span class="keyword">new</span> <span class="title class_">Random</span>();<span class="comment">//åˆ›å»ºä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨  </span></span><br><span class="line">Scanner s=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);<span class="comment">//åˆ›å»ºä¸€ä¸ªæ‰«æå™¨ï¼Œç”¨æ¥æ¥æ”¶ç”¨æˆ·çŒœçš„æ•°å­—</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n=r.nextInt(<span class="number">100</span>)+<span class="number">1</span>;<span class="comment">//è·å¾—ä¸€ä¸ªéšæœºæ•°  </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i=<span class="number">0</span>;<span class="comment">//iä»£è¡¨ç”¨æˆ·æ¯æ¬¡çŒœçš„é‚£ä¸ªæ•°ï¼Œå¦‚æœi==n,è¯´æ˜çŒœå¯¹äº†  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line"><span class="comment">//æ¯æ¬¡çŒœæ•°</span></span><br><span class="line">System.out.println(<span class="string">&quot;è¯´å‡ºä¸€ä¸ªæ•°å­—&quot;</span>);</span><br><span class="line">i=s.nextInt();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(i&gt;n)&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é«˜äº†&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(i&lt;n)&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ä½äº†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">while</span>(i!=n);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;ä½ çŒœå¯¹äº†ï¼Œè¿™ä¸ªæ•°å°±æ˜¯ï¼š&quot;</span>+n);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯­æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(åˆå§‹åŒ–å˜é‡;æ¡ä»¶è¡¨è¾¾å¼;å¾ªç¯ä½“çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼  )&#123;</span><br><span class="line">å¾ªç¯ä½“  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç‰¹ç‚¹ï¼šéå¸¸é€‚ç”¨äºå·²çŸ¥å¾ªç¯æ¬¡æ•°çš„ç¨‹åº  </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123;</span><br><span class="line">sum+=i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.int i=0;</span></span><br><span class="line"><span class="comment">//2( i&lt;100;  sum+=i; i++)</span></span><br></pre></td></tr></table></figure><h3 id="break-ä¸-continue"><a href="#break-ä¸-continue" class="headerlink" title="break ä¸ continue"></a>break ä¸ continue</h3><blockquote><p>breakä¸continueéƒ½æ˜¯å…³é”®å­—ï¼Œå¯ä»¥åœ¨å¾ªç¯ä½“ä¸­ä½¿ç”¨   ï¼ˆfor,while,do-whileï¼‰</p><p>break:ç»“æŸå½“å‰å¾ªç¯ï¼ˆé€€å‡ºå¾ªç¯ï¼‰<br>continue:ç»“æŸå½“æ¬¡å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯åˆ¤æ–­   </p></blockquote><h3 id="åµŒå¥—å¾ªç¯"><a href="#åµŒå¥—å¾ªç¯" class="headerlink" title="åµŒå¥—å¾ªç¯"></a>åµŒå¥—å¾ªç¯</h3><blockquote><p>è¯­æ³•ç»“æ„ï¼š<br>    åœ¨ä¸€ä¸ªå¾ªç¯ä½“ä¸­ï¼ŒåŒ…å«å¦å¤–ä¸€ä¸ªå¾ªç¯è¯­å¥ï¼Œè¿™ç§ç»“æ„å°±æ˜¯åµŒå¥—å¾ªç¯   </p></blockquote><h3 id="å¾ªç¯ä¸­çš„ç®—æ³•"><a href="#å¾ªç¯ä¸­çš„ç®—æ³•" class="headerlink" title="å¾ªç¯ä¸­çš„ç®—æ³•"></a>å¾ªç¯ä¸­çš„ç®—æ³•</h3><blockquote><p>æš´åŠ›ï¼ˆç©·ä¸¾ï¼‰ï¼šæ•°å­—ï¼Œå­—æ¯ï¼Œç‰¹æ®Šå­—ç¬¦   </p><p>é¡ºæ¨ï¼šå·²çŸ¥æ¡ä»¶æ¨ç»“æœ</p><p>é€†æ¨ï¼šå·²çŸ¥ç»“æœæ¨æ¡ä»¶   </p></blockquote><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="æ•°ç»„çš„å®šä¹‰"><a href="#æ•°ç»„çš„å®šä¹‰" class="headerlink" title="æ•°ç»„çš„å®šä¹‰"></a>æ•°ç»„çš„å®šä¹‰</h3><blockquote><p>1.æ•°ç»„æ˜¯ä¸€ç§å¼•ç”¨æ•°æ®ç±»å‹ï¼Œå®ƒå¯ä»¥å­˜å‚¨å¤šä¸ªç›¸åŒç±»å‹çš„æ•°æ®   </p><p>2.æ•°ç»„çš„é•¿åº¦ä¸€æ—¦å®šä¹‰ï¼Œä¸èƒ½æ”¹å˜</p><p>3.æ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®ï¼Œä¸‹æ ‡çš„å–å€¼èŒƒå›´æ˜¯0~é•¿åº¦-1</p></blockquote><h3 id="æ•°ç»„-1"><a href="#æ•°ç»„-1" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><p>æ•°ç»„å…ƒç´ çš„åˆå§‹åŒ–   </p><blockquote><p>åŠ¨æ€ï¼šåˆ›å»ºæ•°ç»„åï¼Œä¸ºå…ƒç´ åˆ†åˆ«èµ‹å€¼</p><p>é™æ€ï¼šåˆ›å»ºæ•°ç»„çš„åŒæ—¶ï¼Œä¸ºå…ƒç´ èµ‹å€¼   </p></blockquote><p>for each</p><blockquote><p>å¢å¼ºçš„forå¾ªç¯   </p><p>ä½œç”¨ï¼šéå†é›†åˆä¸­çš„æ•°æ®   </p><p>è¯­æ³•ï¼š</p><p>for(æ•°æ®ç±»å‹ å˜é‡:æ•°ç»„å){</p><p>}</p><p>å°†æ•°ç»„ä¸­çš„å…ƒç´ è½¬æˆå­—ç¬¦ä¸²   </p><p>Arrays.toString(æ•°ç»„)</p></blockquote><h3 id="å†…å­˜æ¨¡å‹"><a href="#å†…å­˜æ¨¡å‹" class="headerlink" title="å†…å­˜æ¨¡å‹"></a>å†…å­˜æ¨¡å‹</h3><p>javaè™šæ‹Ÿæœºå°†å†…å®¹ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œåˆ†åˆ«æ˜¯æ ˆå’Œå †</p><blockquote><p>åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå­˜åœ¨æ ˆä¸­   </p><p>int i&#x3D;9;</p><p>åŸºæœ¬æ•°æ®ç±»å‹å˜é‡å­˜å‚¨çš„æ˜¯æ•°æ®æœ¬èº«   </p></blockquote><blockquote><p>å¼•ç”¨ç±»å‹æ˜¯å­˜å‚¨åœ¨å †ä¸­çš„   </p><p>å¼•ç”¨ç±»å‹æœ‰æ•°ç»„ï¼Œç±»ï¼Œæ¥å£   </p><p>int[] a&#x3D;new int[5];</p></blockquote><h2 id="æ’åºåŠäºŒç»´æ•°ç»„"><a href="#æ’åºåŠäºŒç»´æ•°ç»„" class="headerlink" title="æ’åºåŠäºŒç»´æ•°ç»„"></a>æ’åºåŠäºŒç»´æ•°ç»„</h2><h3 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h3><blockquote><p>ä»€ä¹ˆæ˜¯ç®—æ³•ï¼š</p><p>å…¶å®å°±æ˜¯è§£å†³é—®é¢˜ï¼Ÿ</p><p>å¦‚ä½•è¡¡é‡ç®—æ³•ä¼˜åŠ£ï¼Ÿ</p><p>æ—¶é—´</p><p>ç©ºé—´</p><p>æ—¶é—´å¤æ‚åº¦ï¼šå¤§Oè¡¨ç¤ºæ³•   </p><p>O(1):å›ºå®šæ¬¡æ•°ï¼Œå¸¸æ•°</p><p>O(logn):äºŒåˆ†</p><p>O(n):ä¸€å±‚å¾ªç¯</p><p>O(næ–¹):äºŒå±‚å¾ªç¯</p><p>O(nçš„ç«‹æ–¹):ä¸‰å±‚å¾ªç¯</p><p>O(2çš„næ¬¡å¹‚)ï¼š</p><p>O(n!):</p></blockquote><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><blockquote><p>æ’åºæ˜¯æœ€å¸¸çš„ç®—æ³•   </p><p>ç›´æ¥é€‰æ‹©æ’åºï¼Ÿ</p><p>å†’æ³¡æ’åºï¼Ÿ</p><p>æœªæ’åºï¼Œå·²æ’åº   </p><p>ç›¸é‚»æ¯”è¾ƒå¹¶äº¤æ¢ã€‚æ•´ä¸ªçš„è¿‡ç¨‹å°±åƒå†’æ°´æ³¡ä¸€æ ·   </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="comment">//å†’æ³¡æ’åº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BubbleSort</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span>[] nums=&#123;<span class="number">12</span>,<span class="number">45</span>,<span class="number">78</span>,<span class="number">5</span>,<span class="number">75</span>,<span class="number">33</span>,<span class="number">23</span>,<span class="number">47</span>&#125;;</span><br><span class="line">        <span class="type">int</span> temp=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//å¾ªç¯n-1æ¬¡  </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length-<span class="number">1</span>;i++)&#123;</span><br><span class="line"><span class="comment">//é€šè¿‡å†’æ³¡ï¼Œæ¯æ¬¡ä»æœªæ’åºå †ä¸­é€‰ä¸€ä¸ªæœ€å¤§çš„ï¼Œæ”¾åœ¨å·²æ’åºå †ä¸­</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;nums.length-<span class="number">1</span>-i;j++)&#123;</span><br><span class="line"><span class="comment">//äº¤æ¢</span></span><br><span class="line">                <span class="keyword">if</span>(nums[j]&gt;nums[j+<span class="number">1</span>])&#123;</span><br><span class="line">                    temp=nums[j];</span><br><span class="line">                    nums[j]=nums[j+<span class="number">1</span>];</span><br><span class="line">                    nums[j+<span class="number">1</span>]=temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Arrays.toString(nums));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="comment">//ç›´æ¥é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sort3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span>[] nums=&#123;<span class="number">30</span>,<span class="number">78</span>,<span class="number">90</span>,<span class="number">10</span>,<span class="number">4</span>,<span class="number">67</span>&#125;;</span><br><span class="line"><span class="comment">//å°†æœ€å¤§çš„å…ƒç´ ä¸ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢   </span></span><br><span class="line"><span class="comment">//1.å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨æ¥å­˜å‚¨æœ€å¤§å…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length-<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="type">int</span> max=i;</span><br><span class="line"><span class="comment">//1.å‘æœªæ’åºå †ä¸­æ‰¾å‡ºæœ€å¤§çš„å…ƒç´ çš„ä¸‹æ ‡   </span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;nums.length;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[max]&lt;nums[j])&#123;</span><br><span class="line">                    max=j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">//2.äº¤æ¢   </span></span><br><span class="line">            <span class="keyword">if</span>(max!=i)&#123;</span><br><span class="line">                <span class="type">int</span> temp=nums[max];</span><br><span class="line">                nums[max]=nums[i];</span><br><span class="line">                nums[i]=temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Arrays.toString(nums));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒåˆ†æ³•"><a href="#äºŒåˆ†æ³•" class="headerlink" title="äºŒåˆ†æ³•"></a>äºŒåˆ†æ³•</h3><blockquote><p>äºŒåˆ†æ³•ï¼Œä¹Ÿç§°ä¸ºæŠ˜åŠæŸ¥æ‰¾æ³•   å‰ææ˜¯ï¼Œæ•°æ®ä¸€å®šæ˜¯å·²æ’åºçš„ã€‚</p><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BinarySearch</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span>[] nums=&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">34</span>,<span class="number">56</span>,<span class="number">67</span>,<span class="number">88</span>,<span class="number">99</span>,<span class="number">100</span>&#125;;</span><br><span class="line">        Scanner s=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°&quot;</span>);</span><br><span class="line">        <span class="type">int</span> n=s.nextInt();</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> j=nums.length-<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> m=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//1.ç¼–å†™ä»£ç ï¼Œå®ŒæˆæŸ¥è¯¢ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œè¾“å‡ºä½ç½®ï¼Œå¦åˆ™ï¼Œè¾“å‡ºâ€œæŸ¥æ— æ­¤æ•°â€   </span></span><br><span class="line"><span class="comment">//2.åˆ†åˆ«ä½¿ç”¨O(n) O(logn)æ¥è§£å†³ï¼Ÿ</span></span><br><span class="line">        <span class="keyword">while</span>(i&lt;=j)&#123;</span><br><span class="line"><span class="comment">//1.è®¡ç®—å‡ºä¸­é—´ä½ç½®   </span></span><br><span class="line">            m=(i+j)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(n==nums[m])&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ‰¾åˆ°äº†ï¼Œä½ç½®æ˜¯ï¼š&quot;</span>+m);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nums[m]&gt;n)&#123;</span><br><span class="line">                j=m-<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                i=m+<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;j)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æŸ¥æ— æ­¤æ•°&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">            </span><br></pre></td></tr></table></figure><h3 id="äºŒä½æ•°ç»„"><a href="#äºŒä½æ•°ç»„" class="headerlink" title="äºŒä½æ•°ç»„"></a>äºŒä½æ•°ç»„</h3><p>äºŒç»´æ•°ç»„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">javaä¸­å…¶å®æ²¡æœ‰äºŒç»´æ•°ç»„ï¼Œæ‰€è°“çš„äºŒç»´æ•°ç»„å…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåªä¸è¿‡æ•°ç»„ä¸­çš„å…ƒç´ è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„   </span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] nums=&#123;<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> nums=<span class="keyword">new</span> <span class="title class_">int3</span>;</span><br><span class="line"></span><br><span class="line">äºŒç»´æ•°ç»„çš„åˆä½¿åŒ–</span><br><span class="line"></span><br><span class="line">é™æ€åˆä½¿åŒ–</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> nums=&#123;&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>&#125;,&#123;<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>&#125;,&#123;<span class="number">8</span>,<span class="number">9</span>,<span class="number">4</span>,<span class="number">3</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line">åŠ¨æ€åˆä½¿åŒ–   </span><br><span class="line"></span><br><span class="line"><span class="type">int</span> nums=<span class="keyword">new</span> <span class="title class_">int3</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> nums=<span class="keyword">new</span> <span class="title class_">int3</span>;</span><br><span class="line"></span><br><span class="line">nums[<span class="number">0</span>]=<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;;</span><br><span class="line"></span><br><span class="line">nums[<span class="number">1</span>]=<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">333</span>,<span class="number">56</span>&#125;;</span><br><span class="line"></span><br><span class="line">nums[<span class="number">2</span>]=<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">4</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>&#125;;</span><br><span class="line"></span><br><span class="line">String names=&#123;&#123;<span class="string">&quot;åˆ˜å¤‡&quot;</span>,<span class="string">&quot;å¼ é£&quot;</span>,<span class="string">&quot;å…³ç¾½&quot;</span>&#125;,&#123;<span class="string">&quot;æ›¹æ“&quot;</span>&#125;,&#123;<span class="string">&quot;å­™æƒ&quot;</span>,<span class="string">&quot;å‘¨ç‘œ&quot;</span>&#125;&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="é¢å‘å¯¹è±¡OOP"><a href="#é¢å‘å¯¹è±¡OOP" class="headerlink" title="é¢å‘å¯¹è±¡OOP"></a>é¢å‘å¯¹è±¡OOP</h1><h2 id="é¢å‘è¿‡ç¨‹ä¸é¢å‘å¯¹è±¡"><a href="#é¢å‘è¿‡ç¨‹ä¸é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘è¿‡ç¨‹ä¸é¢å‘å¯¹è±¡"></a>é¢å‘è¿‡ç¨‹ä¸é¢å‘å¯¹è±¡</h2><blockquote><p>é¢å‘å¯¹è±¡ï¼Œå¼ºè°ƒç”±è°æ¥åš<br>é¢å‘è¿‡ç¨‹ï¼Œå¼ºè°ƒæ€ä¹ˆåš</p><p>é¢å‘è¿‡ç¨‹ï¼šæŠŠè§£å†³é—®é¢˜çš„æ­¥éª¤åˆ—å‡ºæ¥ï¼Œå†é€æ­¥å®ç°</p><p>é¢å‘å¯¹è±¡ï¼šå°†é—®é¢˜åŸŸä¸­çš„å¯¹è±¡æ‰¾å‡ºæ¥ï¼Œå†ç¡®å®šå®ƒä»¬ä¹‹é—´çš„å…³ç³»   </p></blockquote><p>é¢å‘å¯¹è±¡æœ‰ä»€ä¹ˆä¼˜ç‚¹</p><blockquote><p>1.æ›´å®¹æ˜“ç†è§£<br>2.è§£å†³å¤æ‚çš„é—®é¢˜ï¼Œæ›´æœ‰ä¼˜åŠ¿</p></blockquote><h2 id="é¢å‘å¯¹è±¡çš„åŸºç¡€çŸ¥è¯†"><a href="#é¢å‘å¯¹è±¡çš„åŸºç¡€çŸ¥è¯†" class="headerlink" title="é¢å‘å¯¹è±¡çš„åŸºç¡€çŸ¥è¯†"></a>é¢å‘å¯¹è±¡çš„åŸºç¡€çŸ¥è¯†</h2><blockquote></blockquote><h3 id="ä»€ä¹ˆæ˜¯å¯¹è±¡"><a href="#ä»€ä¹ˆæ˜¯å¯¹è±¡" class="headerlink" title="ä»€ä¹ˆæ˜¯å¯¹è±¡"></a>ä»€ä¹ˆæ˜¯å¯¹è±¡</h3><blockquote><p>æ‰€æœ‰å…·ä½“çš„äº‹ç‰©éƒ½æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰</p></blockquote><h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><blockquote><p>ç±»æ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒå±æ€§å’Œè¡Œä¸ºçš„ä¸€ç»„å¯¹è±¡çš„æŠ½è±¡è¡¨ç¤º<br>ç±»å’Œå¯¹è±¡çš„å…³ç³»ï¼š<br>  ç±»æ˜¯å¯¹è±¡çš„æŠ½è±¡è¡¨ç¤º<br>  å¯¹è±¡æ˜¯ç±»çš„ä¸€ä¸ªå…·ä½“å®ä¾‹<br>ç±»æ˜¯æŠ½è±¡çš„ï¼Œå¯¹è±¡æ˜¯å…·ä½“çš„</p></blockquote><p>class ï¼š</p><h3 id="å®šä¹‰ç±»çš„è¯­æ³•"><a href="#å®šä¹‰ç±»çš„è¯­æ³•" class="headerlink" title="å®šä¹‰ç±»çš„è¯­æ³•"></a>å®šä¹‰ç±»çš„è¯­æ³•</h3><blockquote><p>å›é¡¾</p><p>1.é¢å‘è¿‡ç¨‹ï¼Œé¢å‘å¯¹è±¡çš„åŒºåˆ«ï¼Ÿ</p><p>2.é¢å‘å¯¹è±¡çš„ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µ</p><p>å¯¹è±¡ï¼Œç±»   </p><p>3.å¦‚ä½•å®šä¹‰ä¸€ä¸ªç±»   </p><p>class ç±»åï½›</p><p>å±æ€§   </p><p>æ–¹æ³•   </p><p>}</p></blockquote><p>ç±»ä¸­éƒ½åº”è¯¥æœ‰ä»€ä¹ˆ</p><blockquote><p>1.å®šä¹‰ä¸€ä¸ªå­¦ç”Ÿç±»å‹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">student</span>&#123;</span><br><span class="line">    <span class="type">int</span> stuno;     <span class="comment">//å®šä¹‰ç±»çš„å±æ€§</span></span><br><span class="line">    String name;</span><br><span class="line">    String sex;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><blockquote><p>å¤§å®¶ç”¨è¿‡æ–¹æ³•å—ï¼Ÿ</p><p>ç”¨è¿‡å“ªå‘¢ï¼Ÿ</p><p>Random r&#x3D;new Random();</p><p>int i&#x3D;r.nextInt(10);</p><p>æ–¹æ³•ä¸­éƒ½åŒ…æ‹¬ä»€ä¹ˆï¼Ÿ</p><p>æ–¹æ³•åï¼š</p><p>å‚æ•°ï¼šå¤šä¸ªï¼Œæ¯ä¸ªå‚æ•°éƒ½éœ€è¦æœ‰ç±»å‹   </p><p>è¿”å›å€¼ç±»å‹ï¼š</p><p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºé—°å¹´   </p></blockquote><p>å®šä¹‰æ–¹æ³•çš„è¯­æ³•?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¿”å›å€¼ç±»å‹ æ–¹æ³•åï¼ˆå‚æ•°åˆ—è¡¨ ï¼‰ï½›</span><br><span class="line">æ–¹æ³•ä½“   </span><br><span class="line">ï½</span><br><span class="line"><span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">    <span class="type">int</span> s=(<span class="number">1</span>+a)*a/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> s=num(<span class="number">100</span>);</span><br><span class="line">s=num(<span class="number">50</span>);</span><br></pre></td></tr></table></figure><blockquote><p>å½¢å‚å’Œå®å‚çš„åŒºåˆ«ï¼Ÿ</p><p>å½¢å‚ï¼šå®šä¹‰æ–¹æ³•æ—¶ä½¿ç”¨çš„å‚æ•°ï¼Œä¹Ÿå«å½¢å¼å‚æ•°   </p><p>å®å‚ï¼šè°ƒç”¨æ–¹æ³•ï¼Œä¼ é€’çš„å‚æ•°ï¼Œä¹Ÿå«å®é™…å‚æ•°   </p><p>ä¼ å‚çš„è¿‡ç¨‹å°±æ˜¯èµ‹å€¼   å³æŠŠå®å‚èµ‹ç»™å½¢å‚   </p></blockquote><p>return ç”¨æ³•</p><blockquote><p> 1.returnè¯­å¥ å¯ä»¥æ”¾åœ¨æ–¹æ³•ä½“ä¸­ï¼Œä»£è¡¨è¿”å›çš„æ„æ€   </p><p>2.å¦‚æœä¸€ä¸ªæ–¹æ³•ä¸­æœ‰return è¯­å¥ï¼Œreturn ä¸€å®šä½œä¸ºæœ€åä¸€æ¡è¯­å¥æ¥å­˜åœ¨   </p><p>3.return åçš„è¡¨è¾¾å¼çš„ç±»å‹ä¸€å®šè¦ä¸æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸€è‡´   </p><p>4.å¦‚æœæ–¹æ³•è¿”å›å€¼ç±»å‹ä¸ºvoid ,é‚£ä¹ˆå¯ä»¥çœç•¥return ,æˆ–è€…ç›´æ¥å†™return</p></blockquote><h3 id="å†…å­˜ç»“æ„"><a href="#å†…å­˜ç»“æ„" class="headerlink" title="å†…å­˜ç»“æ„"></a>å†…å­˜ç»“æ„</h3><p>ç•¥</p><h3 id="æ–¹æ³•çš„ä¼ å‚"><a href="#æ–¹æ³•çš„ä¼ å‚" class="headerlink" title="æ–¹æ³•çš„ä¼ å‚"></a>æ–¹æ³•çš„ä¼ å‚</h3><blockquote><p>pass by value:æŒ‰å€¼ä¼ é€’   </p><p>pass by ref:æŒ‰å¼•ç”¨ä¼ é€’   ï¼ˆå¼•ç”¨ç±»å‹ï¼‰</p></blockquote><h3 id="é‡è½½ï¼ˆoverloadï¼‰"><a href="#é‡è½½ï¼ˆoverloadï¼‰" class="headerlink" title="é‡è½½ï¼ˆoverloadï¼‰"></a>é‡è½½ï¼ˆoverloadï¼‰</h3><blockquote><p>æ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰ï¼šåŒä¸€ç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒï¼Œå‚æ•°åˆ—è¡¨ä¸åŒçš„ä¸€ç»„æ–¹æ³•å°±å«é‡è½½æ–¹æ³•   </p><p>è¾“å‡º   </p><p>â€‹       System.out.printlnEmpty();</p><p>â€‹       System.out.printlnString(â€œhelloâ€);</p><p>â€‹       System.out.printlnInt(8);</p><p>å‚æ•°åˆ—è¡¨çš„ä¸åŒä¸»è¦ä½“ç°åœ¨ä¸‰æ–¹é¢</p><p>1.æ•°é‡ä¸åŒ</p><p>2.ç±»å‹ä¸åŒ</p><p>3.é¡ºåºä¸åŒ   </p><p>å››ä»¶å¥—</p><p>1.ç†è§£é¢˜æ„ï¼Œè€ƒè™‘è¾¹ç•Œé—®é¢˜</p><p>2.æ‰¾å‡ºæ‰€æœ‰è§£</p><p>3.ç¼–å†™ä»£ç </p><p>4.æµ‹è¯•</p><p>leetcode</p></blockquote><h2 id="æ„é€ æ–¹æ³•åŠç»§æ‰¿"><a href="#æ„é€ æ–¹æ³•åŠç»§æ‰¿" class="headerlink" title="æ„é€ æ–¹æ³•åŠç»§æ‰¿"></a>æ„é€ æ–¹æ³•åŠç»§æ‰¿</h2><h3 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h3><blockquote><p>æ„é€ æ–¹æ³•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•<br>æ„é€ æ–¹æ³•ä¼šç»™å±æ€§èµ‹åˆå€¼<br>æ„é€ æ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨</p><p>æ„é€ æ–¹æ³•ä¸ç±»åŒå</p></blockquote><h3 id="é»˜è®¤çš„æ„é€ æ–¹æ³•"><a href="#é»˜è®¤çš„æ„é€ æ–¹æ³•" class="headerlink" title="é»˜è®¤çš„æ„é€ æ–¹æ³•"></a>é»˜è®¤çš„æ„é€ æ–¹æ³•</h3><blockquote><p>1.æ¯ä¸ªç±»éƒ½è‡³å°‘æœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¦‚æœä¸æ˜¾å¼çš„å®šä¹‰ï¼Œjavaç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºç±»åˆ›å»ºä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•   å³é»˜</p><p>è®¤çš„æ„é€ æ–¹æ³•</p><p>2.é»˜è®¤çš„æ„é€ æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œæ²¡æœ‰æ–¹æ³•ä½“   </p><p>3.å¦‚æœå¼€å‘è€…æ˜¾å¼çš„å®šä¹‰äº†æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆjavaç¼–è¯‘å™¨å°†ä¸ä¼šå†ç”Ÿæˆé»˜è®¤æ„é€ æ–¹æ³•   </p></blockquote><h3 id="æ„é€ æ–¹æ³•ä¸è¿”å›å€¼"><a href="#æ„é€ æ–¹æ³•ä¸è¿”å›å€¼" class="headerlink" title="æ„é€ æ–¹æ³•ä¸è¿”å›å€¼"></a>æ„é€ æ–¹æ³•ä¸è¿”å›å€¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Student(<span class="type">int</span> no,String name,<span class="type">int</span> age)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ„é€ æ–¹æ³•å‰é¢ä¸èƒ½åŠ void (æ·»åŠ åä¼šå˜æˆä¸€ä¸ªæ™®é€šæ–¹æ³•)</span></span><br><span class="line">(<span class="keyword">void</span>)Student()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤çš„æ„é€ æ–¹æ³•</p><h3 id="å°±è¿‘åŸåˆ™"><a href="#å°±è¿‘åŸåˆ™" class="headerlink" title="å°±è¿‘åŸåˆ™"></a>å°±è¿‘åŸåˆ™</h3><blockquote><p>å°±è¿‘åŸåˆ™ï¼šå½“è®¿é—®ä¸åŒä½œç”¨åŸŸåŒåå˜é‡æ—¶   å¯»æ‰¾æœ€è¿‘çš„åŒåå˜é‡</p></blockquote><h3 id="thiså…³é”®å­—"><a href="#thiså…³é”®å­—" class="headerlink" title="thiså…³é”®å­—"></a>thiså…³é”®å­—</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>ä»£è¡¨å½“å‰å¯¹è±¡çš„å±æ€§å¼•ç”¨   </span><br><span class="line"><span class="built_in">this</span> ç”¨æ³•ï¼š</span><br><span class="line">    <span class="built_in">this</span>.å±æ€§</span><br><span class="line">    <span class="built_in">this</span>.æ™®é€šæ–¹æ³•</span><br><span class="line">    <span class="built_in">this</span>().æ„é€ æ–¹æ³•</span><br><span class="line">       åªæœ‰åœ¨å…¶ä»–çš„æ„é€ æ–¹æ³•ä¸­æ‰èƒ½ä½¿ç”¨<span class="built_in">this</span>()æ¥è°ƒç”¨;</span><br><span class="line">       <span class="built_in">this</span>()å¿…é¡»ä½äºæ„é€ æ–¹æ³•ç¬¬ä¸€æ¡è¯­å¥;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>Person p&#x3D;new Person  ä¸€å…±åšäº†å‡ ä»¶äº‹</p><p>1,å¼€è¾Ÿçš„æ–°çš„ç©ºé—´</p><p>2,è°ƒç”¨æ„é€ æ–¹æ³•</p><p>3,è¿”å›å¼•ç”¨èµ‹å€¼ç»™p</p></blockquote><h3 id="åŒ¿åå—"><a href="#åŒ¿åå—" class="headerlink" title="åŒ¿åå—"></a>åŒ¿åå—</h3><blockquote><p>ä½œç”¨ï¼šå°†æ¯ä¸ªæ„é€ æ–¹æ³•ä¸­ç›¸åŒçš„ä»£ç å¯ä»¥å†™åœ¨åŒ¿åå—ä¸­   åŒ¿åå—ä¸­çš„ä»£ç ä¸€å®šæ˜¯åœ¨æ„é€ æ–¹æ³•ä¹‹å‰è°ƒç”¨ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¯­æ³•ï¼š</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//ä»£ç    </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å…³äºæ„é€ æ–¹æ³•çš„å°ç»“"><a href="#å…³äºæ„é€ æ–¹æ³•çš„å°ç»“" class="headerlink" title="å…³äºæ„é€ æ–¹æ³•çš„å°ç»“"></a>å…³äºæ„é€ æ–¹æ³•çš„å°ç»“</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Person p=<span class="keyword">new</span> <span class="title class_">Person</span>(); <span class="comment">//ä¸€å…±åšäº†ä¸‰ä»¶äº‹</span></span><br><span class="line"><span class="number">1.</span>åœ¨å †ä¸­å¼€è¾Ÿå†…å­˜ç©ºé—´</span><br><span class="line"><span class="number">2.</span>è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œä¸ºå±æ€§åˆä½¿åŒ–   </span><br><span class="line"><span class="number">3.</span>å°†å¼•ç”¨è¿”å›ç»™p;</span><br></pre></td></tr></table></figure><h2 id="åŒ…ç®¡ç†"><a href="#åŒ…ç®¡ç†" class="headerlink" title="åŒ…ç®¡ç†"></a>åŒ…ç®¡ç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ç…§ç‰‡   </span><br><span class="line">d:/ç…§ç‰‡/ç”·æœ‹å‹/ç”·æœ‹å‹<span class="number">1</span>   </span><br><span class="line">/</span><br><span class="line">è¯­æ³•æ ¼å¼</span><br><span class="line"><span class="keyword">package</span> com.huayu.oop;</span><br><span class="line">å¯¼åŒ…   </span><br><span class="line"><span class="keyword">import</span> com.huayu.oop.*;</span><br><span class="line"><span class="keyword">import</span> com.huayu.oop.Person;</span><br></pre></td></tr></table></figure><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><blockquote><p>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ç‹ä¸€ï¼Œå®ƒå¯ä»¥ç®€åŒ–ç±»çš„è®¾è®¡ï¼Œåˆ©ç”¨çš„åŸæœ‰çš„ç±»æ¥åˆ›å»ºæ–°çš„ç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å…³äºç»§æ‰¿çš„æ€»ç»“</p><p>1.javaä¸­ï¼Œåªæ”¯æŒç»§æ‰¿</p><p>2.å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥å¢åŠ æ–°çš„å±æ€§å’Œæ–¹æ³•</p><p>3.ä½¿ç”¨extendså…³é”®å­—æ¥ç»§æ‰¿</p><p>4.æ˜¯å¦å¯ä»¥ä½¿ç”¨ç»§æ‰¿ ï¼Œå¯ä»¥é€šè¿‡Instanceof æ¥åˆ¤æ–­</p></blockquote><h3 id="æ–¹æ³•é‡å†™"><a href="#æ–¹æ³•é‡å†™" class="headerlink" title="æ–¹æ³•é‡å†™"></a>æ–¹æ³•é‡å†™</h3><blockquote><p>æ–¹æ³•é‡å†™ï¼ˆoverride,overwriteï¼‰:åœ¨ç»§æ‰¿å…³ç³»ä¸‹ï¼Œå­ç±»è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•è¦†ç›–æ—¶ï¼Œè¦æ±‚æ–¹æ³•åï¼Œå‚æ•°ï¼Œè¿”å›å€¼éƒ½ç›¸åŒ</p></blockquote><h3 id="å…³äºç»§æ‰¿çš„å°ç»“"><a href="#å…³äºç»§æ‰¿çš„å°ç»“" class="headerlink" title="å…³äºç»§æ‰¿çš„å°ç»“"></a>å…³äºç»§æ‰¿çš„å°ç»“</h3><blockquote><p>1.çˆ¶ç±»æœ‰çš„ï¼Œå­ç±»ä¸€å®šæœ‰</p><p>2.çˆ¶ç±»æ²¡æœ‰çš„ï¼Œå­ç±»å¯ä»¥æ‰©å±•</p><p>3.çˆ¶ç±»æœ‰çš„ï¼Œå­ç±»å¯ä»¥æ›´æ”¹   </p></blockquote><h3 id="superå…³é”®å­—"><a href="#superå…³é”®å­—" class="headerlink" title="superå…³é”®å­—"></a>superå…³é”®å­—</h3><blockquote><p>superä»£è¡¨çˆ¶ç±»å¯¹è±¡çš„å¼•ç”¨<br>é€šè¿‡superå…³é”®å­—,å†å­ç±»ä¸­å¯ä»¥</p></blockquote><h2 id="å¤šæ€å’Œå°è£…"><a href="#å¤šæ€å’Œå°è£…" class="headerlink" title="å¤šæ€å’Œå°è£…"></a>å¤šæ€å’Œå°è£…</h2><blockquote><p>é¢å‘å¯¹è±¡çš„é«˜çº§ç‰¹æ€§   </p><p>å°è£…</p><p>ç»§æ‰¿ ï¼šå¤ç”¨</p><p>å¤šæ€</p></blockquote><h3 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h3><blockquote><p>å¤šæ€ï¼šåŒä¸€ç±»äº‹ç‰©ï¼Œå¯ä»¥æ‹¥æœ‰ä¸åŒçš„å½¢æ€</p><p>åŠ¨ç‰©ï¼šåƒï¼Œå–ï¼Œè¡Œèµ°</p><p>ç‹—ï¼š</p><p>çŒ«ï¼š</p><p>è›‡ï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ç±»çš„å¯¹è±¡å¯ä»¥æ›¿ä»£çˆ¶ç±»çš„å¯¹è±¡è¿›è¡Œä½¿ç”¨</span></span><br><span class="line">Student s=<span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">Person p=s;</span><br><span class="line">çˆ¶ç±» s=<span class="keyword">new</span> å­ç±»</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘æ—¶ç±»å‹"><a href="#ç¼–è¯‘æ—¶ç±»å‹" class="headerlink" title="ç¼–è¯‘æ—¶ç±»å‹"></a>ç¼–è¯‘æ—¶ç±»å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“æˆ‘ä»¬ä½¿ç”¨å¤šæ€æ—¶ï¼Œå®šä¹‰å˜é‡æ—¶ä½¿ç”¨çš„ç±»å‹ç§°ä¸ºç¼–è¯‘æ—¶ç±»å‹   æˆ‘ä»¬åœ¨ä½¿ç”¨æ–¹æ³•å’Œå±æ€§æ—¶ï¼Œåªèƒ½ä½¿ç”¨ç¼–è¯‘æ—¶ç±»å‹</span></span><br><span class="line"><span class="comment">//æä¾›çš„å±æ€§å’Œæ–¹æ³•   </span></span><br><span class="line">Person p=<span class="keyword">new</span> <span class="title class_">Student</span>();<span class="comment">//æ­¤æ—¶ï¼Œç¼–è¯‘æ—¶ç±»å‹æ˜¯Person   </span></span><br><span class="line">Animal a=<span class="keyword">new</span> <span class="title class_">Dog</span>(); <span class="comment">//ç¼–è¯‘æ—¶ç±»å‹æ˜¯Animal</span></span><br><span class="line">a=net <span class="title function_">Cat</span><span class="params">()</span>;</span><br><span class="line">a=<span class="keyword">new</span> <span class="title class_">Fish</span>();</span><br><span class="line">a=<span class="keyword">new</span> <span class="title class_">Bird</span>();</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œæ—¶ç±»å‹"><a href="#è¿è¡Œæ—¶ç±»å‹" class="headerlink" title="è¿è¡Œæ—¶ç±»å‹"></a>è¿è¡Œæ—¶ç±»å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“æˆ‘ä»¬è°ƒç”¨å¤šæ€çš„æ–¹æ³•æ—¶ï¼Œæ‰§è¡ŒæœŸé—´ï¼Œè°ƒç”¨çš„æ˜¯è¿è¡Œæ—¶ç±»å‹çš„æ–¹æ³•   </span></span><br><span class="line">Animal a=<span class="keyword">new</span> <span class="title class_">Dog</span>(); <span class="comment">//ç¼–è¯‘æ—¶ç±»å‹æ˜¯Animalï¼Œè¿è¡Œæ—¶ç±»å‹æ˜¯Dog</span></span><br><span class="line">a=net <span class="title function_">Cat</span><span class="params">()</span>; <span class="comment">//ç¼–è¯‘æ—¶ç±»å‹æ˜¯Animalï¼Œè¿è¡Œæ—¶ç±»å‹æ˜¯Cat</span></span><br><span class="line">a=<span class="keyword">new</span> <span class="title class_">Fish</span>(); <span class="comment">//ç¼–è¯‘æ—¶ç±»å‹æ˜¯Animalï¼Œè¿è¡Œæ—¶ç±»å‹æ˜¯Fish</span></span><br><span class="line">a=<span class="keyword">new</span> <span class="title class_">Bird</span>(); <span class="comment">//ç¼–è¯‘æ—¶ç±»å‹æ˜¯Animalï¼Œè¿è¡Œæ—¶ç±»å‹æ˜¯Bird</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h3><blockquote><p>downcast:å‘ä¸‹è½¬å‹</p><p>upcast:å‘ä¸Šè½¬å‹</p><p>å‘ä¸Šè½¬æ¢ï¼šç›´æ¥è½¬æ¢æ— é£é™©<br>å‘ä¸‹è½¬æ¢ï¼šæœ‰é£é™©</p><p>ä¾‹å¦‚å°†ï¼ŒAnimalè½¬æˆDogå°±æ˜¯å‘ä¸‹è½¬å‹ï¼Œå‘ä¸‹è½¬å‹æœ‰é£é™©ï¼Œå»ºè®®è½¬å‹å‰ï¼Œä½¿ç”¨instanceofæ¥åˆ¤æ–­   å¦åˆ™å¯èƒ½</p><p>ä¼šäº§ç”ŸClassCastExceptionï¼ˆç±»å‹è½¬æ¢å¼‚å¸¸ï¼‰ å¼‚å¸¸   </p></blockquote><h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><blockquote><p>javaä¸­ï¼Œå¤„å¤„çš†å°è£…   ä¸»è¦è¡¨ç°åœ¨ä¸‰æ–¹é¢ï¼Ÿ</p><p>1.ç±»å°±æ˜¯ä¸€ä¸ªå°è£…ä½“ï¼Œç±»ä¸­å°è£…çš„å±æ€§ï¼Œæ–¹æ³•   </p><p>2.æ–¹æ³•ä¹Ÿæ˜¯ä¸€ç§å°è£…   ï¼ˆæ–¹æ³•ä¸­å°è£…çš„æ˜¯ä»£ç ï¼‰</p><p>Random r&#x3D;new Random();</p><p>r.nextInt(10);</p><p>3.é€šè¿‡è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥æ”¹å˜è®¿é—®æƒé™</p></blockquote><h3 id="è®¿é—®ä¿®é¥°ç¬¦"><a href="#è®¿é—®ä¿®é¥°ç¬¦" class="headerlink" title="è®¿é—®ä¿®é¥°ç¬¦"></a>è®¿é—®ä¿®é¥°ç¬¦</h3><table><thead><tr><th align="center"></th><th align="center">ç±»å†…éƒ¨</th><th align="center">åŒåŒ…</th><th align="center">ä¸åŒåŒ…çš„å­ç±»</th><th align="center">ä¸åŒåŒ…çš„éå­ç±»</th></tr></thead><tbody><tr><td align="center">private</td><td align="center">æ˜¯</td><td align="center">å¦</td><td align="center">å¦</td><td align="center">å¦</td></tr><tr><td align="center">default</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td><td align="center">å¦</td><td align="center">å¦</td></tr><tr><td align="center">protected</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td><td align="center">å¦</td></tr><tr><td align="center">public</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td></tr></tbody></table><h3 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h3><h4 id="final"><a href="#final" class="headerlink" title="final"></a>final</h4><blockquote><p>finalä¿®é¥°å±æ€§ï¼Œç±»ï¼Œæ–¹æ³•<br>å®ƒå¯ä»¥ä¿®é¥°ï¼Œå±æ€§ï¼Œå˜é‡ï¼Œå‚æ•°ï¼Œåªèƒ½èµ‹å€¼ä¸€æ¬¡ ä¸èƒ½è¢«ä¿®æ”¹<br>ä¿®é¥°ç±»ï¼šä¸èƒ½è¢«ç»§æ‰¿<br>ä¿®é¥°æ–¹æ³•ï¼šä¸èƒ½è¢«é‡å†™</p></blockquote><h4 id="static"><a href="#static" class="headerlink" title="static"></a>static</h4><blockquote><p>staticä¿®é¥°å±æ€§ï¼Œè¯´æ˜å½“å‰å±æ€§æ˜¯çš„ç±»å±æ€§ï¼Œåªå­˜åœ¨ä¸€ä»½æ•´ä¸ªç±»å…±äº«<br>å¹¶ä¸”å¯ä»¥ç›´æ¥é€šè¿‡ç±»è®¿é—®ã€‚<br>å±æ€§ï¼šç±»å±æ€§   ç±»åï¼Œå±æ€§å<br>æ–¹æ³•ï¼šç±»æ–¹æ³•   </p><p>ç¤ºä¾‹   </p><p>å®šä¹‰ä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œä¸ºå­¦ç”Ÿè‡ªåŠ¨ç”Ÿæˆå­¦å·ï¼Œå³åˆ›å»ºçš„ç¬¬ä¸€ä¸ªå­¦ç”Ÿï¼Œå­¦å·æ˜¯1ï¼Œç¬¬äºŒä¸ªå­¦ç”Ÿï¼Œå­¦å·æ˜¯2   </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> stuno;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦å·ï¼š&quot;</span> + stuno + <span class="string">&quot;,å§“åï¼š&quot;</span> + name + <span class="string">&quot;,age:&quot;</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ç‹åƒé‡‘&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ç‹ä¸‡ä¸¤&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ç‹å¤§é”¤&quot;</span>, <span class="number">19</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ–¹æ³•ï¼š</p><p>1.è¢«staticä¿®é¥°çš„æ–¹æ³•è¢«ç§°ä¸ºç±»æ–¹æ³•ï¼Œè°ƒç”¨ç±»æ–¹æ³•æ—¶æ— é¡»åˆ›å»ºå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ ç±»å.æ–¹æ³•å()æ¥è°ƒç”¨   </p><p>2.åœ¨staticæ–¹æ³•ä¸­ï¼Œåªèƒ½å®ç°é™æ€æˆå‘˜ï¼Œä¸èƒ½ä½¿ç”¨éé™æ€æˆå‘˜   </p><p>3.åœ¨staticæ–¹æ³•ä¸­ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨this,superå…³é”®å­—   </p><p>static è¿”å›å€¼ç±»å‹ æ–¹æ³•å(){</p><p>&#x2F;&#x2F;æ–¹æ³•ä½“   </p><p>}</p></blockquote><h4 id="é™æ€å—"><a href="#é™æ€å—" class="headerlink" title="é™æ€å—"></a>é™æ€å—</h4><blockquote><p>staticå—</p><p>è¯­æ³•ï¼š</p><p>static{</p><p>&#x2F;&#x2F;ä»£ç    </p><p>}</p><p>ä»€ä¹ˆæ—¶æ‰§è¡Œï¼šå½“ç±»åŠ è½½ï¼Œåˆä½¿åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨é™æ€å—ä¸­çš„ä»£ç ï¼Œå› ä¸ºæ¯ä¸ªç±»åªåŠ è½½ä¸€æ¬¡ï¼Œå› æ­¤static{}åª</p><p>è¢«è°ƒç”¨ä¸€æ¬¡   </p></blockquote><blockquote><p>åŠ è½½é¡ºåº<br>é™æ€æˆå‘˜å’Œstaticå—<br>ğŸ‘‡<br>æ™®é€šæˆå‘˜å’Œéstaticå—<br>ğŸ‘‡<br>æ„é€ æ–¹æ³•</p></blockquote><blockquote><p>åŠ è½½é¡ºå¯»<br>çˆ¶ç±»é™æ€æˆå‘˜å’Œstaticå—<br>ğŸ‘‡<br>å­ç±»é™æ€æˆå‘˜å’Œstaticå—<br>ğŸ‘‡<br>çˆ¶ç±»æ™®é€šæˆå‘˜å’Œéstaticå—<br>ğŸ‘‡<br>çˆ¶ç±»æ„é€ æ–¹æ³•<br>ğŸ‘‡<br>å­ç±»æ™®é€šæˆå‘˜å’Œéstaticå—<br>ğŸ‘‡<br>å­ç±»æ„é€ æ–¹æ³•</p></blockquote><h4 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h4><blockquote><p>è®¾è®¡æ¨¡å¼ï¼šDesign partten</p><p>è§£å†³æŸäº›è®¾è®¡é—®é¢˜æ‰€é‡‡ç”¨çš„å¥—è·¯ï¼Œæœ‰ç‚¹ç±»ä¼¼äºä¸‰åå…­è®¡   </p><p>ç›®å‰è®¾è®¡æ¨¡å¼ä¸€å…±æœ‰23ç§   </p><p>ä¸€å…±åˆ†ä¸ºä¸‰ç±»   </p><p>1.åˆ›å»ºå‹</p><p>2.ç»“æ„å‹</p><p>3.è¡Œä¸ºå‹</p></blockquote><p><strong>å•ä¾‹æ¨¡å¼ï¼š</strong>Singleton</p><blockquote><p>è§£å†³çš„é—®é¢˜ï¼šæŸä¸ªç±»ï¼Œåªå…è®¸äº§ç”Ÿå”¯ä¸€çš„å®ä¾‹   </p><p>è§£å†³çš„æ–¹æ³•</p><p>1.å°†æ„é€ æ–¹æ³•å®šä¹‰æˆç§æœ‰   </p><p>2.å®šä¹‰ä¸€ä¸ªåŒç±»å‹çš„é™æ€çš„å±æ€§   </p><p>3.å®šä¹‰ä¸€ä¸ªpublicçš„é™æ€æ–¹æ³•ï¼Œç”¨æ¥è¿”å›å”¯ä¸€çš„å®ä¾‹   </p></blockquote><p><strong>å•ä¾‹æ¨¡å¼ çš„ä¸¤ç§ç±»å‹</strong></p><blockquote><p>1.é¥¿æ±‰å¼   </p><p>2.æ‡’æ±‰å¼   ï¼ˆlazyï¼‰</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton s=<span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"><span class="comment">/*String name;</span></span><br><span class="line"><span class="comment">String time;*/</span></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">/*System.out.println(&quot;åˆ›å»ºå•ä¾‹æ¨¡å¼: &quot;);</span></span><br><span class="line"><span class="comment">System.out.println(&quot;è¿›ç¨‹åˆ†åˆ«æœ‰&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(&quot;1&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(&quot;2&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(&quot;3&quot;);</span></span><br><span class="line"><span class="comment">System.out.println(&quot;4&quot;);*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getinstance</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*public void close() &#123;</span></span><br><span class="line"><span class="comment">System.out.println(&quot;å…³é—­ç¨‹åº&quot;);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br></pre></td></tr></table></figure><h1 id="æŠ½è±¡ç±»ä¸æ¥å£"><a href="#æŠ½è±¡ç±»ä¸æ¥å£" class="headerlink" title="æŠ½è±¡ç±»ä¸æ¥å£"></a><strong>æŠ½è±¡ç±»ä¸æ¥å£</strong></h1><h2 id="abstract"><a href="#abstract" class="headerlink" title="abstract"></a>abstract</h2><blockquote><p>abstractæ˜¯ä¸€ä¸ªä¿®é¥°ç¬¦</p><p>å¯ä»¥ä¿®é¥°æ–¹æ³•å’Œç±»<br>ç±»ï¼šæŠ½è±¡ç±»ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–<br>æ–¹æ³•ï¼šæŠ½è±¡æ–¹æ³•ï¼Œè®©å­ç±»é‡å†™   å¦‚æœå­ç±»ä¸é‡å†™ï¼Œå­ç±»æ–¹æ³•ä¹Ÿæ˜¯æŠ½è±¡æ–¹æ³•<br>æŠ½è±¡æ–¹æ³•æ²¡æœ‰å…·ä½“çš„å®ç°   </p><p>æŠ½è±¡æ–¹æ³•åªæœ‰å®šä¹‰ï¼Œæ²¡æœ‰æ–¹æ³•çš„å®ç°<br>å¦‚æœä¸€ä¸ªç±»æœ‰æŠ½è±¡æ–¹æ³•ï¼Œé‚£è¿™ä¸ªç±»ä¸€å®šæ˜¯æŠ½è±¡ç±»<br>å¦‚æœå­ç±»ä¸é‡å†™æ–¹æ³•ï¼Œé‚£è¿™ä¸ªå­ç±»è¿˜æ˜¯æŠ½è±¡ç±»</p></blockquote><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><blockquote><p>1.javaä¸­ä¸æ”¯æŒç»§æ‰¿ï¼Œä½†é€šè¿‡æ¥å£ï¼Œå¯ä»¥å®ç°å¤šç»§æ‰¿çš„æ•ˆæœ   </p><p>2.æ¥å£æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æŠ½è±¡ç±»   æ¥å£ä¸­åªèƒ½æœ‰æŠ½è±¡æ–¹æ³•å’Œpublic static finalå±æ€§   </p><p>3.æ¥å£ä½¿ç”¨ interfaceæ¥å®šä¹‰   </p></blockquote><h3 id="æ¥å£ä¸ç±»"><a href="#æ¥å£ä¸ç±»" class="headerlink" title="æ¥å£ä¸ç±»"></a>æ¥å£ä¸ç±»</h3><blockquote><p>æ¥å£é€šå¸¸ä»£è¡¨ä¸€ç§èƒ½åŠ›ï¼ŒæŠ½è±¡ç±»é€šå¸¸ä»£è¡¨ä¸€ä¸ªæ¦‚å¿µ   </p><p>æ¥å£ï¼šable:</p><p>ä¼šé£çš„</p><p>å‘å…‰çš„</p><p>åƒè‚‰çš„</p><p>æŠ½è±¡ç±»ï¼š</p><p>åŠ¨ç‰©</p><p>äº¤é€šå·¥å…·   </p><p>å›¾å½¢   </p><p>æ‰¾ä½ å¦¹   </p><p>å‘å…‰   </p><p>ä¼šé£çš„   </p><p>å¸¦å°–çš„   </p><p>äº¤é€šå·¥å…·   </p><p>é£æœº   </p><p>ä¼šé£çš„ a&#x3D;new Plan();</p><p>&#x3D;new å¤©ä½¿();</p><p>&#x3D;new è™è ();</p><p>&#x3D;new è¤ç«è™«();</p></blockquote><h3 id="æ¥å£ä¸æŠ½è±¡ç±»çš„åŒºåˆ«"><a href="#æ¥å£ä¸æŠ½è±¡ç±»çš„åŒºåˆ«" class="headerlink" title="æ¥å£ä¸æŠ½è±¡ç±»çš„åŒºåˆ«"></a><strong>æ¥å£ä¸æŠ½è±¡ç±»çš„åŒºåˆ«</strong></h3><blockquote><p>1.æ¥å£æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æŠ½è±¡ç±»ï¼Œåªæœ‰public static final å±æ€§åŠæŠ½è±¡æ–¹æ³•   </p><p>2.ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªæ¥å£   </p><p>3.ç±»å’Œç±»ä¹‹é—´æ˜¯å•ç»§æ‰¿ ï¼Œä½†æ¥å£å’Œæ¥å£ä¹‹é—´å¯ä»¥å¤šç»§æ‰¿</p><p>interface C extends A,B</p><p>4.æŠ½è±¡ç±»é€šå¸¸è¡¨ç¤ºä¸€ä¸ªæ¦‚å¿µï¼Œè€Œæ¥å£åˆ™è¡¨ç¤ºä¸€ç§èƒ½åŠ›   </p></blockquote><h3 id="ç±»å’Œç±»ä¹‹é—´çš„å…³ç³»"><a href="#ç±»å’Œç±»ä¹‹é—´çš„å…³ç³»" class="headerlink" title="ç±»å’Œç±»ä¹‹é—´çš„å…³ç³»"></a><strong>ç±»å’Œç±»ä¹‹é—´çš„å…³ç³»</strong></h3><blockquote><p>ä¸»è¦æœ‰ä¸‰ç§   </p><p>1.ç»§æ‰¿</p><p>2.å…³è”</p><p>3.ä¾èµ–   </p><p>å…³è”åˆå¯ä»¥ç»†åˆ†ä¸º</p><p>1.èšåˆ</p><p>2.ç»„åˆ</p></blockquote><h4 id="ç»§æ‰¿-1"><a href="#ç»§æ‰¿-1" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h4><blockquote><p>å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•   </p><p>åˆ¤æ–­ä¸¤ä¸ªç±»æ˜¯å¦æ˜¯ç»§æ‰¿å…³ç³» is å³ å­ç±» is çˆ¶ç±»   </p><p>ä»£ç ï¼š class å­ç±» extends çˆ¶ç±»ï½›ï½</p></blockquote><h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><blockquote><p>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£   </p><p>ä»£ç ï¼š class ç±» implements æ¥å£   </p></blockquote><h4 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h4><blockquote><p>ä¸¤ä¸ªç±»ä¹‹é—´å…³ç³»æ˜¯ä¸´æ—¶å‘ç”Ÿçš„ï¼Œå³åšæŸä¸€ä»¶äº‹æ—¶æ‰äº§ç”Ÿè”ç³»ï¼Œè¿™ç§å…³ç³»å°±æ˜¯ä¾èµ–   </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">åˆ¤æ–­æ–¹æ³• ï¼š use;</span><br><span class="line">ä»£ç ï¼š</span><br><span class="line">ä¸¤ç§å½¢å¼</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">        Spoon s=<span class="keyword">new</span> <span class="title class_">Spoon</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attack</span><span class="params">(Weapon w)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…³è”"><a href="#å…³è”" class="headerlink" title="å…³è”"></a>å…³è”</h4><blockquote><p>å…³è”ï¼šä¸€ç§å¼ºä¾èµ–ï¼Œæ¯”ä¾èµ–çš„å…³ç³»æ›´å¼ºï¼Œæ˜¯ä¸€ç§ç¨³å®šçš„å…³ç³»   </p><p>åˆ¤æ–­ï¼š has</p><p>ä»£ç ï¼šä½œä¸ºåˆ«å¤–ä¸€ä¸ªç±»çš„å±æ€§æ¥å­˜åœ¨   </p></blockquote><h4 id="èšåˆ"><a href="#èšåˆ" class="headerlink" title="èšåˆ"></a>èšåˆ</h4><blockquote><p>èšåˆæ˜¯å…³è”çš„ä¸€ç§ç‰¹ä¾‹ï¼Œä½“ç°æ•´ä½“å’Œå±€éƒ¨çš„å…³ç³»    æ•´ä½“å’Œå±€éƒ¨ä¹‹é—´æ²¡æœ‰å…±åŒçš„ç”Ÿå‘½å‘¨æœŸ   </p></blockquote><h4 id="ç»„åˆ"><a href="#ç»„åˆ" class="headerlink" title="ç»„åˆ"></a>ç»„åˆ</h4><blockquote><p>èšåˆæ˜¯å…³è”çš„ä¸€ç§ç‰¹ä¾‹ï¼Œä½“ç°æ•´ä½“å’Œå±€éƒ¨çš„å…³ç³»    æ•´ä½“å’Œå±€éƒ¨ä¹‹é—´æœ‰å…±åŒçš„ç”Ÿå‘½å‘¨æœŸ   </p></blockquote><h4 id="è®¾è®¡æ€æƒ³"><a href="#è®¾è®¡æ€æƒ³" class="headerlink" title="è®¾è®¡æ€æƒ³"></a>è®¾è®¡æ€æƒ³</h4><blockquote><p>é«˜å†…èšï¼Œä½è€¦åˆ   </p></blockquote><h3 id="å†…éƒ¨ç±»"><a href="#å†…éƒ¨ç±»" class="headerlink" title="å†…éƒ¨ç±»"></a>å†…éƒ¨ç±»</h3><p>å¯ä»¥å°†ç±»çš„å®šä¹‰æ”¾åœ¨å…¶å®ƒçš„ç±»ä¸­ï¼Œè¿™ç§ç±»å«å†…éƒ¨ç±»   </p><p>å†…éƒ¨ç±»ä¸€å…±æœ‰å››ç§ï¼Œåˆ†åˆ«æ˜¯</p><ol><li><p>é™æ€å†…éƒ¨ç±»</p></li><li><p>æˆå‘˜å†…éƒ¨ç±»</p></li><li><p>åŒ¿åå†…éƒ¨ç±»</p></li><li><p>æ–¹æ³•å†…éƒ¨ç±»</p></li></ol><h4 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h4><p>é™æ€å†…éƒ¨ç±»å¯ä»¥ä½¿ç”¨å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> a=<span class="number">9</span>;</span><br><span class="line">    String name=<span class="string">&quot;äºº&quot;</span>;</span><br><span class="line">    <span class="comment">//é™æ€å†…éƒ¨ç±»</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">B</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getB</span><span class="params">()</span> &#123;System.out.println(a);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestA</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»çš„å¯¹è±¡   </span></span><br><span class="line">        A.B b=<span class="keyword">new</span> <span class="title class_">A</span>.B();</span><br><span class="line">        b.getB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æˆå‘˜å†…éƒ¨ç±»"><a href="#æˆå‘˜å†…éƒ¨ç±»" class="headerlink" title="æˆå‘˜å†…éƒ¨ç±»"></a>æˆå‘˜å†…éƒ¨ç±»</h4><p>åœ¨ä¸€ä¸ªç±»çš„å†…éƒ¨å®šä¹‰å¦å¤–ä¸€ä¸ªç±»ï¼Œå†…éƒ¨ç±»å¯ä»¥ä½¿ç”¨å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    String name=<span class="string">&quot;outer&quot;</span>;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Inner</span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getInner</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestA</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªå¤–éƒ¨ç±»çš„å¯¹è±¡   </span></span><br><span class="line">        Outer o=<span class="keyword">new</span> <span class="title class_">Outer</span>();</span><br><span class="line"><span class="comment">//åˆ›å»ºoçš„å†…éƒ¨ç±»å¯¹è±¡</span></span><br><span class="line">        Outer.Inner i=o.<span class="keyword">new</span> <span class="title class_">Inner</span>();</span><br><span class="line">        i.getInner();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•å†…éƒ¨ç±»"><a href="#æ–¹æ³•å†…éƒ¨ç±»" class="headerlink" title="æ–¹æ³•å†…éƒ¨ç±»"></a>æ–¹æ³•å†…éƒ¨ç±»</h4><h4 id="åŒ¿åå†…éƒ¨ç±»"><a href="#åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="åŒ¿åå†…éƒ¨ç±»"></a>åŒ¿åå†…éƒ¨ç±»</h4><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œä½¿ç”¨è¿™ä¸ªå†…éƒ¨ç±»æ—¶ï¼Œåªå®ä¾‹ä¸€ä¸ªå¯¹è±¡   æ­¤æ—¶ï¼Œå°±å¯ä»¥å°†å®šä¹‰ç±»å’Œå®ä¾‹åŒ–</p><p>å¯¹è±¡ï¼Œä¸¤ä¸ªæ“ä½œåˆåˆ°ä¸€èµ·ï¼Œè¿™ä¸ªå°±æ˜¯åŒ¿åå†…éƒ¨ç±»</p><p>ä½¿ç”¨åŒ¿åç±»çš„æ¡ä»¶æ˜¯ï¼Œæ­¤ç±»å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£æˆ–ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>å®šä¹‰ä¸€ä¸ªç±»</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>()&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">2.</span>åªå®ä½“åŒ–ä¸€æ¬¡</span><br><span class="line">A a=<span class="keyword">new</span> <span class="title class_">A</span>();</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Usb u=<span class="keyword">new</span> <span class="title class_">Usb</span>() &#123;</span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">     <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;è¿™å°±æ˜¯åŒ¿åå†…éƒ¨ç±»ï¼Œçœ‹ç€æœ‰ç‚¹ä¸èˆ’æœã€‚&quot;</span>;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;;</span><br><span class="line">c.connect(u);</span><br></pre></td></tr></table></figure><h1 id="å¸¸ç”¨ç±»"><a href="#å¸¸ç”¨ç±»" class="headerlink" title="å¸¸ç”¨ç±»"></a>å¸¸ç”¨ç±»</h1><h2 id="langåŒ…"><a href="#langåŒ…" class="headerlink" title="langåŒ…"></a>langåŒ…</h2><blockquote><p>langæ˜¯javaä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„åŒ…ï¼Œå…¨ç§°æ˜¯java.lang  æ­¤åŒ…ä¸éœ€è¦æ‰‹åŠ¨å¯¼å…¥ï¼Œå³å¯ä½¿ç”¨æ­¤åŒ…ä¸­çš„æ‰€æœ‰ç±»   </p><p>æ­¤åŒ…ä¸­å¸¸ç”¨çš„ç±»æœ‰   </p><p>System</p><p>Object</p><p>åŒ…è£…ç±»</p><p>Math</p><p>å­—ç¬¦ä¸²   </p><p>Threadç­‰</p></blockquote><h2 id="Systemç±»"><a href="#Systemç±»" class="headerlink" title="Systemç±»"></a>Systemç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//System ç±»åŒ…å«ä¸€äº›æœ‰ç”¨çš„ç±»å­—æ®µå’Œæ–¹æ³•ã€‚å®ƒä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚ finalä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿</span></span><br><span class="line"><span class="comment">//å¸¸ç”¨æ–¹æ³•ï¼š</span></span><br><span class="line">System.out.println();</span><br><span class="line">System.err.println();</span><br><span class="line">System.in;</span><br><span class="line">System.exit(<span class="number">0</span>);</span><br><span class="line">System.arraycopy()</span><br><span class="line">System.gc()</span><br><span class="line">System.currentTimeMillis()</span><br></pre></td></tr></table></figure><h2 id="åŒ…è£…ç±»"><a href="#åŒ…è£…ç±»" class="headerlink" title="åŒ…è£…ç±»"></a>åŒ…è£…ç±»</h2><blockquote><p>java,ä¸ºæ¯ä¸ªåŸºæœ¬æ•°æ®ç±»å‹éƒ½å®šä¹‰äº†ä¸ä¹‹å¯¹å¯¹å°±çš„ç±»ï¼Œè¿™äº›ç±»å°±å«åŒ…è£…ç±»   </p><p>Boolean</p><p>Byte,Short,Integer,Long</p><p>Float,Double</p><p>Character</p><p>åŒ…è£…ç±»ä¸åŸºæœ¬æ•°æ®ç±»å‹æ˜¯å¯ä»¥ç›¸äº’è½¬æ¢çš„   </p><p>åŸºæœ¬æ•°æ®ç±»å‹-ã€‹åŒ…è£…ç±» ï¼šè£…åŒ…</p><p>åŒ…è£…-ã€‹åŸºæœ¬æ•°æ®ç±»å‹ï¼š æ‹†åŒ…   </p></blockquote><h2 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h2><blockquote><p>Mathç±»ï¼šåŒ…å«äº†æ‰€æœ‰ç”¨äºå‡ ä½•å’Œä¸‰è§’çš„æµ®ç‚¹è¿ç®—æ–¹æ³•ã€‚Mathç±»æ˜¯finalçš„ï¼Œå…¶ä¸­æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯staticçš„ã€‚</p></blockquote><h2 id="objectç±»"><a href="#objectç±»" class="headerlink" title="objectç±»"></a>objectç±»</h2><blockquote><p>Objectç±»æ˜¯æ‰€æœ‰ç±»çš„ç±»çš„çˆ¶ç±»   æ­¤ç±»ä¸­ä¸‹å®šä¹‰æ‰€æœ‰ç±»éƒ½æ‹¥æœ‰çš„æ–¹æ³•   </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">equals():æ¯”è¾ƒ</span><br><span class="line">toString():è½¬æˆå­—ç¬¦ä¸²</span><br><span class="line">hashcode():å“ˆå¸Œç </span><br><span class="line">getClass():è·å¾—å½“å‰å¯¹è±¡çš„ç±»   </span><br><span class="line">clone():å…‹éš†   </span><br><span class="line">finalize():åƒåœ¾å›æ”¶å‰æ‰§è¡Œçš„æ–¹æ³•   </span><br><span class="line">notify()</span><br><span class="line">notifyAll();</span><br><span class="line">wait();</span><br></pre></td></tr></table></figure><h3 id="hashcodeæ–¹æ³•"><a href="#hashcodeæ–¹æ³•" class="headerlink" title="hashcodeæ–¹æ³•"></a>hashcodeæ–¹æ³•</h3><blockquote><p>hashcodeæ˜¯ä¸€ä¸ªintå€¼   </p><p>å³å¯å°†ä»»ä½•é•¿åº¦çš„å¯¹è±¡è½¬æ¢æˆå›ºå®šé•¿åº¦çš„æ•°å­—   </p><p>hashcodeçš„åå®š   </p><p>1.å¦‚ä¸€ä¸ªå¯¹è±¡ä¸æ”¹å˜ï¼Œé‚£ä¹ˆå¤šæ¬¡è°ƒç”¨hashcode()æ–¹æ³•ï¼Œè¿”å›çš„ç»“æœåº”è¯¥ç›¸åŒ   </p><p>2.å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼ˆequals()ï¼‰ï¼Œé‚£ä¹ˆä¸¤ä¸ªå¯¹è±¡çš„hashcode()ä¸€å®šç›¸ç­‰</p><p>3.å¦‚æœä¸¤å¯¹è±¡ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆhashcodeä¹Ÿæœ‰å¯èƒ½ç›¸ç­‰ï¼Œè®¾è®¡æ—¶ï¼Œå°½é‡ä¸ç›¸ç­‰   </p></blockquote><h3 id="equalsæ–¹æ³•"><a href="#equalsæ–¹æ³•" class="headerlink" title="equalsæ–¹æ³•"></a>equalsæ–¹æ³•</h3><blockquote><p>boolean equals(Object obj);</p><p>å››ä¸ªç‰¹æ€§   </p><p>1.è‡ªåæ€§:a.equals(a);  true</p><p>2.å¯¹ç§°æ€§:a.equals(b)&#x3D;&#x3D;b.equals(a);</p><p>3.ä¼ é€’æ€§:a.equals(b)&#x3D;true,b.equals(c)&#x3D;true,é‚£ä¹ˆ a.equals(c)&#x3D;true</p><p>4.ä¸€è‡´æ€§:a.equasl(b)çš„å€¼ï¼Œå¤šæ¬¡è°ƒç”¨æ—¶ï¼Œåº”è¯¥ç›¸åŒ   ï¼ˆå‰ææ˜¯ï¼Œaå’Œbéƒ½ä¸æ”¹å˜ï¼‰</p><p>å¦å¤– a.equals(null),æ°¸è¿œä¸ºfalse</p></blockquote><h3 id="toStringæ–¹æ³•"><a href="#toStringæ–¹æ³•" class="headerlink" title="toStringæ–¹æ³•"></a><em>toString</em>æ–¹æ³•</h3><blockquote><p>å°†å¯¹è±¡è½¬æˆString   </p><p>æ³¨æ„ï¼š</p><p>1.å¦‚æœä¸é‡å†™ï¼Œé‚£ä¹ˆå°†ä¼šè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œå†…å®¹æ˜¯ ç±»å@hashcode()çš„åå…­è¿›åˆ¶   </p><p>2.å½“è°ƒç”¨System.out.println(s)æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨s.toString()æ–¹æ³•   </p></blockquote><h3 id="getClass-æ–¹æ³•"><a href="#getClass-æ–¹æ³•" class="headerlink" title="**getClass()**æ–¹æ³•"></a>**getClass()**æ–¹æ³•</h3><blockquote><p>è·å¾—å¯¹è±¡çš„ç±»   Class å³ï¼Œæ‰€ç”¨åŒç±»å‹çš„å¯¹è±¡è¿”å›çš„æ˜¯åŒä¸€ä¸ªç±»   </p></blockquote><h3 id="String-ç±»"><a href="#String-ç±»" class="headerlink" title="String ç±»"></a>String ç±»</h3><blockquote><p>å­—ç¬¦ä¸²   Javaæ˜¯å¸¸ç”¨çš„ç±»<br>å­—ç¬¦ä¸²çš„ç‰¹ç‚¹<br>1.å­—ç¬¦ä¸²æ˜¯å¸¸é‡ï¼Œä¸èƒ½æ”¹å˜<br>2.ä¸ºäº†æå‡ä½¿ç”¨ç‡ï¼Œjavaå¯¹å­—ç¬¦ä¸²è¿›è¡Œäº†ä¼˜åŒ–å¤„ç†ï¼Œå³å­—ç¬¦ä¸²æ± ï¼ˆString Poolï¼‰</p></blockquote><p>å¸¸ç”¨çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">length</span><span class="params">()</span>:è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦</span><br><span class="line"><span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(<span class="type">int</span>)</span>:è¿”å›æŸä¸ªå­—ç¬¦ä½äºä¸²ä¸­çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰</span><br><span class="line"><span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(String)</span>:æŸ¥æ‰¾æœ€åä¸€ä¸ªæŒ‡å®šå­ä¸²çš„ä½ç½®   </span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>:åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">startsWith</span><span class="params">(String)</span>:æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">endsWith</span><span class="params">(String)</span>:æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“å°¾</span><br><span class="line">String <span class="title function_">toUpperCase</span><span class="params">()</span>:è½¬æˆå¤§å†™</span><br><span class="line">String <span class="title function_">toLowerCase</span><span class="params">()</span>:è½¬æˆå°å†™   </span><br><span class="line">String <span class="title function_">trim</span><span class="params">()</span>:è¿”å›ä¸€ä¸ªå»æ‰å‰åç©ºæ ¼çš„æ–°ä¸²   </span><br><span class="line">String[] split(String);æ‹†åˆ†å­—ç¬¦ä¸²</span><br><span class="line"><span class="type">char</span> <span class="title function_">charAt</span><span class="params">(<span class="type">int</span>)</span>:æ ¹æ®ç´¢å¼•æ‰¾å­—ç¬¦   </span><br><span class="line">String <span class="title function_">replaceAll</span><span class="params">(String a,String b)</span>:å°†å­—ç¬¦ä¸²ä¸­çš„aéƒ½æ›¿æ¢æˆb,å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(String)</span>:æ˜¯å¦åŒ…å«å¦å¤–ä¸€ä¸ªå­ä¸²</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²ç±»"><a href="#å­—ç¬¦ä¸²ç±»" class="headerlink" title="å­—ç¬¦ä¸²ç±»"></a>å­—ç¬¦ä¸²ç±»</h3><h4 id="å­—ç¬¦ä¸²æ¯”è¾ƒæ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ¯”è¾ƒæ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ¯”è¾ƒæ–¹æ³•"></a>å­—ç¬¦ä¸²æ¯”è¾ƒæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(String)</span> æ¯”è¾ƒ</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">equalsIgnoreCase</span><span class="params">(String)</span> æ¯”è¾ƒï¼ˆå¿½ç•¥å¤§å°å†™ï¼ˆè‹±æ–‡ï¼‰ï¼‰</span><br><span class="line"><span class="type">int</span> <span class="title function_">compareto</span><span class="params">(String)</span>  ä¸å¦ä¸€ä¸ªå­—ç¬¦ä¸²æ¯”è¾ƒå¤§å°</span><br><span class="line"><span class="type">int</span> <span class="title function_">comparetoignoreCase</span><span class="params">()</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²æ± "><a href="#å­—ç¬¦ä¸²æ± " class="headerlink" title="å­—ç¬¦ä¸²æ± "></a>å­—ç¬¦ä¸²æ± </h4><blockquote><p>å› ä¸ºStringæ˜¯javaæœ€å¸¸ç”¨çš„ç±»ï¼ŒåŒæ—¶æ­¤ç±»æ˜¯å¸¸é‡ï¼ˆä¸€æ—¦å®šä¹‰ï¼Œä¸èƒ½æ”¹å˜ï¼‰ï¼Œå› æ­¤ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼ˆèŠ‚çœå†…å­˜ï¼‰ï¼Œjavaä¸­ä½¿ç”¨å­—ç¬¦ä¸²æ±    </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String s=<span class="string">&quot;hello&quot;</span>; </span><br><span class="line">String s1=<span class="string">&quot;hello&quot;</span>;</span><br><span class="line">String s2=<span class="string">&quot;hello&quot;</span>; </span><br><span class="line">String s3=<span class="string">&quot;hello&quot;</span>;</span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²è½¬æ¢"><a href="#å­—ç¬¦ä¸²è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²è½¬æ¢"></a>å­—ç¬¦ä¸²è½¬æ¢</h4><blockquote><p>ä¸åŒçš„ç±»å‹ä¹‹é—´æ˜¯å¦èƒ½è½¬æ¢ï¼Ÿ</p><p>1 åŸºæœ¬ç±»å‹ ï¼ˆå¯è½¬ï¼‰c<br>2 ä¸åŒç±»ä¹‹é—´ éœ€è¦æœ‰ç»§æ‰¿å…³ç³»æ‰èƒ½è½¬<br>3 å¦‚æœä¸¤ä¸ªç±»å‹ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ï¼Œæœ‰æ—¶ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ–¹æ³•è½¬æ¢<br>integer parseInt()</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String s=<span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="comment">//å°†String,sè½¬æˆintç±»å‹</span></span><br><span class="line"><span class="type">int</span> i=Integer.parseInt(s);</span><br><span class="line">System.out.println(i);</span><br><span class="line"><span class="comment">//å°†int ç±»å‹çš„iè½¬æ¢æˆå­—ç¬¦ä¸²</span></span><br><span class="line">String s2=String.valueOf(i);</span><br></pre></td></tr></table></figure><h4 id="StringBuffer"><a href="#StringBuffer" class="headerlink" title="StringBuffer"></a><strong>StringBuffer</strong></h4><blockquote><p>1.StringBufferæ˜¯å­—ç¬¦ä¸²ç¼“å†²åŒºï¼Œä¸Stringä¸åŒï¼Œå†…å®¹æ˜¯å¯ä»¥ä¿®æ”¹çš„   </p><p>2.StringBufferæ”¯æŒé“¾å¼ç¼–ç¨‹</p><p>3.ä¸StringBuilderä¸åŒï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„   </p><p>4.StringBufferä¸Stringæ˜¯å¯ä»¥è½¬æ¢çš„</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer-&gt;String; sb.toString();</span><br><span class="line">String-&gt;StringBufferï¼š StringBuffer sb=<span class="keyword">new</span> <span class="title class_">StringBuffer</span>(String);</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer <span class="title function_">append</span><span class="params">()</span>:è¿½åŠ </span><br><span class="line">StringBuffer <span class="title function_">insert</span><span class="params">()</span>:æ’å…¥</span><br><span class="line">StringBuffer <span class="title function_">delete</span><span class="params">(start,end)</span>:åˆ é™¤æŒ‡å®šçš„å­ä¸²</span><br><span class="line">StringBuffer <span class="title function_">repalace</span><span class="params">(start,end,str)</span>:å°†æŒ‡å®šä½ç½®çš„å­—ç¬¦ä¸²æ›¿æ¢æˆstr</span><br><span class="line">StringBuffer <span class="title function_">reverse</span><span class="params">()</span>:ç¿»è½¬å­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure><h4 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a><strong>StringBuilder</strong></h4><blockquote><p>ä¸StringBufferåŸºæœ¬ç›¸åŒï¼Œåªæ˜¯çº¿ç¨‹ä¸å®‰å…¨   </p></blockquote><h1 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h1><h2 id="å¼‚å¸¸æ¦‚å¿µ"><a href="#å¼‚å¸¸æ¦‚å¿µ" class="headerlink" title="å¼‚å¸¸æ¦‚å¿µ"></a><strong>å¼‚å¸¸æ¦‚å¿µ</strong></h2><blockquote><p>é”™è¯¯ä¸»è¦å‘ç”Ÿæœ‰ä¸¤ç§<br>1 ç¼–è¯‘æ—¶å‘ç”Ÿé”™è¯¯<br>2 è¿è¡Œæ—¶é”™è¯¯ å«åšå¼‚å¸¸ </p><p>javaçš„å¼‚å¸¸åˆ†ä¸ºä¸¤ç±»<br>1 error jvmå†…éƒ¨é”™è¯¯ã€èµ„æºè€—å°½<br>2 exception å…¶ä»–ç¼–ç¨‹é”™è¯¯æˆ–å¶ç„¶çš„å¤–åœ¨å› ç´ </p></blockquote><h2 id="å¼‚å¸¸çš„ä½“ç³»ç»“æ„"><a href="#å¼‚å¸¸çš„ä½“ç³»ç»“æ„" class="headerlink" title="å¼‚å¸¸çš„ä½“ç³»ç»“æ„"></a><strong>å¼‚å¸¸çš„ä½“ç³»ç»“æ„</strong></h2><blockquote><p>Throwable<br>Error:é”™è¯¯<br>Exception:å¼‚å¸¸<br>RuntimeException:è¿è¡Œæ—¶å¼‚å¸¸<br>NullPointerException:ç©ºæŒ‡é’ˆå¼‚å¸¸<br>ClassCastException:ç±»å‹è½¬æ¢å¼‚å¸¸<br>ArrayIndexOutOfBoundsException:æ•°ç»„ä¸‹æ ‡è¶Šç•Œ<br>ArithmeticException:æ•°å­—å¼‚å¸¸<br>å—æ£€æŸ¥å¼‚å¸¸   </p></blockquote><h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><blockquote><p>javaä¸­å¤„ç†å¼‚å¸¸çš„æœºåˆ¶æ˜¯ï¼šæŠ“æŠ›æ¨¡å‹   </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>-<span class="keyword">catch</span>-<span class="keyword">finally</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line"><span class="comment">//ä»£ç 1;</span></span><br><span class="line"><span class="comment">//ä»£ç 2   å‡ºç°exceptin2;</span></span><br><span class="line"><span class="comment">//ä»£ç 3ï¼šå‡ºç°exception3;</span></span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception1 e)&#123;</span><br><span class="line"><span class="comment">//å¤„ç†ä»£ç 1</span></span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception2 e2)&#123;</span><br><span class="line"><span class="comment">//å¤„ç†ä»£ç 2</span></span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line"><span class="comment">//finally</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h2 id="å¼‚å¸¸åˆ†ç±»"><a href="#å¼‚å¸¸åˆ†ç±»" class="headerlink" title="å¼‚å¸¸åˆ†ç±»"></a>å¼‚å¸¸åˆ†ç±»</h2><blockquote><p>1 è¿è¡Œæ—¶å¼‚å¸¸ runtimeExceptionç±»å’Œå…¶å­ç±»<br>2 å—æ£€æŸ¥å¼‚å¸¸ éruntimException</p><p>åŒºåˆ«ï¼š<br>è¿è¡Œæ—¶å¼‚å¸¸ç¼–è¯‘æ—¶å¯ä»¥ä¸å¤„ç†<br>å—æ£€æŸ¥å¼‚å¸¸å¿…é¡»å¾—å¤„ç†</p></blockquote><h2 id="throws"><a href="#throws" class="headerlink" title="throws"></a>throws</h2><blockquote><p>å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå¦‚æœæ­£ç¡®è°ƒç”¨ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªç»“æœï¼Œå¦‚æœé”™è¯¯çš„è°ƒç”¨ï¼Œåˆ™åº”è¯¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¿™æ—¶ï¼Œ</p><p>å¯ä»¥ä½¿ç”¨throwsæ¥æŠ›å‡ºæŸç§å¼‚å¸¸çš„ç±»å‹   </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getCircleArea</span><span class="params">(<span class="type">double</span> r)</span> thrwos Exception&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//MyArray; 10,11</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> <span class="keyword">throws</span> ArrayIndexOutOfBoundsException&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="throwå…³é”®å­—"><a href="#throwå…³é”®å­—" class="headerlink" title="throwå…³é”®å­—"></a>throwå…³é”®å­—</h2><blockquote><p>throwä»£è¡¨ï¼šæ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡   æ ¼å¼æ˜¯   </p><p>throw new Excpetion();</p><p>throwä¸»è¦ç”¨åœ¨æ–¹æ³•ä¸­   throwæœ‰ç‚¹ç±»ä¼¼return </p></blockquote><h2 id="throwå’Œthrowsçš„åŒºåˆ«"><a href="#throwå’Œthrowsçš„åŒºåˆ«" class="headerlink" title="throwå’Œthrowsçš„åŒºåˆ«"></a>throwå’Œthrowsçš„åŒºåˆ«</h2><blockquote><p>throwsä¸throwçš„åŒºåˆ«</p><p>1.throwsæ”¾åœ¨æ–¹æ³•åï¼Œè¯´æ˜æ­¤æ–¹æ³•å¯èƒ½æŠ›å‡ºæŸç§ç±»å‹çš„å¼‚å¸¸   </p><p>2.throwsåï¼Œæ”¾çš„æ˜¯å¼‚å¸¸ç±»å‹   </p><p>2.throw æ”¾åœ¨æ–¹æ³•ä½“ä¸­ï¼Œthrowåé¢æ”¾ç½®çš„æ˜¯å¼‚å¸¸å¯¹è±¡ï¼Œè¯´æ˜è¦æ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸   </p></blockquote><h1 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h1><blockquote><p>java.utilåŒ…ï¼Œè¢«ç§°ä¸ºå·¥å…·åŒ…ï¼Œä¹Ÿæ˜¯javaæœ€å¸¸ç”¨çš„ä¸€ä¸ªåŒ…</p><p>æ­¤åŒ…ä¸­ä¸»è¦æœ‰é›†åˆæ¡†æ¶ï¼Œæ—¥æœŸï¼Œç¼–ç è§£ç ï¼Œå›½é™…åŒ–ç­‰</p></blockquote><h2 id="randomç±»"><a href="#randomç±»" class="headerlink" title="randomç±»"></a>randomç±»</h2><blockquote><p>Randomç±»æ˜¯éšæœºæ•°ç”Ÿæˆå™¨ï¼Œæä¾›äº†å¾ˆå¤šç”¨äºç”Ÿæˆå„ç§ç±»å‹çš„éšæœºæ•°çš„æ–¹æ³•</p></blockquote><h2 id="Date-ç±»"><a href="#Date-ç±»" class="headerlink" title="Date ç±»"></a>Date ç±»</h2><blockquote><p>Dateç±»ä¸»ç”¨æ¥å­˜å‚¨æ—¶é—´ï¼Œç²¾ç¡®åˆ°æ¯«ç§’ï¼Œå†…éƒ¨æ˜¯é€šè¿‡ä¸€ä¸ªlongå€¼æ¥è¿›è¡Œå­˜å‚¨çš„</p></blockquote><h2 id="Calendar"><a href="#Calendar" class="headerlink" title="Calendar"></a><strong>Calendar</strong></h2><blockquote><p>æ—¥å†ç±»ï¼šä¸»è¦ç”¨æ¥å¤„ç†æ—¶é—´ï¼Œä¾‹å¦‚ï¼Œè·å–æ—¶é—´çš„æŸä¸ªéƒ¨åˆ†ï¼Œæ”¹å˜æ—¶é—´çš„æŸä¸ªéƒ¨åˆ†   å¯¹æ—¶é—´è¿›è¡ŒåŠ å‡æ“ä½œç­‰ </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>å®ä¾‹åŒ–   </span><br><span class="line">Calendar c=Calendar.getInstance();</span><br><span class="line"><span class="number">2.</span>Dateä¸Calendarçš„è½¬æ¢</span><br><span class="line">Calendar-&gt;Date c.getTime();</span><br><span class="line">date-&gt;Calendar c.setTime(date);</span><br><span class="line"><span class="number">3.</span>æ“ä½œæ—¶é—´</span><br><span class="line">è·å¾—æŸä¸ªéƒ¨åˆ†   </span><br><span class="line"><span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> )</span></span><br><span class="line">Calendar.YEAR=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><h2 id="SimpleDateFormat"><a href="#SimpleDateFormat" class="headerlink" title="SimpleDateFormat"></a><strong>SimpleDateFormat</strong></h2><blockquote><p>SimpleDateFormatç±»æ˜¯æ—¥æœŸæ ¼å¼åŒ–çš„ç±»ï¼Œå¯ä»¥ç”¨æ¥å°†æŒ‡å®šæ ¼å¼çš„ä¹‹ç¬¦ä¸²è½¬æˆDateï¼Œä¹Ÿå¯ä»¥å°†Dateè½¬æ¢æˆæŒ‡</p><p>å®šæ ¼å¼çš„å­—ç¬¦ä¸²   </p><p>ç”¨æ³•</p><p>1.å…ˆå®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</p><p>â€‹     SimpleDateFormat sdf&#x3D;new SimpleDateFormat(â€œyyyy-MM-ddâ€);</p><p>2.ä½¿ç”¨ parseæ–¹æ³•å°†å­—ç¬¦ä¸²è½¬æˆæ—¥æœŸ</p><p>â€‹     Date d&#x3D;sdf.parse(str);</p><p>3.ä½¿ç”¨formatæ–¹æ³•å°†æ—¥æœŸè½¬æˆå­—ç¬¦ä¸²</p><p>â€‹     String str&#x3D;sdf.format(data);</p></blockquote><h1 id="é›†åˆæ¡†æ¶"><a href="#é›†åˆæ¡†æ¶" class="headerlink" title="é›†åˆæ¡†æ¶"></a>é›†åˆæ¡†æ¶</h1><h2 id="é›†åˆæ¡†æ¶-1"><a href="#é›†åˆæ¡†æ¶-1" class="headerlink" title="é›†åˆæ¡†æ¶"></a>é›†åˆæ¡†æ¶</h2><blockquote><p>é›†åˆï¼šé›†åˆä¹Ÿè¢«ç§°ä¸ºå®¹å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¸­å¯ä»¥ç®¡ç†å…¶å®ƒçš„å¯¹è±¡ï¼ˆelementï¼‰å…ƒç´    ä¾‹å¦‚æ•°ç»„å°±æ˜¯ä¸€</p><p>ä¸ªé›†åˆ   </p><p>é›†åˆæ¡†æ¶ï¼šjavaä¸­ç»™æˆ‘æä¾›äº†å¾ˆå¤šé›†åˆç±»ï¼Œæ¥å£å’Œç®—æ³•ç±»ï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¢«ç§°ä¸ºé›†åˆæ¡†æ¶</p></blockquote><p><img src="https://s3.bmp.ovh/imgs/2023/02/25/4736ba1bd8ccacc3.png"></p><p>é›†åˆæ¡†æ¶æœ‰ä¸¤ä¸ªé¡¶å±‚æ¥å£ï¼Œæ‰€æœ‰çš„é›†åˆç±»éƒ½æ˜¯è¿™ä¸¤ä¸ªæ¥å£çš„å®ç°</p><h2 id="Collectionæ¥å£"><a href="#Collectionæ¥å£" class="headerlink" title="Collectionæ¥å£"></a><strong>Collection</strong>æ¥å£</h2><blockquote><p>1.æ˜¯é›†åˆæ¡†æ¶çš„é¡¶å±‚æ¥å£ä¹‹ä¸€ï¼Œæ²¡æœ‰ç›´æ¥çš„å®ç°ç±»   </p><p>2.Collectionæœ‰ä¸‰ä¸ªå­æ¥å£ï¼Œåˆ†åˆ«æ˜¯List,Set,Queue;</p><p>3.ä¸‰ä¸ªå­æ¥å£çš„ç‰¹ç‚¹å¦‚ä¸‹   </p><p>List:æœ‰åºï¼ˆæœ‰ç´¢å¼•ï¼‰ï¼Œå¯é‡å¤   </p><p>Set:æ— åºï¼Œä¸å¯é‡å¤   </p><p>Queue:å…ˆè¿›å…ˆå‡º</p></blockquote><p>Collectionæ¥å£åº”è¯¥æœ‰ä»€ä¹ˆæ–¹æ³•ï¼Ÿ</p><blockquote><p>CURD</p><p>boolean add(E):å¢åŠ ä¸€ä¸ªå…ƒç´ </p><p>boolean addAll(Collection):å¢åŠ å¤šä¸ªå…ƒç´ </p><p>void clear():æ¸…ç©º</p><p>boolean isEmpty():æ˜¯å¦ä¸ºç©º</p><p>int size():è¿”å›å…ƒç´ çš„ä¸ªæ•°</p><p>boolean remove(E):åˆ é™¤ä¸€ä¸ªå…ƒç´ </p><p>boolean removeAll(Collection):åˆ é™¤å¤šä¸ªå…ƒç´ </p><p>boolean retainAll(Collection):ä¿ç•™å¤šä¸ªå…ƒç´ </p><p>boolean contains(E):æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ </p><p>boolean containsAll(Collection):æ˜¯å¦åŒ…å«æŸäº›å…ƒç´ </p><p>Object[] toArray():å°†é›†åˆä¸­çš„å…ƒç´ è½¬æˆæ•°ç»„è¿”å›</p></blockquote><p>æ‰€æœ‰é›†åˆç±»ä¸­å­˜å‚¨çš„ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼•ç”¨è€Œå·²</p><h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><blockquote><p>æ³›å‹æŒ‡çš„æ˜¯æ•°æ®ç±»å‹çš„å‚æ•°åŒ–   </p><p>æ³›å‹å¯ä»¥è§£å†³ä¸¤ä¸ªé—®é¢˜</p><p>1.ç±»å‹å®‰å…¨æ£€æŸ¥</p><p>2.æ¶ˆé™¤å¼ºåˆ¶ç±»å‹è½¬æ¢</p><p>javaä¸­ï¼Œé›†åˆæ¡†æ¶ä¸­çš„é›†åˆç±»éƒ½æ”¯æŒæ³›å‹</p></blockquote><p>å¦‚ä½•ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Person&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br></pre></td></tr></table></figure><h2 id="ç®—æ³•ç±»"><a href="#ç®—æ³•ç±»" class="headerlink" title="ç®—æ³•ç±»"></a>ç®—æ³•ç±»</h2><blockquote><p>é›†åˆæ¡†æ¶ä¸­é™¤äº†æä¾›æ¥å£å’Œå®ç°ç±»ä¹‹å¤–ï¼Œè¿˜æä¾›ç”¨äºå¤„ç†é›†åˆçš„ç®—æ³•ç±»ï¼Œç®—æ³•ç±»ä¸»è¦æœ‰</p><p>Collections:ç”¨äºå¤„ç†é›†åˆçš„ç®—æ³•ç±»   </p><p>Arrays:ç”¨äºå¤„ç†æ•°ç»„çš„ç®—æ³•ç±»   </p></blockquote><p>Collectionså¸¸ç”¨çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(List)</span>:å¯¹Listä¸­çš„å…ƒç´ æŒ‰è‡ªç„¶é¡ºåºè¿›è¡Œæ’åº   </span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">reverse</span><span class="params">(List)</span>:ç¿»è½¬é›†åˆä¸­å…ƒç´ </span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">shuffle</span><span class="params">(List)</span>:æ´—ç‰Œ   ï¼ˆæ‰“ä¹±é¡ºåºï¼‰</span><br><span class="line"><span class="keyword">static</span> E <span class="title function_">max</span><span class="params">(Collection)</span>:è·å–æœ€å¤§çš„å…ƒç´ </span><br><span class="line"><span class="keyword">static</span> E <span class="title function_">min</span><span class="params">(Collection)</span>:è·å–æœ€å°çš„å…ƒç´    </span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addAll</span><span class="params">(Collection coll,T...t)</span>:å‘collä¸­å¢åŠ å¤šä¸ªå…ƒç´    </span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(List)</span>:äºŒåˆ†æŸ¥æ‰¾   </span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(List desc,List src)</span>:å¤åˆ¶</span><br></pre></td></tr></table></figure><p>Arrayså¸¸ç”¨çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> List <span class="title function_">asList</span><span class="params">(T...t)</span>:åˆ›å»ºä¸€ä¸ªListï¼Œå°†æ·»åŠ å¤šä¸ªå…ƒç´ </span><br><span class="line"><span class="keyword">static</span> T <span class="title function_">binarySearch</span><span class="params">()</span>:äºŒåˆ†æŸ¥æ‰¾</span><br><span class="line"><span class="keyword">static</span> T[] copyRange(<span class="type">int</span>[],start,end);</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">static</span> String <span class="title function_">toString</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><h2 id="Comparable"><a href="#Comparable" class="headerlink" title="Comparable"></a><strong>Comparable</strong></h2><blockquote><p>Comparableæ˜¯è‡ªç„¶æ’åºçš„æ¥å£ï¼Œå®ç°æ­¤æ¥å£çš„ç±»ï¼Œå°±æ‹¥æœ‰äº†æ¯”è¾ƒå¤§å°çš„èƒ½åŠ›</p><p>æ­¤æ¥å£ä¸­çš„æ–¹æ³•åªæœ‰ä¸€ä¸ª</p><p>public int comparareTo(T t){</p><p>}</p><p>è¿”å›å€¼è¯´æ˜   </p><p>æ­£æ•°ï¼šå½“å‰å¯¹è±¡ä¸æ¯”tå¤§</p><p>0ï¼šå½“å‰å¯¹è±¡ä¸tç›¸ç­‰</p><p>è´Ÿæ•°ï¼šå½“å‰å¯¹è±¡æ¯”tå°</p></blockquote><h2 id="Comparator"><a href="#Comparator" class="headerlink" title="Comparator"></a><strong>Comparator</strong></h2><blockquote><p>è‡ªå®šä¹‰çš„æ¯”è¾ƒå™¨   </p><p>Comparatoræ¥å£ä¸­åŒ…å«ä¸€ä¸ªæ–¹æ³•</p></blockquote><blockquote><p>Comparatorä¸Comparableçš„åŒºåˆ«</p><p>1.Comparableä¸ºå¯æ’åºçš„ï¼Œä¹Ÿè¢«ç§°ä¸ºè‡ªç„¶æ’åºæˆ–å†…éƒ¨æ¯”è¾ƒå™¨ï¼Œå®ç°è¯¥æ¥å£çš„ç±»çš„å¯¹è±¡è‡ªåŠ¨æ‹¥æœ‰å¯æ’åºåŠŸèƒ½ã€‚</p><p>2.Comparatorä¸ºæ¯”è¾ƒå™¨ï¼Œä¹Ÿè¢«ç§°ä¸ºå¤–éƒ¨æ¯”è¾ƒå™¨ï¼Œå®ç°è¯¥æ¥å£å¯ä»¥å®šä¹‰ä¸€ä¸ªé’ˆå¯¹æŸä¸ªç±»çš„æ’åºæ–¹å¼ã€‚</p><p>3.Comparatorä¸ComparableåŒæ—¶å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå‰è€…ä¼˜å…ˆçº§é«˜</p></blockquote><h2 id="ArrayListæºç åˆ†æ"><a href="#ArrayListæºç åˆ†æ" class="headerlink" title="ArrayListæºç åˆ†æ"></a><strong>ArrayList</strong>æºç åˆ†æ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Object[]elementData; <span class="comment">//å®šä¹‰ä¸€ä¸ªObjectæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨æ•°ç»„çš„å…ƒç´ ï¼Œæ­¤æ•°ç»„å¯ä»¥æ‰©</span></span><br><span class="line">å®¹   </span><br><span class="line"><span class="comment">//2.æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.elementData=DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»™ä¸€ä¸ªåˆä½¿é•¿åº¦</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(<span class="type">int</span> initialCapacity)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(initialCapacity&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">this</span>.elementData=<span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(initialCapacity==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">this</span>.elementData=EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal Capacity: &quot;</span>+</span><br><span class="line">                initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3.addæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span>&#123;modCount++;</span><br><span class="line">    add(e,elementData,size);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(E e,Object[]elementData,<span class="type">int</span> s)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s==elementData.length)</span><br><span class="line">        elementData=grow();</span><br><span class="line">    elementData[s]=e;</span><br><span class="line">    size=s+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„æ€»ç»“"><a href="#æ•°ç»„æ€»ç»“" class="headerlink" title="æ•°ç»„æ€»ç»“"></a>æ•°ç»„æ€»ç»“</h3><blockquote><p>æ•°ç»„çš„ç‰¹ç‚¹ï¼šå…ƒç´ ä¹‹é—´çš„åœ°å€æ˜¯è¿ç»­çš„   </p><p>get(index):æ—¶é—´å¤æ‚åº¦æ˜¯O(1)</p><p>set(index,E):O(1)</p><p>add(index,E):æ—¶é—´å¤æ‚åº¦æ˜¯O(n)</p><p>remove(index):O(n)</p></blockquote><h2 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å†…éƒ¨ç»“èŠ‚</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        <span class="built_in">this</span>.item = element;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">        <span class="built_in">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a><strong>Stack</strong></h2><blockquote><p>Stackæ˜¯æ ˆ  ç‰¹ç‚¹æ˜¯å…ˆè¿›åå‡º </p><p>â€‹       LIFOï¼šlast in first out</p><p>æ–¹æ³•:</p><p>â€‹      push:å‹æ ˆ  </p><p>â€‹      pop:å¼¹å‡º</p><p>â€‹       peek:è·å¾—æ ˆé¡¶çš„å…ƒç´ </p><p>æ ˆçš„ç”¨é€”ï¼š</p><p>æ‚”æ£‹</p><p>æ’¤é”€</p><p>æ–¹æ³•çš„è°ƒç”¨</p></blockquote><h2 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a><strong>Queue</strong></h2><blockquote><p>Queueæ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰</p></blockquote><h2 id="åŒç«¯é˜Ÿåˆ—"><a href="#åŒç«¯é˜Ÿåˆ—" class="headerlink" title="åŒç«¯é˜Ÿåˆ—"></a>åŒç«¯é˜Ÿåˆ—</h2><blockquote><p>Deque &#x3D;dubole ended queue</p><p>ä¸¤ç«¯éƒ½å¯ä»¥æ’å…¥å’Œåˆ é™¤å…ƒç´    </p><p>æ–¹æ³•å¦‚ä¸‹   </p><p>â€‹    addFirst</p><p>â€‹    addLast</p><p>â€‹    removeFist</p><p>â€‹    removeLast</p><p>â€‹    offerFirst</p><p>â€‹    offerLast</p><p>â€‹    pollFirst</p><p>â€‹    pollLast</p></blockquote><h1 id="é›†åˆæ¡†æ¶2"><a href="#é›†åˆæ¡†æ¶2" class="headerlink" title="é›†åˆæ¡†æ¶2"></a>é›†åˆæ¡†æ¶2</h1><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><blockquote><p>Set:æ˜¯Collectionçš„å­æ¥å£ï¼Œæ— åºï¼Œä¸å¯é‡å¤</p><p>ä¸‰ä¸ªä¸»è¦çš„å®ç°ç±»   </p><p>HashSet:hash</p><p>LinkedHashList:æœ‰é¡ºåº   </p><p>TreeSet:æ’åºçš„ï¼Œå†…éƒ¨æ˜¯æ ‘   </p></blockquote><h2 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a><strong>Iterator</strong></h2><blockquote><p>è¿­ä»£å™¨   ç”¨æ¥ä»æ‰€æœ‰çš„Collectioné›†åˆä¸­éå†æ•°ç»„   æä¾›ä¸‰ä¸ªæ–¹æ³•   </p><p>boolean hasNext():æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªæœªéå†åˆ°çš„å…ƒç´    </p><p>E next():å–å‡ºä¸€ä¸ªå…ƒç´    </p><p>void remove():åˆ é™¤æ­£åœ¨å–å‡ºçš„å…ƒç´    </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç æ¨¡ç‰ˆå¦‚ä¸‹   </span></span><br><span class="line">Iteartor ite=collection.iterator();</span><br><span class="line">    <span class="keyword">while</span>(ite.hasNext())&#123;</span><br><span class="line">    E e=ite.next();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a><strong>LinkedHashSet</strong></h2><blockquote><p>LinkedHashSetæ˜¯å¯¹HashSetçš„æ‰©å±•ï¼Œå†…éƒ¨ä¹Ÿæ˜¯ä¸€ä¸ªHashSet,ä½†æ˜¯æŒ‰å­˜å…¥çš„é¡ºåºè¿›è¡Œæ’åˆ—çš„</p><p>LinkdeHashSetä¸­çš„å…ƒç´ ä¹Ÿæ˜¯ä¸å¯é‡å¤çš„</p></blockquote><h2 id="SortedSet"><a href="#SortedSet" class="headerlink" title="SortedSet"></a><strong>SortedSet</strong></h2><blockquote><p>SortedSet:æ˜¯Setçš„å­æ¥å£ï¼Œå…·å¤‡æ’åºçš„èƒ½åŠ›   </p><p>TreeSetï¼šæ˜¯SortedSetçš„å®ç°ç±»ï¼Œå†…éƒ¨æ˜¯ä¸€ä¸ªæ ‘ç»“æ„</p></blockquote><p><img src="https://s3.bmp.ovh/imgs/2023/02/25/0f0daa7cf5dd4d9f.png"></p><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a><strong>Map</strong></h2><blockquote><p>1.Mapæ˜¯é›†åˆæ¡†æ¶ä¸­çš„å¦ä¸€ä¸ªé¡¶å±‚æ¥å£  Mapç»“æ„çš„ç‰¹ç‚¹æ˜¯ kev-value</p><p>2.é›†åˆä¸­ï¼Œkey æ˜¯ä¸å¯ä»¥é‡å¤çš„</p><p>3.key å’Œ valueçš„ç±»å‹éƒ½æ˜¯å¼•ç”¨ç±»å‹</p></blockquote><p>å¸¸ç”¨æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">put(k,v):å¢åŠ ä¸€å¯¹å…ƒç´ </span><br><span class="line">putAll(Map):å°†mapä¸­çš„æ‰€æœ‰å…ƒç´ å¢åŠ åˆ°é›†åˆä¸­</span><br><span class="line">v <span class="title function_">get</span><span class="params">(k)</span>:æ ¹æ®key,æ¥æŸ¥æ‰¾value</span><br><span class="line"><span class="title function_">remove</span><span class="params">(k)</span>:æ ¹æ®key,æ¥åˆ é™¤å…ƒç´ ï¼ˆkey-valueï¼‰</span><br><span class="line"><span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>:è·å–é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>:æ˜¯å¦ä¸ºç©º</span><br><span class="line">clear():æ¸…ç©º</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(k)</span>:æ˜¯å¦åŒ…å«æŸä¸ªkey</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsValue</span><span class="params">(v)</span>:æ˜¯å¦åŒ…å«æŸä¸ªvalue</span><br><span class="line">#éå†</span><br><span class="line">Set <span class="title function_">keySet</span><span class="params">()</span>:å¾—åˆ°æ‰€æœ‰çš„keyçš„é›†åˆ</span><br><span class="line">Collection <span class="title function_">values</span><span class="params">()</span>:è·å¾—æ‰€æœ‰valueçš„é›†åˆ</span><br><span class="line">entrySet():è·å¾—æ‰€æœ‰çš„å…ƒç´ çš„é›†åˆï¼ˆEntry(key,value)ï¼‰</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//éå†çš„ç¤ºä¾‹</span></span><br><span class="line">    Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, String&gt;();</span><br><span class="line"><span class="comment">//å¢åŠ </span></span><br><span class="line">   map.put(<span class="number">1</span>,<span class="string">&quot;james&quot;</span>);</span><br><span class="line">   map.put(<span class="number">2</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">   map.put(<span class="number">3</span>,<span class="string">&quot;james&quot;</span>);</span><br><span class="line">   map.put(<span class="number">4</span>,<span class="string">&quot;owen&quot;</span>);</span><br><span class="line">   map.put(<span class="number">3</span>,<span class="string">&quot;scott&quot;</span>);</span><br><span class="line">    <span class="comment">//1.å¦‚ä½•éå†é›†åˆ   keySet</span></span><br><span class="line">    Set&lt;Integer&gt; set = map.keySet();</span><br><span class="line">System.out.println(set);</span><br><span class="line"><span class="keyword">for</span>(</span><br><span class="line">    Integer k:set)</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(k + <span class="string">&quot;:&quot;</span> + map.get(k));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.values</span></span><br><span class="line">    Collection&lt;String&gt; coll = map.values();</span><br><span class="line"><span class="keyword">for</span>(</span><br><span class="line">    String s:coll)</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">System.out.println(<span class="string">&quot;----------------&quot;</span>);</span><br><span class="line">    <span class="comment">//3.key-value</span></span><br><span class="line">    Set&lt;Entry&lt;Integer, String&gt;&gt; es = map.entrySet();</span><br><span class="line"><span class="keyword">for</span>(</span><br><span class="line">    Entry&lt;Integer, String&gt; e:es)</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(e.getKey() + <span class="string">&quot;:&quot;</span> + e.getValue());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="HashMapçš„å†…éƒ¨ç»“æ„"><a href="#HashMapçš„å†…éƒ¨ç»“æ„" class="headerlink" title="HashMapçš„å†…éƒ¨ç»“æ„"></a><strong>HashMap</strong>çš„å†…éƒ¨ç»“æ„</h2><blockquote><p>1.key-valueåœ¨å†…éƒ¨è¢«å°è£…æˆäº†ä¸€ä¸ªå†…éƒ¨ç±» Node</p><p>2.HashMapä¸­å®šä¹‰äº†ä¸€ä¸ªNodeç±»å‹çš„æ•°ç»„ç”¨æ¥ä¿å­˜å…ƒç´ </p><p>3.Nodeè¿˜æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨   å½“é“¾è¡¨ä¸­çš„å…ƒç´ è¶…è¿‡8æ—¶ï¼Œåˆ™è½¬æ¢æˆçº¢é»‘æ ‘</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> hash;</span><br><span class="line">    <span class="keyword">final</span> K key; <span class="comment">//key</span></span><br><span class="line">    V value; <span class="comment">//value</span></span><br><span class="line">    Node&lt;K,V&gt; next; <span class="comment">//ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒNodeæ˜¯å°è£…äº†keyå’Œvalue,åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨   </span></span><br><span class="line">    Node(<span class="type">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">        <span class="built_in">this</span>.hash = hash;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table; <span class="comment">//å°†æ‰€æœ‰çš„key-valueå¯¹ï¼Œå³nodeï¼Œéƒ½å­˜åœ¨tableä¸­ï¼Œtableæ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//putæ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">                   <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">        Node&lt;K, V&gt;[] tab; <span class="comment">//tableçš„å¼•ç”¨</span></span><br><span class="line">        Node&lt;K, V&gt; p; <span class="comment">//å…ƒç´ ä¸­çš„é¦–ä¸ªNodeèŠ‚ç‚¹   </span></span><br><span class="line">        <span class="type">int</span> n; <span class="comment">//tableçš„é•¿åº¦</span></span><br><span class="line">        <span class="type">int</span> i; <span class="comment">//å…ƒç´ çš„ä¸‹æ ‡   é€šè¿‡hashåï¼Œæ¨¡è¿è¡Œï¼ˆå®é™…æ˜¯ (n - 1) &amp; hash]ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            n = (tab = resize()).length; <span class="comment">//é‡æ–°åˆ†é…é•¿åº¦ï¼Œç®—å‡ºtalçš„é•¿åº¦</span></span><br><span class="line"><span class="comment">//å¦‚æœå…ƒç´ ä¸­æ— å€¼ï¼Œåˆ™å°†Nodeæ”¾åœ¨ç´¢å¼•ä¸ºiçš„ä¸‹æ ‡ä¸‹   </span></span><br><span class="line">        <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)</span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            Node&lt;K, V&gt; e; <span class="comment">//å¦‚æœæœ‰ç›¸åŒçš„key,eå­˜å‚¨çš„æ˜¯é‡å¤èŠ‚ç‚¹çš„å¼•ç”¨   </span></span><br><span class="line">            K k;</span><br><span class="line"><span class="comment">//å¦‚æœå…ƒç´ ä¸­çš„é¦–Nodeä¸æ–°èŠ‚ç‚¹ç›¸åŒ   åˆ™</span></span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                e = p;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode) <span class="comment">//å¦‚æœæ˜¯æ ‘ç»“ç‚¹ï¼Œåˆ™ä½¿ç”¨æ ‘èŠ‚ç‚¹çš„æ–¹å¼æŸ¥æ‰¾   </span></span><br><span class="line">                e = ((TreeNode&lt;K, V&gt;) p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">            <span class="keyword">else</span> &#123;<span class="comment">//éå†é“¾è¡¨ï¼Œå¦‚æœæœ‰é‡å¤çš„ï¼Œå°†é‡å¤çš„èŠ‚ç‚¹èµ‹å€¼ç»™e,å¹¶break,å¦åˆ™ï¼Œå°†æ–°èŠ‚ç‚¹åŠ åˆ°</span></span><br><span class="line">                é“¾è¡¨å°¾éƒ¨</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) &#123;<span class="comment">//é“¾è¡¨ä¸­æœ€åä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line"><span class="comment">//å¦‚æœé•¿åº¦å¤§äº8ï¼Œåˆ™è½¬æˆæ ‘</span></span><br><span class="line">                        <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"><span class="comment">//å¦‚æœæœ‰é‡å¤çš„ï¼Œåˆ™ä¸å†æ¯”è¾ƒ</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                            ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p = e;<span class="comment">//æŒ‡å‘é“¾è¡¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œç”¨æ¥éå†   </span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123; <span class="comment">// existing mapping for key å¦‚æœæœ‰é‡å¤çš„ï¼Œè¿›è¡Œæ›¿æ¢</span></span><br><span class="line">                <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)<span class="comment">//æ ¹æ®onlyIfAbsendå†³å®šæ˜¯å¦æ›¿</span></span><br><span class="line">                    æ¢</span><br><span class="line">                e.value = value;</span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Hashtable"><a href="#Hashtable" class="headerlink" title="Hashtable"></a><strong>Hashtable</strong></h2><blockquote><p>Hashtable æ˜¯ä¸€ä¸ªå¤è€çš„ Map å®ç°ç±»ï¼Œä¸å»ºè®®ä½¿ç”¨</p><p>Hashtable æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ Map å®ç°ï¼Œä½† HashMap æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p><p>Hashtable ä¸å…è®¸ä½¿ç”¨ null ä½œä¸º key å’Œ valueï¼Œè€Œ HashMap å¯ä»¥</p></blockquote><h2 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a><strong>TreeMap</strong></h2><blockquote><p>TreeMap å­˜å‚¨ Key-Value å¯¹æ—¶ï¼Œéœ€è¦æ ¹æ® Key å¯¹ key-value å¯¹è¿›è¡Œæ’åºã€‚TreeMap å†…éƒ¨æ˜¯åŒçº¢é»‘</p><p>æ ‘æ¥å®ç°çš„ã€‚</p><p>TreeMap çš„ Key çš„æ’åºï¼š</p><p>è‡ªç„¶æ’åºï¼šTreeMap çš„æ‰€æœ‰çš„ Key å¿…é¡»å®ç° Comparable æ¥å£ï¼Œè€Œä¸”æ‰€æœ‰çš„ Key åº”è¯¥æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹</p><p>è±¡ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡º ClasssCastException</p><p>å®šåˆ¶æ’åºï¼šåˆ›å»º TreeMap æ—¶ï¼Œä¼ å…¥ä¸€ä¸ª Comparator å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹ TreeMap ä¸­çš„æ‰€æœ‰ key è¿›</p><p>è¡Œæ’åºã€‚æ­¤æ—¶ä¸éœ€è¦ Map çš„ Key å®ç° Comparable æ¥å£</p></blockquote><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Elasticsearch å…¥é—¨</title>
      <link href="/2023/02/24/Elasticsearch_%E5%85%A5%E9%97%A8/"/>
      <url>/2023/02/24/Elasticsearch_%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="Elasticsearch-å…¥é—¨"><a href="#Elasticsearch-å…¥é—¨" class="headerlink" title="Elasticsearch å…¥é—¨"></a>Elasticsearch å…¥é—¨</h2><p>ç”±äºå·¥ä½œéœ€è¦ï¼Œæ‰€ä»¥ä¸å¾—ä¸æ¥è§¦esã€‚è€Œä¸”è¿˜è¦æˆ‘å†™ç›¸å…³çš„å·¥å…·ç±»ï¼Œè™½ç„¶è¯´ç…§è‘«èŠ¦ç”»ç“¢å®¹æ˜“ï¼Œä½†æ˜¯äº†è§£åˆ°è¿™ä¸ªä¸œè¥¿ä¹‹åï¼Œå°±æƒ³å¥½å¥½å­¦ä¹ ä»¥ä¸‹ã€‚å½“ç„¶äº†ä¹Ÿç®—ä½œæˆ‘çš„ä¸ªäººç¬”è®°ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯çœ‹å®˜æ–¹æ–‡ç« çš„è®°å½•ï¼Œæ‰€ä»¥ä¸ä¼šæ ‡æ³¨ç‰ˆæƒä»€ä¹ˆçš„ï¼Œå®˜æ–¹é“¾æ¥ä¸‹é¢ä¼šæœ‰ï¼Œæƒ³æ·±å…¥äº†è§£å¯ä»¥å»çœ‹çœ‹ã€‚</p><h3 id="esä»‹ç»"><a href="#esä»‹ç»" class="headerlink" title="esä»‹ç»"></a>esä»‹ç»</h3><blockquote><p>Elasticsearchæ˜¯ä¸€ä¸ªæœç´¢å¼•æ“</p></blockquote><p>ä¸‹é¢ç®€ç§°ä¸ºes</p><blockquote><p>Elasticsearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€å…è´¹å’Œå¼€æ”¾çš„æœç´¢å’Œåˆ†æå¼•æ“ï¼Œé€‚ç”¨äºæ‰€æœ‰ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€æ•°å­—ã€åœ°ç†ç©ºé—´ã€ç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®ã€‚ Elasticsearch åŸºäº Apache Lucene æ„å»ºï¼Œå¹¶äº 2010 å¹´ç”± Elasticsearch N.V. é¦–æ¬¡å‘å¸ƒï¼ˆç°åœ¨ç§°ä¸º Elasticï¼‰ã€‚Elasticsearch ä»¥å…¶ç®€å•çš„ REST APIã€åˆ†å¸ƒå¼ç‰¹æ€§ã€é€Ÿåº¦å’Œå¯æ‰©å±•æ€§è€Œé—»åï¼Œæ˜¯ Elastic Stack çš„æ ¸å¿ƒç»„ä»¶ï¼ŒElastic Stack æ˜¯ä¸€ç»„ç”¨äºæ•°æ®æ‘„å–ã€ä¸°å¯Œã€å­˜å‚¨ã€åˆ†æå’Œå¯è§†åŒ–çš„å…è´¹å¼€æ”¾å·¥å…·ã€‚ é€šå¸¸è¢«ç§°ä¸º ELK Stackã€‚</p></blockquote><p>ä¸Šé¢æ˜¯å®˜æ–¹åŸè¯ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹çœ‹ã€‚é“¾æ¥è´´åœ¨è¿™é‡Œ</p><p><a href="https://elasticstack.blog.csdn.net/article/details/98871531">Elasticsearch ç®€ä»‹</a></p><h3 id="esèƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#esèƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="esèƒ½åšä»€ä¹ˆï¼Ÿ"></a>esèƒ½åšä»€ä¹ˆï¼Ÿ</h3><blockquote><p>Elasticsearch çš„é€Ÿåº¦å’Œå¯æ‰©å±•æ€§åŠå…¶ä¸ºå¤šç§ç±»å‹çš„å†…å®¹ç¼–åˆ¶ç´¢å¼•çš„èƒ½åŠ›æ„å‘³ç€å®ƒå¯ç”¨äºå¤šç§ç”¨ä¾‹ï¼š</p><p>åº”ç”¨æœç´¢ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„ githubï¼Œlinkedinï¼Œæ»´æ»´ï¼Œç¾å›¢ï¼ŒæŠ–éŸ³ï¼Œç‚¹è¯„ï¼ŒéŸ³ä¹ï¼Œè§†é¢‘ï¼Œé“¶è¡Œï¼Œè¯åˆ¸ï¼Œä¿é™©ï¼Œç”µä¿¡ app é‡Œçš„æœç´¢<br>ç½‘ç«™æœç´¢<br>ä¼ä¸šæœç´¢<br>æ—¥å¿—è®°å½•å’Œæ—¥å¿—åˆ†æ<br>åŸºç¡€è®¾æ–½æŒ‡æ ‡å’Œå®¹å™¨ç›‘æ§<br>åº”ç”¨æ€§èƒ½ç›‘æ§<br>åœ°ç†ç©ºé—´æ•°æ®åˆ†æå’Œå¯è§†åŒ–<br>å®‰å…¨åˆ†æ<br>å•†ä¸šåˆ†æ</p></blockquote><p>å…¬å¸å¹³å¸¸å°±ç”¨è¿™ä¸ªå­˜ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚æ—¥å¿—ä»€ä¹ˆã€‚é€Ÿåº¦ç¡®å®å¿«</p><h4 id="eså®‰è£…"><a href="#eså®‰è£…" class="headerlink" title="eså®‰è£…"></a>eså®‰è£…</h4><p>å…¬å¸ç”¨çš„æ˜¯Linuxï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä¼šè´´å‡ºwinå’ŒLinuxçš„å®‰è£…æ–¹æ³•ã€‚</p><h4 id="Javaï¼ˆJVMï¼‰ç‰ˆæœ¬"><a href="#Javaï¼ˆJVMï¼‰ç‰ˆæœ¬" class="headerlink" title="Javaï¼ˆJVMï¼‰ç‰ˆæœ¬"></a>Javaï¼ˆJVMï¼‰ç‰ˆæœ¬</h4><blockquote><p>Elasticsearchæ˜¯ä½¿ç”¨Javaæ„å»ºçš„ï¼ŒåŒ…æ‹¬JDKç»´æŠ¤è€…çš„OpenJDKæ†ç»‘ç‰ˆæœ¬ï¼ˆGPLv2 + CEï¼‰ã€‚ åœ¨æ¯ä¸ªåˆ†å¸ƒä¸­ã€‚æ†ç»‘çš„ JVM æ˜¯æ¨èçš„ JVM å’Œ ä½äº Elasticsearch ä¸»ç›®å½•çš„ç›®å½•ä¸­ã€‚jdkè¦ä½¿ç”¨æ‚¨è‡ªå·±çš„ Java ç‰ˆæœ¬ï¼Œè¯·è®¾ç½®ç¯å¢ƒå˜é‡ã€‚ å¦‚æœå¿…é¡»ä½¿ç”¨ä¸æ†ç»‘çš„ JVM ä¸åŒçš„ Java ç‰ˆæœ¬ã€‚è¯·çœ‹supported LTS version of Java</p></blockquote><p><img src="https://s3.bmp.ovh/imgs/2023/02/24/db05e724e6b8ad0e.png"></p><p>å°½é‡é€‰æ‹©LTS</p><h4 id="Windowså®‰è£…"><a href="#Windowså®‰è£…" class="headerlink" title="Windowså®‰è£…"></a>Windowså®‰è£…</h4><p>ä»è¯¥ä½ç½®ä¸‹è½½.zip æ–‡ä»¶</p><p><a href="https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.3.1-windows-x86_64.zip">åœ°å€</a></p><p>ä¸‹è½½å®Œæ‰¾ä¸ªèˆ’æœçš„åœ°æ–¹è§£å‹å°±è¡Œæƒ¹</p><p><img src="https://s3.bmp.ovh/imgs/2023/02/24/a93cdd18e8c37f50.png"></p><p>åœ¨binç›®å½•ä¸‹æ‰¾åˆ° <code>elasticsearch.bat</code> å¯åŠ¨å°±å¥½äº†ã€‚ä¹Ÿå¯ä»¥é€šè¿‡cmdæ¥å¯åŠ¨ï¼Œä¸è¿‡æœ€å¥½ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€å–”</p><p>ç„¶åæˆ‘ä»¬åœ¨æµè§ˆå™¨æˆ–è€…postmanä¸Šé¢è¾“å…¥ <code>http://localhost:9200/</code> ä¼šå‡ºç°ä»¥ä¸‹ä¿¡æ¯</p><p><img src="https://s3.bmp.ovh/imgs/2023/02/24/04571b8c08ba9a1b.png"></p><p>å…¶ä¸­configé‡Œé¢çš„ <code>elasticsearch.yml</code> æ˜¯é…ç½®æ–‡ä»¶ é‡Œé¢çš„</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è®©å…¶ä»–äººè®¿é—®es å¯ä»¥æ”¹æˆ0.0.0.0ï¼Œè¿™æ ·ä¼šç»‘å®šæˆä»»æ„IP è€Œélocalhost ã€‚è¿™é‡Œå’Œredisæ”¹bindå·®ä¸å¤š</p><h4 id="Linuxå®‰è£…"><a href="#Linuxå®‰è£…" class="headerlink" title="Linuxå®‰è£…"></a>Linuxå®‰è£…</h4><p>ä¸‹è½½ï¼š<a href="https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-oss-7.3.0-linux-x86_64.tar.gz">åœ°å€</a></p><ol><li><p>åˆ›å»ºç”¨æˆ·</p><p>esç¦æ­¢rootç”¨æˆ·å¯åŠ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·es</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adduser es</span><br><span class="line"><span class="comment">#ä¿®æ”¹å¯†ç </span></span><br><span class="line">passwes</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºesçš„æ•°æ®ã€æ—¥å¿—ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºæ—¥å¿—ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /data/elasticsearch/logs</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆæƒ</span></span><br><span class="line"><span class="built_in">chown</span> es:es -R /data/</span><br></pre></td></tr></table></figure></li><li><p>è§£å‹eså®‰è£…åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf elasticsearch-oss-7.3.0-linux-x86_64.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>æˆæƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> es:es -R /opt/elasticsearch-oss-7.3.0-linux-x86_64</span><br></pre></td></tr></table></figure><p>å°†æƒé™éƒ½ç»™esè¿™ä¸ªç”¨æˆ·</p></li><li><p>ä¿®æ”¹yml</p><p>åœ¨elasticsearch.ymlä¸­ä¿®æ”¹ä¸‹é¢å±æ€§</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é›†ç¾¤åç§°</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">ihbe-cluster</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># èŠ‚ç‚¹åç§°,å…¶ä½™ä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«ä¸ºnode-2 å’Œnode-3ï¼Œåˆ«ä¸€æ · ï¼ˆé›†ç¾¤ï¼‰</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">node-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šè¯¥èŠ‚ç‚¹æ˜¯å¦æœ‰èµ„æ ¼è¢«é€‰ä¸¾æˆä¸ºmasterèŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºtrue ï¼ˆé›†ç¾¤ï¼‰</span></span><br><span class="line"><span class="attr">node.master:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># å…è®¸è¯¥èŠ‚ç‚¹å­˜å‚¨æ•°æ®(é»˜è®¤å¼€å¯)</span></span><br><span class="line"><span class="attr">node.data:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç´¢å¼•æ•°æ®çš„å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">path.data:</span> <span class="string">/data/elasticsearch/data</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">path.logs:</span> <span class="string">/data/elasticsearch/logs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»‘å®šå½“å‰æœºå™¨èŠ‚ç‚¹çš„IPåœ°å€, å…¶ä»–èŠ‚ç‚¹é…ç½®è‡ªå·±çš„IPåœ°å€</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="string">*.*.*.*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¯¹å¤–æœåŠ¡çš„httpç«¯å£ï¼Œé»˜è®¤ä¸º9200</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®èŠ‚ç‚¹é—´äº¤äº’çš„tcpç«¯å£,é»˜è®¤ä¸º9300</span></span><br><span class="line"><span class="attr">transport.tcp.port:</span> <span class="number">9300</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é›†ç¾¤çš„æ‰€æœ‰æœºå™¨èŠ‚ç‚¹çš„IPåœ°å€</span></span><br><span class="line"><span class="string">discovery.zen.ping.unicast.hosts:[&quot;*.*.*.*&quot;,&quot;*.*.*.*&quot;,&quot;*.*.*.*&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é€šè¿‡é…ç½®å¤§å¤šæ•°èŠ‚ç‚¹(ç¬¦åˆä¸»èŠ‚ç‚¹æ•°/ 2 + 1)æ¥é˜²æ­¢åˆ†è£‚ã€‚</span></span><br><span class="line"><span class="attr">discovery.zen.minimum_master_nodes:</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®ä¸ºtrueé”ä½å†…å­˜ã€‚å› ä¸ºå†…å­˜äº¤æ¢åˆ°ç£ç›˜å¯¹æœåŠ¡å™¨æ€§èƒ½æ˜¯è‡´å‘½çš„</span></span><br><span class="line"><span class="attr">bootstrap.memory_lock:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹jvmå¯åŠ¨é¡¹</p><p>è¿›å…¥configï¼Œæ‰¾åˆ°<code>jvm.options</code> viè¿›å…¥ç¼–è¾‘</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®ESå ç”¨ç‰©ç†å†…å­˜å¤§å°ï¼Œæ ¹æ®å…·ä½“æœºå™¨æœ¬èº«å¤§å°æ¥å®šï¼Œä¸€åŠç‰©ç†å†…å­˜</span></span><br><span class="line"><span class="attr">-Xms20g</span></span><br><span class="line"></span><br><span class="line"><span class="attr">-Xmx20g</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># ä¿®æ­£CVE-2021-44228æ¼æ´</span></span><br><span class="line"></span><br><span class="line"><span class="attr">-Dlog4j2.formatMsgNoLookups</span>=<span class="string">true   </span></span><br></pre></td></tr></table></figure></li><li><p>(é›†ç¾¤) æ‹·è´ç›®å½•åˆ°å…¶ä»–èŠ‚ç‚¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r /opt/elasticsearch root@*.*.*.*:/opt/</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„æ–‡ä»¶å¤¹ï¼Œæ˜¯ä½ å®‰è£…çš„æ–‡ä»¶å¤¹åï¼Œæˆ‘è¿™é‡Œç®€å†™äº†ã€‚ä¸è¦ç›´æ¥å¤åˆ¶æ”¹ä¸€æ”¹åå­—ã€‚<br><code>åŒæ—¶é‡å¤ç¬¬5æ­¥æ“ä½œï¼Œå°†ymlé‡Œé¢çš„network.host</code>æ”¹æˆå½“å‰æœåŠ¡å™¨çš„ipï¼Œç„¶å<code>æ‰¾åˆ°node.name:</code>æ”¹æˆå…¶ä»–åå­—ï¼Œï¼ˆä¸å…¶ä»–èŠ‚ç‚¹ä¸é‡å¤ï¼‰</p></li><li><p>å¯åŠ¨æœåŠ¡<br>åˆ°å®‰è£…esçš„èŠ‚ç‚¹ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/elasticsearch -d -p pid</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨jpsçœ‹æ˜¯å¦å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure></li><li><p>éªŒè¯</p><p>åœ¨ä»»æ„çš„æœåŠ¡å™¨ä¸Šé¢<br>éªŒè¯é›†ç¾¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET <span class="string">&#x27;http://*.*.*.*:9200/_cat/nodes?pretty&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœèƒ½æ­£ç¡®æ˜¾ç¤ºæ¯ä¸ªèŠ‚ç‚¹ipåˆ™æˆåŠŸ</p><p>æŸ¥è¯¢é›†ç¾¤çŠ¶æ€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XGET <span class="string">&#x27;http://*.*.*.*:9200/_cluster/nodes?pretty&#x27;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿”å›çš„jsonä¸­ï¼Œçœ‹<code>status</code>çš„å€¼<br><code>-green</code>  æ­£å¸¸ï¼Œè¡¨ç¤ºé›†ç¾¤ä¸€åˆ‡æ­£å¸¸ã€‚<br><code>-yellow</code>  é»„è¡¨ç¤ºé›†ç¾¤ä¸å¯é ä½†å¯ç”¨ï¼Œä¸€èˆ¬å•èŠ‚æ—¶å€™å°±æ˜¯è¿™ä¸ªçŠ¶æ€ã€‚<br><code>-red</code>  çº¢è¡¨ç¤ºé›†ç¾¤ä¸å¯ç”¨ï¼Œæœ‰æ•…éšœã€‚</p><p>å…³é—­es</p><p>ä½¿ç”¨jpsæŸ¥è¯¢è¿›ç¨‹ID<br>ç„¶åkill -9</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢åŸºç¡€ç”¨æ³•</title>
      <link href="/2023/02/23/%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/"/>
      <url>/2023/02/23/%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸€ç¯‡ä¸»è¦è®²è§£å†™æ–‡ç« æ‰€éœ€è¦çš„ä¸€äº›é…ç½®</p><p>1.è¿è¡Œ<code>hexo new åšå®¢å</code></p><p>2.å¤åˆ¶æ˜¾ç¤ºçš„è·¯å¾„ï¼Œä½¿ç”¨ <code>xdg-open è·¯å¾„</code> æ¥ç¼–è¾‘å®ƒ</p><p>3.è¿è¡Œ<code>hexo generate</code></p><p>4.è¿è¡Œ<code>hexo deploy</code> ç„¶åå°±å¯ä»¥çœ‹æ–°å†™çš„åšå®¢äº†</p><h2 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h2><ul><li><h3 id="Page-Front-matter-ç”¨äºé¡µé¢é…ç½®"><a href="#Page-Front-matter-ç”¨äºé¡µé¢é…ç½®" class="headerlink" title="Page Front-matter ç”¨äºé¡µé¢é…ç½®"></a>Page Front-matter ç”¨äºé¡µé¢é…ç½®</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">comments:</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aside:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">è§£é‡Š</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">updated</td><td align="center">ã€å¯é€‰ã€‘é¡µé¢æ›´æ–°æ—¥æœŸ</td></tr><tr><td align="center">description</td><td align="center">ã€å¯é€‰ã€‘é¡µé¢æè¿°</td></tr><tr><td align="center">keywords</td><td align="center">ã€å¯é€‰ã€‘é¡µé¢å…³é”®å­—</td></tr><tr><td align="center">comments</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºé¡µé¢è¯„è®ºæ¨¡å—(é»˜è®¤ true)</td></tr><tr><td align="center">top_img</td><td align="center">ã€å¯é€‰ã€‘é¡µé¢é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td align="center">mathjax</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºmathjax(å½“è®¾ç½®mathjaxçš„per_page: falseæ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td align="center">kates</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºkatex(å½“è®¾ç½®katexçš„per_page: falseæ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td align="center">aside</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)</td></tr><tr><td align="center">aplayer</td><td align="center">ã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½aplayerçš„jså’Œcss,è¯·å‚è€ƒæ–‡ç« ä¸‹é¢çš„éŸ³ä¹ é…ç½®</td></tr><tr><td align="center">highlight_shrink</td><td align="center">ã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€(true&#x2F;false)(é»˜è®¤ä¸ºè®¾ç½®ä¸­highlight_shrinkçš„é…ç½®)</td></tr></tbody></table></li><li><h3 id="Post-Front-matter-ç”¨äºé¡µé¢é…ç½®"><a href="#Post-Front-matter-ç”¨äºé¡µé¢é…ç½®" class="headerlink" title="Post Front-matter ç”¨äºé¡µé¢é…ç½®"></a>Post Front-matter ç”¨äºé¡µé¢é…ç½®</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">comments:</span></span><br><span class="line"><span class="emphasis">cover:</span></span><br><span class="line"><span class="emphasis">toc:</span></span><br><span class="line"><span class="emphasis">toc_</span>number:</span><br><span class="line">toc<span class="emphasis">_style_</span>simple:</span><br><span class="line">copyright:</span><br><span class="line">copyright<span class="emphasis">_author:</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href:</span></span><br><span class="line"><span class="emphasis">copyright_</span>url:</span><br><span class="line">copyright<span class="emphasis">_info:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line"><span class="section">aside:</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure></li></ul><table><thead><tr><th align="center">è§£é‡Š</th><th align="center">ç”¨æ³•</th></tr></thead><tbody><tr><td align="center">title</td><td align="center">ã€å¿…éœ€ã€‘æ–‡ç« æ ‡é¢˜</td></tr><tr><td align="center">date</td><td align="center">ã€å¿…éœ€ã€‘æ–‡ç« åˆ›å»ºæ—¥æœŸ</td></tr><tr><td align="center">updated</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« æ›´æ–°æ—¥æœŸ</td></tr><tr><td align="center">tags</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« æ ‡ç±¤</td></tr><tr><td align="center">categories</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« åˆ†ç±»</td></tr><tr><td align="center">keywords</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« å…³é”®å­—</td></tr><tr><td align="center">description</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« æè¿°</td></tr><tr><td align="center">top_img</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td align="center">cover</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« ç¼©ç•¥å›¾(å¦‚æœæ²¡æœ‰è®¾ç½®top_img,æ–‡ç« é¡µé¡¶éƒ¨å°†æ˜¾ç¤ºç¼©ç•¥å›¾ï¼Œå¯è®¾ä¸º   false&#x2F;å›¾ç‰‡åœ°å€&#x2F;ç•™ç©º)</td></tr><tr><td align="center">comments</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« è¯„è®ºæ¨¡å—(é»˜è®¤ true)</td></tr><tr><td align="center">toc</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« TOC(é»˜è®¤ä¸ºè®¾ç½®ä¸­tocçš„enableé…ç½®)</td></tr><tr><td align="center">toc_number</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºtoc_number(é»˜è®¤ä¸ºè®¾ç½®ä¸­tocçš„numberé…ç½®)</td></tr><tr><td align="center">toc_style_simple</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤º toc ç®€æ´æ¨¡å¼</td></tr><tr><td align="center">copyright</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« ç‰ˆæƒæ¨¡å—(é»˜è®¤ä¸ºè®¾ç½®ä¸­post_copyrightçš„enableé…ç½®)</td></tr><tr><td align="center">copyright_author</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…</td></tr><tr><td align="center">copyright_author_href</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…é“¾æ¥</td></tr><tr><td align="center">copyright_url</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« è¿ç»“é“¾æ¥</td></tr><tr><td align="center">copyright_info</td><td align="center">ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„ç‰ˆæƒå£°æ˜æ–‡å­—</td></tr><tr><td align="center">mathjax</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºmathjax(å½“è®¾ç½®mathjaxçš„per_page: falseæ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td align="center">katex</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºkatex(å½“è®¾ç½®katexçš„per_page: falseæ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td align="center">aplayer</td><td align="center">ã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½aplayerçš„jså’Œcss,è¯·å‚è€ƒæ–‡ç« ä¸‹é¢çš„éŸ³ä¹ é…ç½®</td></tr><tr><td align="center">highlight_shrink</td><td align="center">ã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€(true&#x2F;false)(é»˜è®¤ä¸ºè®¾ç½®ä¸­highlight_shrinkçš„é…ç½®)</td></tr><tr><td align="center">aside</td><td align="center">ã€å¯é€‰ã€‘æ˜¾ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
